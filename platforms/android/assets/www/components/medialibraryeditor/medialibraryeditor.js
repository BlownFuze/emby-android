define(["dialogHelper","jQuery","emby-button","listViewStyle","paper-icon-button-light"],function(e,t){function i(e,t){var i=m.library,n=m.refresh;ApiClient.addMediaPath(i.Name,t,n).then(function(){b=!0,a(e)},function(){require(["toast"],function(e){e(Globalize.translate("ErrorAddingMediaPathToVirtualFolder"))})})}function n(){var e=this,i=parseInt(e.getAttribute("data-index")),n=m.library,o=n.Locations[i];require(["confirm"],function(i){i(Globalize.translate("MessageConfirmRemoveMediaLocation"),Globalize.translate("HeaderRemoveMediaLocation")).then(function(){var i=m.refresh;ApiClient.removeMediaPath(n.Name,o,i).then(function(){b=!0,a(t(e).parents(".editorContent")[0])},function(){require(["toast"],function(e){e(Globalize.translate("DefaultErrorMessage"))})})})})}function o(e,t){var i="";return i+='<div class="listItem lnkPath">',i+='<i class="listItemIcon md-icon">folder</i>',i+='<div class="listItemBody">',i+='<h3 class="listItemBodyText">',i+=e,i+="</h3>",i+="</div>",i+='<button is="paper-icon-button-light" class="btnRemovePath" data-index="'+t+'"><i class="md-icon">remove_circle</i></button>',i+="</div>"}function a(e){ApiClient.getVirtualFolders().then(function(t){var i=t.filter(function(e){return e.Name==m.library.Name})[0];i&&(m.library=i,r(e,m))})}function r(e,i){var a=i.library.Locations.map(o).join("");e.querySelector(".folderList").innerHTML=a,t(e.querySelectorAll(".btnRemovePath")).on("click",n)}function l(){var e=t(this).parents(".editorContent")[0];require(["directorybrowser"],function(t){var n=new t;n.show({callback:function(t){t&&i(e,t),n.close()}})})}function s(e,i){r(e,i),t(".btnAddFolder",e).on("click",l)}function c(){t(this).remove(),Dashboard.hideLoadingMsg(),u.resolveWith(null,[b])}function d(){var i=this;i.show=function(i){var n=jQuery.Deferred();m=i,u=n,b=!1;var o=new XMLHttpRequest;return o.open("GET","components/medialibraryeditor/medialibraryeditor.template.html",!0),o.onload=function(){var n=this.response,o=e.createDialog({size:"small",modal:!1});o.classList.add("ui-body-a"),o.classList.add("background-theme-a");var r="";r+='<h2 class="dialogHeader">',r+='<button type="button" is="emby-button" icon="arrow-back" class="fab mini btnCloseDialog" tabindex="-1"><i class="md-icon">arrow_back</i></button>',r+='<div style="display:inline-block;margin-left:.6em;vertical-align:middle;">'+i.library.Name+"</div>",r+="</h2>",r+='<div class="editorContent" style="max-width:800px;margin:auto;">',r+=Globalize.translateDocument(n),r+="</div>",o.innerHTML=r,document.body.appendChild(o);var l=o.querySelector(".editorContent");s(l,i),t(o).on("close",c),e.open(o),t(".btnCloseDialog",o).on("click",function(){e.close(o)}),a(l)},o.send(),n.promise()}}var u,b,m;return d});