define(["paperdialoghelper","paper-fab","paper-item-body","paper-icon-item"],function(e){function i(e,i){var a=p.library,n=p.refresh;ApiClient.addMediaPath(a.Name,i,n).then(function(){u=!0,t(e)},function(){require(["toast"],function(e){e(Globalize.translate("ErrorAddingMediaPathToVirtualFolder"))})})}function a(){var e=this,i=parseInt(e.getAttribute("data-index")),a=p.library,n=a.Locations[i];require(["confirm"],function(i){i(Globalize.translate("MessageConfirmRemoveMediaLocation"),Globalize.translate("HeaderRemoveMediaLocation")).then(function(){var i=p.refresh;ApiClient.removeMediaPath(a.Name,n,i).then(function(){u=!0,t($(e).parents(".editorContent")[0])},function(){require(["toast"],function(e){e(Globalize.translate("DefaultErrorMessage"))})})})})}function n(e,i){var a="";return a+='<paper-icon-item role="menuitem" class="lnkPath">',a+='<paper-fab mini style="background:#52B54B;" icon="folder" item-icon></paper-fab>',a+="<paper-item-body>",a+=e,a+="</paper-item-body>",a+='<paper-icon-button icon="remove-circle" class="btnRemovePath" data-index="'+i+'"></paper-icon-button>',a+="</paper-icon-item>"}function t(e){ApiClient.getVirtualFolders().then(function(i){var a=i.filter(function(e){return e.Name==p.library.Name})[0];a&&(p.library=a,r(e,p))})}function r(e,i){var t=i.library.Locations.map(n).join("");e.querySelector(".folderList").innerHTML=t,$(e.querySelectorAll(".btnRemovePath")).on("click",a)}function o(){var e=$(this).parents(".editorContent")[0];require(["directorybrowser"],function(a){var n=new a;n.show({callback:function(a){a&&i(e,a),n.close()}})})}function l(e,i){r(e,i),$(".btnAddFolder",e).on("click",o)}function c(){$(this).remove(),Dashboard.hideLoadingMsg(),s.resolveWith(null,[u])}function d(){var i=this;i.show=function(i){var a=jQuery.Deferred();p=i,s=a,u=!1;var n=new XMLHttpRequest;return n.open("GET","components/medialibraryeditor/medialibraryeditor.template.html",!0),n.onload=function(){var a=this.response,n=e.createDialog({size:"small",modal:!1});n.classList.add("ui-body-a"),n.classList.add("background-theme-a"),n.classList.add("popupEditor");var r="";r+='<h2 class="dialogHeader">',r+='<paper-fab icon="arrow-back" mini class="btnCloseDialog" tabindex="-1"></paper-fab>',r+='<div style="display:inline-block;margin-left:.6em;vertical-align:middle;">'+i.library.Name+"</div>",r+="</h2>",r+='<div class="editorContent" style="max-width:800px;margin:auto;">',r+=Globalize.translateDocument(a),r+="</div>",n.innerHTML=r,document.body.appendChild(n);var o=n.querySelector(".editorContent");l(o,i),$(n).on("iron-overlay-closed",c),e.open(n),$(".btnCloseDialog",n).on("click",function(){e.close(n)}),t(o)},n.send(),a.promise()}}var s,u,p;return d});