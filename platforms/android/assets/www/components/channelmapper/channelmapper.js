define(["dialogHelper","loading","connectionManager","globalize","paper-checkbox","emby-input","paper-icon-button-light","emby-select","emby-button","listViewStyle"],function(n,e,i,t){function o(n,e){return i.getApiClient(n).getJSON(ApiClient.getUrl("LiveTv/ChannelMappingOptions",{providerId:e}))}function a(n,e){var i="";return i+='<div class="listItem">',i+='<button is="emby-button" type="button" class="fab listItemIcon mini" style="background:#52B54B;"><iron-icon icon="dvr"></iron-icon></button>',i+='<div class="listItemBody">',i+="<h3>",i+=n.Name,i+="</h3>",(n.ProviderChannelNumber||n.ProviderChannelName)&&(i+='<div class="secondary">',i+=(n.ProviderChannelNumber||"")+" "+(n.ProviderChannelName||"")+" - "+e,i+="</div>"),i+="</div>",i+='<button is="paper-icon-button-light" type="button" onclick="alert(\'coming soon.\');"><iron-icon icon="mode-edit"></iron-icon></button>',i+="</div>"}function r(){var n="";return n+='<div class="dialogContent">',n+='<div class="dialogContentInner centeredContent">',n+='<form style="margin:auto;">',n+="<h1>"+t.translate("HeaderChannels")+"</h1>",n+='<div class="channels paperList">',n+="</div>",n+="</form>",n+="</div>",n+="</div>"}function l(n,e){o(e.serverId,e.providerId).then(function(e){n.querySelector(".channels").innerHTML=e.TunerChannels.map(function(n){return a(n,e.ProviderName)}).join("")})}var s;return function(){var e=this;e.show=function(e){s=e.serverId;var i={removeOnClose:!0};i.size="small";var o=n.createDialog(i);o.classList.add("formDialog"),o.classList.add("ui-body-a"),o.classList.add("background-theme-a");var a="",c=t.translate("MapChannels");return a+='<div class="dialogHeader" style="margin:0 0 2em;">',a+='<button is="paper-icon-button-light" class="btnCancel" tabindex="-1"><iron-icon icon="nav:arrow-back"></iron-icon></button>',a+='<div class="dialogHeaderTitle">',a+=c,a+="</div>",a+="</div>",a+=r(),o.innerHTML=a,document.body.appendChild(o),l(o,e),o.querySelector(".btnCancel").addEventListener("click",function(){n.close(o)}),new Promise(function(e){o.addEventListener("close",e),n.open(o)})}}});