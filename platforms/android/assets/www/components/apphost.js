define(["appStorage","browser"],function(e,n){function t(){return null}function r(){var e={PlayableMediaTypes:["Audio","Video"],SupportsPersistentIdentifier:!1,DeviceProfile:t()};return e}function o(){return new Promise(function(e){require(["fingerprintjs2"],function(n){(new n).get(function(n){e(n)})})})}function i(){var n="_deviceId2",t=e.getItem(n);return t?Promise.resolve(t):o().then(function(t){return e.setItem(n,t),t})}function d(){var e;return e=n.chrome?"Chrome":n.edge?"Edge":n.firefox?"Firefox":n.msie?"Internet Explorer":"Web Browser",n.version&&(e+=" "+n.version),n.ipad?e+=" Ipad":n.iphone?e+=" Iphone":n.android&&(e+=" Android"),e}var u,a=window.dashboardVersion||"3.0";return{getWindowState:function(){return document.windowState||"Normal"},setWindowState:function(){alert("setWindowState is not supported and should not be called")},exit:function(){alert("exit is not supported and should not be called")},supports:function(e){var n=["filedownload"];return-1!=n.indexOf(e.toLowerCase())},appInfo:function(){return u?Promise.resolve(u):i().then(function(e){return u={deviceId:e,deviceName:d(),appName:"Emby Mobile",appVersion:a}})},capabilities:r}});