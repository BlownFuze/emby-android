define(["libraryBrowser","scrollStyles"],function(e){function t(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function r(){return t()?"overflowBackdrop":"backdrop"}function i(){return t()?"overflowPortrait":"portrait"}function a(){return t()?"overflowSquare":"square"}function o(){return[{name:"HeaderFavoriteMovies",types:"Movie",id:"favoriteMovies",shape:i(),showTitle:!1,overlayPlayButton:!0},{name:"HeaderFavoriteShows",types:"Series",id:"favoriteShows",shape:i(),showTitle:!1,overlayPlayButton:!0},{name:"HeaderFavoriteEpisodes",types:"Episode",id:"favoriteEpisode",shape:r(),preferThumb:!1,showTitle:!0,showParentTitle:!0,overlayPlayButton:!0},{name:"HeaderFavoriteGames",types:"Game",id:"favoriteGames",shape:a(),preferThumb:!1,showTitle:!0},{name:"HeaderFavoriteArtists",types:"MusicArtist",id:"favoriteArtists",shape:a(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayPlayButton:!0},{name:"HeaderFavoriteAlbums",types:"MusicAlbum",id:"favoriteAlbums",shape:a(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayPlayButton:!0},{name:"HeaderFavoriteSongs",types:"Audio",id:"favoriteSongs",shape:a(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayMoreButton:!0,defaultAction:"instantmix"}]}function n(r,i,a,o,n){var s=window.innerWidth,l={SortBy:"SortName",SortOrder:"Ascending",Filters:"IsFavorite",Recursive:!0,Fields:"PrimaryImageAspectRatio,SyncInfo",CollapseBoxSetItems:!1,ExcludeLocationTypes:"Virtual"};a&&(l.ParentId=a),n||(l.Limit=s>=1920?10:s>=1440?8:6,t()&&(l.Limit=16));var d;return"MusicArtist"==o.types?d=ApiClient.getArtists(i,l):(l.IncludeItemTypes=o.types,d=ApiClient.getItems(i,l)),d.then(function(i){var a="";if(i.Items.length){if(a+="<div>",a+='<h1 style="display:inline-block; vertical-align:middle;" class="listHeader">'+Globalize.translate(o.name)+"</h1>",i.TotalRecordCount>i.Items.length){var n="secondaryitems.html?type="+o.types+"&filters=IsFavorite&titlekey="+o.name;a+='<a class="clearLink" href="'+n+'" style="margin-left:2em;"><paper-button raised class="more mini">'+Globalize.translate("ButtonMore")+"</paper-button></a>"}a+="</div>",a+=t()?'<div class="itemsContainer hiddenScrollX">':'<div class="itemsContainer">',a+=e.getPosterViewHtml({items:i.Items,preferThumb:o.preferThumb,shape:o.shape,overlayText:o.overlayText!==!1,showTitle:o.showTitle,showParentTitle:o.showParentTitle,lazy:!0,showDetailsMenu:!0,centerText:o.centerText,overlayPlayButton:o.overlayPlayButton,overlayMoreButton:o.overlayMoreButton,context:"home-favorites",defaultAction:o.defaultAction}),a+="</div>"}r.innerHTML=a,ImageLoader.lazyChildren(r),e.createCardMenus(r)})}function s(t,r,i,a){Dashboard.showLoadingMsg();var s=o(),l=getParameterByName("sectionid");l&&(s=s.filter(function(e){return e.id==l})),a&&(s=s.filter(function(e){return-1!=a.indexOf(e.id)}));var d,u,v=t.querySelector(".favoriteSections");if(!v.innerHTML){var h="";for(d=0,u=s.length;u>d;d++)h+='<div class="homePageSection section'+s[d].id+'"></div>';v.innerHTML=h}var c=[];for(d=0,u=s.length;u>d;d++){var m=s[d];v=t.querySelector(".section"+m.id),c.push(n(v,r,i,m,1==s.length))}Promise.all(c).then(function(){Dashboard.hideLoadingMsg(),e.setLastRefreshed(t)})}return{render:s}});