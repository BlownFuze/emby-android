define(["libraryBrowser","scrollStyles"],function(e){function t(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function r(){return t()?"overflowBackdrop":"backdrop"}function o(){return t()?"overflowPortrait":"portrait"}function i(){return t()?"overflowSquare":"square"}function a(){return[{name:"HeaderFavoriteMovies",types:"Movie",id:"favoriteMovies",shape:o(),showTitle:!1,overlayPlayButton:!0},{name:"HeaderFavoriteShows",types:"Series",id:"favoriteShows",shape:o(),showTitle:!1,overlayPlayButton:!0},{name:"HeaderFavoriteEpisodes",types:"Episode",id:"favoriteEpisode",shape:r(),preferThumb:!1,showTitle:!0,showParentTitle:!0,overlayPlayButton:!0},{name:"HeaderFavoriteGames",types:"Game",id:"favoriteGames",shape:i(),preferThumb:!1,showTitle:!0},{name:"HeaderFavoriteArtists",types:"MusicArtist",id:"favoriteArtists",shape:i(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayPlayButton:!0},{name:"HeaderFavoriteAlbums",types:"MusicAlbum",id:"favoriteAlbums",shape:i(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayPlayButton:!0},{name:"HeaderFavoriteSongs",types:"Audio",id:"favoriteSongs",shape:i(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayMoreButton:!0,defaultAction:"instantmix"}]}function n(r,o,i,a,n){var s=window.innerWidth,l={SortBy:"SortName",SortOrder:"Ascending",Filters:"IsFavorite",Recursive:!0,Fields:"PrimaryImageAspectRatio,SyncInfo",CollapseBoxSetItems:!1,ExcludeLocationTypes:"Virtual",EnableTotalRecordCount:!1};i&&(l.ParentId=i),n||(l.Limit=s>=1920?10:s>=1440?8:6,t()&&(l.Limit=20));var u;return"MusicArtist"==a.types?u=ApiClient.getArtists(o,l):(l.IncludeItemTypes=a.types,u=ApiClient.getItems(o,l)),u.then(function(o){var i="";if(o.Items.length){if(i+="<div>",i+='<h1 style="display:inline-block; vertical-align:middle;" class="listHeader">'+Globalize.translate(a.name)+"</h1>",o.TotalRecordCount>o.Items.length){var n="secondaryitems.html?type="+a.types+"&filters=IsFavorite&titlekey="+a.name;i+='<a class="clearLink" href="'+n+'" style="margin-left:2em;"><button is="emby-button" type="button" class="raised more mini">'+Globalize.translate("ButtonMore")+"</button></a>"}i+="</div>",i+=t()?'<div class="itemsContainer hiddenScrollX">':'<div class="itemsContainer">',i+=e.getPosterViewHtml({items:o.Items,preferThumb:a.preferThumb,shape:a.shape,overlayText:a.overlayText!==!1,showTitle:a.showTitle,showParentTitle:a.showParentTitle,lazy:!0,showDetailsMenu:!0,centerText:a.centerText,overlayPlayButton:a.overlayPlayButton,overlayMoreButton:a.overlayMoreButton,context:"home-favorites",defaultAction:a.defaultAction}),i+="</div>"}r.innerHTML=i,ImageLoader.lazyChildren(r),e.createCardMenus(r)})}function s(e,t,r,o){Dashboard.showLoadingMsg();var i=a(),s=getParameterByName("sectionid");s&&(i=i.filter(function(e){return e.id==s})),o&&(i=i.filter(function(e){return-1!=o.indexOf(e.id)}));var l,u,d=e.querySelector(".favoriteSections");if(!d.innerHTML){var v="";for(l=0,u=i.length;u>l;l++)v+='<div class="homePageSection section'+i[l].id+'"></div>';d.innerHTML=v}var c=[];for(l=0,u=i.length;u>l;l++){var h=i[l];d=e.querySelector(".section"+h.id),c.push(n(d,t,r,h,1==i.length))}Promise.all(c).then(function(){Dashboard.hideLoadingMsg()})}return{render:s}});