define([],function(){function e(e){return new Promise(function(t){var r=document.querySelector(".mainAnimatedPages");if(!e.cancel){var o=n(r),d=o+1;d>=c&&(d=0);var s=a(e),m="string"==typeof s?null:s.getAttribute("data-require");m=m?m.split(","):[];var v=-1!=e.url.toLowerCase().indexOf("/configurationpage?");v&&(m.push("jqmpopup"),m.push("jqmcollapsible"),m.push("jqmcheckbox"),m.push("legacy/dashboard")),(v||s.classList&&s.classList.contains("type-interior"))&&(m.push("jqmcontrolgroup"),m.push("jqmlistview"),m.push("scripts/notifications")),require(m,function(){var a=r.querySelectorAll(".mainAnimatedPage"),n=a[d],o=n.querySelector(".page-view");o&&l(o);for(var c=0,v=a.length;v>c;c++)d==c?a[c].classList.remove("hide"):a[c].classList.add("hide");"string"==typeof s?n.innerHTML=s:(n.innerHTML="",n.appendChild(s),i(m,s));var g=n.querySelector(".page-view");u&&u(g,!1,e),$.mobile=$.mobile||{},$.mobile.activePage=g,t(g)})}})}function i(e,i){for(var a=!1,t=0,n=e.length;n>t;t++)if(0==e[t].indexOf("jqm")){a=!0;break}a&&$(i).trigger("create")}function a(e){if(-1==e.view.indexOf('data-role="page"')){var i='<div class="page-view" data-type="'+(e.type||"")+'" data-url="'+e.url+'">';return i+=e.view,i+="</div>"}var a=document.createElement("div");a.innerHTML=e.view;var t=a.querySelector('div[data-role="page"]');return t.classList.add("page-view"),t.setAttribute("data-type",e.type||""),t.setAttribute("data-url",e.url),t}function t(e){u=e}function n(e){for(var i=e.querySelectorAll(".mainAnimatedPage"),a=0,t=i.length;t>a;a++)if(!i[a].classList.contains("hide"))return a;return-1}function r(){var e=document.querySelector("neon-animated-pages.mainAnimatedPages");if(e){var i=document.createElement("div");i.classList.add("mainAnimatedPages"),i.classList.add("skinBody"),i.innerHTML='<div class="mainAnimatedPage hide"></div><div class="mainAnimatedPage hide"></div><div class="mainAnimatedPage hide"></div>',e.parentNode.replaceChild(i,e)}c=document.querySelectorAll(".mainAnimatedPage").length}function o(e){return new Promise(function(i,a){var t=e.url,n=document.querySelector(".page-view[data-url='"+t+"']"),r=s(n,"mainAnimatedPage");if(n){for(var o=-1,l=document.querySelectorAll(".mainAnimatedPage"),d=0,c=l.length;c>d;d++)if(l[d]==r){o=d;break}if(-1!=o){var m=document.querySelector(".mainAnimatedPages");if(e.cancel)return;var v=m.querySelectorAll(".mainAnimatedPage"),g=v[o],n=g.querySelector(".page-view");u&&u(n,!0,e);for(var d=0,c=v.length;c>d;d++)o==d?v[d].classList.remove("hide"):v[d].classList.add("hide");return $.mobile=$.mobile||{},$.mobile.activePage=n,void i(n)}}a()})}function l(e){e.dispatchEvent(new CustomEvent("viewdestroy",{}))}function d(){for(var e=document.querySelectorAll(".mainAnimatedPage.hide .page-view"),i=0,a=e.length;a>i;i++){var t=e[i];l(t),t.parentNode.removeChild(t)}}function s(e,i){for(;!e.classList||!e.classList.contains(i);)if(e=e.parentNode,!e)return null;return e}var c,u;return r(),{loadView:e,tryRestoreView:o,reset:d,setOnBeforeChange:t}});