define([],function(){function e(e){return new Promise(function(t){var n=document.querySelector(".mainAnimatedPages");if(!e.cancel){var o=r(n),l=o+1;l>=u&&(l=0);var d=a(e),c=d.elem,v="string"==typeof c?null:c.getAttribute("data-require");v=v?v.split(","):[];var p=-1!=e.url.toLowerCase().indexOf("/configurationpage?");p&&(v.push("jqmpopup"),v.push("jqmcollapsible"),v.push("jqmcheckbox"),v.push("legacy/dashboard")),(p||c.classList&&c.classList.contains("type-interior"))&&(v.push("jqmcontrolgroup"),v.push("jqmlistview"),v.push("scripts/notifications")),require(v,function(){var a=n.querySelectorAll(".mainAnimatedPage"),r=a[l],o=r.querySelector(".page-view");o&&s(o);for(var u=0,p=a.length;p>u;u++)l==u?a[u].classList.remove("hide"):a[u].classList.add("hide");"string"==typeof c?r.innerHTML=c:(r.innerHTML="",d.hasScript?$(c).appendTo(r):r.appendChild(c),i(v,c));var g=r.querySelector(".page-view");m&&m(g,!1,e),$.mobile=$.mobile||{},$.mobile.activePage=g,t(g)})}})}function i(e,i){for(var t=!1,a=0,n=e.length;n>a;a++)if(0==e[a].indexOf("jqm")){t=!0;break}t&&$(i).trigger("create")}function t(e){var i=document.createElement("div");return i.innerHTML=e,i.querySelector('div[data-role="page"]')}function a(e){if(-1==e.view.indexOf('data-role="page"')){var i='<div class="page-view" data-type="'+(e.type||"")+'" data-url="'+e.url+'">';return i+=e.view,i+="</div>"}var a=t(e.view);return a.classList.add("page-view"),a.setAttribute("data-type",e.type||""),a.setAttribute("data-url",e.url),{elem:a,hasScript:-1!=e.view.indexOf("<script")}}function n(e){m=e}function r(e){for(var i=e.querySelectorAll(".mainAnimatedPage"),t=0,a=i.length;a>t;t++)if(!i[t].classList.contains("hide"))return t;return-1}function o(){var e=document.querySelector("neon-animated-pages.mainAnimatedPages");if(e){var i=document.createElement("div");i.classList.add("mainAnimatedPages"),i.classList.add("skinBody"),i.innerHTML='<div class="mainAnimatedPage hide"></div><div class="mainAnimatedPage hide"></div><div class="mainAnimatedPage hide"></div>',e.parentNode.replaceChild(i,e)}u=document.querySelectorAll(".mainAnimatedPage").length}function l(e){return new Promise(function(i,t){var a=e.url,n=document.querySelector(".page-view[data-url='"+a+"']"),r=c(n,"mainAnimatedPage");if(n){for(var o=-1,l=document.querySelectorAll(".mainAnimatedPage"),s=0,d=l.length;d>s;s++)if(l[s]==r){o=s;break}if(-1!=o){var u=document.querySelector(".mainAnimatedPages");if(e.cancel)return;var v=u.querySelectorAll(".mainAnimatedPage"),p=v[o],n=p.querySelector(".page-view");m&&m(n,!0,e);for(var s=0,d=v.length;d>s;s++)o==s?v[s].classList.remove("hide"):v[s].classList.add("hide");return $.mobile=$.mobile||{},$.mobile.activePage=n,void i(n)}}t()})}function s(e){e.dispatchEvent(new CustomEvent("viewdestroy",{}))}function d(){for(var e=document.querySelectorAll(".mainAnimatedPage.hide .page-view"),i=0,t=e.length;t>i;i++){var a=e[i];s(a),a.parentNode.removeChild(a)}}function c(e,i){for(;!e.classList||!e.classList.contains(i);)if(e=e.parentNode,!e)return null;return e}var u,m;return o(),{loadView:e,tryRestoreView:l,reset:d,setOnBeforeChange:n}});