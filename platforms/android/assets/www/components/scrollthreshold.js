define(["events"],function(e){function t(t,n,o,r){function i(){return c||(c=a?n?document.documentElement.scrollWidth-document.documentElement.offsetWidth:document.documentElement.scrollHeight-document.documentElement.offsetHeight:n?t.scrollWidth-t.offsetWidth:t.scrollHeight-t.offsetHeight),c}function l(){if(!u||!f){var l;l=a?n?window.pageXOffset:window.pageYOffset:n?t.scrollLeft:t.scrollTop,r>l?f||(f=!0,e.trigger(d,"upper-threshold")):f=!1,l>=i()-o?u||(u=!0,e.trigger(d,"lower-threshold")):u=!1}}var s=n?screen.availWidth/3:screen.availHeight/3;o=o||s,r=r||s;var c,d=this,f=!0,u=!1,a=t==window||"HTML"==t.tagName||"BODY"==t.tagName;d.reset=function(){d.resetSize(),f=!0,u=!1},d.resetSize=function(){c=null},d.enabled=function(e){d.reset(),e?t.addEventListener("scroll",l,!0):t.removeEventListener("scroll",l,!0)},d.enabled(!0),d.destroy=function(){d.enabled(!1)}}return t});