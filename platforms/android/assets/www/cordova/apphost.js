define(["appStorage","browser"],function(e,n){function i(){return null}function o(){var e={PlayableMediaTypes:["Audio","Video"],SupportsPersistentIdentifier:!1,DeviceProfile:i()};return e}var t;return{getWindowState:function(){return document.windowState||"Normal"},setWindowState:function(){alert("setWindowState is not supported and should not be called")},exit:function(){alert("exit is not supported and should not be called")},supports:function(e){var i=[];return n.safari||(i.push("filedownload"),i.push("sync")),i.push("sharing"),-1!=i.indexOf(e.toLowerCase())},appInfo:function(){return t?Promise.resolve(t):new Promise(function(n){document.addEventListener("deviceready",function(){cordova.getAppVersion.getVersionNumber(function(i){var o=browserInfo.android?"Emby for Android Mobile":browserInfo.safari?"Emby for iOS":"Emby Mobile",r=device.model.replace(/[^\w\s]/gi,""),a=null;window.MainActivity&&(a=e.getItem("legacyDeviceId")),t={deviceId:a||device.uuid,deviceName:r,appName:o,appVersion:i},n(t)})},!1)})},capabilities:o}});