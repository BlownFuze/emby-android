define(["appStorage","browser"],function(e,n){function i(){return null}function r(){var e={PlayableMediaTypes:["Audio","Video"],SupportsPersistentIdentifier:!1,DeviceProfile:i()};return e}function t(){return new Promise(function(e){require(["fingerprintjs2"],function(n){(new n).get(function(n){e(n)})})})}function o(){var n="_deviceId2",i=e.getItem(n);return i?Promise.resolve(i):t().then(function(i){return e.setItem(n,i),i})}function d(){var e;return e=n.chrome?"Chrome":n.edge?"Edge":n.firefox?"Firefox":n.msie?"Internet Explorer":"Web Browser",n.version&&(e+=" "+n.version),n.ipad?e+=" Ipad":n.iphone?e+=" Iphone":n.android&&(e+=" Android"),e}var a;return{getWindowState:function(){return document.windowState||"Normal"},setWindowState:function(){alert("setWindowState is not supported and should not be called")},exit:function(){alert("exit is not supported and should not be called")},supports:function(e){var n=["filedownload"];return-1!=n.indexOf(e.toLowerCase())},appInfo:function(){return a?Promise.resolve(a):new Promise(function(e){document.addEventListener("deviceready",function(){cordova.getAppVersion.getVersionNumber(function(n){require(["appStorage"],function(i){var r=browserInfo.android?"Emby for Android Mobile":browserInfo.safari?"Emby for iOS":"Emby Mobile",t=device.model.replace(/[^\w\s]/gi,""),o=null;window.MainActivity&&(o=i.getItem("legacyDeviceId"),o||(o=MainActivity.getLegacyDeviceId(),i.setItem("legacyDeviceId",o))),a={deviceId:o||device.uuid,deviceName:t,appName:r,appVersion:n},e(a)})})},!1)})},appName:function(){return"Emby Theater"},appVersion:function(){return"2.0.1"},deviceName:function(){return d()},deviceId:function(){return o()},capabilities:r}});