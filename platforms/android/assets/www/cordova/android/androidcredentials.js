define(["apphost"],function(e){function n(){for(var e=JSON.stringify(ConnectionManager.credentialProvider().credentials()),n=JSON.parse(e),i=0,t=n.Servers.length;t>i;i++){var o=n.Servers[i];null!=o.DateLastAccessed&&(o.DateLastAccessed=new Date(o.DateLastAccessed).toISOString())}e=JSON.stringify(n),ApiClientBridge.updateCredentials(e)}function i(){var n=ConnectionManager.capabilities();e.appInfo().then(function(e){ApiClientBridge.init(e.appName,e.appVersion,e.deviceId,e.deviceName,JSON.stringify(n))})}function t(){}Events.on(ConnectionManager,"apiclientcreated",function(e,n){t(n)}),Events.on(ConnectionManager.credentialProvider(),"credentialsupdated",n),n(),i(),window.ApiClient&&t(window.ApiClient),window.AndroidAjax={onResponse:function(e,n){Events.trigger(AndroidAjax,"response"+e,[!0,n])},onError:function(e,n){Events.trigger(AndroidAjax,"response"+e,[!1,n])},onDownloadSpeedResponse:function(e){Events.trigger(AndroidAjax,"downloadspeedresponse",[e])}}});