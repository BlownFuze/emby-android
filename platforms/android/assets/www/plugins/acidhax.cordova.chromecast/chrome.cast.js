cordova.define("acidhax.cordova.chromecast.ChromecastApi",function(e,t,i){function a(e){var t=document.createElement("li");return t.classList.add("route"),t.addEventListener("touchstart",s),t.textContent=e.name,t.setAttribute("data-routeid",e.id),t}function s(){var e=this.getAttribute("data-routeid");e&&d.cast.connectToId(e)}function o(e){var t=[].slice.call(arguments);t.shift();var i;t[t.length-1]instanceof Function&&(i=t.pop()),cordova.exec(function(e){i&&i(null,e)},function(e){i&&i(e)},"Chromecast",e,t)}function n(e,t){var i=d.cast.ErrorCode.UNKNOWN,a=e,s={};e=e||"","TIMEOUT"===e.toUpperCase()?(i=d.cast.ErrorCode.TIMEOUT,a="The operation timed out."):"INVALID_PARAMETER"===e.toUpperCase()?(i=d.cast.ErrorCode.INVALID_PARAMETER,a="The parameters to the operation were not valid."):"RECEIVER_UNAVAILABLE"===e.toUpperCase()?(i=d.cast.ErrorCode.RECEIVER_UNAVAILABLE,a="No receiver was compatible with the session request."):"CANCEL"===e.toUpperCase()?(i=d.cast.ErrorCode.CANCEL,a="The operation was canceled by the user."):"CHANNEL_ERROR"===e.toUpperCase()?(i=d.cast.ErrorCode.CHANNEL_ERROR,a="A channel to the receiver is not available."):"SESSION_ERROR"===e.toUpperCase()&&(i=d.cast.ErrorCode.SESSION_ERROR,a="A session could not be created, or a session was invalid.");var o=new Error(i,a,s);t&&t(o)}var r=e("acidhax.cordova.chromecast.EventEmitter"),d={};d.cast={VERSION:[1,1],ReceiverAvailability:{AVAILABLE:"available",UNAVAILABLE:"unavailable"},ReceiverType:{CAST:"cast",DIAL:"dial",CUSTOM:"custom"},SenderPlatform:{CHROME:"chrome",IOS:"ios",ANDROID:"android"},AutoJoinPolicy:{TAB_AND_ORIGIN_SCOPED:"tab_and_origin_scoped",ORIGIN_SCOPED:"origin_scoped",PAGE_SCOPED:"page_scoped"},Capability:{VIDEO_OUT:"video_out",AUDIO_OUT:"audio_out",VIDEO_IN:"video_in",AUDIO_IN:"audio_in"},DefaultActionPolicy:{CREATE_SESSION:"create_session",CAST_THIS_TAB:"cast_this_tab"},ErrorCode:{API_NOT_INITIALIZED:"api_not_initialized",CANCEL:"cancel",CHANNEL_ERROR:"channel_error",EXTENSION_MISSING:"extension_missing",EXTENSION_NOT_COMPATIBLE:"extension_not_compatible",INVALID_PARAMETER:"invalid_parameter",LOAD_MEDIA_FAILED:"load_media_failed",RECEIVER_UNAVAILABLE:"receiver_unavailable",SESSION_ERROR:"session_error",TIMEOUT:"timeout",UNKNOWN:"unknown",NOT_IMPLEMENTED:"not_implemented"},timeout:{requestSession:1e4,sendCustomMessage:3e3,setReceiverVolume:3e3,stopSession:3e3},isAvailable:!1,ApiConfig:function(e,t,i,a,s){this.sessionRequest=e,this.sessionListener=t,this.receiverListener=i,this.autoJoinPolicy=a||d.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED,this.defaultActionPolicy=s||d.cast.DefaultActionPolicy.CREATE_SESSION},Receiver:function(e,t,i,a){this.label=e,this.friendlyName=t,this.capabilities=i||[],this.volume=a||null,this.receiverType=d.cast.ReceiverType.CAST,this.isActiveInput=null},DialRequest:function(e,t){this.appName=e,this.launchParameter=t},SessionRequest:function(e,t){this.appId=e,this.capabilities=t||[d.cast.Capability.VIDEO_OUT,d.cast.Capability.AUDIO_OUT],this.dialRequest=null},Error:function(e,t,i){this.code=e,this.description=t||null,this.details=i||null},Image:function(e){this.url=e,this.width=this.height=null},SenderApplication:function(e){this.platform=e,this.packageId=this.url=null},Volume:function(e,t){this.level=e||null,this.muted=null,(t===!0||t===!1)&&(this.muted=t)},media:{DEFAULT_MEDIA_RECEIVER_APP_ID:"CC1AD845",PlayerState:{IDLE:"IDLE",PLAYING:"PLAYING",PAUSED:"PAUSED",BUFFERING:"BUFFERING"},ResumeState:{PLAYBACK_START:"PLAYBACK_START",PLAYBACK_PAUSE:"PLAYBACK_PAUSE"},MediaCommand:{PAUSE:"pause",SEEK:"seek",STREAM_VOLUME:"stream_volume",STREAM_MUTE:"stream_mute"},MetadataType:{GENERIC:0,TV_SHOW:1,MOVIE:2,MUSIC_TRACK:3,PHOTO:4},StreamType:{BUFFERED:"buffered",LIVE:"live",OTHER:"other"},timeout:{load:0,ob:0,pause:0,play:0,seek:0,setVolume:0,stop:0},LoadRequest:function(e){this.type="LOAD",this.sessionId=this.requestId=this.customData=this.currentTime=null,this.media=e,this.autoplay=!0},PlayRequest:function(){this.customData=null},SeekRequest:function(){this.customData=this.resumeState=this.currentTime=null},VolumeRequest:function(e){this.volume=e,this.customData=null},StopRequest:function(){this.customData=null},PauseRequest:function(){this.customData=null},GenericMediaMetadata:function(){this.metadataType=this.type=d.cast.media.MetadataType.GENERIC,this.releaseDate=this.releaseYear=this.images=this.subtitle=this.title=null},MovieMediaMetadata:function(){this.metadataType=this.type=d.cast.media.MetadataType.MOVIE,this.releaseDate=this.releaseYear=this.images=this.subtitle=this.studio=this.title=null},MusicTrackMediaMetadata:function(){this.metadataType=this.type=d.cast.media.MetadataType.MUSIC_TRACK,this.releaseDate=this.releaseYear=this.images=this.discNumber=this.trackNumber=this.artistName=this.songName=this.composer=this.artist=this.albumArtist=this.title=this.albumName=null},PhotoMediaMetadata:function(){this.metadataType=this.type=d.cast.media.MetadataType.PHOTO,this.creationDateTime=this.height=this.width=this.longitude=this.latitude=this.images=this.location=this.artist=this.title=null},TvShowMediaMetadata:function(){this.metadataType=this.type=d.cast.media.MetadataType.TV_SHOW,this.originalAirdate=this.releaseYear=this.images=this.episode=this.episodeNumber=this.season=this.seasonNumber=this.episodeTitle=this.title=this.seriesTitle=null},MediaInfo:function(e,t){this.contentId=e,this.streamType=d.cast.media.StreamType.BUFFERED,this.contentType=t,this.customData=this.duration=this.metadata=null}}};var c=null,l=null,u=null,m=null,p=null,h={},I=null,E=document.createElement("ul");E.classList.add("route-list");var v={},A=null,T=!1;d.cast.initialize=function(e,t,i){return d.cast.isAvailable?(p=e.sessionListener,l=e.autoJoinPolicy,u=e.defaultActionPolicy,m=e.receiverListener,c=e.sessionRequest,void o("initialize",c.appId,l,u,function(e){e?n(e,i):(t(),clearInterval(A),A=setInterval(function(){o("emitAllRoutes")},15e3))})):void i(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{})},d.cast.requestSession=function(e,t){return d.cast.isAvailable===!1?void t(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{}):T===!1?void t(new d.cast.Error(d.cast.ErrorCode.RECEIVER_UNAVAILABLE,"No receiver was compatible with the session request.",{})):void o("requestSession",function(i,a){if(i)n(i,t);else{var s=a.sessionId,o=a.appId,r=a.displayName,c=a.appImages||[],l=new d.cast.Receiver(a.receiver.label,a.receiver.friendlyName,a.receiver.capabilities||[],a.volume||null),u=h[s]=new d.cast.Session(s,o,r,c,l);a.media&&a.media.sessionId&&(I=new d.cast.media.Media(s,a.media.mediaSessionId),I.currentTime=a.media.currentTime,I.playerState=a.media.playerState,I.media=a.media.media,u.media[0]=I),e(u),p(u)}})},d.cast.setCustomReceivers=function(){},d.cast.Session=function(e,t,i,a,s){r.call(this),this.sessionId=e,this.appId=t,this.displayName=i,this.appImages=a||[],this.receiver=s,this.media=[]},d.cast.Session.prototype=Object.create(r.prototype),d.cast.Session.prototype.setReceiverVolumeLevel=function(e,t,i){return d.cast.isAvailable===!1?void i(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{}):void o("setReceiverVolumeLevel",e,function(e){e?n(e,i):t&&t()})},d.cast.Session.prototype.setReceiverMuted=function(e,t,i){return d.cast.isAvailable===!1?void i(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{}):void o("setReceiverMuted",e,function(e){e?n(e,i):t&&t()})},d.cast.Session.prototype.stop=function(e,t){return d.cast.isAvailable===!1?void t(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{}):void o("sessionStop",function(i){i?n(i,t):e&&e()})},d.cast.Session.prototype.leave=function(e,t){return d.cast.isAvailable===!1?void t(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{}):void o("sessionLeave",function(i){i?n(i,t):e&&e()})},d.cast.Session.prototype.sendMessage=function(e,t,i,a){return d.cast.isAvailable===!1?void a(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{}):("object"==typeof t&&(t=JSON.stringify(t)),void o("sendMessage",e,t,function(e){e?n(e,a):i&&i()}))},d.cast.Session.prototype.loadMedia=function(e,t,i){if(d.cast.isAvailable===!1)return void i(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{});var a=this,s=e.media;o("loadMedia",s.contentId,s.contentType,s.duration||0,s.streamType,e.autoplay||!1,e.currentTime||0,s.metadata,function(e,o){e?n(e,i):(I=new d.cast.media.Media(a.sessionId,o.mediaSessionId),I.media=s,I.media.duration=o.media.duration,I.currentTime=o.currentTime,t(I))})},d.cast.Session.prototype.addUpdateListener=function(e){this.on("_sessionUpdated",e)},d.cast.Session.prototype.removeUpdateListener=function(e){this.removeListener("_sessionUpdated",e)},d.cast.Session.prototype.addMessageListener=function(e,t){o("addMessageListener",e),this.on("message:"+e,t)},d.cast.Session.prototype.removeMessageListener=function(e,t){this.removeListener("message:"+e,t)},d.cast.Session.prototype.addMediaListener=function(e){this.on("_mediaListener",e)},d.cast.Session.prototype.removeMediaListener=function(e){this.removeListener("_mediaListener",e)},d.cast.Session.prototype._update=function(e,t){this.appId=t.appId,this.appImages=t.appImages,this.displayName=t.displayName,t.receiver&&(this.receiver||(this.receiver=new d.cast.Receiver(null,null,null,null)),this.receiver.friendlyName=t.receiver.friendlyName,this.receiver.label=t.receiver.label,t.receiver.volume&&(this.receiver.volume=new d.cast.Volume(t.receiver.volume.level,t.receiver.volume.muted))),this.emit("_sessionUpdated",e)},d.cast.media.Media=function(e,t){r.call(this),this.sessionId=e,this.mediaSessionId=t,this.currentTime=0,this.playbackRate=1,this.playerState=d.cast.media.PlayerState.BUFFERING,this.supportedMediaCommands=[d.cast.media.MediaCommand.PAUSE,d.cast.media.MediaCommand.SEEK,d.cast.media.MediaCommand.STREAM_VOLUME,d.cast.media.MediaCommand.STREAM_MUTE],this.volume=new d.cast.Volume(1,!1),this._lastUpdatedTime=Date.now(),this.media={}},d.cast.media.Media.prototype=Object.create(r.prototype),d.cast.media.Media.prototype.play=function(e,t,i){return d.cast.isAvailable===!1?void i(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{}):void o("mediaPlay",function(e){e?n(e,i):t&&t()})},d.cast.media.Media.prototype.pause=function(e,t,i){return d.cast.isAvailable===!1?void i(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{}):void o("mediaPause",function(e){e?n(e,i):t&&t()})},d.cast.media.Media.prototype.seek=function(e,t,i){return d.cast.isAvailable===!1?void i(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{}):void o("mediaSeek",e.currentTime,e.resumeState||"",function(e){e?n(e,i):t&&t()})},d.cast.media.Media.prototype.stop=function(e,t,i){return d.cast.isAvailable===!1?void i(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{}):void o("mediaStop",function(e){e?n(e,i):t&&t()})},d.cast.media.Media.prototype.setVolume=function(e,t,i){if(d.cast.isAvailable===!1)return void i(new d.cast.Error(d.cast.ErrorCode.API_NOT_INITIALIZED),"The API is not initialized.",{});var a=[];null!==e.volume.level?(a.push("setMediaVolume"),a.push(e.volume.level)):null!==e.volume.muted&&(a.push("setMediaMuted"),a.push(e.volume.muted)),a.length<2?i(new d.cast.Error(d.cast.ErrorCode.INVALID_PARAMETER),"Invalid request.",{}):(a.push(function(e){e?n(e,i):t&&t()}),o.apply(null,a))},d.cast.media.Media.prototype.supportsCommand=function(e){return this.supportsCommands.indexOf(e)>-1},d.cast.media.Media.prototype.getEstimatedTime=function(){if(this.playerState===d.cast.media.PlayerState.PLAYING){var e=(Date.now()-this._lastUpdatedTime)/1e3,t=this.currentTime+e;return t}return this.currentTime},d.cast.media.Media.prototype.addUpdateListener=function(e){this.on("_mediaUpdated",e)},d.cast.media.Media.prototype.removeUpdateListener=function(e){this.removeListener("_mediaUpdated",e)},d.cast.media.Media.prototype._update=function(e,t){this.currentTime=t.currentTime||this.currentTime,this.idleReason=t.idleReason||this.idleReason,this.sessionId=t.sessionId||this.sessionId,this.mediaSessionId=t.mediaSessionId||this.mediaSessionId,this.playbackRate=t.playbackRate||this.playbackRate,this.playerState=t.playerState||this.playerState,t.media&&t.media.duration&&(this.media.duration=t.media.duration||this.media.duration,this.media.streamType=t.media.streamType||this.media.streamType),this.volume.level=t.volume.level,this.volume.muted=t.volume.muted,this._lastUpdatedTime=Date.now(),this.emit("_mediaUpdated",e)},d.cast.connectToId=function(e){return new Promise(function(t){try{d.cast._emitConnecting()}catch(i){}o("selectRoute",e,function(e,i){var a=i.sessionId,s=i.appId,o=i.displayName,n=i.appImages||[],r=new d.cast.Receiver(i.receiver.label,i.receiver.friendlyName,i.receiver.capabilities||[],i.volume||null),c=h[a]=new d.cast.Session(a,s,o,n,r);p&&p(c),t()})})},d.cast.getRouteListElement=function(){return E},d.cast.getRouteList=function(){var e=[];for(var t in v)e.push(v[t]);return e};var _=[];d.cast.addConnectingListener=function(e){_.push(e)},d.cast.removeConnectingListener=function(e){_.indexOf(e)>-1&&_.splice(_.indexOf(e),1)},d.cast._emitConnecting=function(){for(var e=0;e<_.length;e++)_[e]()},d.cast._={receiverUnavailable:function(){m(d.cast.ReceiverAvailability.UNAVAILABLE),T=!1},receiverAvailable:function(){m(d.cast.ReceiverAvailability.AVAILABLE),T=!0},routeAdded:function(e){v[e.id]||(e.el=a(e),v[e.id]=e,E.appendChild(e.el))},routeRemoved:function(e){v[e.id]&&(v[e.id].el.remove(),delete v[e.id])},sessionUpdated:function(e,t){t&&t.sessionId&&h[t.sessionId]&&h[t.sessionId]._update(e,t)},mediaUpdated:function(e,t){t&&void 0!==t.mediaSessionId&&I&&I._update(e,t)},mediaLoaded:function(e,t){h[t.sessionId]&&(I||(I=new d.cast.media.Media(t.sessionId,t.mediaSessionId)),I._update(e,t),h[t.sessionId].emit("_mediaListener",I))},sessionJoined:function(e){var t=e.sessionId,i=e.appId,a=e.displayName,s=e.appImages||[],o=new d.cast.Receiver(e.receiver.label,e.receiver.friendlyName,e.receiver.capabilities||[],e.volume||null),n=h[t]=new d.cast.Session(t,i,a,s,o);p&&p(n)},onMessage:function(e,t,i){h[e]&&h[e].emit("message:"+t,t,i)}},i.exports=d.cast,o("setup",function(e){if(e)throw new Error("Unable to setup chrome.cast API"+e);d.cast.isAvailable=!0})});