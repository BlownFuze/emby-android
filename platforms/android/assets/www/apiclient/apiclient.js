!function(e,r,t,n,a,i){e.MediaBrowser||(e.MediaBrowser={}),e.MediaBrowser.ApiClient=function(e,o,u,s,l,g){function c(e,r){Events.trigger(T,"requestfail",[{url:e,status:r.status,errorCode:r.headers?r.headers["X-Application-Error-Code"]:null}])}function d(e){var r=e.headers||{};"json"==e.dataType&&(r.accept="application/json");var t={headers:r,method:e.type},a=e.contentType;return e.data&&("string"==typeof e.data?t.body=e.data:(t.body=f(e.data),a=a||"application/x-www-form-urlencoded; charset=UTF-8")),a&&(r["Content-Type"]=a),e.timeout?new Promise(function(r,a){var i=n(a,e.timeout);fetch(e.url,t).then(function(e){r(e)},function(){clearTimeout(i),a()})}):fetch(e.url,t)}function f(e){var r=[];for(var t in e){var n=e[t];null!==n&&void 0!==n&&""!==n&&r.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}return r.join("&")}function v(e){var r=T.serverInfo(),t=e;return t--,0>t&&(t=MediaBrowser.ConnectionMode.Manual),MediaBrowser.ServerInfo.getServerAddress(r,t)?t:(t--,0>t&&(t=MediaBrowser.ConnectionMode.Manual),MediaBrowser.ServerInfo.getServerAddress(r,t)?t:e)}function p(r,t,a,i){a=v(a);var o=MediaBrowser.ServerInfo.getServerAddress(T.serverInfo(),a);e.log("Attempting reconnection to "+o);a==MediaBrowser.ConnectionMode.Local?7e3:15e3;fetch(o+"/system/info/public",{method:"GET",accept:"application/json"}).then(function(){e.log("Reconnect succeeded to "+o),T.serverInfo().LastConnectionMode=a,T.serverAddress(o),r()},function(){if(e.log("Reconnect attempt failed to "+o),5>i){var u=v(a);n(function(){p(r,t,u,i+1)},500)}else t()})}function w(){return new Promise(function(e,r){n(function(){p(e,r,T.serverInfo().LastConnectionMode,0)},500)})}function m(e){if("UserDeleted"===e.MessageType)I=null;else if("UserUpdated"===e.MessageType||"UserConfigurationUpdated"===e.MessageType){var r=e.Data;r.Id==T.getCurrentUserId()&&(I=null)}Events.trigger(T,"websocketmessage",[e])}function y(e){var r;return e.artist?(r="Artists/"+T.encodeName(e.artist),delete e.artist):e.person?(r="Persons/"+T.encodeName(e.person),delete e.person):e.genre?(r="Genres/"+T.encodeName(e.genre),delete e.genre):e.musicGenre?(r="MusicGenres/"+T.encodeName(e.musicGenre),delete e.musicGenre):e.gameGenre?(r="GameGenres/"+T.encodeName(e.gameGenre),delete e.gameGenre):e.studio?(r="Studios/"+T.encodeName(e.studio),delete e.studio):(r="Items/"+e.itemId,delete e.itemId),r}function h(e){var r=a||1;r&&(e.minScale&&(r=Math.max(e.minScale,r)),e.width&&(e.width=Math.round(e.width*r)),e.height&&(e.height=Math.round(e.height*r)),e.maxWidth&&(e.maxWidth=Math.round(e.maxWidth*r)),e.maxHeight&&(e.maxHeight=Math.round(e.maxHeight*r))),e.quality=e.quality||T.getDefaultImageQuality(e.type),T.normalizeImageOptions&&T.normalizeImageOptions(e)}if(!o)throw new Error("Must supply a serverAddress");e.log("ApiClient serverAddress: "+o),e.log("ApiClient clientName: "+u),e.log("ApiClient applicationVersion: "+s),e.log("ApiClient deviceName: "+l),e.log("ApiClient deviceId: "+g);var S,T=this,U={};T.enableAppStorePolicy=!1,T.serverAddress=function(e){if(null!=e){if(0!=e.toLowerCase().indexOf("http"))throw new Error("Invalid url: "+e);var r=e!=o;o=e,r&&Events.trigger(this,"serveraddresschanged")}return o},T.serverInfo=function(e){return U=e||U};var I;T.getCurrentUser=function(){var e=I;return null==e&&(e=T.getUser(T.getCurrentUserId()).catch(function(e){throw I=null,e}),I=e),e},T.getCurrentUserId=function(){return U.UserId},T.accessToken=function(){return U.AccessToken},T.deviceName=function(){return l},T.deviceId=function(){return g},T.appName=function(){return u},T.appVersion=function(){return s},T.clearAuthenticationInfo=function(){T.setAuthenticationInfo(null,null)},T.setAuthenticationInfo=function(e,r){I=null,U.AccessToken=e,U.UserId=r},T.encodeName=function(e){e=e.split("/").join("-"),e=e.split("&").join("-"),e=e.split("?").join("-");var r=f({name:e});return r.substring(r.indexOf("=")+1).replace("'","%27")},T.setRequestHeaders=function(e){var r=T.serverInfo();if(u){var t='MediaBrowser Client="'+u+'", Device="'+l+'", DeviceId="'+g+'", Version="'+s+'"',n=r.UserId;n&&(t+=', UserId="'+n+'"'),e["X-Emby-Authorization"]=t}var a=r.AccessToken;a&&(e["X-MediaBrowser-Token"]=a)},T.ajax=function(e,r){if(!e)throw new Error("Request cannot be null");return T.fetch(e,r)},T.fetch=function(r,t){if(!r)throw new Error("Request cannot be null");return r.headers=r.headers||{},t!==!1&&T.setRequestHeaders(r.headers),T.enableAutomaticNetworking===!1||"GET"!=r.type?(e.log("Requesting url without automatic networking: "+r.url),d(r).then(function(e){return e.status<400?"json"==r.dataType||"application/json"==r.headers.accept?e.json():e:(c(r.url,e),Promise.reject(e))},function(){return c(r.url,{}),Promise.reject({})})):T.fetchWithFailover(r,!0)},T.getJSON=function(e,r){return T.fetch({url:e,type:"GET",dataType:"json",headers:{accept:"application/json"}},r)},T.fetchWithFailover=function(r,t){return e.log("Requesting "+r.url),r.timeout=3e4,d(r).then(function(e){return e.status<400?"json"==r.dataType||"application/json"==r.headers.accept?e.json():e:(c(r.url,e),Promise.reject(e))},function(){if(e.log("Request failed to "+r.url),!t)return e.log("Reporting request failure"),c(r.url,{}),Promise.reject({});e.log("Attempting reconnection");var n=T.serverAddress();w().then(function(){e.log("Reconnect succeesed"),r.url=r.url.replace(n,T.serverAddress()),T.fetchWithFailover(r,!1)},function(){return e.log("Reconnect failed"),c(r.url,{}),Promise.reject({})})})},T.get=function(e){return T.ajax({type:"GET",url:e})},T.getUrl=function(e,r){if(!e)throw new Error("Url name cannot be empty");var t=o;if(!t)throw new Error("serverAddress is yet not set");var n=t.toLowerCase();return-1==n.indexOf("/emby")&&-1==n.indexOf("/mediabrowser")&&(t+="/emby"),"/"!=e.charAt(0)&&(t+="/"),t+=e,r&&(r=f(r),r&&(t+="?"+r)),t},T.updateServerInfo=function(t,n){if(null==t)throw new Error("server cannot be null");if(null==n)throw new Error("connectionMode cannot be null");e.log("Begin updateServerInfo. connectionMode: "+n),T.serverInfo(t);var a=MediaBrowser.ServerInfo.getServerAddress(t,n);if(!a)throw new Error("serverUrl cannot be null. serverInfo: "+r.stringify(t));e.log("Setting server address to "+a),T.serverAddress(a)},T.isWebSocketSupported=function(){return null!=t},T.openWebSocket=function(){var a=T.accessToken();if(!a)throw new Error("Cannot open web socket without access token.");var i=T.getUrl("socket").replace("emby/socket","embywebsocket").replace("http","ws");i+="?api_key="+a,i+="&deviceId="+g,S=new t(i),S.onmessage=function(e){e=r.parse(e.data),m(e)},S.onopen=function(){e.log("web socket connection opened"),n(function(){Events.trigger(T,"websocketopen")},0)},S.onerror=function(){n(function(){Events.trigger(T,"websocketerror")},0)},S.onclose=function(){n(function(){Events.trigger(T,"websocketclose")},0)}},T.closeWebSocket=function(){S&&S.readyState===t.OPEN&&S.close()},T.sendWebSocketMessage=function(t,n){e.log("Sending web socket message: "+t);var a={MessageType:t};n&&(a.Data=n),a=r.stringify(a),S.send(a)},T.isWebSocketOpen=function(){return S&&S.readyState===t.OPEN},T.isWebSocketOpenOrConnecting=function(){return S&&(S.readyState===t.OPEN||S.readyState===t.CONNECTING)},T.getProductNews=function(e){e=e||{};var r=T.getUrl("News/Product",e);return T.getJSON(r)},T.getDownloadSpeed=function(e){var r=T.getUrl("Playback/BitrateTest",{Size:e}),t=(new Date).getTime();return T.get(r).then(function(){var r=((new Date).getTime()-t)/1e3,n=e/r,a=Math.round(8*n);return a})},T.detectBitrate=function(){return T.getDownloadSpeed(1e6).then(function(e){return 1e6>e?Math.round(.8*e):T.getDownloadSpeed(24e5).then(function(e){return Math.round(.8*e)})})},T.getItem=function(e,r){if(!r)throw new Error("null itemId");var t=T.getUrl(e?"Users/"+e+"/Items/"+r:"Items/"+r);return T.getJSON(t)},T.getRootFolder=function(e){if(!e)throw new Error("null userId");var r=T.getUrl("Users/"+e+"/Items/Root");return T.getJSON(r)},T.getNotificationSummary=function(e){if(!e)throw new Error("null userId");var r=T.getUrl("Notifications/"+e+"/Summary");return T.getJSON(r)},T.getNotifications=function(e,r){if(!e)throw new Error("null userId");var t=T.getUrl("Notifications/"+e,r||{});return T.getJSON(t)},T.markNotificationsRead=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null idList");var n=t?"Read":"Unread",a={UserId:e,Ids:r.join(",")},i=T.getUrl("Notifications/"+e+"/"+n,a);return T.ajax({type:"POST",url:i})},T.logout=function(){T.closeWebSocket();var e=function(){T.setAuthenticationInfo(null,null)};if(T.accessToken()){var r=T.getUrl("Sessions/Logout");return T.ajax({type:"POST",url:r}).then(e,e)}return new Promise(function(r){e(),r()})},T.getRemoteImageProviders=function(e){if(!e)throw new Error("null options");var r=y(e),t=T.getUrl(r+"/RemoteImages/Providers",e);return T.getJSON(t)},T.getAvailableRemoteImages=function(e){if(!e)throw new Error("null options");var r=y(e),t=T.getUrl(r+"/RemoteImages",e);return T.getJSON(t)},T.downloadRemoteImage=function(e){if(!e)throw new Error("null options");var r=y(e),t=T.getUrl(r+"/RemoteImages/Download",e);return T.ajax({type:"POST",url:t})},T.getLiveTvInfo=function(e){var r=T.getUrl("LiveTv/Info",e||{});return T.getJSON(r)},T.getLiveTvGuideInfo=function(e){var r=T.getUrl("LiveTv/GuideInfo",e||{});return T.getJSON(r)},T.getLiveTvChannel=function(e,r){if(!e)throw new Error("null id");var t={};r&&(t.userId=r);var n=T.getUrl("LiveTv/Channels/"+e,t);return T.getJSON(n)},T.getLiveTvChannels=function(e){var r=T.getUrl("LiveTv/Channels",e||{});return T.getJSON(r)},T.getLiveTvPrograms=function(e){return e=e||{},T.ajax(e.channelIds&&e.channelIds.length>1800?{type:"POST",url:T.getUrl("LiveTv/Programs"),data:r.stringify(e),contentType:"application/json",dataType:"json"}:{type:"GET",url:T.getUrl("LiveTv/Programs",e),dataType:"json"})},T.getLiveTvRecommendedPrograms=function(e){return e=e||{},T.ajax({type:"GET",url:T.getUrl("LiveTv/Programs/Recommended",e),dataType:"json"})},T.getLiveTvRecordings=function(e){var r=T.getUrl("LiveTv/Recordings",e||{});return T.getJSON(r)},T.getLiveTvRecordingGroups=function(e){var r=T.getUrl("LiveTv/Recordings/Groups",e||{});return T.getJSON(r)},T.getLiveTvRecordingGroup=function(e){if(!e)throw new Error("null id");var r=T.getUrl("LiveTv/Recordings/Groups/"+e);return T.getJSON(r)},T.getLiveTvRecording=function(e,r){if(!e)throw new Error("null id");var t={};r&&(t.userId=r);var n=T.getUrl("LiveTv/Recordings/"+e,t);return T.getJSON(n)},T.getLiveTvProgram=function(e,r){if(!e)throw new Error("null id");var t={};r&&(t.userId=r);var n=T.getUrl("LiveTv/Programs/"+e,t);return T.getJSON(n)},T.deleteLiveTvRecording=function(e){if(!e)throw new Error("null id");var r=T.getUrl("LiveTv/Recordings/"+e);return T.ajax({type:"DELETE",url:r})},T.cancelLiveTvTimer=function(e){if(!e)throw new Error("null id");var r=T.getUrl("LiveTv/Timers/"+e);return T.ajax({type:"DELETE",url:r})},T.getLiveTvTimers=function(e){var r=T.getUrl("LiveTv/Timers",e||{});return T.getJSON(r)},T.getLiveTvTimer=function(e){if(!e)throw new Error("null id");var r=T.getUrl("LiveTv/Timers/"+e);return T.getJSON(r)},T.getNewLiveTvTimerDefaults=function(e){e=e||{};var r=T.getUrl("LiveTv/Timers/Defaults",e);return T.getJSON(r)},T.createLiveTvTimer=function(e){if(!e)throw new Error("null item");var t=T.getUrl("LiveTv/Timers");return T.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},T.updateLiveTvTimer=function(e){if(!e)throw new Error("null item");var t=T.getUrl("LiveTv/Timers/"+e.Id);return T.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},T.resetLiveTvTuner=function(e){if(!e)throw new Error("null id");var r=T.getUrl("LiveTv/Tuners/"+e+"/Reset");return T.ajax({type:"POST",url:r})},T.getLiveTvSeriesTimers=function(e){var r=T.getUrl("LiveTv/SeriesTimers",e||{});return T.getJSON(r)},T.getFileOrganizationResults=function(e){var r=T.getUrl("Library/FileOrganization",e||{});return T.getJSON(r)},T.deleteOriginalFileFromOrganizationResult=function(e){var r=T.getUrl("Library/FileOrganizations/"+e+"/File");return T.ajax({type:"DELETE",url:r})},T.clearOrganizationLog=function(){var e=T.getUrl("Library/FileOrganizations");return T.ajax({type:"DELETE",url:e})},T.performOrganization=function(e){var r=T.getUrl("Library/FileOrganizations/"+e+"/Organize");return T.ajax({type:"POST",url:r})},T.performEpisodeOrganization=function(e,r){var t=T.getUrl("Library/FileOrganizations/"+e+"/Episode/Organize",r||{});return T.ajax({type:"POST",url:t})},T.getLiveTvSeriesTimer=function(e){if(!e)throw new Error("null id");var r=T.getUrl("LiveTv/SeriesTimers/"+e);return T.getJSON(r)},T.cancelLiveTvSeriesTimer=function(e){if(!e)throw new Error("null id");var r=T.getUrl("LiveTv/SeriesTimers/"+e);return T.ajax({type:"DELETE",url:r})},T.createLiveTvSeriesTimer=function(e){if(!e)throw new Error("null item");var t=T.getUrl("LiveTv/SeriesTimers");return T.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},T.updateLiveTvSeriesTimer=function(e){if(!e)throw new Error("null item");var t=T.getUrl("LiveTv/SeriesTimers/"+e.Id);return T.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},T.getRegistrationInfo=function(e){var r=T.getUrl("Registrations/"+e);return T.getJSON(r)},T.getSystemInfo=function(){var e=T.getUrl("System/Info");return T.getJSON(e)},T.getPublicSystemInfo=function(){var e=T.getUrl("System/Info/Public");return T.getJSON(e,!1)},T.getInstantMixFromItem=function(e,r){var t=T.getUrl("Items/"+e+"/InstantMix",r);return T.getJSON(t)},T.getEpisodes=function(e,r){var t=T.getUrl("Shows/"+e+"/Episodes",r);return T.getJSON(t)},T.getDisplayPreferences=function(e,r,t){var n=T.getUrl("DisplayPreferences/"+e,{userId:r,client:t});return T.getJSON(n)},T.updateDisplayPreferences=function(e,t,n,a){var i=T.getUrl("DisplayPreferences/"+e,{userId:n,client:a});return T.ajax({type:"POST",url:i,data:r.stringify(t),contentType:"application/json"})},T.getSeasons=function(e,r){var t=T.getUrl("Shows/"+e+"/Seasons",r);return T.getJSON(t)},T.getSimilarItems=function(e,r){var t=T.getUrl("Items/"+e+"/Similar",r);return T.getJSON(t)},T.getCultures=function(){var e=T.getUrl("Localization/cultures");return T.getJSON(e)},T.getCountries=function(){var e=T.getUrl("Localization/countries");return T.getJSON(e)},T.getPluginSecurityInfo=function(){var e=T.getUrl("Plugins/SecurityInfo");return T.getJSON(e)},T.getDirectoryContents=function(e,r){if(!e)throw new Error("null path");r=r||{},r.path=e;var t=T.getUrl("Environment/DirectoryContents",r);return T.getJSON(t)},T.getNetworkShares=function(e){if(!e)throw new Error("null path");var r={};r.path=e;var t=T.getUrl("Environment/NetworkShares",r);return T.getJSON(t)},T.getParentPath=function(e){if(!e)throw new Error("null path");var r={};r.path=e;var t=T.getUrl("Environment/ParentPath",r);return T.ajax({type:"GET",url:t})},T.getDrives=function(){var e=T.getUrl("Environment/Drives");return T.getJSON(e)},T.getNetworkDevices=function(){var e=T.getUrl("Environment/NetworkDevices");return T.getJSON(e)},T.cancelPackageInstallation=function(e){if(!e)throw new Error("null installationId");var r=T.getUrl("Packages/Installing/"+e);return T.ajax({type:"DELETE",url:r})},T.refreshItem=function(e,r){if(!e)throw new Error("null itemId");var t=T.getUrl("Items/"+e+"/Refresh",r||{});return T.ajax({type:"POST",url:t})},T.installPlugin=function(e,r,t,n){if(!e)throw new Error("null name");if(!t)throw new Error("null updateClass");var a={updateClass:t,AssemblyGuid:r};n&&(a.version=n);var i=T.getUrl("Packages/Installed/"+e,a);return T.ajax({type:"POST",url:i})},T.restartServer=function(){var e=T.getUrl("System/Restart");return T.ajax({type:"POST",url:e})},T.shutdownServer=function(){var e=T.getUrl("System/Shutdown");return T.ajax({type:"POST",url:e})},T.getPackageInfo=function(e,r){if(!e)throw new Error("null name");var t={AssemblyGuid:r},n=T.getUrl("Packages/"+e,t);return T.getJSON(n)},T.getAvailableApplicationUpdate=function(){var e=T.getUrl("Packages/Updates",{PackageType:"System"});return T.getJSON(e)},T.getAvailablePluginUpdates=function(){var e=T.getUrl("Packages/Updates",{PackageType:"UserInstalled"});return T.getJSON(e)},T.getVirtualFolders=function(){var e="Library/VirtualFolders";return e=T.getUrl(e),T.getJSON(e)},T.getPhysicalPaths=function(){var e=T.getUrl("Library/PhysicalPaths");return T.getJSON(e)},T.getServerConfiguration=function(){var e=T.getUrl("System/Configuration");return T.getJSON(e)},T.getDevicesOptions=function(){var e=T.getUrl("System/Configuration/devices");return T.getJSON(e)},T.getContentUploadHistory=function(){var e=T.getUrl("Devices/CameraUploads",{DeviceId:T.deviceId()});return T.getJSON(e)},T.getNamedConfiguration=function(e){var r=T.getUrl("System/Configuration/"+e);return T.getJSON(r)},T.getScheduledTasks=function(e){e=e||{};var r=T.getUrl("ScheduledTasks",e);return T.getJSON(r)},T.startScheduledTask=function(e){if(!e)throw new Error("null id");var r=T.getUrl("ScheduledTasks/Running/"+e);return T.ajax({type:"POST",url:r})},T.getScheduledTask=function(e){if(!e)throw new Error("null id");var r=T.getUrl("ScheduledTasks/"+e);return T.getJSON(r)},T.getNextUpEpisodes=function(e){var r=T.getUrl("Shows/NextUp",e);return T.getJSON(r)},T.stopScheduledTask=function(e){if(!e)throw new Error("null id");var r=T.getUrl("ScheduledTasks/Running/"+e);return T.ajax({type:"DELETE",url:r})},T.getPluginConfiguration=function(e){if(!e)throw new Error("null Id");var r=T.getUrl("Plugins/"+e+"/Configuration");return T.getJSON(r)},T.getAvailablePlugins=function(e){e=e||{},e.PackageType="UserInstalled",T.enableAppStorePolicy&&(e.IsAppStoreEnabled=!0);var r=T.getUrl("Packages",e);return T.getJSON(r)},T.uninstallPlugin=function(e){if(!e)throw new Error("null Id");var r=T.getUrl("Plugins/"+e);return T.ajax({type:"DELETE",url:r})},T.removeVirtualFolder=function(e,r){if(!e)throw new Error("null name");var t="Library/VirtualFolders";return t=T.getUrl(t,{refreshLibrary:r?!0:!1,name:e}),T.ajax({type:"DELETE",url:t})},T.addVirtualFolder=function(e,t,n,a){if(!e)throw new Error("null name");var i={};t&&(i.collectionType=t),i.refreshLibrary=n?!0:!1,i.name=e;var o="Library/VirtualFolders";return o=T.getUrl(o,i),T.ajax({type:"POST",url:o,data:r.stringify({Paths:a}),contentType:"application/json"})},T.renameVirtualFolder=function(e,r,t){if(!e)throw new Error("null name");var n="Library/VirtualFolders/Name";return n=T.getUrl(n,{refreshLibrary:t?!0:!1,newName:r,name:e}),T.ajax({type:"POST",url:n})},T.addMediaPath=function(e,r,t){if(!e)throw new Error("null virtualFolderName");if(!r)throw new Error("null mediaPath");var n="Library/VirtualFolders/Paths";return n=T.getUrl(n,{refreshLibrary:t?!0:!1,path:r,name:e}),T.ajax({type:"POST",url:n})},T.removeMediaPath=function(e,r,t){if(!e)throw new Error("null virtualFolderName");if(!r)throw new Error("null mediaPath");var n="Library/VirtualFolders/Paths";return n=T.getUrl(n,{refreshLibrary:t?!0:!1,path:r,name:e}),T.ajax({type:"DELETE",url:n})},T.deleteUser=function(e){if(!e)throw new Error("null id");var r=T.getUrl("Users/"+e);return T.ajax({type:"DELETE",url:r})},T.deleteUserImage=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null imageType");var n=T.getUrl("Users/"+e+"/Images/"+r);return null!=t&&(n+="/"+t),T.ajax({type:"DELETE",url:n})},T.deleteItemImage=function(e,r,t){if(!r)throw new Error("null imageType");var n=T.getUrl("Items/"+e+"/Images");return n+="/"+r,null!=t&&(n+="/"+t),T.ajax({type:"DELETE",url:n})},T.deleteItem=function(e){if(!e)throw new Error("null itemId");var r=T.getUrl("Items/"+e);return T.ajax({type:"DELETE",url:r})},T.stopActiveEncodings=function(e){var r={deviceId:g};e&&(r.PlaySessionId=e);var t=T.getUrl("Videos/ActiveEncodings",r);return T.ajax({type:"DELETE",url:t})},T.reportCapabilities=function(e){var t=T.getUrl("Sessions/Capabilities/Full");return T.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},T.updateItemImageIndex=function(e,r,t,n){if(!r)throw new Error("null imageType");var a={newIndex:n},i=T.getUrl("Items/"+e+"/Images/"+r+"/"+t+"/Index",a);return T.ajax({type:"POST",url:i})},T.getItemImageInfos=function(e){var r=T.getUrl("Items/"+e+"/Images");return T.getJSON(r)},T.getCriticReviews=function(e,r){if(!e)throw new Error("null itemId");var t=T.getUrl("Items/"+e+"/CriticReviews",r);return T.getJSON(t)},T.getSessions=function(e){var r=T.getUrl("Sessions",e);return T.getJSON(r)},T.uploadUserImage=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null imageType");if(!t)throw new Error("File must be an image.");if("image/png"!=t.type&&"image/jpeg"!=t.type&&"image/jpeg"!=t.type)throw new Error("File must be an image.");return new Promise(function(n,a){var o=new i;o.onerror=function(){a()},o.onabort=function(){a()},o.onload=function(i){var o=i.target.result.split(",")[1],u=T.getUrl("Users/"+e+"/Images/"+r);T.ajax({type:"POST",url:u,data:o,contentType:"image/"+t.name.substring(t.name.lastIndexOf(".")+1)}).then(function(e){n(e)},function(){a()})},o.readAsDataURL(t)})},T.uploadItemImage=function(e,r,t){if(!e)throw new Error("null itemId");if(!r)throw new Error("null imageType");if(!t)throw new Error("File must be an image.");if("image/png"!=t.type&&"image/jpeg"!=t.type&&"image/jpeg"!=t.type)throw new Error("File must be an image.");var n=T.getUrl("Items/"+e+"/Images");return n+="/"+r,new Promise(function(e,r){var a=new i;a.onerror=function(){r()},a.onabort=function(){r()},a.onload=function(a){var i=a.target.result.split(",")[1];T.ajax({type:"POST",url:n,data:i,contentType:"image/"+t.name.substring(t.name.lastIndexOf(".")+1)}).then(function(r){e(r)},function(){r()})},a.readAsDataURL(t)})},T.getInstalledPlugins=function(){var e={};T.enableAppStorePolicy&&(e.IsAppStoreEnabled=!0);var r=T.getUrl("Plugins",e);return T.getJSON(r)},T.getUser=function(e){if(!e)throw new Error("Must supply a userId");var r=T.getUrl("Users/"+e);return T.getJSON(r)},T.getOfflineUser=function(e){if(!e)throw new Error("Must supply a userId");var r=T.getUrl("Users/"+e+"/Offline");return T.getJSON(r)},T.getStudio=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=T.getUrl("Studios/"+T.encodeName(e),t);return T.getJSON(n)},T.getGenre=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=T.getUrl("Genres/"+T.encodeName(e),t);return T.getJSON(n)},T.getMusicGenre=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=T.getUrl("MusicGenres/"+T.encodeName(e),t);return T.getJSON(n)},T.getGameGenre=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=T.getUrl("GameGenres/"+T.encodeName(e),t);return T.getJSON(n)},T.getArtist=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=T.getUrl("Artists/"+T.encodeName(e),t);return T.getJSON(n)},T.getPerson=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=T.getUrl("Persons/"+T.encodeName(e),t);return T.getJSON(n)},T.getPublicUsers=function(){var e=T.getUrl("users/public");return T.ajax({type:"GET",url:e,dataType:"json"},!1)},T.getUsers=function(e){var r=T.getUrl("users",e||{});return T.getJSON(r)},T.getParentalRatings=function(){var e=T.getUrl("Localization/ParentalRatings");return T.getJSON(e)},T.getDefaultImageQuality=function(e){return"backdrop"==e.toLowerCase()?80:90},T.getUserImageUrl=function(e,r){if(!e)throw new Error("null userId");r=r||{};var t="Users/"+e+"/Images/"+r.type;return null!=r.index&&(t+="/"+r.index),h(r),delete r.type,delete r.index,T.getUrl(t,r)},T.getImageUrl=function(e,r){if(!e)throw new Error("itemId cannot be empty");r=r||{};var t="Items/"+e+"/Images/"+r.type;return null!=r.index&&(t+="/"+r.index),r.quality=r.quality||T.getDefaultImageQuality(r.type),T.normalizeImageOptions&&T.normalizeImageOptions(r),delete r.type,delete r.index,T.getUrl(t,r)},T.getScaledImageUrl=function(e,r){if(!e)throw new Error("itemId cannot be empty");r=r||{};var t="Items/"+e+"/Images/"+r.type;return null!=r.index&&(t+="/"+r.index),h(r),delete r.type,delete r.index,delete r.minScale,T.getUrl(t,r)},T.getThumbImageUrl=function(e,r){if(!e)throw new Error("null item");return r=r||{},r.imageType="thumb",e.ImageTags&&e.ImageTags.Thumb?(r.tag=e.ImageTags.Thumb,T.getImageUrl(e.Id,r)):e.ParentThumbItemId?(r.tag=e.ImageTags.ParentThumbImageTag,T.getImageUrl(e.ParentThumbItemId,r)):null},T.authenticateUserByName=function(e,t){return new Promise(function(n,a){if(!e)return void a();var i=T.getUrl("Users/authenticatebyname");require(["cryptojs-sha1"],function(){var o={password:CryptoJS.SHA1(t||"").toString(),Username:e};T.ajax({type:"POST",url:i,data:r.stringify(o),dataType:"json",contentType:"application/json"}).then(function(e){T.onAuthenticated&&T.onAuthenticated(T,e),n(e)},a)})})},T.updateUserPassword=function(e,r,t){return new Promise(function(n,a){if(!e)return void a();var i=T.getUrl("Users/"+e+"/Password");require(["cryptojs-sha1"],function(){T.ajax({type:"POST",url:i,data:{currentPassword:CryptoJS.SHA1(r).toString(),newPassword:CryptoJS.SHA1(t).toString()}}).then(n,a)})})},T.updateEasyPassword=function(e,r){return new Promise(function(t,n){if(!e)return void n();var a=T.getUrl("Users/"+e+"/EasyPassword");require(["cryptojs-sha1"],function(){T.ajax({type:"POST",url:a,data:{newPassword:CryptoJS.SHA1(r).toString()}}).then(t,n)})})},T.resetUserPassword=function(e){if(!e)throw new Error("null userId");var r=T.getUrl("Users/"+e+"/Password"),t={};return t.resetPassword=!0,T.ajax({type:"POST",url:r,data:t})},T.resetEasyPassword=function(e){if(!e)throw new Error("null userId");var r=T.getUrl("Users/"+e+"/EasyPassword"),t={};return t.resetPassword=!0,T.ajax({type:"POST",url:r,data:t})},T.updateServerConfiguration=function(e){if(!e)throw new Error("null configuration");var t=T.getUrl("System/Configuration");return T.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},T.updateNamedConfiguration=function(e,t){if(!t)throw new Error("null configuration");var n=T.getUrl("System/Configuration/"+e);return T.ajax({type:"POST",url:n,data:r.stringify(t),contentType:"application/json"})},T.updateItem=function(e){if(!e)throw new Error("null item");var t=T.getUrl("Items/"+e.Id);return T.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},T.updatePluginSecurityInfo=function(e){var t=T.getUrl("Plugins/SecurityInfo");return T.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},T.createUser=function(e){var r=T.getUrl("Users/New");return T.ajax({type:"POST",url:r,data:{Name:e},dataType:"json"})},T.updateUser=function(e){if(!e)throw new Error("null user");var t=T.getUrl("Users/"+e.Id);return T.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},T.updateUserPolicy=function(e,t){if(!e)throw new Error("null userId");if(!t)throw new Error("null policy");var n=T.getUrl("Users/"+e+"/Policy");return T.ajax({type:"POST",url:n,data:r.stringify(t),contentType:"application/json"})},T.updateUserConfiguration=function(e,t){if(!e)throw new Error("null userId");if(!t)throw new Error("null configuration");var n=T.getUrl("Users/"+e+"/Configuration");return T.ajax({type:"POST",url:n,data:r.stringify(t),contentType:"application/json"})},T.updateScheduledTaskTriggers=function(e,t){if(!e)throw new Error("null id");if(!t)throw new Error("null triggers");var n=T.getUrl("ScheduledTasks/"+e+"/Triggers");return T.ajax({type:"POST",url:n,data:r.stringify(t),contentType:"application/json"})},T.updatePluginConfiguration=function(e,t){if(!e)throw new Error("null Id");if(!t)throw new Error("null configuration");var n=T.getUrl("Plugins/"+e+"/Configuration");return T.ajax({type:"POST",url:n,data:r.stringify(t),contentType:"application/json"})},T.getAncestorItems=function(e,r){if(!e)throw new Error("null itemId");var t={};r&&(t.userId=r);var n=T.getUrl("Items/"+e+"/Ancestors",t);return T.getJSON(n)},T.getItems=function(e,r){var t;return t="string"==(typeof e).toString().toLowerCase()?T.getUrl("Users/"+e+"/Items",r):T.getUrl("Items",r),T.getJSON(t)},T.getChannels=function(e){return T.getJSON(T.getUrl("Channels",e||{}))},T.getUserViews=function(e,r){e=e||{};var t=T.getUrl("Users/"+(r||T.getCurrentUserId())+"/Views",e);return T.getJSON(t)},T.getArtists=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=T.getUrl("Artists",r);return T.getJSON(t)},T.getAlbumArtists=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=T.getUrl("Artists/AlbumArtists",r);return T.getJSON(t)},T.getGenres=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=T.getUrl("Genres",r);return T.getJSON(t)},T.getMusicGenres=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=T.getUrl("MusicGenres",r);return T.getJSON(t)},T.getGameGenres=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=T.getUrl("GameGenres",r);return T.getJSON(t)},T.getPeople=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=T.getUrl("Persons",r);return T.getJSON(t)},T.getStudios=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=T.getUrl("Studios",r);return T.getJSON(t)},T.getLocalTrailers=function(e,r){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var t=T.getUrl("Users/"+e+"/Items/"+r+"/LocalTrailers");return T.getJSON(t)},T.getAdditionalVideoParts=function(e,r){if(!r)throw new Error("null itemId");var t={};e&&(t.userId=e);var n=T.getUrl("Videos/"+r+"/AdditionalParts",t);return T.getJSON(n)},T.getThemeMedia=function(e,r,t){if(!r)throw new Error("null itemId");var n={};e&&(n.userId=e),n.InheritFromParent=t||!1;var a=T.getUrl("Items/"+r+"/ThemeMedia",n);return T.getJSON(a)},T.getSearchHints=function(e){var r=T.getUrl("Search/Hints",e);return T.getJSON(r)},T.getSpecialFeatures=function(e,r){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var t=T.getUrl("Users/"+e+"/Items/"+r+"/SpecialFeatures");return T.getJSON(t)},T.getDateParamValue=function(e){function r(e){return 10>e?"0"+e:e}var t=e;return""+t.getFullYear()+r(t.getMonth()+1)+r(t.getDate())+r(t.getHours())+r(t.getMinutes())+r(t.getSeconds())},T.markPlayed=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var n={};t&&(n.DatePlayed=T.getDateParamValue(t));var a=T.getUrl("Users/"+e+"/PlayedItems/"+r,n);return T.ajax({type:"POST",url:a,dataType:"json"})},T.markUnplayed=function(e,r){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var t=T.getUrl("Users/"+e+"/PlayedItems/"+r);return T.ajax({type:"DELETE",url:t,dataType:"json"})},T.updateFavoriteStatus=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var n=T.getUrl("Users/"+e+"/FavoriteItems/"+r),a=t?"POST":"DELETE";return T.ajax({type:a,url:n,dataType:"json"})},T.updateUserItemRating=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var n=T.getUrl("Users/"+e+"/Items/"+r+"/Rating",{likes:t});return T.ajax({type:"POST",url:n,dataType:"json"})},T.getItemCounts=function(e){var r={};e&&(r.userId=e);var t=T.getUrl("Items/Counts",r);return T.getJSON(t)},T.clearUserItemRating=function(e,r){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var t=T.getUrl("Users/"+e+"/Items/"+r+"/Rating");return T.ajax({type:"DELETE",url:t,dataType:"json"})},T.reportPlaybackStart=function(e){if(!e)throw new Error("null options");var t=T.getUrl("Sessions/Playing");return T.ajax({type:"POST",data:r.stringify(e),contentType:"application/json",url:t})},T.reportPlaybackProgress=function(e){if(!e)throw new Error("null options");if(T.isWebSocketOpen())return new Promise(function(t){var n=r.stringify(e);T.sendWebSocketMessage("ReportPlaybackProgress",n),t()});var t=T.getUrl("Sessions/Playing/Progress");return T.ajax({type:"POST",data:r.stringify(e),contentType:"application/json",url:t})},T.reportOfflineActions=function(e){if(!e)throw new Error("null actions");
var t=T.getUrl("Sync/OfflineActions");return T.ajax({type:"POST",data:r.stringify(e),contentType:"application/json",url:t})},T.syncData=function(e){if(!e)throw new Error("null data");var t=T.getUrl("Sync/Data");return T.ajax({type:"POST",data:r.stringify(e),contentType:"application/json",url:t,dataType:"json"})},T.getReadySyncItems=function(e){if(!e)throw new Error("null deviceId");var r=T.getUrl("Sync/Items/Ready",{TargetId:e});return T.getJSON(r)},T.reportSyncJobItemTransferred=function(e){if(!e)throw new Error("null syncJobItemId");var r=T.getUrl("Sync/JobItems/"+e+"/Transferred");return T.ajax({type:"POST",url:r})},T.reportPlaybackStopped=function(e){if(!e)throw new Error("null options");var t=T.getUrl("Sessions/Playing/Stopped");return T.ajax({type:"POST",data:r.stringify(e),contentType:"application/json",url:t})},T.sendPlayCommand=function(e,r){if(!e)throw new Error("null sessionId");if(!r)throw new Error("null options");var t=T.getUrl("Sessions/"+e+"/Playing",r);return T.ajax({type:"POST",url:t})},T.sendCommand=function(e,t){if(!e)throw new Error("null sessionId");if(!t)throw new Error("null command");var n=T.getUrl("Sessions/"+e+"/Command"),a={type:"POST",url:n};return a.data=r.stringify(t),a.contentType="application/json",T.ajax(a)},T.sendMessageCommand=function(e,r){if(!e)throw new Error("null sessionId");if(!r)throw new Error("null options");var t=T.getUrl("Sessions/"+e+"/Message",r);return T.ajax({type:"POST",url:t})},T.sendPlayStateCommand=function(e,r,t){if(!e)throw new Error("null sessionId");if(!r)throw new Error("null command");var n=T.getUrl("Sessions/"+e+"/Playing/"+r,t||{});return T.ajax({type:"POST",url:n})},T.createPackageReview=function(e){var r=T.getUrl("Packages/Reviews/"+e.id,e);return T.ajax({type:"POST",url:r})},T.getPackageReviews=function(e,r,t,n){if(!e)throw new Error("null packageId");var a={};r&&(a.MinRating=r),t&&(a.MaxRating=t),n&&(a.Limit=n);var i=T.getUrl("Packages/"+e+"/Reviews",a);return T.getJSON(i)}}}(window,window.JSON,window.WebSocket,window.setTimeout,window.devicePixelRatio,window.FileReader);