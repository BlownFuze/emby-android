!function(e,r,t,n,a,o){e.MediaBrowser||(e.MediaBrowser={}),e.MediaBrowser.ApiClient=function(e,i,u,s,l,g){function c(e,r){Events.trigger(U,"requestfail",[{url:e,status:r.status,errorCode:r.headers?r.headers["X-Application-Error-Code"]:null}])}function d(e){var r=e.headers||{};"json"==e.dataType&&(r.accept="application/json");var t={headers:r,method:e.type},n=e.contentType;return e.data&&("string"==typeof e.data?t.body=e.data:(t.body=v(e.data),n=n||"application/x-www-form-urlencoded; charset=UTF-8")),n&&(r["Content-Type"]=n),e.timeout?f(e.url,t,e.timeout):fetch(e.url,t)}function f(e,r,t){return new Promise(function(a,o){var i=n(o,t);fetch(e,r).then(function(e){clearTimeout(i),a(e)},function(e){throw clearTimeout(i),e})})}function v(e){var r=[];for(var t in e){var n=e[t];null!==n&&void 0!==n&&""!==n&&r.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}return r.join("&")}function p(e){var r=U.serverInfo(),t=e;return t--,0>t&&(t=MediaBrowser.ConnectionMode.Manual),MediaBrowser.ServerInfo.getServerAddress(r,t)?t:(t--,0>t&&(t=MediaBrowser.ConnectionMode.Manual),MediaBrowser.ServerInfo.getServerAddress(r,t)?t:e)}function w(r,t,a,o){a=p(a);var i=MediaBrowser.ServerInfo.getServerAddress(U.serverInfo(),a);e.log("Attempting reconnection to "+i);var u=a==MediaBrowser.ConnectionMode.Local?7e3:15e3;f(i+"/system/info/public",{method:"GET",accept:"application/json"},u).then(function(){e.log("Reconnect succeeded to "+i),U.serverInfo().LastConnectionMode=a,U.serverAddress(i),r()},function(){if(e.log("Reconnect attempt failed to "+i),5>o){var u=p(a);n(function(){w(r,t,u,o+1)},300)}else t()})}function m(){return new Promise(function(e,r){n(function(){w(e,r,U.serverInfo().LastConnectionMode,0)},300)})}function y(e){if("UserDeleted"===e.MessageType)E=null;else if("UserUpdated"===e.MessageType||"UserConfigurationUpdated"===e.MessageType){var r=e.Data;r.Id==U.getCurrentUserId()&&(E=null)}Events.trigger(U,"websocketmessage",[e])}function h(e){var r;return e.artist?(r="Artists/"+U.encodeName(e.artist),delete e.artist):e.person?(r="Persons/"+U.encodeName(e.person),delete e.person):e.genre?(r="Genres/"+U.encodeName(e.genre),delete e.genre):e.musicGenre?(r="MusicGenres/"+U.encodeName(e.musicGenre),delete e.musicGenre):e.gameGenre?(r="GameGenres/"+U.encodeName(e.gameGenre),delete e.gameGenre):e.studio?(r="Studios/"+U.encodeName(e.studio),delete e.studio):(r="Items/"+e.itemId,delete e.itemId),r}function S(e){var r=a||1;r&&(e.minScale&&(r=Math.max(e.minScale,r)),e.width&&(e.width=Math.round(e.width*r)),e.height&&(e.height=Math.round(e.height*r)),e.maxWidth&&(e.maxWidth=Math.round(e.maxWidth*r)),e.maxHeight&&(e.maxHeight=Math.round(e.maxHeight*r))),e.quality=e.quality||U.getDefaultImageQuality(e.type),U.normalizeImageOptions&&U.normalizeImageOptions(e)}if(!i)throw new Error("Must supply a serverAddress");e.log("ApiClient serverAddress: "+i),e.log("ApiClient clientName: "+u),e.log("ApiClient applicationVersion: "+s),e.log("ApiClient deviceName: "+l),e.log("ApiClient deviceId: "+g);var T,U=this,I={};U.enableAppStorePolicy=!1,U.serverAddress=function(e){if(null!=e){if(0!=e.toLowerCase().indexOf("http"))throw new Error("Invalid url: "+e);var r=e!=i;i=e,r&&Events.trigger(this,"serveraddresschanged")}return i},U.serverInfo=function(e){return I=e||I};var E;U.getCurrentUser=function(){if(E)return new Promise(function(e){e(E)});var e=U.getCurrentUserId();return e?U.getUser(e).then(function(e){return E=e,e}):new Promise(function(e,r){r()})},U.getCurrentUserId=function(){return I.UserId},U.accessToken=function(){return I.AccessToken},U.deviceName=function(){return l},U.deviceId=function(){return g},U.appName=function(){return u},U.appVersion=function(){return s},U.clearAuthenticationInfo=function(){U.setAuthenticationInfo(null,null)},U.setAuthenticationInfo=function(e,r){E=null,I.AccessToken=e,I.UserId=r},U.encodeName=function(e){e=e.split("/").join("-"),e=e.split("&").join("-"),e=e.split("?").join("-");var r=v({name:e});return r.substring(r.indexOf("=")+1).replace("'","%27")},U.setRequestHeaders=function(e){var r=U.serverInfo();if(u){var t='MediaBrowser Client="'+u+'", Device="'+l+'", DeviceId="'+g+'", Version="'+s+'"',n=r.UserId;n&&(t+=', UserId="'+n+'"'),e["X-Emby-Authorization"]=t}var a=r.AccessToken;a&&(e["X-MediaBrowser-Token"]=a)},U.ajax=function(e,r){if(!e)throw new Error("Request cannot be null");return U.fetch(e,r)},U.fetch=function(r,t){if(!r)throw new Error("Request cannot be null");return r.headers=r.headers||{},t!==!1&&U.setRequestHeaders(r.headers),U.enableAutomaticNetworking===!1||"GET"!=r.type?(e.log("Requesting url without automatic networking: "+r.url),d(r).then(function(e){return e.status<400?"json"==r.dataType||"application/json"==r.headers.accept?e.json():e:(c(r.url,e),Promise.reject(e))},function(e){throw c(r.url,{}),e})):U.fetchWithFailover(r,!0)},U.getJSON=function(e,r){return U.fetch({url:e,type:"GET",dataType:"json",headers:{accept:"application/json"}},r)},U.fetchWithFailover=function(r,t){return e.log("Requesting "+r.url),r.timeout=3e4,d(r).then(function(e){return e.status<400?"json"==r.dataType||"application/json"==r.headers.accept?e.json():e:(c(r.url,e),Promise.reject(e))},function(n){if(e.log("Request failed to "+r.url),t){e.log("Attempting reconnection");var a=U.serverAddress();return m().then(function(){return e.log("Reconnect succeesed"),r.url=r.url.replace(a,U.serverAddress()),U.fetchWithFailover(r,!1)},function(t){throw e.log("Reconnect failed"),c(r.url,{}),t})}throw e.log("Reporting request failure"),c(r.url,{}),n})},U.get=function(e){return U.ajax({type:"GET",url:e})},U.getUrl=function(e,r){if(!e)throw new Error("Url name cannot be empty");var t=i;if(!t)throw new Error("serverAddress is yet not set");var n=t.toLowerCase();return-1==n.indexOf("/emby")&&-1==n.indexOf("/mediabrowser")&&(t+="/emby"),"/"!=e.charAt(0)&&(t+="/"),t+=e,r&&(r=v(r),r&&(t+="?"+r)),t},U.updateServerInfo=function(t,n){if(null==t)throw new Error("server cannot be null");if(null==n)throw new Error("connectionMode cannot be null");e.log("Begin updateServerInfo. connectionMode: "+n),U.serverInfo(t);var a=MediaBrowser.ServerInfo.getServerAddress(t,n);if(!a)throw new Error("serverUrl cannot be null. serverInfo: "+r.stringify(t));e.log("Setting server address to "+a),U.serverAddress(a)},U.isWebSocketSupported=function(){return null!=t},U.openWebSocket=function(){var a=U.accessToken();if(!a)throw new Error("Cannot open web socket without access token.");var o=U.getUrl("socket").replace("emby/socket","embywebsocket").replace("http","ws");o+="?api_key="+a,o+="&deviceId="+g,T=new t(o),T.onmessage=function(e){e=r.parse(e.data),y(e)},T.onopen=function(){e.log("web socket connection opened"),n(function(){Events.trigger(U,"websocketopen")},0)},T.onerror=function(){n(function(){Events.trigger(U,"websocketerror")},0)},T.onclose=function(){n(function(){Events.trigger(U,"websocketclose")},0)}},U.closeWebSocket=function(){T&&T.readyState===t.OPEN&&T.close()},U.sendWebSocketMessage=function(t,n){e.log("Sending web socket message: "+t);var a={MessageType:t};n&&(a.Data=n),a=r.stringify(a),T.send(a)},U.isWebSocketOpen=function(){return T&&T.readyState===t.OPEN},U.isWebSocketOpenOrConnecting=function(){return T&&(T.readyState===t.OPEN||T.readyState===t.CONNECTING)},U.getProductNews=function(e){e=e||{};var r=U.getUrl("News/Product",e);return U.getJSON(r)},U.getDownloadSpeed=function(e){var r=U.getUrl("Playback/BitrateTest",{Size:e}),t=(new Date).getTime();return U.ajax({type:"GET",url:r,timeout:5e3}).then(function(){var r=((new Date).getTime()-t)/1e3,n=e/r,a=Math.round(8*n);return a})},U.detectBitrate=function(){return U.getDownloadSpeed(1e6).then(function(e){return 1e6>e?Math.round(.8*e):U.getDownloadSpeed(24e5).then(function(e){return Math.round(.8*e)})})},U.getItem=function(e,r){if(!r)throw new Error("null itemId");var t=U.getUrl(e?"Users/"+e+"/Items/"+r:"Items/"+r);return U.getJSON(t)},U.getRootFolder=function(e){if(!e)throw new Error("null userId");var r=U.getUrl("Users/"+e+"/Items/Root");return U.getJSON(r)},U.getNotificationSummary=function(e){if(!e)throw new Error("null userId");var r=U.getUrl("Notifications/"+e+"/Summary");return U.getJSON(r)},U.getNotifications=function(e,r){if(!e)throw new Error("null userId");var t=U.getUrl("Notifications/"+e,r||{});return U.getJSON(t)},U.markNotificationsRead=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null idList");var n=t?"Read":"Unread",a={UserId:e,Ids:r.join(",")},o=U.getUrl("Notifications/"+e+"/"+n,a);return U.ajax({type:"POST",url:o})},U.logout=function(){U.closeWebSocket();var e=function(){U.setAuthenticationInfo(null,null)};if(U.accessToken()){var r=U.getUrl("Sessions/Logout");return U.ajax({type:"POST",url:r}).then(e,e)}return new Promise(function(r){e(),r()})},U.getRemoteImageProviders=function(e){if(!e)throw new Error("null options");var r=h(e),t=U.getUrl(r+"/RemoteImages/Providers",e);return U.getJSON(t)},U.getAvailableRemoteImages=function(e){if(!e)throw new Error("null options");var r=h(e),t=U.getUrl(r+"/RemoteImages",e);return U.getJSON(t)},U.downloadRemoteImage=function(e){if(!e)throw new Error("null options");var r=h(e),t=U.getUrl(r+"/RemoteImages/Download",e);return U.ajax({type:"POST",url:t})},U.getLiveTvInfo=function(e){var r=U.getUrl("LiveTv/Info",e||{});return U.getJSON(r)},U.getLiveTvGuideInfo=function(e){var r=U.getUrl("LiveTv/GuideInfo",e||{});return U.getJSON(r)},U.getLiveTvChannel=function(e,r){if(!e)throw new Error("null id");var t={};r&&(t.userId=r);var n=U.getUrl("LiveTv/Channels/"+e,t);return U.getJSON(n)},U.getLiveTvChannels=function(e){var r=U.getUrl("LiveTv/Channels",e||{});return U.getJSON(r)},U.getLiveTvPrograms=function(e){return e=e||{},U.ajax(e.channelIds&&e.channelIds.length>1800?{type:"POST",url:U.getUrl("LiveTv/Programs"),data:r.stringify(e),contentType:"application/json",dataType:"json"}:{type:"GET",url:U.getUrl("LiveTv/Programs",e),dataType:"json"})},U.getLiveTvRecommendedPrograms=function(e){return e=e||{},U.ajax({type:"GET",url:U.getUrl("LiveTv/Programs/Recommended",e),dataType:"json"})},U.getLiveTvRecordings=function(e){var r=U.getUrl("LiveTv/Recordings",e||{});return U.getJSON(r)},U.getLiveTvRecordingGroups=function(e){var r=U.getUrl("LiveTv/Recordings/Groups",e||{});return U.getJSON(r)},U.getLiveTvRecordingGroup=function(e){if(!e)throw new Error("null id");var r=U.getUrl("LiveTv/Recordings/Groups/"+e);return U.getJSON(r)},U.getLiveTvRecording=function(e,r){if(!e)throw new Error("null id");var t={};r&&(t.userId=r);var n=U.getUrl("LiveTv/Recordings/"+e,t);return U.getJSON(n)},U.getLiveTvProgram=function(e,r){if(!e)throw new Error("null id");var t={};r&&(t.userId=r);var n=U.getUrl("LiveTv/Programs/"+e,t);return U.getJSON(n)},U.deleteLiveTvRecording=function(e){if(!e)throw new Error("null id");var r=U.getUrl("LiveTv/Recordings/"+e);return U.ajax({type:"DELETE",url:r})},U.cancelLiveTvTimer=function(e){if(!e)throw new Error("null id");var r=U.getUrl("LiveTv/Timers/"+e);return U.ajax({type:"DELETE",url:r})},U.getLiveTvTimers=function(e){var r=U.getUrl("LiveTv/Timers",e||{});return U.getJSON(r)},U.getLiveTvTimer=function(e){if(!e)throw new Error("null id");var r=U.getUrl("LiveTv/Timers/"+e);return U.getJSON(r)},U.getNewLiveTvTimerDefaults=function(e){e=e||{};var r=U.getUrl("LiveTv/Timers/Defaults",e);return U.getJSON(r)},U.createLiveTvTimer=function(e){if(!e)throw new Error("null item");var t=U.getUrl("LiveTv/Timers");return U.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},U.updateLiveTvTimer=function(e){if(!e)throw new Error("null item");var t=U.getUrl("LiveTv/Timers/"+e.Id);return U.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},U.resetLiveTvTuner=function(e){if(!e)throw new Error("null id");var r=U.getUrl("LiveTv/Tuners/"+e+"/Reset");return U.ajax({type:"POST",url:r})},U.getLiveTvSeriesTimers=function(e){var r=U.getUrl("LiveTv/SeriesTimers",e||{});return U.getJSON(r)},U.getFileOrganizationResults=function(e){var r=U.getUrl("Library/FileOrganization",e||{});return U.getJSON(r)},U.deleteOriginalFileFromOrganizationResult=function(e){var r=U.getUrl("Library/FileOrganizations/"+e+"/File");return U.ajax({type:"DELETE",url:r})},U.clearOrganizationLog=function(){var e=U.getUrl("Library/FileOrganizations");return U.ajax({type:"DELETE",url:e})},U.performOrganization=function(e){var r=U.getUrl("Library/FileOrganizations/"+e+"/Organize");return U.ajax({type:"POST",url:r})},U.performEpisodeOrganization=function(e,r){var t=U.getUrl("Library/FileOrganizations/"+e+"/Episode/Organize",r||{});return U.ajax({type:"POST",url:t})},U.getLiveTvSeriesTimer=function(e){if(!e)throw new Error("null id");var r=U.getUrl("LiveTv/SeriesTimers/"+e);return U.getJSON(r)},U.cancelLiveTvSeriesTimer=function(e){if(!e)throw new Error("null id");var r=U.getUrl("LiveTv/SeriesTimers/"+e);return U.ajax({type:"DELETE",url:r})},U.createLiveTvSeriesTimer=function(e){if(!e)throw new Error("null item");var t=U.getUrl("LiveTv/SeriesTimers");return U.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},U.updateLiveTvSeriesTimer=function(e){if(!e)throw new Error("null item");var t=U.getUrl("LiveTv/SeriesTimers/"+e.Id);return U.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},U.getRegistrationInfo=function(e){var r=U.getUrl("Registrations/"+e);return U.getJSON(r)},U.getSystemInfo=function(){var e=U.getUrl("System/Info");return U.getJSON(e)},U.getPublicSystemInfo=function(){var e=U.getUrl("System/Info/Public");return U.getJSON(e,!1)},U.getInstantMixFromItem=function(e,r){var t=U.getUrl("Items/"+e+"/InstantMix",r);return U.getJSON(t)},U.getEpisodes=function(e,r){var t=U.getUrl("Shows/"+e+"/Episodes",r);return U.getJSON(t)},U.getDisplayPreferences=function(e,r,t){var n=U.getUrl("DisplayPreferences/"+e,{userId:r,client:t});return U.getJSON(n)},U.updateDisplayPreferences=function(e,t,n,a){var o=U.getUrl("DisplayPreferences/"+e,{userId:n,client:a});return U.ajax({type:"POST",url:o,data:r.stringify(t),contentType:"application/json"})},U.getSeasons=function(e,r){var t=U.getUrl("Shows/"+e+"/Seasons",r);return U.getJSON(t)},U.getSimilarItems=function(e,r){var t=U.getUrl("Items/"+e+"/Similar",r);return U.getJSON(t)},U.getCultures=function(){var e=U.getUrl("Localization/cultures");return U.getJSON(e)},U.getCountries=function(){var e=U.getUrl("Localization/countries");return U.getJSON(e)},U.getPluginSecurityInfo=function(){var e=U.getUrl("Plugins/SecurityInfo");return U.getJSON(e)},U.getDirectoryContents=function(e,r){if(!e)throw new Error("null path");r=r||{},r.path=e;var t=U.getUrl("Environment/DirectoryContents",r);return U.getJSON(t)},U.getNetworkShares=function(e){if(!e)throw new Error("null path");var r={};r.path=e;var t=U.getUrl("Environment/NetworkShares",r);return U.getJSON(t)},U.getParentPath=function(e){if(!e)throw new Error("null path");var r={};r.path=e;var t=U.getUrl("Environment/ParentPath",r);return U.ajax({type:"GET",url:t})},U.getDrives=function(){var e=U.getUrl("Environment/Drives");return U.getJSON(e)},U.getNetworkDevices=function(){var e=U.getUrl("Environment/NetworkDevices");return U.getJSON(e)},U.cancelPackageInstallation=function(e){if(!e)throw new Error("null installationId");var r=U.getUrl("Packages/Installing/"+e);return U.ajax({type:"DELETE",url:r})},U.refreshItem=function(e,r){if(!e)throw new Error("null itemId");var t=U.getUrl("Items/"+e+"/Refresh",r||{});return U.ajax({type:"POST",url:t})},U.installPlugin=function(e,r,t,n){if(!e)throw new Error("null name");if(!t)throw new Error("null updateClass");var a={updateClass:t,AssemblyGuid:r};n&&(a.version=n);var o=U.getUrl("Packages/Installed/"+e,a);return U.ajax({type:"POST",url:o})},U.restartServer=function(){var e=U.getUrl("System/Restart");return U.ajax({type:"POST",url:e})},U.shutdownServer=function(){var e=U.getUrl("System/Shutdown");return U.ajax({type:"POST",url:e})},U.getPackageInfo=function(e,r){if(!e)throw new Error("null name");var t={AssemblyGuid:r},n=U.getUrl("Packages/"+e,t);return U.getJSON(n)},U.getAvailableApplicationUpdate=function(){var e=U.getUrl("Packages/Updates",{PackageType:"System"});return U.getJSON(e)},U.getAvailablePluginUpdates=function(){var e=U.getUrl("Packages/Updates",{PackageType:"UserInstalled"});return U.getJSON(e)},U.getVirtualFolders=function(){var e="Library/VirtualFolders";return e=U.getUrl(e),U.getJSON(e)},U.getPhysicalPaths=function(){var e=U.getUrl("Library/PhysicalPaths");return U.getJSON(e)},U.getServerConfiguration=function(){var e=U.getUrl("System/Configuration");return U.getJSON(e)},U.getDevicesOptions=function(){var e=U.getUrl("System/Configuration/devices");return U.getJSON(e)},U.getContentUploadHistory=function(){var e=U.getUrl("Devices/CameraUploads",{DeviceId:U.deviceId()});return U.getJSON(e)},U.getNamedConfiguration=function(e){var r=U.getUrl("System/Configuration/"+e);return U.getJSON(r)},U.getScheduledTasks=function(e){e=e||{};var r=U.getUrl("ScheduledTasks",e);return U.getJSON(r)},U.startScheduledTask=function(e){if(!e)throw new Error("null id");var r=U.getUrl("ScheduledTasks/Running/"+e);return U.ajax({type:"POST",url:r})},U.getScheduledTask=function(e){if(!e)throw new Error("null id");var r=U.getUrl("ScheduledTasks/"+e);return U.getJSON(r)},U.getNextUpEpisodes=function(e){var r=U.getUrl("Shows/NextUp",e);return U.getJSON(r)},U.stopScheduledTask=function(e){if(!e)throw new Error("null id");var r=U.getUrl("ScheduledTasks/Running/"+e);return U.ajax({type:"DELETE",url:r})},U.getPluginConfiguration=function(e){if(!e)throw new Error("null Id");var r=U.getUrl("Plugins/"+e+"/Configuration");return U.getJSON(r)},U.getAvailablePlugins=function(e){e=e||{},e.PackageType="UserInstalled",U.enableAppStorePolicy&&(e.IsAppStoreEnabled=!0);var r=U.getUrl("Packages",e);return U.getJSON(r)},U.uninstallPlugin=function(e){if(!e)throw new Error("null Id");var r=U.getUrl("Plugins/"+e);return U.ajax({type:"DELETE",url:r})},U.removeVirtualFolder=function(e,r){if(!e)throw new Error("null name");var t="Library/VirtualFolders";return t=U.getUrl(t,{refreshLibrary:r?!0:!1,name:e}),U.ajax({type:"DELETE",url:t})},U.addVirtualFolder=function(e,t,n,a){if(!e)throw new Error("null name");var o={};t&&(o.collectionType=t),o.refreshLibrary=n?!0:!1,o.name=e;var i="Library/VirtualFolders";return i=U.getUrl(i,o),U.ajax({type:"POST",url:i,data:r.stringify({Paths:a}),contentType:"application/json"})},U.renameVirtualFolder=function(e,r,t){if(!e)throw new Error("null name");var n="Library/VirtualFolders/Name";return n=U.getUrl(n,{refreshLibrary:t?!0:!1,newName:r,name:e}),U.ajax({type:"POST",url:n})},U.addMediaPath=function(e,r,t){if(!e)throw new Error("null virtualFolderName");if(!r)throw new Error("null mediaPath");var n="Library/VirtualFolders/Paths";return n=U.getUrl(n,{refreshLibrary:t?!0:!1,path:r,name:e}),U.ajax({type:"POST",url:n})},U.removeMediaPath=function(e,r,t){if(!e)throw new Error("null virtualFolderName");if(!r)throw new Error("null mediaPath");var n="Library/VirtualFolders/Paths";return n=U.getUrl(n,{refreshLibrary:t?!0:!1,path:r,name:e}),U.ajax({type:"DELETE",url:n})},U.deleteUser=function(e){if(!e)throw new Error("null id");var r=U.getUrl("Users/"+e);return U.ajax({type:"DELETE",url:r})},U.deleteUserImage=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null imageType");var n=U.getUrl("Users/"+e+"/Images/"+r);return null!=t&&(n+="/"+t),U.ajax({type:"DELETE",url:n})},U.deleteItemImage=function(e,r,t){if(!r)throw new Error("null imageType");var n=U.getUrl("Items/"+e+"/Images");return n+="/"+r,null!=t&&(n+="/"+t),U.ajax({type:"DELETE",url:n})},U.deleteItem=function(e){if(!e)throw new Error("null itemId");var r=U.getUrl("Items/"+e);return U.ajax({type:"DELETE",url:r})},U.stopActiveEncodings=function(e){var r={deviceId:g};e&&(r.PlaySessionId=e);var t=U.getUrl("Videos/ActiveEncodings",r);return U.ajax({type:"DELETE",url:t})},U.reportCapabilities=function(e){var t=U.getUrl("Sessions/Capabilities/Full");return U.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},U.updateItemImageIndex=function(e,r,t,n){if(!r)throw new Error("null imageType");var a={newIndex:n},o=U.getUrl("Items/"+e+"/Images/"+r+"/"+t+"/Index",a);return U.ajax({type:"POST",url:o})},U.getItemImageInfos=function(e){var r=U.getUrl("Items/"+e+"/Images");return U.getJSON(r)},U.getCriticReviews=function(e,r){if(!e)throw new Error("null itemId");var t=U.getUrl("Items/"+e+"/CriticReviews",r);return U.getJSON(t)},U.getSessions=function(e){var r=U.getUrl("Sessions",e);return U.getJSON(r)},U.uploadUserImage=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null imageType");if(!t)throw new Error("File must be an image.");if("image/png"!=t.type&&"image/jpeg"!=t.type&&"image/jpeg"!=t.type)throw new Error("File must be an image.");return new Promise(function(n,a){var i=new o;i.onerror=function(){a()},i.onabort=function(){a()},i.onload=function(o){var i=o.target.result.split(",")[1],u=U.getUrl("Users/"+e+"/Images/"+r);U.ajax({type:"POST",url:u,data:i,contentType:"image/"+t.name.substring(t.name.lastIndexOf(".")+1)}).then(function(e){n(e)},function(){a()})},i.readAsDataURL(t)})},U.uploadItemImage=function(e,r,t){if(!e)throw new Error("null itemId");if(!r)throw new Error("null imageType");if(!t)throw new Error("File must be an image.");if("image/png"!=t.type&&"image/jpeg"!=t.type&&"image/jpeg"!=t.type)throw new Error("File must be an image.");var n=U.getUrl("Items/"+e+"/Images");return n+="/"+r,new Promise(function(e,r){var a=new o;a.onerror=function(){r()},a.onabort=function(){r()},a.onload=function(a){var o=a.target.result.split(",")[1];U.ajax({type:"POST",url:n,data:o,contentType:"image/"+t.name.substring(t.name.lastIndexOf(".")+1)}).then(function(r){e(r)},function(){r()})},a.readAsDataURL(t)})},U.getInstalledPlugins=function(){var e={};U.enableAppStorePolicy&&(e.IsAppStoreEnabled=!0);var r=U.getUrl("Plugins",e);return U.getJSON(r)},U.getUser=function(e){if(!e)throw new Error("Must supply a userId");var r=U.getUrl("Users/"+e);return U.getJSON(r)},U.getOfflineUser=function(e){if(!e)throw new Error("Must supply a userId");var r=U.getUrl("Users/"+e+"/Offline");return U.getJSON(r)},U.getStudio=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=U.getUrl("Studios/"+U.encodeName(e),t);return U.getJSON(n)},U.getGenre=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=U.getUrl("Genres/"+U.encodeName(e),t);return U.getJSON(n)},U.getMusicGenre=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=U.getUrl("MusicGenres/"+U.encodeName(e),t);return U.getJSON(n)},U.getGameGenre=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=U.getUrl("GameGenres/"+U.encodeName(e),t);return U.getJSON(n)},U.getArtist=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=U.getUrl("Artists/"+U.encodeName(e),t);return U.getJSON(n)},U.getPerson=function(e,r){if(!e)throw new Error("null name");var t={};r&&(t.userId=r);var n=U.getUrl("Persons/"+U.encodeName(e),t);return U.getJSON(n)},U.getPublicUsers=function(){var e=U.getUrl("users/public");return U.ajax({type:"GET",url:e,dataType:"json"},!1)},U.getUsers=function(e){var r=U.getUrl("users",e||{});return U.getJSON(r)},U.getParentalRatings=function(){var e=U.getUrl("Localization/ParentalRatings");return U.getJSON(e)},U.getDefaultImageQuality=function(e){return"backdrop"==e.toLowerCase()?80:90},U.getUserImageUrl=function(e,r){if(!e)throw new Error("null userId");r=r||{};var t="Users/"+e+"/Images/"+r.type;return null!=r.index&&(t+="/"+r.index),S(r),delete r.type,delete r.index,U.getUrl(t,r)},U.getImageUrl=function(e,r){if(!e)throw new Error("itemId cannot be empty");r=r||{};var t="Items/"+e+"/Images/"+r.type;return null!=r.index&&(t+="/"+r.index),r.quality=r.quality||U.getDefaultImageQuality(r.type),U.normalizeImageOptions&&U.normalizeImageOptions(r),delete r.type,delete r.index,U.getUrl(t,r)},U.getScaledImageUrl=function(e,r){if(!e)throw new Error("itemId cannot be empty");r=r||{};var t="Items/"+e+"/Images/"+r.type;return null!=r.index&&(t+="/"+r.index),S(r),delete r.type,delete r.index,delete r.minScale,U.getUrl(t,r)},U.getThumbImageUrl=function(e,r){if(!e)throw new Error("null item");return r=r||{},r.imageType="thumb",e.ImageTags&&e.ImageTags.Thumb?(r.tag=e.ImageTags.Thumb,U.getImageUrl(e.Id,r)):e.ParentThumbItemId?(r.tag=e.ImageTags.ParentThumbImageTag,U.getImageUrl(e.ParentThumbItemId,r)):null},U.authenticateUserByName=function(e,t){return new Promise(function(n,a){if(!e)return void a();var o=U.getUrl("Users/authenticatebyname");require(["cryptojs-sha1"],function(){var i={password:CryptoJS.SHA1(t||"").toString(),Username:e};U.ajax({type:"POST",url:o,data:r.stringify(i),dataType:"json",contentType:"application/json"}).then(function(e){U.onAuthenticated&&U.onAuthenticated(U,e),n(e)},a)})})},U.updateUserPassword=function(e,r,t){return new Promise(function(n,a){if(!e)return void a();var o=U.getUrl("Users/"+e+"/Password");require(["cryptojs-sha1"],function(){U.ajax({type:"POST",url:o,data:{currentPassword:CryptoJS.SHA1(r).toString(),newPassword:CryptoJS.SHA1(t).toString()}}).then(n,a)})})},U.updateEasyPassword=function(e,r){return new Promise(function(t,n){if(!e)return void n();var a=U.getUrl("Users/"+e+"/EasyPassword");require(["cryptojs-sha1"],function(){U.ajax({type:"POST",url:a,data:{newPassword:CryptoJS.SHA1(r).toString()}}).then(t,n)})})},U.resetUserPassword=function(e){if(!e)throw new Error("null userId");var r=U.getUrl("Users/"+e+"/Password"),t={};return t.resetPassword=!0,U.ajax({type:"POST",url:r,data:t})},U.resetEasyPassword=function(e){if(!e)throw new Error("null userId");var r=U.getUrl("Users/"+e+"/EasyPassword"),t={};return t.resetPassword=!0,U.ajax({type:"POST",url:r,data:t})},U.updateServerConfiguration=function(e){if(!e)throw new Error("null configuration");var t=U.getUrl("System/Configuration");return U.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},U.updateNamedConfiguration=function(e,t){if(!t)throw new Error("null configuration");var n=U.getUrl("System/Configuration/"+e);return U.ajax({type:"POST",url:n,data:r.stringify(t),contentType:"application/json"})},U.updateItem=function(e){if(!e)throw new Error("null item");var t=U.getUrl("Items/"+e.Id);return U.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},U.updatePluginSecurityInfo=function(e){var t=U.getUrl("Plugins/SecurityInfo");return U.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},U.createUser=function(e){var r=U.getUrl("Users/New");return U.ajax({type:"POST",url:r,data:{Name:e},dataType:"json"})},U.updateUser=function(e){if(!e)throw new Error("null user");var t=U.getUrl("Users/"+e.Id);return U.ajax({type:"POST",url:t,data:r.stringify(e),contentType:"application/json"})},U.updateUserPolicy=function(e,t){if(!e)throw new Error("null userId");if(!t)throw new Error("null policy");var n=U.getUrl("Users/"+e+"/Policy");return U.ajax({type:"POST",url:n,data:r.stringify(t),contentType:"application/json"})},U.updateUserConfiguration=function(e,t){if(!e)throw new Error("null userId");if(!t)throw new Error("null configuration");var n=U.getUrl("Users/"+e+"/Configuration");return U.ajax({type:"POST",url:n,data:r.stringify(t),contentType:"application/json"})},U.updateScheduledTaskTriggers=function(e,t){if(!e)throw new Error("null id");if(!t)throw new Error("null triggers");var n=U.getUrl("ScheduledTasks/"+e+"/Triggers");return U.ajax({type:"POST",url:n,data:r.stringify(t),contentType:"application/json"})},U.updatePluginConfiguration=function(e,t){if(!e)throw new Error("null Id");if(!t)throw new Error("null configuration");var n=U.getUrl("Plugins/"+e+"/Configuration");return U.ajax({type:"POST",url:n,data:r.stringify(t),contentType:"application/json"})},U.getAncestorItems=function(e,r){if(!e)throw new Error("null itemId");var t={};r&&(t.userId=r);var n=U.getUrl("Items/"+e+"/Ancestors",t);return U.getJSON(n)},U.getItems=function(e,r){var t;return t="string"==(typeof e).toString().toLowerCase()?U.getUrl("Users/"+e+"/Items",r):U.getUrl("Items",r),U.getJSON(t)},U.getChannels=function(e){return U.getJSON(U.getUrl("Channels",e||{}))},U.getUserViews=function(e,r){e=e||{};var t=U.getUrl("Users/"+(r||U.getCurrentUserId())+"/Views",e);return U.getJSON(t)},U.getArtists=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=U.getUrl("Artists",r);return U.getJSON(t)},U.getAlbumArtists=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=U.getUrl("Artists/AlbumArtists",r);return U.getJSON(t)},U.getGenres=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=U.getUrl("Genres",r);return U.getJSON(t)},U.getMusicGenres=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=U.getUrl("MusicGenres",r);return U.getJSON(t)},U.getGameGenres=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=U.getUrl("GameGenres",r);return U.getJSON(t)},U.getPeople=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=U.getUrl("Persons",r);return U.getJSON(t)},U.getStudios=function(e,r){if(!e)throw new Error("null userId");r=r||{},r.userId=e;var t=U.getUrl("Studios",r);return U.getJSON(t)},U.getLocalTrailers=function(e,r){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var t=U.getUrl("Users/"+e+"/Items/"+r+"/LocalTrailers");return U.getJSON(t)},U.getAdditionalVideoParts=function(e,r){if(!r)throw new Error("null itemId");var t={};e&&(t.userId=e);var n=U.getUrl("Videos/"+r+"/AdditionalParts",t);return U.getJSON(n)},U.getThemeMedia=function(e,r,t){if(!r)throw new Error("null itemId");var n={};e&&(n.userId=e),n.InheritFromParent=t||!1;var a=U.getUrl("Items/"+r+"/ThemeMedia",n);return U.getJSON(a)},U.getSearchHints=function(e){var r=U.getUrl("Search/Hints",e);return U.getJSON(r)},U.getSpecialFeatures=function(e,r){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var t=U.getUrl("Users/"+e+"/Items/"+r+"/SpecialFeatures");return U.getJSON(t)},U.getDateParamValue=function(e){function r(e){return 10>e?"0"+e:e}var t=e;return""+t.getFullYear()+r(t.getMonth()+1)+r(t.getDate())+r(t.getHours())+r(t.getMinutes())+r(t.getSeconds())},U.markPlayed=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var n={};t&&(n.DatePlayed=U.getDateParamValue(t));var a=U.getUrl("Users/"+e+"/PlayedItems/"+r,n);return U.ajax({type:"POST",url:a,dataType:"json"})},U.markUnplayed=function(e,r){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var t=U.getUrl("Users/"+e+"/PlayedItems/"+r);return U.ajax({type:"DELETE",url:t,dataType:"json"})},U.updateFavoriteStatus=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var n=U.getUrl("Users/"+e+"/FavoriteItems/"+r),a=t?"POST":"DELETE";return U.ajax({type:a,url:n,dataType:"json"})},U.updateUserItemRating=function(e,r,t){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var n=U.getUrl("Users/"+e+"/Items/"+r+"/Rating",{likes:t});return U.ajax({type:"POST",url:n,dataType:"json"})},U.getItemCounts=function(e){var r={};e&&(r.userId=e);var t=U.getUrl("Items/Counts",r);return U.getJSON(t)},U.clearUserItemRating=function(e,r){if(!e)throw new Error("null userId");if(!r)throw new Error("null itemId");var t=U.getUrl("Users/"+e+"/Items/"+r+"/Rating");return U.ajax({type:"DELETE",url:t,dataType:"json"})},U.reportPlaybackStart=function(e){if(!e)throw new Error("null options");var t=U.getUrl("Sessions/Playing");return U.ajax({type:"POST",data:r.stringify(e),contentType:"application/json",url:t})},U.reportPlaybackProgress=function(e){if(!e)throw new Error("null options");if(U.isWebSocketOpen())return new Promise(function(t){var n=r.stringify(e);U.sendWebSocketMessage("ReportPlaybackProgress",n),t()});var t=U.getUrl("Sessions/Playing/Progress");return U.ajax({type:"POST",data:r.stringify(e),contentType:"application/json",url:t})
},U.reportOfflineActions=function(e){if(!e)throw new Error("null actions");var t=U.getUrl("Sync/OfflineActions");return U.ajax({type:"POST",data:r.stringify(e),contentType:"application/json",url:t})},U.syncData=function(e){if(!e)throw new Error("null data");var t=U.getUrl("Sync/Data");return U.ajax({type:"POST",data:r.stringify(e),contentType:"application/json",url:t,dataType:"json"})},U.getReadySyncItems=function(e){if(!e)throw new Error("null deviceId");var r=U.getUrl("Sync/Items/Ready",{TargetId:e});return U.getJSON(r)},U.reportSyncJobItemTransferred=function(e){if(!e)throw new Error("null syncJobItemId");var r=U.getUrl("Sync/JobItems/"+e+"/Transferred");return U.ajax({type:"POST",url:r})},U.reportPlaybackStopped=function(e){if(!e)throw new Error("null options");var t=U.getUrl("Sessions/Playing/Stopped");return U.ajax({type:"POST",data:r.stringify(e),contentType:"application/json",url:t})},U.sendPlayCommand=function(e,r){if(!e)throw new Error("null sessionId");if(!r)throw new Error("null options");var t=U.getUrl("Sessions/"+e+"/Playing",r);return U.ajax({type:"POST",url:t})},U.sendCommand=function(e,t){if(!e)throw new Error("null sessionId");if(!t)throw new Error("null command");var n=U.getUrl("Sessions/"+e+"/Command"),a={type:"POST",url:n};return a.data=r.stringify(t),a.contentType="application/json",U.ajax(a)},U.sendMessageCommand=function(e,r){if(!e)throw new Error("null sessionId");if(!r)throw new Error("null options");var t=U.getUrl("Sessions/"+e+"/Message",r);return U.ajax({type:"POST",url:t})},U.sendPlayStateCommand=function(e,r,t){if(!e)throw new Error("null sessionId");if(!r)throw new Error("null command");var n=U.getUrl("Sessions/"+e+"/Playing/"+r,t||{});return U.ajax({type:"POST",url:n})},U.createPackageReview=function(e){var r=U.getUrl("Packages/Reviews/"+e.id,e);return U.ajax({type:"POST",url:r})},U.getPackageReviews=function(e,r,t,n){if(!e)throw new Error("null packageId");var a={};r&&(a.MinRating=r),t&&(a.MaxRating=t),n&&(a.Limit=n);var o=U.getUrl("Packages/"+e+"/Reviews",a);return U.getJSON(o)}}}(window,window.JSON,window.WebSocket,window.setTimeout,window.devicePixelRatio,window.FileReader);