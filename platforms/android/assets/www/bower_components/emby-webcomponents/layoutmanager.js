define(["browser","appSettings","events"],function(t,e,o){function u(t,e,o){e==o?(t[e]=!0,document.documentElement.classList.add("layout-"+e)):(t[e]=!1,document.documentElement.classList.remove("layout-"+e))}function a(){var a=this;a.setLayout=function(t,n){t&&"auto"!=t?(u(a,"mobile",t),u(a,"tv",t),u(a,"desktop",t),n!==!1&&e.set("layout",t)):(a.autoLayout(),n!==!1&&e.set("layout","")),o.trigger(a,"modechange")},a.getSavedLayout=function(){return e.get("layout")},a.autoLayout=function(){t.mobile?a.setLayout("mobile",!1):t.tv?a.setLayout("tv",!1):a.setLayout(a.undetectedAutoLayout||"desktop",!1)},a.init=function(){var t=a.getSavedLayout();t?a.setLayout(t,!1):a.autoLayout()}}return new a});