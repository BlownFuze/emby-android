define(["focusManager","layoutManager","css!./style.css","clearButtonStyle","paper-icon-button-light"],function(e,t){function a(){var t=this.querySelector(".selected");t?e.focus(t):e.autoFocus(this,!0)}function n(e){return'<button data-value="'+e+'" class="clearButton alphaPickerButton">'+e+"</button>"}function i(e,t){e.classList.add("alphaPicker"),e.classList.add("focuscontainer-x");var i,o="";o+='<div class="alphaPickerRow">',"keyboard"==t.mode?o+='<button data-value=" " is="paper-icon-button-light" class="alphaPickerButton">                <iron-icon icon="space-bar"></iron-icon>            </button>':(i=["#"],o+=i.map(n).join("")),i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],o+=i.map(n).join(""),"keyboard"==t.mode?(o+='<button data-value="backspace" is="paper-icon-button-light" class="alphaPickerButton">                <iron-icon icon="backspace"></iron-icon>            </button>',o+="</div>",i=["0","1","2","3","4","5","6","7","8","9"],o+='<div class="alphaPickerRow">',o+="<br/>",o+=i.map(n).join(""),o+="</div>"):o+="</div>",e.innerHTML=o,"keyboard"!=t.mode&&e.querySelector(".alphaPickerButton").classList.add("selected"),e.classList.add("focusable"),e.focus=a}function o(a){function n(){d=null,p.value(l)}function o(){if(f=null,document.activeElement==v){var e=v.getAttribute("data-value");p.value(e,!0)}}function c(e,t){for(;!e.classList||!e.classList.contains(t);)if(e=e.parentNode,!e)return null;return e}function r(e){var t=c(e.target,"alphaPickerButton");if(t){var a=t.getAttribute("data-value");b.dispatchEvent(new CustomEvent("alphavalueclicked",{detail:{value:a}}))}}function s(e){f&&(clearTimeout(f),f=null);var t=c(e.target,"alphaPickerButton");t&&(v=t,f=setTimeout(o,100))}function u(e){var t=c(e.target,m);if(t){var a=t.getAttribute("data-prefix");a&&a.length&&(l=a[0],d&&clearTimeout(d),d=setTimeout(n,100))}}var l,d,v,f,p=this,b=a.element,h=a.itemsContainer,m=a.itemClass;p.enabled=function(e){e?(h&&h.addEventListener("focus",u,!0),"keyboard"==a.mode&&b.addEventListener("click",r),t.tv?b.addEventListener("focus",s,!0):b.addEventListener("click",s)):(h&&h.removeEventListener("focus",u,!0),b.removeEventListener("click",r),b.removeEventListener("focus",s,!0),b.removeEventListener("click",s))},p.on=function(e,t){b.addEventListener(e,t)},p.off=function(e,t){b.removeEventListener(e,t)},p.destroy=function(){p.enabled(!1),b.classList.remove("focuscontainer-x")},p.visible=function(e){b.style.visibility=e?"visible":"hidden"};var k;p.value=function(e,t){if(null!=e){if(e=e.toUpperCase(),k=e,"keyboard"!=a.mode){var n=b.querySelector(".selected"),i=b.querySelector(".alphaPickerButton[data-value='"+e+"']");i&&i!=n&&i.classList.add("selected"),n&&n!=i&&n.classList.remove("selected")}t&&b.dispatchEvent(new CustomEvent("alphavaluechanged",{detail:{value:e}}))}return k},p.values=function(){for(var e=b.querySelectorAll(".alphaPickerButton"),t=[],a=0,n=e.length;n>a;a++)t.push(e[a].getAttribute("data-value"));return t},p.focus=function(){e.autoFocus(b,!0)},i(b,a),p.enabled(!0),p.visible(!0)}return o});