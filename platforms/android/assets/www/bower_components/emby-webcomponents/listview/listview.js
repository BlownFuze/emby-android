define(["itemHelper","mediaInfo","indicators","clearButtonStyle","css!./listview"],function(e,i,a){function t(t,s){var d="",r=0,n=s.action||"link",l="large"==s.imageSize,o=s.enableOverview;return d+=t.map(function(t){var d="",m="itemAction clearButton listItem",v=80;l&&(m+=" largeImage",v=500),d+='<button class="'+m+'" data-index="'+r+'" data-action="'+n+'" data-isfolder="'+t.IsFolder+'" data-id="'+t.Id+'"  data-serverid="'+t.ServerId+'" data-type="'+t.Type+'">';var c=Emby.Models.imageUrl(t,{width:v,type:"Primary"});c||(c=Emby.Models.thumbImageUrl(t,{width:v,type:"Thumb"})),d+=c?'<div class="listItemImage lazy" data-src="'+c+'" item-icon>':'<div class="listItemImage" item-icon>';var I="";I+=a.getPlayedIndicatorHtml(t),I&&(d+='<div class="indicators">'+I+"</div>");var u=a.getProgressBarHtml(t);u&&(d+=u),d+="</div>";var y=[];s.showParentTitle&&("Episode"==t.Type?y.push(t.SeriesName||"&nbsp;"):"MusicAlbum"==t.Type&&y.push(t.AlbumArtist||"&nbsp;"));var p=e.getDisplayName(t);s.showIndexNumber&&null!=t.IndexNumber&&(p=t.IndexNumber+". "+p),y.push(p),"Audio"==t.Type&&y.push(t.ArtistItems.map(function(e){return e.Name}).join(", ")||"&nbsp;");var b=y.length;s.enableSideMediaInfo||b++,o&&t.Overview&&b++,d+='<div class="listItemBody">';for(var g=0,f=y.length;f>g;g++)d+=0==g&&l?'<h2 class="listItemTitle">':0==g?"<div>":'<div class="secondary">',d+=y[g]||"&nbsp;",d+=0==g&&l?"</h2>":"</div>";return s.enableSideMediaInfo||(d+='<div class="secondary listItemMediaInfo">'+i.getPrimaryMediaInfoHtml(t)+"</div>"),o&&t.Overview&&(d+='<div class="secondary overview">',d+=t.Overview,d+="</div>"),d+="</div>",s.enableSideMediaInfo&&(d+='<div class="secondary listItemMediaInfo">'+i.getPrimaryMediaInfoHtml(t)+"</div>"),d+="</button>",r++,d}).join("")}return{getListViewHtml:t}});