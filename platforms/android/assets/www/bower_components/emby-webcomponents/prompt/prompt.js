define(["paperdialoghelper","layoutManager","globalize","dialogText","html!./icons.html","css!./style.css","paper-button","paper-input"],function(t,e,n,o){function i(i,a,r){var l={removeOnClose:!0},p=!1,c=!1;e.tv?(l.size="fullscreen",p=!0,c=!0):(l.modal=!1,l.entryAnimationDuration=160,l.exitAnimationDuration=200);var s=t.createDialog(l);s.classList.add("promptDialog");var u="",d="";u+='<div class="promptDialogContent">',p&&(u+='<paper-icon-button tabindex="-1" icon="dialog:arrow-back" class="btnPromptExit"></paper-icon-button>'),i.title&&(u+="<h2>",u+=i.title,u+="</h2>"),u+='<paper-input autoFocus class="txtPromptValue"></paper-input>',i.description&&(u+='<div class="fieldDescription">',u+=i.description,u+="</div>"),u+="<br/>",c?u+='<paper-button raised class="btnSubmit"><iron-icon icon="dialog:check"></iron-icon><span>'+n.translate(o.buttonOk)+"</span></paper-button>":(u+='<div style="text-align:right;">',u+='<paper-button class="btnSubmit">'+n.translate(o.buttonOk)+"</paper-button>",u+='<paper-button class="btnPromptExit">'+n.translate(o.buttonCancel)+"</paper-button>",u+="</div>"),u+="</div>",s.innerHTML=u,i.text&&(s.querySelector(".txtPromptValue").value=i.text),i.label&&(s.querySelector(".txtPromptValue").label=i.label),document.body.appendChild(s),s.querySelector(".btnSubmit").addEventListener("click",function(){d=s.querySelector(".txtPromptValue").value,t.close(s)}),s.querySelector(".btnPromptExit").addEventListener("click",function(){t.close(s)}),s.addEventListener("iron-overlay-closed",function(){var t=d;t?a(t):r()}),t.open(s)}return function(t){return new Promise(function(e,n){"string"==typeof t&&(t={title:"",text:t}),i(t,e,n)})}});