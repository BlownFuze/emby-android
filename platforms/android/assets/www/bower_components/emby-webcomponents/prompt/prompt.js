define(["dialogHelper","layoutManager","dialogText","html!./icons.html","css!./style.css","paper-button","paper-icon-button-light","paper-input"],function(t,e,n){function i(t,e,n,i){var o=n?"":' tabindex="-1"';return i=i?" autofocus":"",'<button is="paper-icon-button-light" class="'+e+'"'+o+i+'><iron-icon icon="'+t+'"></iron-icon></button>'}return function(o){"string"==typeof o&&(o={title:"",text:o});var r={removeOnClose:!0},a=!1,l=!1;e.tv?(r.size="fullscreen",a=!0,l=!0):(r.modal=!1,r.entryAnimationDuration=160,r.exitAnimationDuration=200);var u=t.createDialog(r);u.classList.add("promptDialog");var c="",p="";return c+='<div class="promptDialogContent">',a&&(c+=i("dialog:arrow-back","btnPromptExit",!1)),o.title&&(c+="<h2>",c+=o.title,c+="</h2>"),c+="<form>",c+='<paper-input autoFocus class="txtPromptValue" value="'+(o.value||"")+'" label="'+(o.label||"")+'"></paper-input>',o.description&&(c+='<div class="fieldDescription">',c+=o.description,c+="</div>"),c+="<br/>",l?c+='<paper-button raised class="btnSubmit"><iron-icon icon="dialog:check"></iron-icon><span>'+n.get("Ok")+"</span></paper-button>":(c+='<div class="buttons">',c+='<paper-button class="btnSubmit">'+n.get("Ok")+"</paper-button>",c+='<paper-button class="btnPromptExit">'+n.get("Cancel")+"</paper-button>",c+="</div>"),c+="</form>",c+="</div>",u.innerHTML=c,document.body.appendChild(u),u.querySelector("form").addEventListener("submit",function(e){return p=u.querySelector(".txtPromptValue").value,e.preventDefault(),e.stopPropagation(),setTimeout(function(){t.close(u)},300),!1}),u.querySelector(".btnSubmit").addEventListener("click",function(){var t=document.createElement("input");t.setAttribute("type","submit"),t.style.display="none";var e=u.querySelector("form");e.appendChild(t),t.click(),e.removeChild(t)}),u.querySelector(".btnPromptExit").addEventListener("click",function(){t.close(u)}),t.open(u).then(function(){var t=p;return t?t:Promise.reject()})}});