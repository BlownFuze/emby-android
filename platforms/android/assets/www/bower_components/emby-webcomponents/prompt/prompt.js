define(["paperdialoghelper","layoutManager","globalize","dialogText","html!./icons.html","css!./style.css","paper-button","paper-input"],function(t,e,n,i){function o(o,r,a){var l={removeOnClose:!0},p=!1,c=!1;e.tv?(l.size="fullscreen",p=!0,c=!0):(l.modal=!1,l.entryAnimationDuration=160,l.exitAnimationDuration=200);var u=t.createDialog(l);u.classList.add("promptDialog");var s="",d="";s+='<div class="promptDialogContent">',p&&(s+='<paper-icon-button tabindex="-1" icon="dialog:arrow-back" class="btnPromptExit"></paper-icon-button>'),o.title&&(s+="<h2>",s+=o.title,s+="</h2>"),s+="<form>",s+='<paper-input autoFocus class="txtPromptValue" value="'+(o.value||"")+'" label="'+(o.label||"")+'"></paper-input>',o.description&&(s+='<div class="fieldDescription">',s+=o.description,s+="</div>"),s+="<br/>",c?s+='<paper-button raised class="btnSubmit"><iron-icon icon="dialog:check"></iron-icon><span>'+n.translate(i.buttonOk)+"</span></paper-button>":(s+='<div style="text-align:right;">',s+='<paper-button class="btnSubmit">'+n.translate(i.buttonOk)+"</paper-button>",s+='<paper-button class="btnPromptExit">'+n.translate(i.buttonCancel)+"</paper-button>",s+="</div>"),s+="</form>",s+="</div>",u.innerHTML=s,document.body.appendChild(u),u.querySelector("form").addEventListener("submit",function(e){return d=u.querySelector(".txtPromptValue").value,t.close(u),e.preventDefault(),!1}),u.querySelector(".btnSubmit").addEventListener("click",function(){var t=document.createElement("input");t.setAttribute("type","submit"),t.style.display="none";var e=u.querySelector("form");e.appendChild(t),t.click(),e.removeChild(t)}),u.querySelector(".btnPromptExit").addEventListener("click",function(){t.close(u)}),u.addEventListener("iron-overlay-closed",function(){var t=d;t?r(t):a()}),t.open(u)}return function(t){return new Promise(function(e,n){"string"==typeof t&&(t={title:"",text:t}),o(t,e,n)})}});