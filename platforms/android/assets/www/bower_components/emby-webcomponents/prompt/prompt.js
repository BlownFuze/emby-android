define(["dialogHelper","layoutManager","globalize","html!./../icons/nav.html","css!./style.css","paper-button","paper-icon-button-light","emby-input"],function(t,e,n){function o(t,e,n,o){var i=n?"":' tabindex="-1"';return o=o?" autofocus":"",'<button is="paper-icon-button-light" class="'+e+'"'+i+o+'><iron-icon icon="'+t+'"></iron-icon></button>'}return function(i){"string"==typeof i&&(i={title:"",text:i});var r={removeOnClose:!0},a=!1,s=!1;e.tv?(r.size="fullscreen",a=!0,s=!0):(r.modal=!1,r.entryAnimationDuration=160,r.exitAnimationDuration=200);var l=t.createDialog(r);l.classList.add("promptDialog");var u="",c="";return u+='<div class="promptDialogContent">',a&&(u+=o("dialog:arrow-back","btnPromptExit",!1)),i.title&&(u+="<h2>",u+=i.title,u+="</h2>"),u+="<form>",u+='<div class="inputContainer">',u+='<input is="emby-input" type="text" autoFocus class="txtPromptValue" value="'+(i.value||"")+'" label="'+(i.label||"")+'"/>',i.description&&(u+='<div class="fieldDescription">',u+=i.description,u+="</div>"),u+="</div>",u+="<br/>",s?u+='<paper-button raised class="btnSubmit"><iron-icon icon="nav:check"></iron-icon><span>'+n.translate("sharedcomponents#ButtonOk")+"</span></paper-button>":(u+='<div class="buttons">',u+='<paper-button class="btnSubmit">'+n.translate("sharedcomponents#ButtonOk")+"</paper-button>",u+='<paper-button class="btnPromptExit">'+n.translate("sharedcomponents#ButtonCancel")+"</paper-button>",u+="</div>"),u+="</form>",u+="</div>",l.innerHTML=u,document.body.appendChild(l),l.querySelector("form").addEventListener("submit",function(e){return c=l.querySelector(".txtPromptValue").value,e.preventDefault(),e.stopPropagation(),setTimeout(function(){t.close(l)},300),!1}),l.querySelector(".btnSubmit").addEventListener("click",function(){var t=document.createElement("input");t.setAttribute("type","submit"),t.style.display="none";var e=l.querySelector("form");e.appendChild(t),t.click(),e.removeChild(t)}),l.querySelector(".btnPromptExit").addEventListener("click",function(){t.close(l)}),t.open(l).then(function(){var t=c;return t?t:Promise.reject()})}});