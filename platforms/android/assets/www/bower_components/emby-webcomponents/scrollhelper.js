define(["focusManager","dom","scrollStyles"],function(e,t){function n(e){var t=document,n=[];if(!t)return n;for(var o,f,r=t.documentElement,c={clientTop:r.clientTop,clientLeft:r.clientLeft},s=t.defaultView,i={pageXOffset:s.pageXOffset,pageYOffset:s.pageYOffset},l=0,a=e.length;a>l;l++)f=e[l],o=f.getBoundingClientRect?f.getBoundingClientRect():{top:0,left:0},n[l]={top:o.top+i.pageYOffset-c.clientTop,left:o.left+i.pageXOffset-c.clientLeft};return n}function o(e,t,o){var f=n([e,t]),r=f[0],c=f[1],s=o?c.left-r.left:c.top-r.top,i=t[o?"offsetWidth":"offsetHeight"];s+=o?e.scrollLeft:e.scrollTop;var l=o?e.offsetWidth:e.offsetHeight;return{start:s,center:s-l/2+i/2,end:s-l+i,size:i}}function f(e,t,n){var f=o(e,t,n);e.scrollTo?n?e.scrollTo(f.center,0):e.scrollTo(0,f.center):n?e.scrollLeft=Math.round(f.center):e.scrollTop=Math.round(f.center)}function r(t,n,o){var r=e.focusableParent(t.target);r&&f(n,r,o)}function c(e){r(e,this,!0)}function s(e){r(e,this,!1)}return{getPosition:o,centerFocus:{on:function(e,n){n?t.addEventListener(e,"focus",c,{capture:!0,passive:!0}):t.addEventListener(e,"focus",s,{capture:!0,passive:!0})},off:function(e,n){n?t.removeEventListener(e,"focus",c,{capture:!0,passive:!0}):t.removeEventListener(e,"focus",s,{capture:!0,passive:!0})}},toCenter:f}});