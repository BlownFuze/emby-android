define([],function(){function t(t,n){var o=t.querySelector("*[autofocus]");return o?(e(o),o):n!==!1&&(o=i(t)[0])?(e(o),o):null}function e(t){var e=t.tagName;("PAPER-INPUT"==e||"EMBY-DROPDOWN-MENU"==e)&&(t=t.querySelector("input")||t);try{t.focus()}catch(n){}}function n(t){return-1!=E.indexOf(t.tagName)?!0:t.classList&&t.classList.contains("focusable")?!0:!1}function o(t){for(;!n(t);)if(t=t.parentNode,!t)return null;return t}function a(t){return t.disabled?!1:"-1"==t.getAttribute("tabindex")?!1:null===t.offsetParent?!1:!0}function i(t){for(var e=(t||document).querySelectorAll(P),n=[],o=0,i=e.length;i>o;o++){var r=e[o];a(r)&&n.push(r)}return n}function r(t,e){if(-1!=T.indexOf(t.tagName))return!0;if(t.classList.contains("focuscontainer"))return!0;if(2>e){if(t.classList.contains("focuscontainer-x"))return!0}else if(3==e&&t.classList.contains("focuscontainer-down"))return!0;return!1}function s(t,e){for(;!r(t,e);)if(t=t.parentNode,!t)return document.body;return t}function f(t,e){return{pageYOffset:t.pageYOffset,pageXOffset:t.pageXOffset,clientTop:e.clientTop,clientLeft:e.clientLeft}}function u(t,e){var n={top:0,left:0};return t.getBoundingClientRect&&(n=t.getBoundingClientRect()),{top:n.top+e.pageYOffset-e.clientTop,left:n.left+e.pageXOffset-e.clientLeft}}function c(t,e){var n=u(t,e),o=n.top-e.pageXOffset,a=n.left-e.pageYOffset,i=t.offsetWidth,r=t.offsetHeight;return{left:a,top:o,width:i,height:r,right:a+i,bottom:o+r}}function l(n,i){n=n||document.activeElement,n&&(n=o(n));var r=n?s(n,i):document.body;if(!n)return void t(r,!0);for(var u=h(n,"focusable"),l=n.ownerDocument,d=f(l.defaultView,l.documentElement),p=c(n,d),g=[],m=r.querySelectorAll(P),v=0,M=m.length;M>v;v++){var E=m[v];if(E!=n&&E!=u&&a(E)){var T=c(E,d);switch(i){case 0:if(T.left>=p.left)continue;if(T.right==p.right)continue;break;case 1:if(T.right<=p.right)continue;if(T.left==p.left)continue;break;case 2:if(T.top>=p.top)continue;if(T.bottom>=p.bottom)continue;break;case 3:if(T.bottom<=p.bottom)continue;if(T.top<=p.top)continue}g.push({element:E,clientRect:T})}}var O=b(g,p,i);if(O.length){var y=O[0].node,A=h(y,"focusable");A&&A!=y&&n&&h(n,"focusable")!=A&&(y=A),e(y)}}function h(t,e){for(;!t.classList||!t.classList.contains(e);)if(t=t.parentNode,!t)return null;return t}function d(t,e,n,o){return n>=t&&e>=n||o>=t&&e>=o}function p(t,e,n,o){return d(t,e,n,o)||d(n,o,t,e)}function b(t,e,n){O&&m();for(var o=[],a=parseFloat(e.left)||0,i=parseFloat(e.top)||0,r=parseFloat(a+e.width-1)||a,s=parseFloat(i+e.height-1)||i,f=(Math.min,Math.max,e.left+e.width/2),u=e.top+e.height/2,c=0,l=t.length;l>c;c++){var h,d,b,M,E=t[c],T=E.element,P=E.clientRect,y=P.left,A=P.top,N=y+P.width-1,R=A+P.height-1,L=p(a,r,y,N),w=p(i,s,A,R),C=P.left+P.width/2,I=P.top+P.height/2;switch(n){case 0:h=b=Math.abs(a-Math.min(a,N)),d=w?0:Math.abs(u-I),M=Math.abs(u-I);break;case 1:h=b=Math.abs(r-Math.max(r,y)),d=w?0:Math.abs(u-I),M=Math.abs(u-I);break;case 2:d=M=Math.abs(i-Math.min(i,R)),h=L?0:Math.abs(f-C),b=Math.abs(f-C);break;case 3:d=M=Math.abs(s-Math.max(s,A)),h=L?0:Math.abs(f-C),b=Math.abs(f-C)}O&&g(T,h,d);var x=Math.sqrt(h*h+d*d),B=Math.sqrt(b*b+M*M);o.push({node:T,distX:h,distY:d,distT:x,distT2:B})}return o.sort(v),o}function g(t,e,n){var o=t.querySelector("focusInfo");o||(o=document.createElement("div"),o.classList.add("focusInfo"),t.appendChild(o),"static"==getComputedStyle(t,null).getPropertyValue("position")&&(t.style.position="relative"),o.style.position="absolute",o.style.left="0",o.style.top="0",o.style.color="white",o.style.backgroundColor="red",o.style.padding="2px"),o.innerHTML=Math.round(e)+","+Math.round(n)}function m(){for(var t=document.querySelectorAll(".focusInfo"),e=0,n=t.length;n>e;e++)t[e].parentNode.removeChild(t[e])}function v(t,e){var n=t.distT-e.distT;return 0==n?t.distT2-e.distT2:n}function M(t){var e=document.activeElement;e.value=t}var E=["INPUT","TEXTAREA","SELECT","BUTTON","A","PAPER-BUTTON","PAPER-INPUT","PAPER-TEXTAREA","PAPER-FAB","PAPER-CHECKBOX","PAPER-ICON-ITEM","PAPER-MENU-ITEM","EMBY-DROPDOWN-MENU"],T=["BODY","DIALOG"],P=E.join(",")+",.focusable",O=!1;return{autoFocus:t,focus:e,focusableParent:o,getFocusableElements:i,moveLeft:function(t){l(t,0)},moveRight:function(t){l(t,1)},moveUp:function(t){l(t,2)},moveDown:function(t){l(t,3)},sendText:M,isCurrentlyFocusable:a}});