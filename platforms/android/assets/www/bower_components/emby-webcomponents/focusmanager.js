define([],function(){function t(t,n){var a=t.querySelector("*[autofocus]");return a?(e(a),a):n!==!1&&(a=i(t)[0])?(e(a),a):null}function e(t){var e=t.tagName;("PAPER-INPUT"==e||"EMBY-DROPDOWN-MENU"==e)&&(t=t.querySelector("input")||t);try{t.focus()}catch(n){}}function n(t){return-1!=M.indexOf(t.tagName)?!0:t.classList&&t.classList.contains("focusable")?!0:!1}function a(t){for(;!n(t);)if(t=t.parentNode,!t)return null;return t}function o(t){return t.disabled?!1:"-1"==t.getAttribute("tabindex")?!1:null===t.offsetParent?!1:!0}function i(t){for(var e=(t||document).querySelectorAll(E),n=[],a=0,i=e.length;i>a;a++){var r=e[a];o(r)&&n.push(r)}return n}function r(t,e){if(-1!=v.indexOf(t.tagName))return!0;if(t.classList.contains("focuscontainer"))return!0;if(2>e){if(t.classList.contains("focuscontainer-x"))return!0}else if(3==e&&t.classList.contains("focuscontainer-down"))return!0;return!1}function f(t,e){for(;!r(t,e);)if(t=t.parentNode,!t)return document.body;return t}function c(t,e){return{pageYOffset:t.pageYOffset,pageXOffset:t.pageXOffset,clientTop:e.clientTop,clientLeft:e.clientLeft}}function s(t,e){var n={top:0,left:0};return t.getBoundingClientRect&&(n=t.getBoundingClientRect()),{top:n.top+e.pageYOffset-e.clientTop,left:n.left+e.pageXOffset-e.clientLeft}}function u(t,e){var n=s(t,e),a=n.top-e.pageXOffset,o=n.left-e.pageYOffset,i=t.offsetWidth,r=t.offsetHeight;return{left:o,top:a,width:i,height:r,right:o+i,bottom:a+r}}function l(n,i){n=n||document.activeElement,n&&(n=a(n));var r=n?f(n,i):document.body;if(!n)return void t(r,!0);for(var s=h(n,"focusable"),l=n.ownerDocument,d=c(l.defaultView,l.documentElement),b=u(n,d),g=[],m=r.querySelectorAll(E),M=0,v=m.length;v>M;M++){var T=m[M];if(T!=n&&T!=s&&o(T)){var P=u(T,d);switch(i){case 0:if(P.left>=b.left)continue;if(P.right==b.right)continue;break;case 1:if(P.right<=b.right)continue;if(P.left==b.left)continue;break;case 2:if(P.top>=b.top)continue;if(P.bottom>=b.bottom)continue;break;case 3:if(P.bottom<=b.bottom)continue;if(P.top<=b.top)continue}g.push({element:T,clientRect:P})}}var O=p(g,b,i);if(O.length){var A=O[0].node,N=h(A,"focusable");N&&N!=A&&n&&h(n,"focusable")!=N&&(A=N),e(A)}}function h(t,e){for(;!t.classList||!t.classList.contains(e);)if(t=t.parentNode,!t)return null;return t}function d(t,e,n,a){return n>=t&&e>=n||a>=t&&e>=a}function b(t,e,n,a){return d(t,e,n,a)||d(n,a,t,e)}function p(t,e,n){for(var a=[],o=parseFloat(e.left)||0,i=parseFloat(e.top)||0,r=parseFloat(o+e.width-1)||o,f=parseFloat(i+e.height-1)||i,c=(Math.min,Math.max,e.left+e.width/2),s=e.top+e.height/2,u=0,l=t.length;l>u;u++){var h,d,p,m,M=t[u],v=M.element,E=M.clientRect,T=E.left,P=E.top,O=T+E.width-1,A=P+E.height-1,N=b(o,r,T,O),R=b(i,f,P,A),L=E.left+E.width/2,w=E.top+E.height/2;switch(n){case 0:h=p=Math.abs(o-Math.min(o,O)),d=R?0:Math.abs(s-w),m=Math.abs(s-w);break;case 1:h=p=Math.abs(r-Math.max(r,T)),d=R?0:Math.abs(s-w),m=Math.abs(s-w);break;case 2:d=m=Math.abs(i-Math.min(i,A)),h=N?0:Math.abs(c-L),p=Math.abs(c-L);break;case 3:d=m=Math.abs(f-Math.max(f,P)),h=N?0:Math.abs(c-L),p=Math.abs(c-L)}var B=Math.sqrt(h*h+d*d),U=Math.sqrt(p*p+m*m);a.push({node:v,distX:h,distY:d,distT:B,distT2:U})}return a.sort(g),a}function g(t,e){var n=t.distT-e.distT;return 0==n?t.distT2-e.distT2:n}function m(t){var e=document.activeElement;e.value=t}var M=["INPUT","TEXTAREA","SELECT","BUTTON","A","PAPER-BUTTON","PAPER-INPUT","PAPER-TEXTAREA","PAPER-FAB","PAPER-CHECKBOX","PAPER-ICON-ITEM","PAPER-MENU-ITEM","EMBY-DROPDOWN-MENU"],v=["BODY","DIALOG"],E=M.join(",")+",.focusable";return{autoFocus:t,focus:e,focusableParent:a,getFocusableElements:i,moveLeft:function(t){l(t,0)},moveRight:function(t){l(t,1)},moveUp:function(t){l(t,2)},moveDown:function(t){l(t,3)},sendText:m,isCurrentlyFocusable:o}});