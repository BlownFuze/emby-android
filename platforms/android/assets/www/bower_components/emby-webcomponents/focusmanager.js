define([],function(){function t(t,n){var o=t.querySelector("*[autofocus]");o?e(o):n!==!1&&(o=i(t)[0],o&&e(o))}function e(t){var e=t.tagName;("PAPER-INPUT"==e||"PAPER-DROPDOWN-MENU"==e||"EMBY-DROPDOWN-MENU"==e)&&(t=t.querySelector("input")),t.focus()}function n(t){return-1!=P.indexOf(t.tagName)?!0:t.classList&&t.classList.contains("focusable")?!0:!1}function o(t){for(;!n(t);)if(t=t.parentNode,!t)return null;return t}function a(t){return t.disabled?!1:"-1"==t.getAttribute("tabindex")?!1:null===t.offsetParent?!1:!0}function i(t){for(var e=(t||document).querySelectorAll(M),n=[],o=0,i=e.length;i>o;o++){var r=e[o];a(r)&&n.push(r)}return n}function r(t,e){if(-1!=E.indexOf(t.tagName))return!0;if(2>e){if(t.classList.contains("focuscontainer-x"))return!0}else if(3==e&&t.classList.contains("focuscontainer-down"))return!0;return!1}function u(t,e){for(;!r(t,e);)if(t=t.parentNode,!t)return document.body;return t}function s(t,e){var n={top:0,left:0};if(!e)return n;var o=e.documentElement;t.getBoundingClientRect&&(n=t.getBoundingClientRect());var a=e.defaultView;return{top:n.top+a.pageYOffset-o.clientTop,left:n.left+a.pageXOffset-o.clientLeft}}function f(t){var e=t.ownerDocument,n=s(t,e),o=e.defaultView,a=n.top-o.pageXOffset,i=n.left-o.pageYOffset,r=t.offsetWidth,u=t.offsetHeight;return{left:i,top:a,width:r,height:u,right:i+r,bottom:a+u}}function c(n,i){n=n||document.activeElement,n&&(n=o(n));var r=n?u(n,i):document.body;if(!n)return void t(r,!0);for(var s=l(n,"focusable"),c=f(n),h=[],d=r.querySelectorAll(M),b=0,g=d.length;g>b;b++){var m=d[b];if(m!=n&&m!=s&&a(m)){var P=f(m);switch(i){case 0:if(P.left>=c.left)continue;if(P.right==c.right)continue;break;case 1:if(P.right<=c.right)continue;if(P.left==c.left)continue;break;case 2:if(P.top>=c.top)continue;if(P.bottom>=c.bottom)continue;break;case 3:if(P.bottom<=c.bottom)continue;if(P.top<=c.top)continue}h.push({element:m,clientRect:P})}}var E=p(h,c,i);if(E.length){var v=E[0].node,N=l(v,"focusable");N&&N!=v&&n&&l(n,"focusable")!=N&&(v=N),e(v)}}function l(t,e){for(;!t.classList||!t.classList.contains(e);)if(t=t.parentNode,!t)return null;return t}function h(t,e,n,o){return n>=t&&e>=n||o>=t&&e>=o}function d(t,e,n,o){return h(t,e,n,o)||h(n,o,t,e)}function p(t,e,n){v&&g();for(var o=[],a=parseFloat(e.left)||0,i=parseFloat(e.top)||0,r=parseFloat(a+e.width-1)||a,u=parseFloat(i+e.height-1)||i,s=(Math.min,Math.max,e.left+e.width/2),f=e.top+e.height/2,c=0,l=t.length;l>c;c++){var h,p,P,E,M=t[c],N=M.element,T=M.clientRect,A=T.left,R=T.top,O=A+T.width-1,y=R+T.height-1,w=d(a,r,A,O),D=d(i,u,R,y),L=T.left+T.width/2,U=T.top+T.height/2;switch(n){case 0:h=P=Math.abs(a-Math.min(a,O)),p=D?0:Math.abs(f-U),E=Math.abs(f-U);break;case 1:h=P=Math.abs(r-Math.max(r,A)),p=D?0:Math.abs(f-U),E=Math.abs(f-U);break;case 2:p=E=Math.abs(i-Math.min(i,y)),h=w?0:Math.abs(s-L),P=Math.abs(s-L);break;case 3:p=E=Math.abs(u-Math.max(u,R)),h=w?0:Math.abs(s-L),P=Math.abs(s-L)}v&&b(N,h,p);var C=Math.sqrt(h*h+p*p),I=Math.sqrt(P*P+E*E);o.push({node:N,distX:h,distY:p,distT:C,distT2:I})}return o.sort(m),o}function b(t,e,n){var o=t.querySelector("focusInfo");o||(o=document.createElement("div"),o.classList.add("focusInfo"),t.appendChild(o),"static"==getComputedStyle(t,null).getPropertyValue("position")&&(t.style.position="relative"),o.style.position="absolute",o.style.left="0",o.style.top="0",o.style.color="white",o.style.backgroundColor="red",o.style.padding="2px"),o.innerHTML=Math.round(e)+","+Math.round(n)}function g(){for(var t=document.querySelectorAll(".focusInfo"),e=0,n=t.length;n>e;e++)t[e].parentNode.removeChild(t[e])}function m(t,e){var n=t.distT-e.distT;return 0==n?t.distT2-e.distT2:n}var P=["INPUT","TEXTAREA","SELECT","BUTTON","A","PAPER-BUTTON","PAPER-INPUT","PAPER-TEXTAREA","PAPER-ICON-BUTTON","PAPER-FAB","PAPER-CHECKBOX","PAPER-ICON-ITEM","PAPER-MENU-ITEM","PAPER-DROPDOWN-MENU","EMBY-DROPDOWN-MENU"],E=["BODY","PAPER-DIALOG"],M=P.join(",")+",.focusable",v=!1;return{autoFocus:t,focus:e,focusableParent:o,getFocusableElements:i,moveLeft:function(t){c(t,0)},moveRight:function(t){c(t,1)},moveUp:function(t){c(t,2)},moveDown:function(t){c(t,3)}}});