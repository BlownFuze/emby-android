define([],function(){function t(t,n){var i=t.querySelector("*[autofocus]");return i?(e(i),i):n!==!1&&(i=a(t)[0])?(e(i),i):null}function e(t){try{t.focus()}catch(e){}}function n(t){return-1!=v.indexOf(t.tagName)?!0:t.classList&&t.classList.contains("focusable")?!0:!1}function i(t){for(;!n(t);)if(t=t.parentNode,!t)return null;return t}function o(t){if(t.disabled)return!1;if("-1"==t.getAttribute("tabindex"))return!1;if(null===t.offsetParent)return!1;if("INPUT"==t.tagName){var e=t.type;if("range"==e)return!1}return!0}function a(t){for(var e=(t||document).querySelectorAll(O),n=[],i=0,a=e.length;a>i;i++){var r=e[i];o(r)&&n.push(r)}return n}function r(t,e){if(-1!=M.indexOf(t.tagName))return!0;if(t.classList.contains("focuscontainer"))return!0;if(2>e){if(t.classList.contains("focuscontainer-x"))return!0}else if(3==e&&t.classList.contains("focuscontainer-down"))return!0;return!1}function f(t,e){for(;!r(t,e);)if(t=t.parentNode,!t)return document.body;return t}function u(t,e){return{pageYOffset:t.pageYOffset,pageXOffset:t.pageXOffset,clientTop:e.clientTop,clientLeft:e.clientLeft}}function c(t,e){var n={top:0,left:0};return t.getBoundingClientRect&&(n=t.getBoundingClientRect()),{top:n.top+e.pageYOffset-e.clientTop,left:n.left+e.pageXOffset-e.clientLeft}}function s(t,e){var n=c(t,e),i=n.top-e.pageXOffset,o=n.left-e.pageYOffset,a=t.offsetWidth,r=t.offsetHeight;return{left:o,top:i,width:a,height:r,right:o+a,bottom:i+r}}function l(n,a){n=n||document.activeElement,n&&(n=i(n));var r=n?f(n,a):document.body;if(!n)return void t(r,!0);for(var c=h(n,"focusable"),l=n.ownerDocument,d=u(l.defaultView,l.documentElement),p=s(n,d),b=[],m=r.querySelectorAll(O),v=0,M=m.length;M>v;v++){var T=m[v];if(T!=n&&T!=c&&o(T)){var L=s(T,d);switch(a){case 0:if(L.left>=p.left)continue;if(L.right==p.right)continue;break;case 1:if(L.right<=p.right)continue;if(L.left==p.left)continue;break;case 2:if(L.top>=p.top)continue;if(L.bottom>=p.bottom)continue;break;case 3:if(L.bottom<=p.bottom)continue;if(L.top<=p.top)continue}b.push({element:T,clientRect:L})}}var w=g(b,p,a);if(w.length){var x=w[0].node,E=h(x,"focusable");E&&E!=x&&n&&h(n,"focusable")!=E&&(x=E),e(x)}}function h(t,e){for(;!t.classList||!t.classList.contains(e);)if(t=t.parentNode,!t)return null;return t}function d(t,e,n,i){return n>=t&&e>=n||i>=t&&e>=i}function p(t,e,n,i){return d(t,e,n,i)||d(n,i,t,e)}function g(t,e,n){for(var i=[],o=parseFloat(e.left)||0,a=parseFloat(e.top)||0,r=parseFloat(o+e.width-1)||o,f=parseFloat(a+e.height-1)||a,u=(Math.min,Math.max,e.left+e.width/2),c=e.top+e.height/2,s=0,l=t.length;l>s;s++){var h,d,g=t[s],m=g.element,v=g.clientRect,M=v.left,O=v.top,T=M+v.width-1,L=O+v.height-1,w=p(o,r,M,T),x=p(a,f,O,L),E=v.left+v.width/2,N=v.top+v.height/2;switch(n){case 0:h=Math.abs(o-Math.min(o,T)),d=x?0:Math.abs(c-N);break;case 1:h=Math.abs(r-Math.max(r,M)),d=x?0:Math.abs(c-N);break;case 2:d=Math.abs(a-Math.min(a,L)),h=w?0:Math.abs(u-E);break;case 3:d=Math.abs(f-Math.max(f,O)),h=w?0:Math.abs(u-E)}var y=Math.sqrt(h*h+d*d);i.push({node:m,distX:h,distY:d,distT:y,index:s})}return i.sort(b),i}function b(t,e){var n=t.distT-e.distT;return 0!=n?n:(n=t.index-e.index,0!=n?n:0)}function m(t){var e=document.activeElement;e.value=t}var v=["INPUT","TEXTAREA","SELECT","BUTTON","A","PAPER-CHECKBOX"],M=["BODY","DIALOG"],O=v.join(",")+",.focusable";return{autoFocus:t,focus:e,focusableParent:i,getFocusableElements:a,moveLeft:function(t){l(t,0)},moveRight:function(t){l(t,1)},moveUp:function(t){l(t,2)},moveDown:function(t){l(t,3)},sendText:m,isCurrentlyFocusable:o}});