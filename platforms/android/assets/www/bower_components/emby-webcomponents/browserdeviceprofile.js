define(["browser"],function(e){function o(){var e=document.createElement("video");return!(!e.canPlayType||!e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""))}function i(){return null==d&&(d=null!=document.createElement("video").textTracks),d}function n(){return null==c&&(c=a()||r()),c}function a(){var e=document.createElement("video");return e.canPlayType("application/x-mpegURL").replace(/no/,"")||e.canPlayType("application/vnd.apple.mpegURL").replace(/no/,"")?!0:!1}function r(){return null!=window.MediaSource?!e.firefox:!1}function t(e){var o;return o="opus"==e?'audio/ogg; codecs="opus"':"webma"==e?"audio/webm":"audio/"+e,document.createElement("audio").canPlayType(o).replace(/no/,"")?!0:!1}var d,c;return function(){var a=1e8,r=document.createElement("video"),d=r.canPlayType("video/webm").replace(/no/,""),c=e.chrome,s={};s.MaxStreamingBitrate=a,s.MaxStaticBitrate=1e8,s.MusicStreamingTranscodingBitrate=Math.min(a,192e3),s.DirectPlayProfiles=[];var p=[],l=r.canPlayType('video/mp4; codecs="avc1.640029, mp4a.69"').replace(/no/,"")||r.canPlayType('video/mp4; codecs="avc1.640029, mp4a.6B"').replace(/no/,"");r.canPlayType('audio/mp4; codecs="ac-3"').replace(/no/,"")&&(e.safari||p.push("ac3")),c&&l&&p.push("mp3"),r.canPlayType('video/mp4; codecs="avc1.640029, mp4a.40.2"').replace(/no/,"")&&p.push("aac"),c||l&&p.push("mp3"),o()&&s.DirectPlayProfiles.push({Container:"mp4,m4v",Type:"Video",VideoCodec:"h264",AudioCodec:p.join(",")}),c&&s.DirectPlayProfiles.push({Container:"mkv,mov",Type:"Video",VideoCodec:"h264",AudioCodec:p.join(",")}),["opus","mp3","aac","flac","webma"].filter(t).forEach(function(e){s.DirectPlayProfiles.push({Container:"webma"==e?"webma,webm":e,Type:"Audio"})}),d&&s.DirectPlayProfiles.push({Container:"webm",Type:"Video"}),s.TranscodingProfiles=[],["opus","mp3","aac"].filter(t).forEach(function(e){s.TranscodingProfiles.push({Container:e,Type:"Audio",AudioCodec:e,Context:"Streaming",Protocol:"http"}),s.TranscodingProfiles.push({Container:e,Type:"Audio",AudioCodec:e,Context:"Static",Protocol:"http"})}),c&&!e.mobile&&s.TranscodingProfiles.push({Container:"mkv",Type:"Video",AudioCodec:p.join(","),VideoCodec:"h264",Context:"Streaming"}),n()&&s.TranscodingProfiles.push({Container:"ts",Type:"Video",AudioCodec:p.join(","),VideoCodec:"h264",Context:"Streaming",Protocol:"hls"}),d&&s.TranscodingProfiles.push({Container:"webm",Type:"Video",AudioCodec:"vorbis",VideoCodec:"vpx",Context:"Streaming",Protocol:"http"}),s.TranscodingProfiles.push({Container:"mp4",Type:"Video",AudioCodec:p.join(","),VideoCodec:"h264",Context:"Streaming",Protocol:"http"}),s.TranscodingProfiles.push({Container:"mp4",Type:"Video",AudioCodec:p.join(","),VideoCodec:"h264",Context:"Static",Protocol:"http"}),s.ContainerProfiles=[],s.CodecProfiles=[],s.CodecProfiles.push({Type:"Audio",Conditions:[{Condition:"LessThanEqual",Property:"AudioChannels",Value:"2"}]});var u="6";return r.canPlayType('video/mp4; codecs="avc1.640029, mp4a.40.5"').replace(/no/,"")||s.CodecProfiles.push({Type:"VideoAudio",Codec:"aac",Conditions:[{Condition:"NotEquals",Property:"AudioProfile",Value:"HE-AAC"},{Condition:"LessThanEqual",Property:"AudioChannels",Value:u},{Condition:"Equals",Property:"IsSecondaryAudio",Value:"false",IsRequired:"false"}]}),s.CodecProfiles.push({Type:"VideoAudio",Conditions:[{Condition:"LessThanEqual",Property:"AudioChannels",Value:u},{Condition:"Equals",Property:"IsSecondaryAudio",Value:"false",IsRequired:"false"}]}),s.CodecProfiles.push({Type:"Video",Codec:"h264",Conditions:[{Condition:"NotEquals",Property:"IsAnamorphic",Value:"true",IsRequired:!1},{Condition:"EqualsAny",Property:"VideoProfile",Value:"high|main|baseline|constrained baseline"},{Condition:"LessThanEqual",Property:"VideoLevel",Value:"41"}]}),s.CodecProfiles.push({Type:"Video",Codec:"vpx",Conditions:[{Condition:"NotEquals",Property:"IsAnamorphic",Value:"true",IsRequired:!1}]}),s.SubtitleProfiles=[],i()&&s.SubtitleProfiles.push({Format:"vtt",Method:"External"}),s.ResponseProfiles=[],s.ResponseProfiles.push({Type:"Video",Container:"m4v",MimeType:"video/mp4"}),s.ResponseProfiles.push({Type:"Video",Container:"mov",MimeType:"video/webm"}),s}()});