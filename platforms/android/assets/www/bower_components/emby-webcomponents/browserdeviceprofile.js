define(["browser"],function(e){function o(){var e=document.createElement("video");return!(!e.canPlayType||!e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""))}function i(){if(d)return d;var i=[],n=document.createElement("video");return n.canPlayType("video/webm").replace(/no/,"")&&i.push("webm"),n.canPlayType('audio/mp4; codecs="ac-3"').replace(/no/,"")&&i.push("ac3"),e.chrome&&i.push("mkv"),o()&&i.push("h264"),(document.createElement("audio").canPlayType("audio/aac").replace(/no/,"")||e.firefox)&&i.push("aac"),document.createElement("audio").canPlayType("audio/mp3").replace(/no/,"")&&i.push("mp3"),document.createElement("audio").canPlayType('audio/ogg; codecs="opus"').replace(/no/,"")&&i.push("opus"),document.createElement("audio").canPlayType("audio/webm").replace(/no/,"")&&i.push("webma"),document.createElement("audio").canPlayType("audio/flac").replace(/no/,"")&&i.push("flac"),d=i,i}function n(){return null==c&&(c=null!=document.createElement("video").textTracks),c}function a(){return null==u&&(u=t()||r()),u}function t(){var e=document.createElement("video");return e.canPlayType("application/x-mpegURL").replace(/no/,"")||e.canPlayType("application/vnd.apple.mpegURL").replace(/no/,"")?!0:!1}function r(){return null!=window.MediaSource?!e.firefox:!1}var d,c,u;return function(){var o=1e8,t=i(),r=-1!=t.indexOf("webm"),d=-1!=t.indexOf("ac3"),c=-1!=t.indexOf("mp3"),u=-1!=t.indexOf("aac"),s=-1!=t.indexOf("mkv"),p={};p.MaxStreamingBitrate=o,p.MaxStaticBitrate=1e8,p.MusicStreamingTranscodingBitrate=Math.min(o,192e3),p.DirectPlayProfiles=[];var l=[];s&&c&&l.push("mp3"),u&&l.push("aac"),s||c&&l.push("mp3"),d&&l.push("ac3"),-1!=t.indexOf("h264")&&p.DirectPlayProfiles.push({Container:"mp4,m4v",Type:"Video",VideoCodec:"h264",AudioCodec:l.join(",")}),s&&p.DirectPlayProfiles.push({Container:"mkv,mov",Type:"Video",VideoCodec:"h264",AudioCodec:l.join(",")}),["opus","mp3","aac","flac","webma"].forEach(function(e){-1!=t.indexOf(e)&&p.DirectPlayProfiles.push({Container:"webma"==e?"webma,webm":e,Type:"Audio"})}),r&&p.DirectPlayProfiles.push({Container:"webm",Type:"Video"}),p.TranscodingProfiles=[],["opus","mp3","aac"].forEach(function(e){-1!=t.indexOf(e)&&(p.TranscodingProfiles.push({Container:e,Type:"Audio",AudioCodec:e,Context:"Streaming",Protocol:"http"}),p.TranscodingProfiles.push({Container:e,Type:"Audio",AudioCodec:e,Context:"Static",Protocol:"http"}))}),s&&!e.mobile&&p.TranscodingProfiles.push({Container:"mkv",Type:"Video",AudioCodec:l.join(","),VideoCodec:"h264",Context:"Streaming"}),a()&&p.TranscodingProfiles.push({Container:"ts",Type:"Video",AudioCodec:l.join(","),VideoCodec:"h264",Context:"Streaming",Protocol:"hls"}),r&&p.TranscodingProfiles.push({Container:"webm",Type:"Video",AudioCodec:"vorbis",VideoCodec:"vpx",Context:"Streaming",Protocol:"http"}),p.TranscodingProfiles.push({Container:"mp4",Type:"Video",AudioCodec:l.join(","),VideoCodec:"h264",Context:"Streaming",Protocol:"http"}),p.TranscodingProfiles.push({Container:"mp4",Type:"Video",AudioCodec:l.join(","),VideoCodec:"h264",Context:"Static",Protocol:"http"}),p.ContainerProfiles=[],p.CodecProfiles=[],p.CodecProfiles.push({Type:"Audio",Conditions:[{Condition:"LessThanEqual",Property:"AudioChannels",Value:"2"}]});var m="6";return p.CodecProfiles.push({Type:"VideoAudio",Codec:"aac",Container:"mkv,mov",Conditions:[{Condition:"NotEquals",Property:"AudioProfile",Value:"HE-AAC"},{Condition:"LessThanEqual",Property:"AudioChannels",Value:m},{Condition:"Equals",Property:"IsSecondaryAudio",Value:"false",IsRequired:"false"}]}),p.CodecProfiles.push({Type:"VideoAudio",Conditions:[{Condition:"LessThanEqual",Property:"AudioChannels",Value:m},{Condition:"Equals",Property:"IsSecondaryAudio",Value:"false",IsRequired:"false"}]}),p.CodecProfiles.push({Type:"Video",Codec:"h264",Conditions:[{Condition:"NotEquals",Property:"IsAnamorphic",Value:"true",IsRequired:!1},{Condition:"EqualsAny",Property:"VideoProfile",Value:"high|main|baseline|constrained baseline"},{Condition:"LessThanEqual",Property:"VideoLevel",Value:"41"}]}),p.CodecProfiles.push({Type:"Video",Codec:"vpx",Conditions:[{Condition:"NotEquals",Property:"IsAnamorphic",Value:"true",IsRequired:!1}]}),p.SubtitleProfiles=[],n()&&p.SubtitleProfiles.push({Format:"vtt",Method:"External"}),p.ResponseProfiles=[],p.ResponseProfiles.push({Type:"Video",Container:"m4v",MimeType:"video/mp4"}),p.ResponseProfiles.push({Type:"Video",Container:"mov",MimeType:"video/webm"}),p}()});