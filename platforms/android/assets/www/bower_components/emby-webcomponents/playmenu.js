define(["actionsheet","datetime","playbackManager","globalize","appSettings"],function(e,a,s,n,t){function r(r){var l=r.item,u=l.Type,o=l.MediaType,d=l.IsFolder,p=l.Id,c=l.ChannelId,m=l.ServerId,h=l.UserData?l.UserData.PlaybackPositionTicks:null,y=i&&"Video"==o&&!d&&t.enableExternalPlayers(),f="Program"==u?c:p;if(!h&&"Audio"!=o&&!d&&!y)return void s.play({ids:[f],serverId:m});var b=[];h?(b.push({name:n.translate("sharedcomponents#ResumeAt",a.getDisplayRunningTime(h)),id:"resume"}),b.push({name:n.translate("sharedcomponents#PlayFromBeginning"),id:"play"})):b.push({name:n.translate("sharedcomponents#Play"),id:"play"}),y&&b.push({name:n.translate("ButtonPlayExternalPlayer"),id:"externalplayer"}),s.canQueueMediaType(o)&&b.push({name:n.translate("sharedcomponents#Queue"),id:"queue"}),("Audio"==u||"MusicAlbum"==u||"MusicArtist"==u||"MusicGenre"==u)&&b.push({name:n.translate("sharedcomponents#InstantMix"),id:"instantmix"}),(d||"MusicArtist"==u||"MusicGenre"==u)&&b.push({name:n.translate("sharedcomponents#Shuffle"),id:"shuffle"}),e.show({items:b,positionTo:r.positionTo}).then(function(e){switch(e){case"play":s.play({ids:[f],serverId:m});break;case"externalplayer":LibraryBrowser.playInExternalPlayer(f);break;case"resume":s.play({ids:[f],startPositionTicks:h,serverId:m});break;case"queue":s.queue(l);break;case"instantmix":s.instantMix(l);break;case"shuffle":s.shuffle(l)}})}var i=null!=window.Dashboard;return{show:r}});