define(["actionsheet","datetime","playbackManager","globalize"],function(e,s,a,n){function i(i){var t=i.item,r=t.Type,u=t.MediaType,o=t.IsFolder,d=t.Id,l=(t.ServerId,t.UserData?t.UserData.PlaybackPositionTicks:null);if(!l&&"Audio"!=u&&!o)return void a.play({items:[t]});var c=[];l?(c.push({name:n.translate("sharedcomponents#ResumeAt",s.getDisplayRunningTime(l)),id:"resume"}),c.push({name:n.translate("sharedcomponents#PlayFromBeginning"),id:"play"})):c.push({name:n.translate("sharedcomponents#Play"),id:"play"}),a.canQueueMediaType(u)&&c.push({name:n.translate("sharedcomponents#Queue"),id:"queue"}),("Audio"==r||"MusicAlbum"==r||"MusicArtist"==r||"MusicGenre"==r)&&c.push({name:n.translate("sharedcomponents#InstantMix"),id:"instantmix"}),(o||"MusicArtist"==r||"MusicGenre"==r)&&c.push({name:n.translate("sharedcomponents#Shuffle"),id:"shuffle"}),e.show({items:c,positionTo:i.positionTo}).then(function(e){switch(e){case"play":a.play({ids:[d],serverId:t.ServerId});break;case"resume":a.play({ids:[d],startPositionTicks:l,serverId:t.ServerId});break;case"queue":a.queue(t);break;case"instantmix":a.instantMix(t);break;case"shuffle":a.shuffle(t)}})}return{show:i}});