define(["imageLoader","itemShortcuts","connectionManager"],function(a,e,r){function i(a,e){var i="card "+(e.shape||"portrait")+"Card personCard";(e.block||e.rows)&&(i+=" block");for(var d="",n=0,s=e.serverId,o=r.getApiClient(s),c=0,l=a.length;l>c;c++){e.rows&&0==n&&(d+='<div class="cardColumn">');var v=a[c];d+=t(v,o,s,e,i),n++,e.rows&&n>=e.rows&&(n=0,d+="</div>")}return d}function d(a,e,r){return a.PrimaryImageTag?r.getScaledImageUrl(a.Id,{maxWidth:e,tag:a.PrimaryImageTag,type:"Primary"}):null}function t(a,e,r,i,t){t+=" itemAction scalableCard";var n=d(a,i.width,e),s="cardImageContainer";i.coverImage&&(s+=" coveredImage");var o=n?'<div class="'+s+' lazy" data-src="'+n+'">':'<div class="'+s+'">';n||(o+='<i class="md-icon cardImageIcon">person</i>');var c="";c+='<div class="cardText">'+a.Name+"</div>",c+=a.Role?'<div class="cardText">as '+a.Role+"</div>":a.Type?'<div class="cardText">'+Globalize.translate("core#"+a.Type)+"</div>":'<div class="cardText">&nbsp;</div>';var l='<button type="button" data-isfolder="'+a.IsFolder+'" data-type="'+a.Type+'" data-action="link" data-id="'+a.Id+'" data-serverid="'+r+'" raised class="'+t+'"> <div class="visualCardBox cardBox"><div class="cardScalable"><div class="cardPadder"></div><div class="cardContent">'+o+'</div></div></div><div class="cardFooter">'+c+"</div></div></button>";return l}function n(r,d){if(d.parentContainer){if(!document.body.contains(d.parentContainer))return;if(!r.length)return void d.parentContainer.classList.add("hide");d.parentContainer.classList.remove("hide")}var t=i(r,d);d.itemsContainer.innerHTML=t,a.lazyChildren(d.itemsContainer),e.off(d.itemsContainer),e.on(d.itemsContainer)}return{buildPeopleCards:n}});