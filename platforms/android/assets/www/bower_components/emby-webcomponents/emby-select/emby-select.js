define(["layoutManager","browser","actionsheet","css!./emby-select"],function(e,t,s){function n(){return t.xboxOne?!1:t.tv?!0:e.tv?!1:!0}function i(e){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}function a(e,t){e.value=t}function r(e){var t=c(e),n=t?t.textContent||t.innerText:null;s.show({items:e.options,positionTo:e,title:n}).then(function(t){a(e,t),i(e)})}function c(e){for(var t=e.previousSibling;t&&"LABEL"!=t.tagName;)t=t.previousSibling;return t}function o(){var e=c(this);e&&(e.classList.add("selectLabelFocused"),e.classList.remove("selectLabelUnfocused"))}function l(){var e=c(this);e&&(e.classList.add("selectLabelUnfocused"),e.classList.remove("selectLabelFocused"))}function d(e){e.button||n()||(e.preventDefault(),r(this))}function u(t){switch(t.keyCode){case 13:return void(n()||(t.preventDefault(),r(this)));case 37:case 38:case 39:case 40:return void(e.tv&&t.preventDefault())}}var v=Object.create(HTMLSelectElement.prototype);v.createdCallback=function(){var e=this.parentNode;if(!e.classList.contains("selectContainer")){var t=this.ownerDocument.createElement("div");t.classList.add("selectContainer"),e.replaceChild(t,this),t.appendChild(this)}this.id||(this.id="select"+(new Date).getTime()),this.removeEventListener("mousedown",d),this.removeEventListener("keydown",u),this.removeEventListener("focus",o),this.removeEventListener("blur",l),this.addEventListener("mousedown",d),this.addEventListener("keydown",u),this.addEventListener("focus",o),this.addEventListener("blur",l)},v.attachedCallback=function(){if("true"!=this.getAttribute("data-embyselect")){this.setAttribute("data-embyselect","true");var e=this.ownerDocument.createElement("label");e.innerHTML=this.getAttribute("label")||"",e.classList.add("selectLabel"),e.classList.add("selectLabelUnfocused"),e.htmlFor=this.id,this.parentNode.insertBefore(e,this);var t=document.createElement("div");t.classList.add("emby-select-selectionbar"),this.parentNode.insertBefore(t,this.nextSibling)}},document.registerElement("emby-select",{prototype:v,"extends":"select"})});