module.exports=function(e){"use strict";e.registerTask("testswarm",function(t,r,s,a,u,i){var o,n,m,c=require("testswarm"),l={},h=this.async(),d=/PR-(\d+)/.exec(t);s=s||"jquery",n=e.file.readJSON(r)[s],a=a||n.browserSets,"["===a[0]&&(a=JSON.parse(a)),u=u||9e5,m=e.config([this.name,"tests"]),o=d?"Pull <a href='https://github.com/jquery/jquery/pull/"+d[1]+"'>#"+d[1]+"</a>":"Commit <a href='https://github.com/jquery/jquery/commit/"+t+"'>"+t.substr(0,10)+"</a>","basic"===i?l.basic=n.testUrl+t+"/test/index.html?module=basic":m.forEach(function(e){l[e]=n.testUrl+t+"/test/index.html?module="+e}),c.createClient({url:n.swarmUrl}).addReporter(c.reporters.cli).auth({id:n.authUsername,token:n.authToken}).addjob({name:o,runs:l,runMax:n.runMax,browserSets:a,timeout:u},function(t,r){t&&e.log.error(t),h(r)})})};