!function(e){"use strict";if("function"==typeof define&&define.amd)define(["knockout"],e);else if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var t=require("knockout");e(t)}else e(window.ko)}(function(e){"use strict";var t=function(t,n,r,a,l,u){var d=i(n,u);["onStart","onEnd","onRemove","onAdd","onUpdate","onSort","onFilter"].forEach(function(t){(d[t]||o[t])&&(d[t]=function(t,n,i,r,a){var l=e.dataFor(a.item),u=e.utils.peekObservable(i()),d=u.sortable||u.draggable,c=d.collection||d.foreach;r&&r(a,l,n,c,u),o[t]&&o[t](a,l,n,c,u)}.bind(void 0,t,a,r,d[t]))});var c=Sortable.create(t,d);return e.utils.domNodeDisposal.addDisposeCallback(t,function(){c.destroy()}),e.bindingHandlers.template.init(t,n)},n=function(t,n,o,i,r){return e.bindingHandlers.template.update(t,n,o,i,r)},o=function(t){var n=[],o=function(e,t,o,r,a){var l={event:e,itemVM:t,parentVM:o,collection:r,parentBindings:a},u=n.filter(function(e){return e.itemVM===l.itemVM})[0];if(u){n.splice(n.indexOf(u),1);var d="remove"===l.event.type?l:u,c="add"===l.event.type?l:u;i(t,d.collection,c.collection,c.event.clone,c.event)}else n.push(l)},i=function(t,n,o,i,r){var a=n(),l=a.indexOf(t),u=r.newIndex;r.item.previousElementSibling&&(u=a.indexOf(e.dataFor(r.item.previousElementSibling)),l>u&&(u+=1)),r.item.parentNode.removeChild(r.item),a.splice(l,1),n.valueHasMutated(),i&&n!==o&&(a.splice(l,0,t),n.valueHasMutated()),o().splice(u,0,t),o.valueHasMutated()};return t.onRemove=o,t.onAdd=o,t.onUpdate=function(e,t,n,o){i(t,o,o,!1,e)},t}({}),i=function(t,n){var o=function(e,t){for(var n in t)"[object Object]"===Object.prototype.toString.call(t[n])?("[object Object]"!==Object.prototype.toString.call(e[n])&&(e[n]={}),e[n]=o(e[n],t[n])):e[n]=t[n];return e},i=e.utils.peekObservable(t()).options||{};return n=o({},n),i.group&&"[object Object]"!==Object.prototype.toString.call(i.group)&&(i.group={name:i.group}),o(n,i)};e.bindingHandlers.draggable={sortableOptions:{group:{pull:"clone",put:!1},sort:!1},init:function(n,o,i,r,a){return t(n,o,i,r,a,e.bindingHandlers.draggable.sortableOptions)},update:function(t,o,i,r,a){return n(t,o,i,r,a,e.bindingHandlers.draggable.sortableOptions)}},e.bindingHandlers.sortable={sortableOptions:{group:{pull:!0,put:!0}},init:function(n,o,i,r,a){return t(n,o,i,r,a,e.bindingHandlers.sortable.sortableOptions)},update:function(t,o,i,r,a){return n(t,o,i,r,a,e.bindingHandlers.sortable.sortableOptions)}}});