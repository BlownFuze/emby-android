!function(e,t){function a(t){Dashboard.showLoadingMsg();var a=ApiClient;a.getJSON(a.getUrl("Startup/Configuration")).then(function(n){n.PreferredMetadataLanguage=e("#selectLanguage",t).val(),n.MetadataCountryCode=e("#selectCountry",t).val(),n.SaveLocalMeta=t.querySelector(".chkSaveLocalMetadata").checked,n.EnableInternetProviders=t.querySelector(".chkEnableInternetProviders").checked,a.ajax({type:"POST",data:n,url:a.getUrl("Startup/Configuration")}).then(function(){u()})})}function n(e,t){var a="";a+="<option value=''></option>";for(var n=0,o=t.length;o>n;n++){var r=t[n];a+="<option value='"+r.TwoLetterISOLanguageName+"'>"+r.DisplayName+"</option>"}e.innerHTML=a}function o(e,t){var a="";a+="<option value=''></option>";for(var n=0,o=t.length;o>n;n++){var r=t[n];a+="<option value='"+r.TwoLetterISORegionName+"'>"+r.DisplayName+"</option>"}e.innerHTML=a}function r(t,a,r,i){n(t.querySelector("#selectLanguage"),r),o(t.querySelector("#selectCountry"),i),e("#selectLanguage",t).val(a.PreferredMetadataLanguage),e("#selectCountry",t).val(a.MetadataCountryCode),Dashboard.hideLoadingMsg()}function i(e){Dashboard.showLoadingMsg();var t=ApiClient,a=t.getJSON(t.getUrl("Startup/Configuration")),n=t.getCultures(),o=t.getCountries();Promise.all([a,n,o]).then(function(t){r(e,t[0],t[1],t[2])})}function u(){Dashboard.navigate("wizardlivetvtuner.html")}function g(){var e=this;return a(e),!1}e(t).on("pageinit","#wizardSettingsPage",function(){var t=this;e(".wizardSettingsForm",t).off("submit",g).on("submit",g)}).on("pageshow","#wizardSettingsPage",function(){var e=this;i(e)})}(jQuery,document,window);