function addLegacyDependencies(e,a){var n=-1!=a.toLowerCase().indexOf("/configurationpage?");n&&(e.push("jqmpopup"),e.push("jqmcollapsible"),e.push("jqmcheckbox")),e.push("jqmcontrolgroup"),e.push("jqmlistview"),e.push("scripts/notifications")}function pageClassOn(e,a,n){document.addEventListener(e,function(e){var o=e.target;o.classList.contains(a)&&n.call(o,e)})}function pageIdOn(e,a,n){document.addEventListener(e,function(e){var o=e.target;o.id==a&&n.call(o,e)})}!function(){function e(){document.removeEventListener("click",e),window.Notification&&Notification.requestPermission()}document.addEventListener("click",e)}(),window.Logger={log:function(e){}};var Dashboard={filterHtml:function(e){e=e.replace("<!--","");var a=e.lastIndexOf("-->");return-1!=a&&(e=e.substring(0,a)+e.substring(a+3)),Globalize.translateDocument(e,"html")},isConnectMode:function(){if(AppInfo.isNativeApp)return!0;var e=window.location.href.toLowerCase();return-1!=e.indexOf("mediabrowser.tv")||-1!=e.indexOf("emby.media")},isRunningInCordova:function(){return"cordova"==window.appMode},onRequestFail:function(e,a){if(401==a.status){var n=a.url.toLowerCase();return-1!=n.indexOf("emby.media")||-1!=n.indexOf("mb3admin.com")?void Dashboard.hideLoadingMsg():-1!=n.indexOf("/sync")?void Dashboard.hideLoadingMsg():void(-1!=n.indexOf("/password")||-1!=n.indexOf("/authenticate")||$($.mobile.activePage).is(".standalonePage")||("ParentalControl"==a.errorCode?Dashboard.alert({message:Globalize.translate("MessageLoggedOutParentalControl"),callback:function(){Dashboard.logout(!1)}}):Dashboard.logout(!1)))}},onPopupOpen:function(){Dashboard.popupCount=(Dashboard.popupCount||0)+1,document.body.classList.add("bodyWithPopupOpen")},onPopupClose:function(){Dashboard.popupCount=(Dashboard.popupCount||1)-1,Dashboard.popupCount||document.body.classList.remove("bodyWithPopupOpen")},getCurrentUser:function(){return window.ApiClient.getCurrentUser()},serverAddress:function(){if(Dashboard.isConnectMode()){var e=window.ApiClient;return e?e.serverAddress():null}var a=window.location.href.toLowerCase(),n=a.indexOf("/web");if(-1==n&&(n=a.indexOf("/dashboard")),-1!=n)return a.substring(0,n);var o=window.location,i=o.protocol+"//"+o.hostname;return o.port&&(i+=":"+o.port),i},getCurrentUserId:function(){var e=window.ApiClient;return e?e.getCurrentUserId():null},onServerChanged:function(e,a,n){n=n||window.ApiClient,window.ApiClient=n},logout:function(e){function a(){var e;Dashboard.isConnectMode()?(e="connectlogin.html",window.ApiClient=null):e="login.html",Dashboard.navigate(e)}e===!1?a():ConnectionManager.logout().then(a)},importCss:function(e){var a=e;if(e+="?v="+AppInfo.appVersion,Dashboard.importedCss||(Dashboard.importedCss=[]),-1==Dashboard.importedCss.indexOf(e))if(Dashboard.importedCss.push(e),document.createStyleSheet)document.createStyleSheet(e);else{var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("data-url",a),n.setAttribute("type","text/css"),n.setAttribute("href",e),document.head.appendChild(n)}},removeStylesheet:function(e){var a=document.querySelector("link[data-url='"+e+"']");a&&a.parentNode.removeChild(a)},updateSystemInfo:function(e){Dashboard.lastSystemInfo=e,Dashboard.ensureWebSocket(),Dashboard.initialServerVersion||(Dashboard.initialServerVersion=e.Version),e.HasPendingRestart?(Dashboard.hideDashboardVersionWarning(),Dashboard.getCurrentUser().then(function(a){a.Policy.IsAdministrator&&Dashboard.showServerRestartWarning(e)})):(Dashboard.hideServerRestartWarning(),Dashboard.initialServerVersion!=e.Version&&Dashboard.showDashboardRefreshNotification()),Dashboard.showInProgressInstallations(e.InProgressInstallations)},showInProgressInstallations:function(e){e=e||[];for(var a=0,n=e.length;n>a;a++){var o=e[a],i=o.PercentComplete||0;100>i&&Dashboard.showPackageInstallNotification(o,"progress")}e.length?Dashboard.ensureInstallRefreshInterval():Dashboard.stopInstallRefreshInterval()},ensureInstallRefreshInterval:function(){Dashboard.installRefreshInterval||(ApiClient.isWebSocketOpen()&&ApiClient.sendWebSocketMessage("SystemInfoStart","0,500"),Dashboard.installRefreshInterval=1)},stopInstallRefreshInterval:function(){Dashboard.installRefreshInterval&&(ApiClient.isWebSocketOpen()&&ApiClient.sendWebSocketMessage("SystemInfoStop"),Dashboard.installRefreshInterval=null)},cancelInstallation:function(e){ApiClient.cancelPackageInstallation(e).then(Dashboard.refreshSystemInfoFromServer,Dashboard.refreshSystemInfoFromServer)},showServerRestartWarning:function(e){if(!AppInfo.isNativeApp){var a='<span style="margin-right: 1em;">'+Globalize.translate("MessagePleaseRestart")+"</span>";e.CanSelfRestart&&(a+='<paper-button raised class="submit mini" onclick="this.disabled=\'disabled\';Dashboard.restartServer();"><iron-icon icon="refresh"></iron-icon><span>'+Globalize.translate("ButtonRestart")+"</span></paper-button>"),Dashboard.showFooterNotification({id:"serverRestartWarning",html:a,forceShow:!0,allowHide:!1})}},hideServerRestartWarning:function(){var e=document.getElementById("serverRestartWarning");e&&e.parentNode.removeChild(e)},showDashboardRefreshNotification:function(){if(!AppInfo.isNativeApp){var e='<span style="margin-right: 1em;">'+Globalize.translate("MessagePleaseRefreshPage")+"</span>";e+='<paper-button raised class="submit mini" onclick="this.disabled=\'disabled\';Dashboard.reloadPage();"><iron-icon icon="refresh"></iron-icon><span>'+Globalize.translate("ButtonRefresh")+"</span></paper-button>",Dashboard.showFooterNotification({id:"dashboardVersionWarning",html:e,forceShow:!0,allowHide:!1})}},reloadPage:function(){var e,a=window.location.href.toLowerCase();e=-1!=a.indexOf("configurationpage")?"dashboard.html":window.location.href,window.location.href=e},hideDashboardVersionWarning:function(){var e=document.getElementById("dashboardVersionWarning");e&&e.parentNode.removeChild(e)},showFooterNotification:function(e){var a=!e.id;if(e.id=e.id||"notification"+(new Date).getTime()+parseInt(Math.random()),!document.querySelector(".footer")){var n='<div id="footer" class="footer" data-theme="b" class="ui-bar-b">';n+='<div id="footerNotifications"></div>',n+="</div>",$(document.body).append(n)}var o=$(".footer").css("top","initial").show(),i=$("#footerNotifications",o),t=$("#"+e.id,i);t.length||(t=$('<p id="'+e.id+'" class="footerNotification"></p>').appendTo(i));var r=a?'jQuery("#'+e.id+'").trigger("notification.remove").remove();':'jQuery("#'+e.id+'").trigger("notification.hide").hide();';e.allowHide!==!1&&(e.html+="<span style='margin-left: 1em;'><paper-button class='submit' onclick='"+r+"'>"+Globalize.translate("ButtonHide")+"</paper-button></span>"),e.forceShow&&t.slideDown(400),t.html(e.html),e.timeout&&setTimeout(function(){a?t.trigger("notification.remove").remove():t.trigger("notification.hide").hide()},e.timeout),o.on("notification.remove notification.hide",function(){setTimeout(function(){i.html()||o.slideUp()},50)})},getConfigurationPageUrl:function(e){return"ConfigurationPage?name="+encodeURIComponent(e)},navigate:function(e,a){if(!e)throw new Error("url cannot be null or empty");var n=getWindowLocationSearch();a&&n&&(e+=n);var o={};$.mobile.changePage(e,o)},showLoadingMsg:function(){Dashboard.loadingVisible=!0;var e=document.querySelector(".docspinner");e?(e.active=!0,e.classList.remove("hide")):Dashboard.loadingAdded||(Dashboard.loadingAdded=!0,require(["paper-spinner"],function(){e=document.createElement("paper-spinner"),e.classList.add("docspinner"),document.body.appendChild(e),e.active=1==Dashboard.loadingVisible}))},hideLoadingMsg:function(){Dashboard.loadingVisible=!1;var e=document.querySelector(".docspinner");e&&(e.active=!1,e.classList.add("hide"))},getModalLoadingMsg:function(){var e=document.querySelector(".modalLoading");return e||(e=document.createElement("modalLoading"),e.classList.add("modalLoading"),e.classList.add("hide"),document.body.appendChild(e)),e},showModalLoadingMsg:function(){Dashboard.getModalLoadingMsg().classList.remove("hide"),Dashboard.showLoadingMsg()},hideModalLoadingMsg:function(){Dashboard.getModalLoadingMsg().classList.add("hide"),Dashboard.hideLoadingMsg()},processPluginConfigurationUpdateResult:function(){Dashboard.hideLoadingMsg(),Dashboard.alert(Globalize.translate("MessageSettingsSaved"))},processServerConfigurationUpdateResult:function(){Dashboard.hideLoadingMsg(),Dashboard.alert(Globalize.translate("MessageSettingsSaved"))},alert:function(e){return"string"==typeof e?void require(["paper-toast"],function(){var a=e;Dashboard.toastId=Dashboard.toastId||0;var n="toast"+Dashboard.toastId++,o=document.createElement("paper-toast");o.setAttribute("text",a),o.id=n,document.body.appendChild(o),setTimeout(function(){o.show()},300),setTimeout(function(){o.parentNode.removeChild(o)},5300)}):void(browserInfo.mobile&&-1==e.message.indexOf("<")?(alert(e.message),e.callback&&e.callback()):require(["paper-dialog","fade-in-animation","fade-out-animation"],function(){Dashboard.confirmInternal(e.message,e.title||Globalize.translate("HeaderAlert"),!1,e.callback)}))},confirm:function(e,a,n){if(browserInfo.mobile&&-1==e.indexOf("<")){var o=confirm(e);n&&n(o)}else require(["paper-dialog","fade-in-animation","fade-out-animation"],function(){Dashboard.confirmInternal(e,a,!0,n)})},confirmInternal:function(e,a,n,o){var i=document.createElement("paper-dialog");i.setAttribute("with-backdrop","with-backdrop"),i.setAttribute("role","alertdialog"),i.entryAnimation="fade-in-animation",i.exitAnimation="fade-out-animation",i.setAttribute("with-backdrop","with-backdrop");var t="";t+="<h2>"+a+"</h2>",t+="<div>"+e+"</div>",t+='<div class="buttons">',t+='<paper-button class="btnConfirm" dialog-confirm autofocus>'+Globalize.translate("ButtonOk")+"</paper-button>",n&&(t+="<paper-button dialog-dismiss>"+Globalize.translate("ButtonCancel")+"</paper-button>"),t+="</div>",i.innerHTML=t,document.body.appendChild(i),i.addEventListener("iron-overlay-closed",function(){var e=i.closingReason.confirmed;i.parentNode.removeChild(i),o&&o(e)}),i.open()},refreshSystemInfoFromServer:function(){var e=ApiClient;e&&e.accessToken()&&(AppInfo.enableFooterNotifications?e.getSystemInfo().then(function(e){Dashboard.updateSystemInfo(e)}):Dashboard.ensureWebSocket())},restartServer:function(){Dashboard.suppressAjaxErrors=!0,Dashboard.showLoadingMsg(),ApiClient.restartServer().then(function(){setTimeout(function(){Dashboard.reloadPageWhenServerAvailable()},250)},function(){Dashboard.suppressAjaxErrors=!1})},reloadPageWhenServerAvailable:function(e){ApiClient.getJSON(ApiClient.getUrl("System/Info")).then(function(a){a.HasPendingRestart?Dashboard.retryReload(e):Dashboard.reloadPage()},function(){Dashboard.retryReload(e)})},retryReload:function(e){setTimeout(function(){e=e||0,e++,10>e?Dashboard.reloadPageWhenServerAvailable(e):Dashboard.suppressAjaxErrors=!1},500)},showUserFlyout:function(){require(["jqmpanel"],function(){var e='<div data-role="panel" data-position="right" data-display="overlay" id="userFlyout" data-position-fixed="true" data-theme="a">';e+='<h3 class="userHeader">',e+="</h3>",e+="<form>",e+='<p class="preferencesContainer"></p>',e+='<p><button data-mini="true" type="button" onclick="Dashboard.logout();" data-icon="lock">'+Globalize.translate("ButtonSignOut")+"</button></p>",e+="</form>",e+="</div>",$(document.body).append(e);var a=document.querySelector("#userFlyout");ImageLoader.lazyChildren(a),$(a).panel({}).panel("open").on("panelclose",function(){$(this).off("panelclose").remove()}),ConnectionManager.user(window.ApiClient).then(function(e){Dashboard.updateUserFlyout(a,e)})})},updateUserFlyout:function(e,a){var n="",o=48;if(a.imageUrl&&AppInfo.enableUserImage){var i=a.imageUrl;a.supportsImageParams&&(i+="&width="+o*Math.max(window.devicePixelRatio||1,2)),n+="<div style=\"background-image:url('"+i+"');width:"+o+"px;height:"+o+'px;background-size:contain;background-repeat:no-repeat;background-position:center center;border-radius:1000px;vertical-align:middle;margin-right:.8em;display:inline-block;"></div>'}n+=a.name;var t=e.querySelector(".userHeader");t.innerHTML=n,ImageLoader.lazyChildren(t),n="",a.localUser&&(n+='<p><a data-mini="true" data-role="button" href="mypreferencesmenu.html?userId='+a.localUser.Id+'" data-icon="gear">'+Globalize.translate("ButtonSettings")+"</button></a>"),$(".preferencesContainer",e).html(n)},getPluginSecurityInfo:function(){var e=ApiClient;if(!e)return new Promise(function(e,a){a()});var a=Dashboard.pluginSecurityInfo;return a?new Promise(function(e){e(a)}):e.ajax({type:"GET",url:e.getUrl("Plugins/SecurityInfo"),dataType:"json",error:function(){}}).then(function(e){return Dashboard.pluginSecurityInfo=e,e})},resetPluginSecurityInfo:function(){Dashboard.pluginSecurityInfo=null},ensureHeader:function(e){e.classList.contains("standalonePage")&&!e.classList.contains("noHeaderPage")&&Dashboard.renderHeader(e)},renderHeader:function(e){var a=e.querySelector(".header");if(!a){var n="";n+='<div class="header">',n+='<a class="logo" href="index.html" style="text-decoration:none;font-size: 22px;">',e.classList.contains("standalonePage")&&(n+='<img class="imgLogoIcon" src="css/images/mblogoicon.png" />',n+='<span class="logoLibraryMenuButtonText">EMBY</span>'),n+="</a>",n+="</div>",$(e).prepend(n)}},getToolsMenuHtml:function(e){var a,n,o,i=Dashboard.getToolsMenuLinks(e),t="";for(a=0,n=i.length;n>a;a++)if(o=i[a],o.divider&&(t+="<div class='sidebarDivider'></div>"),o.href){var r=o.color?' style="color:'+o.color+'"':"";t+=o.selected?'<a class="sidebarLink selectedSidebarLink" href="'+o.href+'">':'<a class="sidebarLink" href="'+o.href+'">';var s=o.icon;s&&(t+='<iron-icon icon="'+s+'" class="sidebarLinkIcon"'+r+"></iron-icon>"),t+='<span class="sidebarLinkText">',t+=o.name,t+="</span>",t+="</a>"}else t+='<div class="sidebarHeader">',t+=o.name,t+="</div>";return t},ensureToolsMenu:function(e){var a=e.querySelector(".toolsSidebar");if(!a){var n='<div class="content-secondary toolsSidebar">';n+='<div class="sidebarLinks">',n+=Dashboard.getToolsMenuHtml(e),n+="</div>",n+="</div>",$(".content-primary",e).before(n)}},getToolsMenuLinks:function(e){var a=e,n=e.classList.contains("appServicesPage"),o=getParameterByName("context");return[{name:Globalize.translate("TabServer"),href:"dashboard.html",selected:e.classList.contains("dashboardHomePage"),icon:"dashboard",color:"#38c"},{name:Globalize.translate("TabDevices"),href:"devices.html",selected:e.classList.contains("devicesPage"),icon:"tablet",color:"#ECA403"},{name:Globalize.translate("TabUsers"),href:"userprofiles.html",selected:e.classList.contains("userProfilesPage"),icon:"people",color:"#679C34"},{name:Globalize.translate("TabLibrary"),divider:!0,href:"library.html",selected:e.classList.contains("librarySectionPage"),icon:"video-library"},{name:Globalize.translate("TabMetadata"),href:"metadata.html",selected:e.classList.contains("metadataConfigurationPage"),icon:"insert-drive-file"},{name:Globalize.translate("TabPlayback"),href:"playbackconfiguration.html",selected:e.classList.contains("playbackConfigurationPage"),icon:"play-circle-filled"},{name:Globalize.translate("TabSync"),href:"syncactivity.html",selected:e.classList.contains("syncConfigurationPage")||n&&"sync"==o,icon:"sync"},{divider:!0,name:Globalize.translate("TabExtras")},{name:Globalize.translate("TabAutoOrganize"),href:"autoorganizelog.html",selected:e.classList.contains("organizePage"),icon:"folder",color:"#01C0DD"},{name:Globalize.translate("TabDLNA"),href:"dlnasettings.html",selected:e.classList.contains("dlnaPage"),icon:"tv",color:"#E5342E"},{name:Globalize.translate("TabLiveTV"),href:"livetvstatus.html",selected:e.classList.contains("liveTvSettingsPage")||n&&"livetv"==o,icon:"live-tv",color:"#293AAE"},{name:Globalize.translate("TabNotifications"),href:"notificationsettings.html",selected:e.classList.contains("notificationConfigurationPage"),icon:"notifications",color:"brown"},{name:Globalize.translate("TabPlugins"),href:"plugins.html",selected:e.classList.contains("pluginConfigurationPage"),icon:"add-shopping-cart",color:"#9D22B1"},{divider:!0,name:Globalize.translate("TabExpert")},{name:Globalize.translate("TabAdvanced"),href:"advanced.html",selected:e.classList.contains("advancedConfigurationPage"),icon:"settings",color:"#F16834"},{name:Globalize.translate("TabScheduledTasks"),href:"scheduledtasks.html",selected:e.classList.contains("scheduledTasksConfigurationPage"),icon:"schedule",color:"#38c"},{name:Globalize.translate("TabHelp"),divider:!0,href:"support.html",selected:"supportPage"==a.id||"logPage"==a.id||"supporterPage"==a.id||"supporterKeyPage"==a.id||"aboutPage"==a.id,icon:"help",color:"#679C34"}]},ensureWebSocket:function(){!ApiClient.isWebSocketOpenOrConnecting()&&ApiClient.isWebSocketSupported()&&(ApiClient.openWebSocket(),Dashboard.isConnectMode()||ApiClient.reportCapabilities(Dashboard.capabilities()))},processGeneralCommand:function(e){switch(e.Name){case"GoHome":Dashboard.navigate("index.html");break;case"GoToSettings":Dashboard.navigate("dashboard.html");break;case"DisplayContent":Dashboard.onBrowseCommand(e.Arguments);break;case"GoToSearch":Search.showSearchPanel();break;case"DisplayMessage":var a=e.Arguments;if(a.TimeoutMs&&window.Notification&&"granted"===Notification.permission){var n={title:a.Header,body:a.Text,vibrate:!0,timeout:a.TimeoutMs},o=new Notification(n.title,n);o.show&&o.show(),n.timeout&&setTimeout(function(){o.close?o.close():o.cancel&&o.cancel()},n.timeout)}else Dashboard.alert({title:a.Header,message:a.Text});break;case"VolumeUp":case"VolumeDown":case"Mute":case"Unmute":case"ToggleMute":case"SetVolume":case"SetAudioStreamIndex":case"SetSubtitleStreamIndex":case"ToggleFullscreen":case"SetRepeatMode":}},onWebSocketMessageReceived:function(e,a){var n=a;if("LibraryChanged"===n.MessageType)Dashboard.processLibraryUpdateNotification(n.Data);else if("ServerShuttingDown"===n.MessageType)Dashboard.hideServerRestartWarning();else if("ServerRestarting"===n.MessageType)Dashboard.hideServerRestartWarning();else if("SystemInfo"===n.MessageType)Dashboard.updateSystemInfo(n.Data);else if("RestartRequired"===n.MessageType)Dashboard.updateSystemInfo(n.Data);else if("PackageInstallationCompleted"===n.MessageType)Dashboard.getCurrentUser().then(function(e){e.Policy.IsAdministrator&&(Dashboard.showPackageInstallNotification(n.Data,"completed"),Dashboard.refreshSystemInfoFromServer())});else if("PackageInstallationFailed"===n.MessageType)Dashboard.getCurrentUser().then(function(e){e.Policy.IsAdministrator&&(Dashboard.showPackageInstallNotification(n.Data,"failed"),Dashboard.refreshSystemInfoFromServer())});else if("PackageInstallationCancelled"===n.MessageType)Dashboard.getCurrentUser().then(function(e){e.Policy.IsAdministrator&&(Dashboard.showPackageInstallNotification(n.Data,"cancelled"),Dashboard.refreshSystemInfoFromServer())});else if("PackageInstalling"===n.MessaapiclientcgeType)Dashboard.getCurrentUser().then(function(e){e.Policy.IsAdministrator&&(Dashboard.showPackageInstallNotification(n.Data,"progress"),Dashboard.refreshSystemInfoFromServer())});else if("GeneralCommand"===n.MessageType){n.Data}},onBrowseCommand:function(e){var a,n=(e.ItemType||"").toLowerCase();return"genre"==n?a="itemdetails.html?id="+e.ItemId:"musicgenre"==n?a="itemdetails.html?id="+e.ItemId:"gamegenre"==n?a="itemdetails.html?id="+e.ItemId:"studio"==n?a="itemdetails.html?id="+e.ItemId:"person"==n?a="itemdetails.html?id="+e.ItemId:"musicartist"==n&&(a="itemdetails.html?id="+e.ItemId),a?void Dashboard.navigate(a):void ApiClient.getItem(Dashboard.getCurrentUserId(),e.ItemId).then(function(e){Dashboard.navigate(LibraryBrowser.getHref(e,null,""))})},showPackageInstallNotification:function(e,a){if(!AppInfo.isNativeApp){var n="";if("completed"==a?n+='<img src="css/images/notifications/done.png" class="notificationIcon" />':"cancelled"==a?n+='<img src="css/images/notifications/info.png" class="notificationIcon" />':"failed"==a?n+='<img src="css/images/notifications/error.png" class="notificationIcon" />':"progress"==a&&(n+='<img src="css/images/notifications/download.png" class="notificationIcon" />'),n+='<span style="margin-right: 1em;">',"completed"==a?n+=Globalize.translate("LabelPackageInstallCompleted").replace("{0}",e.Name+" "+e.Version):"cancelled"==a?n+=Globalize.translate("LabelPackageInstallCancelled").replace("{0}",e.Name+" "+e.Version):"failed"==a?n+=Globalize.translate("LabelPackageInstallFailed").replace("{0}",e.Name+" "+e.Version):"progress"==a&&(n+=Globalize.translate("LabelInstallingPackage").replace("{0}",e.Name+" "+e.Version)),n+="</span>","progress"==a){var o=Math.round(e.PercentComplete||0);n+='<progress style="margin-right: 1em;" max="100" value="'+o+'" title="'+o+'%">',n+=""+o+"%",n+="</progress>",100>o&&(n+="<paper-button raised class=\"cancelDark mini\" onclick=\"this.disabled='disabled';Dashboard.cancelInstallation('"+e.Id+'\');"><iron-icon icon="cancel"></iron-icon><span>'+Globalize.translate("ButtonCancel")+"</span></paper-button>")}var i=0;"cancelled"==a&&(i=2e3);var t="progress"!=a,r="progress"!=a&&"cancelled"!=a;Dashboard.showFooterNotification({html:n,id:e.Id,timeout:i,forceShow:t,allowHide:r})}},processLibraryUpdateNotification:function(e){var a=e.ItemsAdded;a.length&&!AppInfo.isNativeApp&&window.Notification&&"granted"===Notification.permission&&ApiClient.getItems(Dashboard.getCurrentUserId(),{Recursive:!0,Limit:3,Filters:"IsNotFolder",SortBy:"DateCreated",SortOrder:"Descending",ImageTypes:"Primary",Ids:a.join(",")}).then(function(e){for(var a=e.Items,n=0,o=Math.min(a.length,2);o>n;n++){var i=a[n],t={title:"New "+i.Type,body:i.Name,timeout:15e3,vibrate:!0,data:{options:{url:LibraryBrowser.getHref(i)}}},r=i.ImageTags||{};r.Primary&&(t.icon=ApiClient.getScaledImageUrl(i.Id,{width:60,tag:r.Primary,type:"Primary"}));var s=new Notification(t.title,t);s.show&&s.show(),t.timeout&&setTimeout(function(){s.close?s.close():s.cancel&&s.cancel()},t.timeout)}})},ensurePageTitle:function(e){if(e.classList.contains("type-interior")){var a=e;if(!a.querySelector(".pageTitle")){var n=a.querySelector(".content-primary");n||(n=a.getElementsByClassName("ui-content")[0]);var o=a.getAttribute("data-helpurl"),i="<div>";i+='<h1 class="pageTitle" style="display:inline-block;">'+(document.title||"&nbsp;")+"</h1>",o&&(i+='<a href="'+o+'" target="_blank" class="clearLink" style="margin-top:-10px;display:inline-block;vertical-align:middle;margin-left:1em;"><paper-button raised class="secondary mini"><iron-icon icon="info"></iron-icon><span>'+Globalize.translate("ButtonHelp")+"</span></paper-button></a>"),i+="</div>",$(n).prepend(i)}}},setPageTitle:function(e){var a=$.mobile.activePage;if(a){var n=$(a)[0].querySelector(".pageTitle");n&&(n.innerHTML=e)}e&&(document.title=e)},getDisplayTime:function(e){var a=36e9,n=6e8,o=1e7,i=[],t=e/a;t=Math.floor(t),t&&i.push(t),e-=t*a;var r=e/n;r=Math.floor(r),e-=r*n,10>r&&t&&(r="0"+r),i.push(r);var s=e/o;return s=Math.floor(s),10>s&&(s="0"+s),i.push(s),i.join(":")},getSupportedRemoteCommands:function(){return["GoHome","GoToSettings","VolumeUp","VolumeDown","Mute","Unmute","ToggleMute","SetVolume","SetAudioStreamIndex","SetSubtitleStreamIndex","DisplayContent","GoToSearch","DisplayMessage","SetRepeatMode"]},isServerlessPage:function(){var e=window.location.href.toLowerCase();return-1!=e.indexOf("connectlogin.html")||-1!=e.indexOf("selectserver.html")||-1!=e.indexOf("login.html")||-1!=e.indexOf("forgotpassword.html")||-1!=e.indexOf("forgotpasswordpin.html")},capabilities:function(){var e={PlayableMediaTypes:["Audio","Video"],SupportedCommands:Dashboard.getSupportedRemoteCommands(),SupportsPersistentIdentifier:Dashboard.isRunningInCordova(),SupportsMediaControl:!0,SupportedLiveMediaTypes:["Audio","Video"]};return Dashboard.isRunningInCordova()&&!browserInfo.safari&&(e.SupportsOfflineAccess=!0,e.SupportsSync=!0,e.SupportsContentUploading=!0),e},getDefaultImageQuality:function(e){var a=90,n="backdrop"==e.toLowerCase();return n&&(a-=10),AppInfo.hasLowImageBandwidth&&(a-=AppInfo.isNativeApp?10:40),a},normalizeImageOptions:function(e){AppInfo.hasLowImageBandwidth&&(e.enableImageEnhancers=!1),AppInfo.forcedImageFormat&&"Logo"!=e.type&&(e.format=AppInfo.forcedImageFormat,e.backgroundColor="#1c1c1c")},loadExternalPlayer:function(){return new Promise(function(e){require(["scripts/externalplayer.js"],function(){Dashboard.isRunningInCordova()?require(["cordova/externalplayer.js"],e):e()})})},exitOnBack:function(){return $($.mobile.activePage).is("#indexPage")},exit:function(){Dashboard.logout()}},AppInfo={};!function(){function e(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}function a(){e()&&(AppInfo.isTouchPreferred=!0);var a=Dashboard.isRunningInCordova();AppInfo.enableDetailPageChapters=!0,AppInfo.enableDetailsMenuImages=!0,AppInfo.enableMovieHomeSuggestions=!0,AppInfo.enableNavDrawer=!0,AppInfo.enableSearchInTopMenu=!0,AppInfo.enableHomeFavorites=!0,AppInfo.enableNowPlayingBar=!0,AppInfo.enableHomeTabs=!0,AppInfo.enableNowPlayingPageBottomTabs=!0,AppInfo.enableAutoSave=browserInfo.mobile,AppInfo.enableAppStorePolicy=a;var n=browserInfo.ipad||browserInfo.iphone,o=browserInfo.android,i=browserInfo.mobile;n&&(AppInfo.hasLowImageBandwidth=!0,a?(AppInfo.enableNavDrawer=!1,AppInfo.enableSearchInTopMenu=!1,AppInfo.enableHomeFavorites=!1,AppInfo.enableHomeTabs=!1,AppInfo.enableNowPlayingPageBottomTabs=!1,-1!=navigator.userAgent.toString().toLowerCase().indexOf("iphone")&&(AppInfo.enableNowPlayingBar=!1)):(AppInfo.enableDetailPageChapters=!1,AppInfo.enableDetailsMenuImages=!1,AppInfo.enableMovieHomeSuggestions=!1,AppInfo.forcedImageFormat="jpg")),AppInfo.hasLowImageBandwidth||(AppInfo.enableStudioTabs=!0,AppInfo.enableTvEpisodesTab=!0,AppInfo.enableMovieTrailersTab=!0),AppInfo.supportsExternalPlayers=!0,a?(AppInfo.enableAppLayouts=!0,AppInfo.supportsExternalPlayerMenu=!0,AppInfo.isNativeApp=!0,n&&(AppInfo.supportsExternalPlayers=!1)):(AppInfo.enableSupporterMembership=!0,o||n||(AppInfo.enableAppLayouts=!0)),AppInfo.enableHeadRoom=!n,AppInfo.supportsDownloading=!(AppInfo.isNativeApp&&n),AppInfo.supportsFileInput=!(AppInfo.isNativeApp&&o),AppInfo.enableUserImage=!0,AppInfo.hasPhysicalVolumeButtons=a||i,AppInfo.enableBackButton=n&&(window.navigator.standalone||AppInfo.isNativeApp),AppInfo.supportsSyncPathSetting=a&&o,AppInfo.supportsUserDisplayLanguageSetting=Dashboard.isConnectMode()&&!a,AppInfo.moreIcon=a&&n?"more-horiz":"more-vert"}function n(e){AppInfo.enableAppStorePolicy&&(e.getAvailablePlugins=function(){return Promise.resolve([])},e.getInstalledPlugins=function(){return Promise.resolve([])}),e.getDefaultImageQuality=Dashboard.getDefaultImageQuality,e.normalizeImageOptions=Dashboard.normalizeImageOptions,Events.off(e,"websocketmessage",Dashboard.onWebSocketMessageReceived),Events.on(e,"websocketmessage",Dashboard.onWebSocketMessageReceived),Events.off(e,"requestfail",Dashboard.onRequestFail),Events.on(e,"requestfail",Dashboard.onRequestFail)}function o(){return f(["scripts/mediaplayer"]).then(function(){return MediaPlayer.getDeviceProfile(Math.max(screen.height,screen.width))})}function i(e,a){n(a)}function t(e,a){var n=Dashboard.isConnectMode()?null:"servercredentials4",t=new e(n);return o().then(function(e){if(a.DeviceProfile=e,window.ConnectionManager=new MediaBrowser.ConnectionManager(t,AppInfo.appName,AppInfo.appVersion,AppInfo.deviceName,AppInfo.deviceId,a,window.devicePixelRatio),-1!=window.location.href.toLowerCase().indexOf("wizardstart.html")&&window.ConnectionManager.clearData(),Events.on(ConnectionManager,"apiclientcreated",i),!Dashboard.isConnectMode())return f(["apiclient"]).then(function(e){var a=new e(Dashboard.serverAddress(),AppInfo.appName,AppInfo.appVersion,AppInfo.deviceName,AppInfo.deviceId,window.devicePixelRatio);a.enableAutomaticNetworking=!1,ConnectionManager.addApiClient(a),Dashboard.importCss(a.getUrl("Branding/Css")),window.ApiClient=a});var n=ConnectionManager.getLastUsedServer();return!Dashboard.isServerlessPage()&&n&&n.UserId&&n.AccessToken?(Dashboard.showLoadingMsg(),ConnectionManager.connectToServer(n).then(function(e){Dashboard.showLoadingMsg(),e.State==MediaBrowser.ConnectionState.SignedIn&&(window.ApiClient=e.ApiClient)})):void 0})}function r(){require(["fastclick"],function(e){function a(e,a){for(;!e.classList||!e.classList.contains(a);)if(e=e.parentNode,!e)return null;return e}e.attach(document.body,{tapDelay:0}),document.body.addEventListener("touchstart",function(e){var n=a(e.target,"ui-panel-dismiss");n&&$(n).click()})})}function s(){var e=document.documentElement;AppInfo.isTouchPreferred&&e.classList.add("touch"),AppInfo.enableStudioTabs||e.classList.add("studioTabDisabled"),AppInfo.enableTvEpisodesTab||e.classList.add("tvEpisodesTabDisabled"),AppInfo.enableMovieTrailersTab||e.classList.add("movieTrailersTabDisabled"),AppInfo.enableSupporterMembership||e.classList.add("supporterMembershipDisabled"),AppInfo.isNativeApp&&e.classList.add("nativeApp"),AppInfo.enableHomeFavorites||e.classList.add("homeFavoritesDisabled")}function l(){var e=getParameterByName("theme");if(e)return void require(["themes/"+e+"/theme"]);var a=new Date,n=a.getMonth(),o=a.getDate();return 9==n&&o>=30?void require(["themes/halloween/theme"]):11==n&&o>=21&&26>=o?void require(["themes/holiday/theme"]):void 0}function d(e){return e}function c(){var e="bower_components";return!Dashboard.isRunningInCordova(),e}function p(){var e="v="+(window.dashboardVersion||(new Date).getDate()),a=c(),n=a+"/emby-apiclient",o=a+"/emby-webcomponents",i={velocity:a+"/velocity/velocity.min",tvguide:"components/tvguide/tvguide",directorybrowser:"components/directorybrowser/directorybrowser",collectioneditor:"components/collectioneditor/collectioneditor",playlisteditor:"components/playlisteditor/playlisteditor",medialibrarycreator:"components/medialibrarycreator/medialibrarycreator",medialibraryeditor:"components/medialibraryeditor/medialibraryeditor",howler:a+"/howler.js/howler.min",sortable:a+"/Sortable/Sortable.min",isMobile:a+"/isMobile/isMobile.min",headroom:a+"/headroom.js/dist/headroom.min",masonry:a+"/masonry/dist/masonry.pkgd.min",humanedate:"components/humanedate",chromecasthelpers:"components/chromecasthelpers",jQuery:a+"/jquery/dist/jquery.min",fastclick:a+"/fastclick/lib/fastclick",events:n+"/events",credentialprovider:n+"/credentials",apiclient:n+"/apiclient",connectionmanagerfactory:n+"/connectionmanager",visibleinviewport:o+"/visibleinviewport",browserdeviceprofile:o+"/browserdeviceprofile",browser:o+"/browser",qualityoptions:o+"/qualityoptions",connectservice:n+"/connectservice",hammer:a+"/hammerjs/hammer.min",performanceManager:o+"/performancemanager",layoutManager:o+"/layoutmanager",focusManager:o+"/focusmanager",imageLoader:o+"/images/imagehelper"};i.imageFetcher=navigator.webkitPersistentStorage?o+"/images/persistentimagefetcher":Dashboard.isRunningInCordova()?"cordova/imagestore":o+"/images/basicimagefetcher",i.hlsjs=a+"/hls.js/dist/hls.min",Dashboard.isRunningInCordova()?(i.sharingwidget="cordova/sharingwidget",i.serverdiscovery="cordova/serverdiscovery",i.wakeonlan="cordova/wakeonlan",i.actionsheet="cordova/actionsheet"):(i.sharingwidget="components/sharingwidget",i.serverdiscovery=n+"/serverdiscovery",i.wakeonlan=n+"/wakeonlan",i.actionsheet="scripts/actionsheet"),i.appStorage=Dashboard.isRunningInCordova()&&window.MainActivity?"cordova/android/appstorage":n+"/appstorage";var t=a+"/cryptojslib/components/sha1-min",r=a+"/cryptojslib/components/md5-min",s={};s[t]={deps:[a+"/cryptojslib/components/core-min"]},s[r]={deps:[a+"/cryptojslib/components/core-min"]},requirejs.config({waitSeconds:0,map:{"*":{css:a+"/emby-webcomponents/requirecss",html:a+"/emby-webcomponents/requirehtml"}},urlArgs:e,paths:i,shim:s}),define("cryptojs-sha1",[t]),define("cryptojs-md5",[r]),define("emby-icons",["html!"+a+"/emby-icons/emby-icons.html"]),define("paper-spinner",["html!"+a+"/paper-spinner/paper-spinner.html"]),define("paper-toast",["html!"+a+"/paper-toast/paper-toast.html"]),define("paper-slider",["html!"+a+"/paper-slider/paper-slider.html"]),define("paper-tabs",["html!"+a+"/paper-tabs/paper-tabs.html"]),define("paper-menu",["html!"+a+"/paper-menu/paper-menu.html"]),define("paper-material",["html!"+a+"/paper-material/paper-material.html"]),define("paper-dialog",["html!"+a+"/paper-dialog/paper-dialog.html"]),define("paper-dialog-scrollable",["html!"+a+"/paper-dialog-scrollable/paper-dialog-scrollable.html"]),define("paper-button",["html!"+a+"/paper-button/paper-button.html"]),define("paper-icon-button",["html!"+a+"/paper-icon-button/paper-icon-button.html"]),define("paper-drawer-panel",["html!"+a+"/paper-drawer-panel/paper-drawer-panel.html"]),define("paper-radio-group",["html!"+a+"/paper-radio-group/paper-radio-group.html"]),define("paper-radio-button",["html!"+a+"/paper-radio-button/paper-radio-button.html"]),define("neon-animated-pages",["html!"+a+"/neon-animation/neon-animated-pages.html"]),define("paper-toggle-button",["html!"+a+"/paper-toggle-button/paper-toggle-button.html"]),define("slide-right-animation",["html!"+a+"/neon-animation/animations/slide-right-animation.html"]),define("slide-left-animation",["html!"+a+"/neon-animation/animations/slide-left-animation.html"]),define("slide-from-right-animation",["html!"+a+"/neon-animation/animations/slide-from-right-animation.html"]),define("slide-from-left-animation",["html!"+a+"/neon-animation/animations/slide-from-left-animation.html"]),define("paper-textarea",["html!"+a+"/paper-input/paper-textarea.html"]),define("paper-item",["html!"+a+"/paper-item/paper-item.html"]),define("paper-checkbox",["html!"+a+"/paper-checkbox/paper-checkbox.html"]),define("fade-in-animation",["html!"+a+"/neon-animation/animations/fade-in-animation.html"]),define("fade-out-animation",["html!"+a+"/neon-animation/animations/fade-out-animation.html"]),define("scale-up-animation",["html!"+a+"/neon-animation/animations/scale-up-animation.html"]),define("paper-fab",["html!"+a+"/paper-fab/paper-fab.html"]),define("paper-progress",["html!"+a+"/paper-progress/paper-progress.html"]),define("paper-input",["html!"+a+"/paper-input/paper-input.html"]),define("paper-icon-item",["html!"+a+"/paper-item/paper-icon-item.html"]),define("paper-item-body",["html!"+a+"/paper-item/paper-item-body.html"]),define("paper-collapse-item",["html!"+a+"/paper-collapse-item/paper-collapse-item.html"]),define("jstree",[a+"/jstree/dist/jstree.min","css!thirdparty/jstree/themes/default/style.min.css"]),define("jqmbase",["css!thirdparty/jquerymobile-1.4.5/jquery.mobile.custom.theme.css"]),define("jqmicons",["jqmbase","css!thirdparty/jquerymobile-1.4.5/jquery.mobile.custom.icons.css"]),define("jqmtable",["jqmbase","thirdparty/jquerymobile-1.4.5/jqm.table","css!thirdparty/jquerymobile-1.4.5/jqm.table.css"]),define("jqmwidget",["jqmbase","thirdparty/jquerymobile-1.4.5/jqm.widget"]),define("jqmslider",["jqmbase","thirdparty/jquerymobile-1.4.5/jqm.slider","css!thirdparty/jquerymobile-1.4.5/jqm.slider.css"]),define("jqmpopup",["jqmbase","thirdparty/jquerymobile-1.4.5/jqm.popup","css!thirdparty/jquerymobile-1.4.5/jqm.popup.css"]),define("jqmlistview",["jqmbase","css!thirdparty/jquerymobile-1.4.5/jqm.listview.css"]),define("jqmcontrolgroup",["jqmbase","css!thirdparty/jquerymobile-1.4.5/jqm.controlgroup.css"]),define("jqmcollapsible",["jqmbase","jqmicons","thirdparty/jquerymobile-1.4.5/jqm.collapsible","css!thirdparty/jquerymobile-1.4.5/jqm.collapsible.css"]),define("jqmcheckbox",["jqmbase","jqmicons","thirdparty/jquerymobile-1.4.5/jqm.checkbox","css!thirdparty/jquerymobile-1.4.5/jqm.checkbox.css"]),define("jqmpanel",["jqmbase","thirdparty/jquerymobile-1.4.5/jqm.panel","css!thirdparty/jquerymobile-1.4.5/jqm.panel.css"]),define("iron-icon-set",["html!"+a+"/iron-icon/iron-icon.html","html!"+a+"/iron-iconset-svg/iron-iconset-svg.html"]),define("slideshow",[o+"/slideshow/slideshow"],d),define("fetch",[a+"/fetch/fetch"]),define("webcomponentsjs",[a+"/webcomponentsjs/webcomponents-lite.min.js"]),define("native-promise-only",[a+"/native-promise-only/lib/npo.src"]),Dashboard.isRunningInCordova()?define("registrationservices",["cordova/registrationservices"]):define("registrationservices",["scripts/registrationservices"]),Dashboard.isRunningInCordova()?(define("localassetmanager",["cordova/localassetmanager"]),define("fileupload",["cordova/fileupload"])):(define("localassetmanager",[n+"/localassetmanager"]),define("fileupload",[n+"/fileupload"])),define("apiclient-deferred",["legacy/deferred"]),define("connectionmanager",[n+"/connectionmanager"]),define("contentuploader",[n+"/sync/contentuploader"]),define("serversync",[n+"/sync/serversync"]),define("multiserversync",[n+"/sync/multiserversync"]),define("offlineusersync",[n+"/sync/offlineusersync"]),define("mediasync",[n+"/sync/mediasync"]),define("swiper",[a+"/Swiper/dist/js/swiper.min","css!"+a+"/Swiper/dist/css/swiper.min"],d),define("paperdialoghelper",[o+"/paperdialoghelper/paperdialoghelper"],d),define("historyManager",[],function(){return{pushState:function(e,a,n){e.navigate=!1,history.pushState(e,a,n),jQuery.onStatePushed(e)
}}}),define("inputManager",[],function(){return{on:function(){},off:function(){}}}),define("connectionManager",[],function(){return ConnectionManager}),define("globalize",[],function(){return Globalize}),define("dialogText",[],m())}function m(){return function(){return{buttonOk:"ButtonOk",buttonCancel:"ButtonCancel"}}}function u(e){var a=c(),n=a+"/emby-webcomponents";e.mobile?define("prompt",[n+"/prompt/nativeprompt"],d):define("prompt",[n+"/prompt/prompt"],d)}function h(e){Dashboard.isRunningInCordova()&&browserInfo.android&&define("nativedirectorychooser",["cordova/android/nativedirectorychooser"]),Dashboard.isRunningInCordova()&&browserInfo.android?(MainActivity.getChromeVersion()>=48?define("audiorenderer",["scripts/htmlmediarenderer"]):(window.VlcAudio=!0,define("audiorenderer",["cordova/android/vlcplayer"])),define("videorenderer",["cordova/android/vlcplayer"])):Dashboard.isRunningInCordova()&&browserInfo.safari?(define("audiorenderer",["cordova/ios/vlcplayer"]),define("videorenderer",["scripts/htmlmediarenderer"])):(define("audiorenderer",["scripts/htmlmediarenderer"]),define("videorenderer",["scripts/htmlmediarenderer"])),Dashboard.isRunningInCordova()&&browserInfo.android?define("localsync",["cordova/android/localsync"]):define("localsync",["scripts/localsync"]),define("livetvcss",[],function(){return Dashboard.importCss("css/livetv.css"),{}}),define("detailtablecss",[],function(){return Dashboard.importCss("css/detailtable.css"),{}}),define("tileitemcss",["css!css/tileitem.css"]),define("sharingmanager",["scripts/sharingmanager"]),Dashboard.isRunningInCordova()&&browserInfo.safari?define("searchmenu",["cordova/searchmenu"]):define("searchmenu",["scripts/searchmenu"]),define("buttonenabled",["legacy/buttonenabled"]);var a=[];a.push("events"),window.fetch||a.push("fetch"),a.push("scripts/mediacontroller"),a.push("scripts/globalize"),a.push("jQuery"),a.push("paper-drawer-panel"),require(a,function(a){window.Events=a;for(var n in e)AppInfo[n]=e[n];b()})}function f(e){return new Promise(function(a){require(e,a)})}function b(){var e=document.querySelector(".mainDrawerPanel");e.classList.remove("mainDrawerPanelPreInit"),e.forceNarrow=!0;var a=screen.availWidth-50;a=Math.max(a,240),a=Math.min(a,310),e.drawerWidth=a+"px",browserInfo.safari&&(e.disableEdgeSwipe=!0);var n=[];n.push("connectionmanagerfactory"),n.push("credentialprovider"),n.push("scripts/appsettings"),n.push("scripts/extensions"),require(n,function(e,a){window.MediaBrowser=window.MediaBrowser||{};for(var o in e)MediaBrowser[o]=e[o];$.fn.checked=function(e){return e===!0||e===!1?$(this).each(function(){this.checked=e}):this.length&&this[0].checked};var i=[];n=[],n.push("scripts/mediaplayer"),n.push("emby-icons"),n.push("paper-icon-button"),n.push("paper-button"),n.push("thirdparty/jquerymobile-1.4.5/jquery.mobile.custom.js"),i.push(f(n)),i.push(Globalize.ensure()),i.push(t(a,Dashboard.capabilities())),Promise.all(i).then(function(){MediaController.init(),document.title=Globalize.translateDocument(document.title,"html");var e=document.querySelector(".mainDrawerPanelContent");if(e){var a=e.innerHTML.substring(4);a=a.substring(0,a.length-3);var n,o="data-require=",i=a.indexOf(o);if(-1!=i){var t=a.substring(i+o.length+1);t=t.substring(0,t.indexOf('"')),n=t.split(",")}return n=n||[],-1!=a.indexOf("type-interior")&&addLegacyDependencies(n,window.location.href),void require(n,function(){$(e).html(Globalize.translateDocument(a,"html")),g()})}g()})})}function g(){var e=[];e.push("imageLoader"),AppInfo.isNativeApp&&browserInfo.android||document.documentElement.classList.add("minimumSizeTabs"),AppInfo.isNativeApp&&browserInfo.android?e.push("css!devices/android/android.css"):AppInfo.isNativeApp&&browserInfo.safari?e.push("css!devices/ios/ios.css"):browserInfo.android||e.push("css!devices/android/android.css"),l(),browserInfo.safari&&browserInfo.mobile&&r(),Dashboard.isRunningInCordova()&&(e.push("registrationservices"),e.push("cordova/back"),browserInfo.android&&e.push("cordova/android/androidcredentials")),browserInfo.msie&&e.push("devices/ie/ie"),e.push("scripts/search"),e.push("scripts/librarylist"),e.push("scripts/alphapicker"),e.push("scripts/playlistmanager"),e.push("scripts/sync"),e.push("scripts/backdrops"),e.push("scripts/librarymenu"),e.push("scripts/librarybrowser"),e.push("css!css/card.css"),require(e,function(e){e.enableFade=browserInfo.animate&&!browserInfo.mobile,window.ImageLoader=e,$.mobile.filterHtml=Dashboard.filterHtml,$.mobile.initializePage();var a=[];a.push("scripts/thememediaplayer"),a.push("scripts/remotecontrol"),a.push("css!css/notifications.css"),a.push("css!css/chromecast.css"),a.push("apiclient-deferred"),Dashboard.isRunningInCordova()?(browserInfo.android?(a.push("cordova/android/mediasession"),a.push("cordova/android/chromecast")):a.push("cordova/volume"),browserInfo.safari&&(a.push("cordova/connectsdk/connectsdk"),a.push("cordova/ios/orientation"),Dashboard.capabilities().SupportsSync&&a.push("cordova/ios/backgroundfetch"))):browserInfo.chrome&&a.push("scripts/chromecast"),AppInfo.enableNowPlayingBar&&a.push("scripts/nowplayingbar"),AppInfo.isNativeApp&&browserInfo.safari&&a.push("cordova/ios/tabbar"),a.push("components/remotecontrolautoplay"),require(a)})}function v(){return new Promise(function(e){document.addEventListener("deviceready",function(){cordova.getAppVersion.getVersionNumber(function(a){var n=browserInfo.android?"Emby for Android Mobile":browserInfo.safari?"Emby for iOS":"Emby Mobile",o=device.model.replace(/[^\w\s]/gi,""),i=null;window.MainActivity&&(i=MainActivity.getLegacyDeviceId()),e({deviceId:i||device.uuid,deviceName:o,appName:n,appVersion:a})})},!1)})}function y(){return new Promise(function(e){function a(a){e({deviceId:a,deviceName:n,appName:"Emby Web Client",appVersion:window.dashboardVersion})}var n;n=browserInfo.chrome?"Chrome":browserInfo.edge?"Edge":browserInfo.firefox?"Firefox":browserInfo.msie?"Internet Explorer":"Web Browser",browserInfo.version&&(n+=" "+browserInfo.version),browserInfo.ipad?n+=" Ipad":browserInfo.iphone?n+=" Iphone":browserInfo.android&&(n+=" Android");var o="_deviceId1",i=appStorage.getItem(o);i?a(i):require(["cryptojs-sha1"],function(){var e=[];e.push(navigator.userAgent),e.push(navigator.cpuClass||""),e.push((new Date).getTime());var n=CryptoJS.SHA1(e.join("|")).toString();appStorage.setItem(o,n),a(n)})})}function w(){return Dashboard.isRunningInCordova()?v():y()}function I(){var e=[];e.push("browser"),e.push("appStorage"),window.Promise||e.push("native-promise-only"),require(e,function(e,n){u(e),window.browserInfo=e,window.appStorage=n,a(),s(),w().then(function(e){h(e)})})}p(),"registerElement"in document&&"content"in document.createElement("template")?I():(document.addEventListener("WebComponentsReady",I),require(["webcomponentsjs"]))}(),pageClassOn("pagecreate","page",function(){var e=this,a=e.getAttribute("data-theme");if(!a){var n;n=e.classList.contains("libraryPage")?"b":"a",e.setAttribute("data-theme",n)}}),pageClassOn("pageshow","page",function(){var e=this,a=e.classList.contains("ui-page-theme-a")?"a":"b",n=document.documentElement;"a"==a?(n.classList.add("background-theme-a"),n.classList.remove("background-theme-b"),e.classList.add("ui-body-a"),e.classList.remove("ui-body-b")):(n.classList.add("background-theme-b"),n.classList.remove("background-theme-a"),e.classList.add("ui-body-b"),e.classList.remove("ui-body-a")),"a"==a||browserInfo.mobile?document.documentElement.classList.remove("darkScrollbars"):document.documentElement.classList.add("darkScrollbars"),Dashboard.ensurePageTitle(e);var o=window.ApiClient;if(o&&o.accessToken()&&Dashboard.getCurrentUserId()){var i=e.classList.contains("type-interior");i&&(Dashboard.ensureToolsMenu(e),Dashboard.getCurrentUser().then(function(e){e.Policy.IsAdministrator||Dashboard.logout()}))}else{var t=Dashboard.isConnectMode();if(t&&!Dashboard.isServerlessPage())return void Dashboard.logout();if(!(t||"loginPage"===this.id||e.classList.contains("forgotPasswordPage")||e.classList.contains("forgotPasswordPinPage")||e.classList.contains("wizardPage")||"publicSharedItemPage"===this.id))return void Dashboard.logout()}Dashboard.ensureHeader(e),o&&!o.isWebSocketOpen()&&Dashboard.refreshSystemInfoFromServer()}),window.addEventListener("beforeunload",function(){var e=window.ApiClient;if(e&&e.isWebSocketOpen()){var a=MediaController.getPlayers().filter(function(e){return e.isLocalPlayer&&e.isPlaying()});a.length||e.closeWebSocket()}});