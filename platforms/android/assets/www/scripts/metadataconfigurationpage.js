define(["jQuery"],function(e){function t(t,a,n,o){a&&n&&o&&(t.querySelector("#chkEnableInternetProviders").checked=a.EnableInternetProviders,t.querySelector("#chkSaveLocal").checked=a.SaveLocalMeta,e("#selectLanguage",t).val(a.PreferredMetadataLanguage),e("#selectCountry",t).val(a.MetadataCountryCode),Dashboard.hideLoadingMsg())}function a(){var t=this;return Dashboard.showLoadingMsg(),ApiClient.getServerConfiguration().then(function(a){a.EnableInternetProviders=t.querySelector("#chkEnableInternetProviders").checked,a.SaveLocalMeta=t.querySelector("#chkSaveLocal").checked,a.PreferredMetadataLanguage=e("#selectLanguage",t).val(),a.MetadataCountryCode=e("#selectCountry",t).val(),ApiClient.updateServerConfiguration(a).then(Dashboard.processServerConfigurationUpdateResult)}),!1}e(document).on("pageinit","#metadataConfigurationPage",function(){Dashboard.showLoadingMsg(),e(".metadataConfigurationForm").off("submit",a).on("submit",a)}).on("pageshow","#metadataConfigurationPage",function(){function e(e,t){var a="";a+="<option value=''></option>";for(var n=0,o=t.length;o>n;n++){var r=t[n];a+="<option value='"+r.TwoLetterISOLanguageName+"'>"+r.DisplayName+"</option>"}e.innerHTML=a}function a(e,t){var a="";a+="<option value=''></option>";for(var n=0,o=t.length;o>n;n++){var r=t[n];a+="<option value='"+r.TwoLetterISORegionName+"'>"+r.DisplayName+"</option>"}e.innerHTML=a}Dashboard.showLoadingMsg();var n,o,r,i=this;ApiClient.getServerConfiguration().then(function(e){n=e,t(i,n,o,r)}),ApiClient.getCultures().then(function(a){e(i.querySelector("#selectLanguage"),a),o=a,t(i,n,o,r)}),ApiClient.getCountries().then(function(e){a(i.querySelector("#selectCountry"),e),r=e,t(i,n,o,r)})})});