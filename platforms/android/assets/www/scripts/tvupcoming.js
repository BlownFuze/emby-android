!function(){function e(e){Dashboard.showLoadingMsg();var a=AppInfo.hasLowImageBandwidth&&!r()?24:40,n={Limit:a,Fields:"AirTime,UserData,SeriesStudio,SyncInfo",UserId:Dashboard.getCurrentUserId(),ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb"};n.ParentId=LibraryMenu.getTopParentId(),ApiClient.getJSON(ApiClient.getUrl("Shows/Upcoming",n)).then(function(r){var a=r.Items;e.querySelector(".noItemsMessage").style.display=a.length?"none":"block";var n=e.querySelector("#upcomingItems");t(n,a),Dashboard.hideLoadingMsg(),LibraryBrowser.setLastRefreshed(e)})}function r(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function a(){return r()?"overflowBackdrop":"backdrop"}function t(e,t){var n,i,o=[],s="",d=[];for(n=0,i=t.length;i>n;n++){var l=t[n],c="";if(l.PremiereDate)try{c=LibraryBrowser.getFutureDateText(parseISO8601Date(l.PremiereDate,{toLocal:!0}),!0)}catch(h){}c!=s?(d.length&&o.push({name:s,items:d}),s=c,d=[l]):d.push(l)}var m="";for(n=0,i=o.length;i>n;n++){var u=o[n];m+='<div class="homePageSection">',m+='<h1 class="listHeader">'+u.name+"</h1>",m+=r()?'<div class="itemsContainer hiddenScrollX">':'<div class="itemsContainer">',m+=LibraryBrowser.getPosterViewHtml({items:u.items,showLocationTypeIndicator:!1,shape:a(),showTitle:!0,showPremiereDate:!0,preferThumb:!0,lazy:!0,showDetailsMenu:!0,centerText:!0}),m+="</div>",m+="</div>"}e.innerHTML=m,ImageLoader.lazyChildren(e)}window.TvPage.renderUpcomingTab=function(r,a){LibraryBrowser.needsRefresh(a)&&e(a)}}(jQuery,document);