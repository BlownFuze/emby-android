define(["datetime","scrollStyles"],function(e){function t(e,t){Dashboard.showLoadingMsg();var a=AppInfo.hasLowImageBandwidth&&!r()?24:40,i={Limit:a,Fields:"AirTime,UserData,SeriesStudio,SyncInfo",UserId:Dashboard.getCurrentUserId(),ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",EnableTotalRecordCount:0};i.ParentId=t.topParentId,ApiClient.getJSON(ApiClient.getUrl("Shows/Upcoming",i)).then(function(t){var r=t.Items;e.querySelector(".noItemsMessage").style.display=r.length?"none":"block";var a=e.querySelector("#upcomingItems");n(a,r),Dashboard.hideLoadingMsg()})}function r(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function a(){return r()?"overflowBackdrop":"backdrop"}function n(t,n){var i,o,s=[],l="",d=[];for(i=0,o=n.length;o>i;i++){var c=n[i],h="";if(c.PremiereDate)try{var m=e.parseISO8601Date(c.PremiereDate,!0);h=m.getDate()==(new Date).getDate()-1?Globalize.translate("Yesterday"):LibraryBrowser.getFutureDateText(m,!0)}catch(u){}h!=l?(d.length&&s.push({name:l,items:d}),l=h,d=[c]):d.push(c)}var g="";for(i=0,o=s.length;o>i;i++){var p=s[i];g+='<div class="homePageSection">',g+='<h1 class="listHeader">'+p.name+"</h1>",g+=r()?'<div class="itemsContainer hiddenScrollX">':'<div class="itemsContainer">',g+=LibraryBrowser.getPosterViewHtml({items:p.items,showLocationTypeIndicator:!1,shape:a(),showTitle:!0,showPremiereDate:!0,preferThumb:!0,lazy:!0,showDetailsMenu:!0,centerText:!0}),g+="</div>",g+="</div>"}t.innerHTML=g,ImageLoader.lazyChildren(t)}return function(e,r,a){var n=this;n.renderTab=function(){t(a,r)}}});