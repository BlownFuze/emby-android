define(["datetime","scrollStyles"],function(e){function r(e,r){Dashboard.showLoadingMsg();var t={Limit:40,Fields:"AirTime,UserData,SyncInfo",UserId:Dashboard.getCurrentUserId(),ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",EnableTotalRecordCount:!1};return t.ParentId=r.topParentId,ApiClient.getJSON(ApiClient.getUrl("Shows/Upcoming",t))}function t(e,r,t){t.then(function(r){var t=r.Items;e.querySelector(".noItemsMessage").style.display=t.length?"none":"block";var a=e.querySelector("#upcomingItems");o(a,t),Dashboard.hideLoadingMsg()})}function a(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function n(){return a()?"overflowBackdrop":"backdrop"}function o(r,t){var o,i,s=[],l="",c=[];for(o=0,i=t.length;i>o;o++){var d=t[o],u="";if(d.PremiereDate)try{var m=e.parseISO8601Date(d.PremiereDate,!0);u=m.getDate()==(new Date).getDate()-1?Globalize.translate("Yesterday"):LibraryBrowser.getFutureDateText(m,!0)}catch(h){}u!=l?(c.length&&s.push({name:l,items:c}),l=u,c=[d]):c.push(d)}var g="";for(o=0,i=s.length;i>o;o++){var p=s[o];g+='<div class="homePageSection">',g+='<h1 class="listHeader">'+p.name+"</h1>",g+=a()?'<div class="itemsContainer hiddenScrollX">':'<div class="itemsContainer">',g+=LibraryBrowser.getPosterViewHtml({items:p.items,showLocationTypeIndicator:!1,shape:n(),showTitle:!0,preferThumb:!0,lazy:!0,showDetailsMenu:!0,centerText:!0,overlayMoreButton:!0}),g+="</div>",g+="</div>"}r.innerHTML=g,LibraryBrowser.createCardMenus(r),ImageLoader.lazyChildren(r)}return function(e,a,n){var o,i=this;i.preRender=function(){o=r(e,a)},i.renderTab=function(){t(n,a,o)}}});