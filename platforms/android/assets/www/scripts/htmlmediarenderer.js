!function(){function e(e){function a(){Events.trigger(C,"ended")}function o(){Events.trigger(C,"timeupdate")}function d(){Events.trigger(C,"volumechange")}function s(e){var n=e.target;n.removeEventListener("playing",s),$(".mediaPlayerAudioContainer").hide()}function u(){Events.trigger(C,"playing")}function l(){Events.trigger(C,"play")}function v(){Events.trigger(C,"pause")}function c(){Events.trigger(C,"click")}function p(){Events.trigger(C,"dblclick")}function m(e){{var n=e.target;n.error?n.error.code:""}Events.trigger(C,"error")}function f(e){var n=e.target;n.removeEventListener("loadedmetadata",f),t||n.play()}function g(e){require(["hlsjs"],function(n){window.Hls=n,e()})}function y(e){var n=e,t=n.split("#");return t.length>1&&(t=t[t.length-1].split("="),2==t.length)?parseFloat(t[1]):0}function E(e){var n=e.target;n.removeEventListener("playing",E),C.setCurrentTrackElement(i);var t=!C.enableCustomVideoControls();if(t&&$(n).attr("controls","controls"),r){var a=(C.currentSrc()||"").toLowerCase(),o=y(a);if(o&&-1!=a.indexOf(".m3u8")){var d=browserInfo.safari?2500:0;d?setTimeout(function(){n.currentTime=o},d):n.currentTime=o}}}function L(){var e=$(".mediaPlayerAudio");if(!e.length){var n="",t=!MediaPlayer.canAutoPlayAudio();n+=t?'<div class="mediaPlayerAudioContainer" style="position: fixed;top: 40%;text-align: center;left: 0;right: 0;z-index:999999;"><div class="mediaPlayerAudioContainerInner">':'<div class="mediaPlayerAudioContainer" style="display:none;padding: 1em;background: #222;"><div class="mediaPlayerAudioContainerInner">',n+='<audio class="mediaPlayerAudio" controls>',n+="</audio></div></div>",$(document.body).append(n),e=$(".mediaPlayerAudio")}return e=e[0],e.addEventListener("playing",s),e.addEventListener("timeupdate",o),e.addEventListener("ended",a),e.addEventListener("volumechange",d),e.addEventListener("error",m),e.addEventListener("pause",v),e.addEventListener("play",l),e.addEventListener("playing",u),e}function w(e){return e&&-1==e.indexOf(".m3u8")?!1:MediaPlayer.canPlayHls()&&!MediaPlayer.canPlayNativeHls()}function h(){return"anonymous"}function k(){var n="",t=!C.enableCustomVideoControls(),r=!browserInfo.safari&&e.poster?' poster="'+e.poster+'"':"";n+=t&&AppInfo.isNativeApp&&browserInfo.android?'<video class="itemVideo" id="itemVideo" preload="metadata" autoplay="autoplay"'+r+" webkit-playsinline>":t?'<video class="itemVideo" id="itemVideo" preload="metadata" autoplay="autoplay"'+r+' controls="controls" webkit-playsinline>':'<video class="itemVideo" id="itemVideo" preload="metadata" autoplay="autoplay"'+r+" webkit-playsinline>",n+="</video>";var i=$("#videoElement","#videoPlayer").prepend(n),s=$(".itemVideo",i)[0];return s.addEventListener("loadedmetadata",f),s.addEventListener("timeupdate",o),s.addEventListener("ended",a),s.addEventListener("volumechange",d),s.addEventListener("play",l),s.addEventListener("pause",v),s.addEventListener("playing",u),s.addEventListener("click",c),s.addEventListener("dblclick",p),s.addEventListener("error",m),s}function A(e,n){var t=n.map(function(e){var n=e.isDefault?" default":"",t=e.language||"und";return'<track id="textTrack'+e.index+'" label="'+t+'" kind="subtitles" src="'+e.url+'" srclang="'+e.language+'"'+n+"></track>"}).join("");t&&(e.innerHTML=t)}var b,T,C=this;C.currentTime=function(e){return b?null!=e?void(b.currentTime=e/1e3):T?1e3*T:1e3*(b.currentTime||0):void 0},C.duration=function(){return b?b.duration:null},C.stop=function(){if(b&&(b.pause(),t)){T=b.currentTime;try{t.destroy()}catch(e){}t=null}},C.pause=function(){b&&b.pause()},C.unpause=function(){b&&b.play()},C.volume=function(e){return b?null!=e?void(b.volume=e):b.volume:void 0};var P;C.setCurrentSrc=function(e,n,a,o){var d=b;if(!d)return void(P=null);if(!e)return P=null,d.src=null,d.src="",void(browserInfo.safari&&(d.src="files/dummy.mp4",d.play()));d.crossOrigin=h(a);var s=e.url;AppInfo.isNativeApp&&browserInfo.safari&&(s=s.replace("file://","")),r=!1;var u=y(s),l=!1;if("audio"==d.tagName.toLowerCase())d.src=s,l=!0;else{d.removeEventListener("playing",E),d.addEventListener("playing",E),t&&(t.destroy(),t=null),u&&(r=!0),o=o||[];for(var v=-1,c=0,p=o.length;p>c;c++)if(o[c].isDefault){v=browserInfo.msie?c:o[c].index;break}if(i=v,w(s)){A(d,o);var m=new Hls;m.loadSource(s),m.attachMedia(d),m.on(Hls.Events.MANIFEST_PARSED,function(){d.play()}),t=m}else d.src=s,d.autoplay=!0,A(d,o),d.addEventListener("loadedmetadata",f),l=!0;C.setCurrentTrackElement(v)}P=s,l&&d.play()},C.currentSrc=function(){return b?P:void 0},C.paused=function(){return b?b.paused:!1},C.cleanup=function(){C.setCurrentSrc(null),T=null;var e=b;e&&("AUDIO"==e.tagName?(e.removeEventListener("timeupdate",o),e.removeEventListener("ended",a),e.removeEventListener("volumechange",d),e.removeEventListener("playing",s),e.removeEventListener("play",l),e.removeEventListener("pause",v),e.removeEventListener("playing",u),e.removeEventListener("error",m)):(e.removeEventListener("loadedmetadata",f),e.removeEventListener("playing",E),e.removeEventListener("timeupdate",o),e.removeEventListener("ended",a),e.removeEventListener("volumechange",d),e.removeEventListener("play",l),e.removeEventListener("pause",v),e.removeEventListener("playing",u),e.removeEventListener("click",c),e.removeEventListener("dblclick",p),e.removeEventListener("error",m)),"audio"!=e.tagName.toLowerCase()&&$(e).remove())},C.supportsTextTracks=function(){return null==n&&(n=null!=document.createElement("video").textTracks),n},C.setCurrentTrackElement=function(e){for(var n=b.textTracks,t=["disabled","showing","hidden"],r="textTrack"+e,i=0;i<n.length;i++){var a,o=n[i];a=browserInfo.msie?e==i?1:0:o.id==r?1:0;var d=!1;!isNaN(o.mode),o.mode=d?a:t[a]}},C.updateTextStreamUrls=function(e){if(C.supportsTextTracks()){for(var n=b.textTracks,t=0;t<n.length;t++){var r=n[t];try{for(;r.cues.length;)r.removeCue(r.cues[0])}catch(i){}}$("track",b).each(function(){this.src=replaceQueryString(this.src,"startPositionTicks",e)})}},C.enableCustomVideoControls=function(){return AppInfo.isNativeApp&&browserInfo.safari?-1!=navigator.userAgent.toLowerCase().indexOf("iphone")?!0:!1:C.canAutoPlayVideo()},C.canAutoPlayVideo=function(){return AppInfo.isNativeApp?!0:browserInfo.mobile?!1:!0},C.init=function(){return new Promise(function(n){"video"==e.type&&w()?g(n):n()})},b="audio"==e.type?L():k()}var n,t,r,i;window.AudioRenderer||(window.AudioRenderer=function(n){return n=n||{},n.type="audio",new e(n)}),window.VideoRenderer||(window.VideoRenderer=function(n){return n=n||{},n.type="video",new e(n)})}();