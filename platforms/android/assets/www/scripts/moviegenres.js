define(["jQuery"],function(e){return function(t,r,o){function a(){var e=n(),t=y[e];return t||(t=y[e]={query:{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Movie",Recursive:!0,Fields:"DateCreated,SyncInfo,ItemCounts",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Thumb","Thumb")},t.query.ParentId=r.topParentId,LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function i(){return a().query}function n(){return LibraryBrowser.getSavedQueryKey("genres")}function s(t){Dashboard.showLoadingMsg();var r=i();ApiClient.getGenres(Dashboard.getCurrentUserId(),r).then(function(o){window.scrollTo(0,0);var i="",u=a().view;e(".listTopPaging",t).html(LibraryBrowser.getQueryPagingHtml({startIndex:r.StartIndex,limit:r.Limit,totalRecordCount:o.TotalRecordCount,viewButton:!1,showLimit:!1,updatePageSizeSetting:!1,addLayoutButton:!0,currentLayout:u})),"Thumb"==u?i=LibraryBrowser.getPosterViewHtml({items:o.Items,shape:"backdrop",preferThumb:!0,showItemCounts:!0,centerText:!0,lazy:!0,overlayPlayButton:!0,context:"movies"}):"ThumbCard"==u?i=LibraryBrowser.getPosterViewHtml({items:o.Items,shape:"backdrop",preferThumb:!0,showItemCounts:!0,cardLayout:!0,showTitle:!0,lazy:!0,context:"movies"}):"PosterCard"==u?i=LibraryBrowser.getPosterViewHtml({items:o.Items,shape:"portrait",showItemCounts:!0,lazy:!0,cardLayout:!0,showTitle:!0,context:"movies"}):"Poster"==u&&(i=LibraryBrowser.getPosterViewHtml({items:o.Items,shape:"portrait",centerText:!0,showItemCounts:!0,lazy:!0,overlayPlayButton:!0,context:"movies"}));var y=t.querySelector(".itemsContainer");y.innerHTML=i,ImageLoader.lazyChildren(y),e(".btnNextPage",t).on("click",function(){r.StartIndex+=r.Limit,s(t)}),e(".btnPreviousPage",t).on("click",function(){r.StartIndex-=r.Limit,s(t)}),e(".btnChangeLayout",t).on("layoutchange",function(e,r){a().view=r,LibraryBrowser.saveViewSetting(n(),r),s(t)}),LibraryBrowser.saveQueryValues(n(),r),Dashboard.hideLoadingMsg()})}var u=this,y={};u.renderTab=function(){s(o)}}});