define([],function(){return function(e,r,t){function o(){var e=i(),t=u[e];return t||(t=u[e]={query:{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Movie",Recursive:!0,Fields:"DateCreated,SyncInfo,ItemCounts",StartIndex:0},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Thumb","Thumb")},t.query.ParentId=r.topParentId,LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function n(){return o().query}function i(){return LibraryBrowser.getSavedQueryKey("genres")}function a(e){Dashboard.showLoadingMsg();var r=n();ApiClient.getGenres(Dashboard.getCurrentUserId(),r).then(function(t){var o="",n=s.getCurrentViewStyle();"Thumb"==n?o=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"backdrop",preferThumb:!0,context:"movies",showItemCounts:!0,centerText:!0,lazy:!0,overlayPlayButton:!0}):"ThumbCard"==n?o=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"backdrop",preferThumb:!0,context:"movies",showItemCounts:!0,cardLayout:!0,showTitle:!0,lazy:!0}):"PosterCard"==n?o=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"portrait",context:"movies",showItemCounts:!0,lazy:!0,cardLayout:!0,showTitle:!0}):"Poster"==n&&(o=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"portrait",context:"movies",centerText:!0,showItemCounts:!0,lazy:!0,overlayPlayButton:!0}));var a=e.querySelector("#items");a.innerHTML=o,ImageLoader.lazyChildren(a),LibraryBrowser.saveQueryValues(i(),r),Dashboard.hideLoadingMsg()})}var s=this,u={};s.getViewStyles=function(){return"Poster,PosterCard,Thumb,ThumbCard".split(",")},s.getCurrentViewStyle=function(){return o(t).view},s.setCurrentViewStyle=function(e){o(t).view=e,LibraryBrowser.saveViewSetting(i(t),e),a(t)},s.enableViewSelection=!0,s.renderTab=function(){a(t)};var y=t.querySelector(".btnSelectView");y.addEventListener("click",function(e){LibraryBrowser.showLayoutMenu(e.target,s.getCurrentViewStyle(),s.getViewStyles())}),y.addEventListener("layoutchange",function(e){s.setCurrentViewStyle(e.detail.viewStyle)})}});