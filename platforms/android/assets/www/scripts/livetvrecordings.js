define(["jQuery","scripts/livetvcomponents"],function(e){function r(e){var r="";return r+="<paper-icon-item>",r+='<paper-fab mini class="blue" icon="live-tv" item-icon></paper-fab>',r+="<paper-item-body two-line>",r+='<a href="livetvrecordinglist.html?groupid='+e.Id+'" class="clearLink">',r+="<div>",r+=e.Name,r+="</div>",r+="<div secondary>",r+=1==e.RecordingCount?Globalize.translate("ValueItemCount",e.RecordingCount):Globalize.translate("ValueItemCountPlural",e.RecordingCount),r+="</div>",r+="</a>",r+="</paper-item-body>",r+="</paper-icon-item>"}function i(i,n){n.length?e("#recordingGroups",i).show():e("#recordingGroups",i).hide();var t="";t+='<div class="paperList">';for(var o=0,s=n.length;s>o;o++)t+=r(n[o]);t+="</div>",i.querySelector("#recordingGroupItems").innerHTML=t,Dashboard.hideLoadingMsg()}function n(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function t(e,r){r.length?e.classList.remove("hide"):e.classList.add("hide");var i=e.querySelector(".recordingItems");n()?i.classList.add("hiddenScrollX"):i.classList.remove("hiddenScrollX"),i.innerHTML=LibraryBrowser.getPosterViewHtml({items:r,shape:n()?"autooverflow":"auto",showTitle:!0,showParentTitle:!0,coverImage:!0,lazy:!0,cardLayout:!0}),ImageLoader.lazyChildren(i)}function o(e){ApiClient.getLiveTvRecordings({userId:Dashboard.getCurrentUserId(),IsInProgress:!0,Fields:"CanDelete"}).then(function(r){t(e.querySelector("#activeRecordings"),r.Items)})}function s(e){ApiClient.getLiveTvRecordings({userId:Dashboard.getCurrentUserId(),limit:n()?12:4,IsInProgress:!1,Fields:"CanDelete,PrimaryImageAspectRatio"}).then(function(r){t(e.querySelector("#latestRecordings"),r.Items)})}function a(e,r){LiveTvHelpers.getTimersHtml(r).then(function(r){var i=e.querySelector("#upcomingRecordings");r?i.classList.remove("hide"):i.classList.add("hide"),i.querySelector(".recordingItems").innerHTML=r,ImageLoader.lazyChildren(i),LibraryBrowser.createCardMenus(i)})}function c(e){ApiClient.getLiveTvTimers().then(function(r){a(e,r.Items)})}function d(e){Dashboard.showLoadingMsg(),c(e),o(e),s(e),ApiClient.getLiveTvRecordingGroups({userId:Dashboard.getCurrentUserId()}).then(function(r){require(["paper-fab","paper-item-body","paper-icon-item"],function(){i(e,r.Items)})})}return function(e,r,i){var n=this;i.querySelector("#upcomingRecordings .recordingItems").addEventListener("timercancelled",function(){d(i)}),n.renderTab=function(){d(i)}}});