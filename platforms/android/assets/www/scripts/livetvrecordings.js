define(["components/categorysyncbuttons","scripts/livetvcomponents","emby-button","listViewStyle","emby-itemscontainer"],function(e){function t(e){var t="";return t+='<div class="listItem">',t+='<button type="button" is="emby-button" class="fab mini autoSize blue" item-icon><i class="md-icon">live_tv</i></button>',t+='<div class="listItemBody two-line">',t+='<a href="livetvrecordinglist.html?groupid='+e.Id+'" class="clearLink">',t+="<div>",t+=e.Name,t+="</div>",t+='<div class="secondary">',t+=1==e.RecordingCount?Globalize.translate("ValueItemCount",e.RecordingCount):Globalize.translate("ValueItemCountPlural",e.RecordingCount),t+="</div>",t+="</a>",t+="</div>",t+="</div>"}function i(e,i){i.length?e.querySelector("#recordingGroups").classList.remove("hide"):e.querySelector("#recordingGroups").classList.add("hide");var n="";n+='<div class="paperList">';for(var r=0,o=i.length;o>r;r++)n+=t(i[r]);n+="</div>",e.querySelector("#recordingGroupItems").innerHTML=n,Dashboard.hideLoadingMsg()}function n(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function r(e,t){t.length?e.classList.remove("hide"):e.classList.add("hide");var i=e.querySelector(".recordingItems");n()?i.classList.add("hiddenScrollX"):i.classList.remove("hiddenScrollX"),i.innerHTML=LibraryBrowser.getPosterViewHtml({items:t,shape:n()?"autooverflow":"auto",showTitle:!0,showParentTitle:!0,coverImage:!0,lazy:!0,cardLayout:!0}),ImageLoader.lazyChildren(i)}function o(e){ApiClient.getLiveTvTimers({IsActive:!0}).then(function(t){t.Items.length&&"InProgress"!=t.Items[0].Status&&(t.Items=[]),c(e.querySelector("#activeRecordings"),t.Items,{indexByDate:!1})})}function s(e){ApiClient.getLiveTvRecordings({userId:Dashboard.getCurrentUserId(),limit:n()?12:4,IsInProgress:!1,Fields:"CanDelete,PrimaryImageAspectRatio",EnableTotalRecordCount:!1}).then(function(t){r(e.querySelector("#latestRecordings"),t.Items)})}function c(e,t,i){LiveTvHelpers.getTimersHtml(t,i).then(function(t){var i=e;t?i.classList.remove("hide"):i.classList.add("hide"),i.querySelector(".recordingItems").innerHTML=t,ImageLoader.lazyChildren(i)})}function a(e){ApiClient.getLiveTvTimers({IsActive:!1}).then(function(t){c(e.querySelector("#upcomingRecordings"),t.Items)})}function l(e){Dashboard.showLoadingMsg(),a(e),o(e),s(e),ApiClient.getLiveTvRecordingGroups({userId:Dashboard.getCurrentUserId()}).then(function(t){i(e,t.Items)})}return function(t,i,n){var r=this;e.init(n),n.querySelector("#activeRecordings .recordingItems").addEventListener("timercancelled",function(){l(n)}),n.querySelector("#upcomingRecordings .recordingItems").addEventListener("timercancelled",function(){l(n)}),r.renderTab=function(){l(n)}}});