define(["scripts/livetvcomponents","emby-button","listViewStyle"],function(){function e(e){var t="";return t+='<div class="listItem">',t+='<button type="button" is="emby-button" class="fab mini autoSize blue" item-icon><i class="md-icon">live_tv</i></button>',t+='<div class="listItemBody">',t+='<a href="livetvrecordinglist.html?groupid='+e.Id+'" class="clearLink">',t+="<div>",t+=e.Name,t+="</div>",t+='<div class="secondary">',t+=1==e.RecordingCount?Globalize.translate("ValueItemCount",e.RecordingCount):Globalize.translate("ValueItemCountPlural",e.RecordingCount),t+="</div>",t+="</a>",t+="</div>",t+="</div>"}function t(t,i){i.length?t.querySelector("#recordingGroups").classList.remove("hide"):t.querySelector("#recordingGroups").classList.add("hide");var r="";r+='<div class="paperList">';for(var n=0,o=i.length;o>n;n++)r+=e(i[n]);r+="</div>",t.querySelector("#recordingGroupItems").innerHTML=r,Dashboard.hideLoadingMsg()}function i(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function r(e,t){t.length?e.classList.remove("hide"):e.classList.add("hide");var r=e.querySelector(".recordingItems");i()?r.classList.add("hiddenScrollX"):r.classList.remove("hiddenScrollX"),r.innerHTML=LibraryBrowser.getPosterViewHtml({items:t,shape:i()?"autooverflow":"auto",showTitle:!0,showParentTitle:!0,coverImage:!0,lazy:!0,cardLayout:!0}),ImageLoader.lazyChildren(r)}function n(e){ApiClient.getLiveTvTimers({IsActive:!0}).then(function(t){t.Items.length&&"InProgress"!=t.Items[0].Status&&(t.Items=[]),s(e.querySelector("#activeRecordings"),t.Items,{indexByDate:!1})})}function o(e){ApiClient.getLiveTvRecordings({userId:Dashboard.getCurrentUserId(),limit:i()?12:4,IsInProgress:!1,Fields:"CanDelete,PrimaryImageAspectRatio",EnableTotalRecordCount:!1}).then(function(t){r(e.querySelector("#latestRecordings"),t.Items)})}function s(e,t,i){LiveTvHelpers.getTimersHtml(t,i).then(function(t){var i=e;t?i.classList.remove("hide"):i.classList.add("hide"),i.querySelector(".recordingItems").innerHTML=t,ImageLoader.lazyChildren(i),LibraryBrowser.createCardMenus(i)})}function a(e){ApiClient.getLiveTvTimers({IsActive:!1}).then(function(t){s(e.querySelector("#upcomingRecordings"),t.Items)})}function c(e){Dashboard.showLoadingMsg(),a(e),n(e),o(e),ApiClient.getLiveTvRecordingGroups({userId:Dashboard.getCurrentUserId()}).then(function(i){t(e,i.Items)})}return function(e,t,i){var r=this;i.querySelector("#activeRecordings .recordingItems").addEventListener("timercancelled",function(){c(i)}),i.querySelector("#upcomingRecordings .recordingItems").addEventListener("timercancelled",function(){c(i)}),r.renderTab=function(){c(i)}}});