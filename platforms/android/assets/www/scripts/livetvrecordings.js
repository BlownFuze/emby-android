define(["jQuery","scripts/livetvcomponents"],function(e){function r(e){var r="";return r+="<paper-icon-item>",r+='<paper-fab mini class="blue" icon="live-tv" item-icon></paper-fab>',r+="<paper-item-body two-line>",r+='<a href="livetvrecordinglist.html?groupid='+e.Id+'" class="clearLink">',r+="<div>",r+=e.Name,r+="</div>",r+="<div secondary>",r+=1==e.RecordingCount?Globalize.translate("ValueItemCount",e.RecordingCount):Globalize.translate("ValueItemCountPlural",e.RecordingCount),r+="</div>",r+="</a>",r+="</paper-item-body>",r+="</paper-icon-item>"}function i(i,n){n.length?e("#recordingGroups",i).show():e("#recordingGroups",i).hide();var t="";t+='<div class="paperList">';for(var o=0,s=n.length;s>o;o++)t+=r(n[o]);t+="</div>",i.querySelector("#recordingGroupItems").innerHTML=t,Dashboard.hideLoadingMsg()}function n(){return t()?"overflowSquare":"square"}function t(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function o(e,r){r.length?e.classList.remove("hide"):e.classList.add("hide");var i=e.querySelector(".recordingItems");t()?i.classList.add("hiddenScrollX"):i.classList.remove("hiddenScrollX"),i.innerHTML=LibraryBrowser.getPosterViewHtml({items:r,shape:t()?n():"auto",showTitle:!0,showParentTitle:!0,centerText:!0,coverImage:!0,lazy:!0,overlayPlayButton:!0}),ImageLoader.lazyChildren(i)}function s(e){ApiClient.getLiveTvRecordings({userId:Dashboard.getCurrentUserId(),IsInProgress:!0,Fields:"CanDelete"}).then(function(r){o(e.querySelector("#activeRecordings"),r.Items)})}function a(e){ApiClient.getLiveTvRecordings({userId:Dashboard.getCurrentUserId(),limit:4,IsInProgress:!1,Fields:"CanDelete,PrimaryImageAspectRatio"}).then(function(r){o(e.querySelector("#latestRecordings"),r.Items)})}function c(r,i){LiveTvHelpers.getTimersHtml(i).then(function(i){var n=r.querySelector("#upcomingRecordings");i?n.classList.remove("hide"):n.classList.add("hide"),n.querySelector(".recordingItems").innerHTML=i,ImageLoader.lazyChildren(n),e(n).createCardMenus()})}function d(e){ApiClient.getLiveTvTimers().then(function(r){c(e,r.Items)})}function l(e){Dashboard.showLoadingMsg(),d(e),s(e),a(e),ApiClient.getLiveTvRecordingGroups({userId:Dashboard.getCurrentUserId()}).then(function(r){require(["paper-fab","paper-item-body","paper-icon-item"],function(){i(e,r.Items)})})}return function(e,r,i){var n=this;i.querySelector("#upcomingRecordings .recordingItems").addEventListener("timercancelled",function(){l(i)}),n.renderTab=function(){l(i)}}});