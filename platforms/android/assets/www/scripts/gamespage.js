!function(e,t){function r(){return LibraryBrowser.getSavedQueryKey()}function a(t){Dashboard.showLoadingMsg(),ApiClient.getItems(Dashboard.getCurrentUserId(),c).then(function(o){window.scrollTo(0,0);var n="";e(".listTopPaging",t).html(LibraryBrowser.getQueryPagingHtml({startIndex:c.StartIndex,limit:c.Limit,totalRecordCount:o.TotalRecordCount,viewButton:!0,showLimit:!1})),i(t);"List"==s?n=LibraryBrowser.getListViewHtml({items:o.Items,context:"games",sortBy:c.SortBy}):"Poster"==s?n=LibraryBrowser.getPosterViewHtml({items:o.Items,shape:"auto",context:"games",showTitle:!0,showParentTitle:!0,centerText:!0}):"PosterCard"==s&&(n=LibraryBrowser.getPosterViewHtml({items:o.Items,shape:"auto",context:"games",showTitle:!0,showParentTitle:!0,cardLayout:!0}));var d=t.querySelector("#items");d.innerHTML=n,ImageLoader.lazyChildren(d),e(".btnNextPage",t).on("click",function(){c.StartIndex+=c.Limit,a(t)}),e(".btnPreviousPage",t).on("click",function(){c.StartIndex-=c.Limit,a(t)}),LibraryBrowser.saveQueryValues(r(),c),Dashboard.hideLoadingMsg()})}function i(t){e(".radioSortBy",t).each(function(){this.checked=(c.SortBy||"").toLowerCase()==this.getAttribute("data-sortby").toLowerCase()}).checkboxradio("refresh"),e(".radioSortOrder",t).each(function(){this.checked=(c.SortOrder||"").toLowerCase()==this.getAttribute("data-sortorder").toLowerCase()}).checkboxradio("refresh"),e(".radioPlayers",t).each(function(){var e=this.getAttribute("data-value");this.checked="all"==e?null==c.MinPlayers:c.MinPlayers==e}).checkboxradio("refresh"),e(".chkStandardFilter",t).each(function(){var e=","+(c.Filters||""),t=this.getAttribute("data-filter");this.checked=-1!=e.indexOf(","+t)}).checkboxradio("refresh"),e("#selectView",t).val(s),e(".alphabetPicker",t).alphaValue(c.NameStartsWith),e("#selectPageSize",t).val(c.Limit)}function o(e){n||(n=!0,QueryFilters.loadFilters(e,Dashboard.getCurrentUserId(),c,function(){a(e)}))}var n,s=LibraryBrowser.getDefaultItemsView("Poster","List"),c={SortBy:"SortName",SortOrder:"Ascending",MediaTypes:"Game",Recursive:!0,Fields:"Genres,Studios,PrimaryImageAspectRatio,SortName",StartIndex:0,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb"};e(t).on("pageinit","#gamesPage",function(){var t=this;e(".viewPanel",t).on("panelopen",function(){o(t)}),e(".radioSortBy",this).on("click",function(){c.StartIndex=0,c.SortBy=this.getAttribute("data-sortby"),a(t)}),e(".radioSortOrder",this).on("click",function(){c.StartIndex=0,c.SortOrder=this.getAttribute("data-sortorder"),a(t)}),e(".radioPlayers",this).on("click",function(){c.StartIndex=0;var e=this.getAttribute("data-value");c.MinPlayers="all"==e?null:e,a(t)}),e(".chkStandardFilter",this).on("change",function(){var e=this.getAttribute("data-filter"),r=c.Filters||"";r=(","+r).replace(","+e,"").substring(1),this.checked&&(r=r?r+","+e:e),c.StartIndex=0,c.Filters=r,a(t)}),e(".alphabetPicker",this).on("alphaselect",function(e,r){c.NameStartsWithOrGreater=r,c.StartIndex=0,a(t)}).on("alphaclear",function(){c.NameStartsWithOrGreater="",a(t)}),e("#selectView",this).on("change",function(){s=this.value,"Timeline"==s?(c.SortBy="PremiereDate",c.SortOrder="Descending",c.StartIndex=0,e("#radioPremiereDate",t)[0].click()):a(t),LibraryBrowser.saveViewSetting(r(),s)}),e("#selectPageSize",t).on("change",function(){c.Limit=parseInt(this.value),c.StartIndex=0,a(t)})}).on("pagebeforeshow","#gamesPage",function(){var t=this;c.ParentId=LibraryMenu.getTopParentId();var o=LibraryBrowser.getDefaultPageSize();o!=c.Limit&&(c.Limit=o,c.StartIndex=0);var n=r();LibraryBrowser.loadSavedQueryValues(n,c),QueryFilters.onPageShow(t,c),LibraryBrowser.getSavedViewSetting(n).then(function(r){r?e("#selectView",t).val(r).trigger("change"):a(t)}),i(this)})}(jQuery,document);