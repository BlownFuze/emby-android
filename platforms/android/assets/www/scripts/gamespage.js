!function(e,r){function t(){var e=i(),r=s[e];return r||(r=s[e]={query:{SortBy:"SortName",SortOrder:"Ascending",MediaTypes:"Game",Recursive:!0,Fields:"Genres,Studios,PrimaryImageAspectRatio,SortName",ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Poster","List")},r.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(e,r.query)),r}function a(){return t().query}function i(){return LibraryBrowser.getSavedQueryKey("movies")}function n(r){Dashboard.showLoadingMsg();var s=a();ApiClient.getItems(Dashboard.getCurrentUserId(),s).then(function(a){window.scrollTo(0,0);var u="";e(".listTopPaging",r).html(LibraryBrowser.getQueryPagingHtml({startIndex:s.StartIndex,limit:s.Limit,totalRecordCount:a.TotalRecordCount,showLimit:!1,filterButton:!0}));var g=t().view;"List"==g?u=LibraryBrowser.getListViewHtml({items:a.Items,context:"games",sortBy:s.SortBy}):"Poster"==g?u=LibraryBrowser.getPosterViewHtml({items:a.Items,shape:"auto",context:"games",showTitle:!0,showParentTitle:!0,centerText:!0}):"PosterCard"==g&&(u=LibraryBrowser.getPosterViewHtml({items:a.Items,shape:"auto",context:"games",showTitle:!0,showParentTitle:!0,cardLayout:!0}));var l=r.querySelector("#items");l.innerHTML=u,ImageLoader.lazyChildren(l),e(".btnNextPage",r).on("click",function(){s.StartIndex+=s.Limit,n(r)}),e(".btnPreviousPage",r).on("click",function(){s.StartIndex-=s.Limit,n(r)}),e(".btnFilter",r).on("click",function(){o(r)}),LibraryBrowser.saveQueryValues(i(),s),Dashboard.hideLoadingMsg()})}function o(e){require(["components/filterdialog/filterdialog"],function(r){var t=new r({query:a(),mode:"games"});Events.on(t,"filterchange",function(){n(e)}),t.show()})}var s={};e(r).on("pageinit","#gamesPage",function(){var r=this;e(".alphabetPicker",this).on("alphaselect",function(e,t){var i=a();i.NameStartsWithOrGreater=t,i.StartIndex=0,n(r)}).on("alphaclear",function(){var e=a();e.NameStartsWithOrGreater="",n(r)})}).on("pagebeforeshow","#gamesPage",function(){var r=this,t=a();t.ParentId=LibraryMenu.getTopParentId();var o=LibraryBrowser.getDefaultPageSize();o!=t.Limit&&(t.Limit=o,t.StartIndex=0);var s=i();LibraryBrowser.loadSavedQueryValues(s,t),LibraryBrowser.getSavedViewSetting(s).then(function(t){t?e("#selectView",r).val(t).trigger("change"):n(r)})})}(jQuery,document);