define(["jQuery","cardBuilder"],function(e,t){function i(n){Dashboard.showLoadingMsg(),ApiClient.getLiveTvRecordings(a).then(function(o){window.scrollTo(0,0);var s="";e(".listTopPaging",n).html(LibraryBrowser.getQueryPagingHtml({startIndex:a.StartIndex,limit:a.Limit,totalRecordCount:o.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1})),r();var d=window.innerWidth;s+=t.getCardsHtml({items:o.Items,shape:"auto",showTitle:!0,showParentTitle:!0,overlayText:d>=600,coverImage:!0}),s+=LibraryBrowser.getQueryPagingHtml({startIndex:a.StartIndex,limit:a.Limit,totalRecordCount:o.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1});var l=n.querySelector("#items");l.innerHTML=s,ImageLoader.lazyChildren(l),e(".btnNextPage",n).on("click",function(){a.StartIndex+=a.Limit,i(n)}),e(".btnPreviousPage",n).on("click",function(){a.StartIndex-=a.Limit,i(n)}),e(".selectPageSize",n).on("change",function(){a.Limit=parseInt(this.value),a.StartIndex=0,i(n)}),"false"!=getParameterByName("savequery")&&LibraryBrowser.saveQueryValues("episodes",a),Dashboard.hideLoadingMsg()})}function r(){}var a={UserId:Dashboard.getCurrentUserId(),StartIndex:0,Fields:"CanDelete,PrimaryImageAspectRatio"};e(document).on("pageinit","#liveTvRecordingListPage",function(){}).on("pagebeforeshow","#liveTvRecordingListPage",function(){var t=this,n=LibraryBrowser.getDefaultPageSize();n!=a.Limit&&(a.Limit=n,a.StartIndex=0),LibraryBrowser.loadSavedQueryValues("episodes",a);var o=getParameterByName("groupid");a.GroupId=o,i(t),a.GroupId?ApiClient.getLiveTvRecordingGroup(a.GroupId).then(function(i){e(".listName",t).html(i.Name)}):e(".listName",t).html(Globalize.translate("HeaderAllRecordings")),r(this)})});