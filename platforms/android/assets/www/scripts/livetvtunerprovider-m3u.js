!function(e,t){function a(e,t){e.querySelector(".txtDevicePath").value="",t&&ApiClient.getNamedConfiguration("livetv").then(function(a){var n=a.TunerHosts.filter(function(e){return e.Id==t})[0];e.querySelector(".txtDevicePath").value=n.Url||""})}function n(e){Dashboard.showLoadingMsg();var t={Type:"m3u",Url:e.querySelector(".txtDevicePath").value},a=getParameterByName("id");a&&(t.Id=a),ApiClient.ajax({type:"POST",url:ApiClient.getUrl("LiveTv/TunerHosts"),data:JSON.stringify(t),contentType:"application/json"}).then(function(){Dashboard.processServerConfigurationUpdateResult(),Dashboard.navigate("livetvstatus.html")},function(){Dashboard.hideLoadingMsg(),Dashboard.alert({message:Globalize.translate("ErrorSavingTvProvider")})})}e(t).on("pageinit","#liveTvTunerProviderM3UPage",function(){var t=this;e("form",t).on("submit",function(){return n(t),!1})}).on("pageshow","#liveTvTunerProviderM3UPage",function(){var e=getParameterByName("id"),t=this;a(t,e)})}(jQuery,document,window);