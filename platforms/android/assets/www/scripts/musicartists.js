define(["jQuery"],function(e){return function(r,t,a){function i(e){var r=o(e),t=l[r];return t||(t=l[r]={query:{SortBy:"SortName",SortOrder:"Ascending",Recursive:!0,Fields:"PrimaryImageAspectRatio,SortName,DateCreated,SyncInfo,ItemCounts",StartIndex:0,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(r)||LibraryBrowser.getDefaultItemsView("Poster","Poster")},t.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(r,t.query)),t}function n(e){return i(e).query}function o(e){return e.savedQueryKey||(e.savedQueryKey=LibraryBrowser.getSavedQueryKey("artists")),e.savedQueryKey}function s(r){Dashboard.showLoadingMsg();var t=n(r);ApiClient.getArtists(Dashboard.getCurrentUserId(),t).then(function(a){window.scrollTo(0,0);var n=i(r).view,y="",l=LibraryBrowser.getQueryPagingHtml({startIndex:t.StartIndex,limit:t.Limit,totalRecordCount:a.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1,addLayoutButton:!0,currentLayout:n,filterButton:!0});r.querySelector(".listTopPaging").innerHTML=l,c(r),"List"==n?y=LibraryBrowser.getListViewHtml({items:a.Items,context:"music",sortBy:t.SortBy}):"Poster"==n?y=LibraryBrowser.getPosterViewHtml({items:a.Items,shape:"square",context:"music",showTitle:!0,coverImage:!0,lazy:!0,centerText:!0,overlayPlayButton:!0}):"PosterCard"==n&&(y=LibraryBrowser.getPosterViewHtml({items:a.Items,shape:"square",context:"music",showTitle:!0,coverImage:!0,lazy:!0,cardLayout:!0,showSongCount:!0}));var d=r.querySelector("#items");d.innerHTML=y+l,ImageLoader.lazyChildren(d),e(".btnNextPage",r).on("click",function(){t.StartIndex+=t.Limit,s(r)}),e(".btnPreviousPage",r).on("click",function(){t.StartIndex-=t.Limit,s(r)}),e(".btnChangeLayout",r).on("layoutchange",function(e,t){i(r).view=t,LibraryBrowser.saveViewSetting(o(r),t),s(r)}),e(".btnFilter",r).on("click",function(){u(r)}),LibraryBrowser.saveQueryValues(o(r),t),Dashboard.hideLoadingMsg()})}function u(e){require(["components/filterdialog/filterdialog"],function(r){var t=new r({query:n(e),mode:"artists"});Events.on(t,"filterchange",function(){s(e)}),t.show()})}function c(r){var t=n(r);e(".alphabetPicker",r).alphaValue(t.NameStartsWithOrGreater)}var y=this,l={};e(".alphabetPicker",a).on("alphaselect",function(e,r){var t=n(a);t.NameStartsWithOrGreater=r,t.StartIndex=0,s(a)}).on("alphaclear",function(){var e=n(a);e.NameStartsWithOrGreater="",s(a)}),y.renderTab=function(){s(a)}}});