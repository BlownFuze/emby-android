define(["cardBuilder","emby-itemscontainer"],function(e){return function(r,t,n){function i(e){var r=o(e),t=y[r];return t||(t=y[r]={query:{StartIndex:0,EnableFavoriteSorting:!0,Limit:LibraryBrowser.getDefaultPageSize()}},LibraryBrowser.loadSavedQueryValues(r,t.query)),t}function a(e){return i(e).query}function o(e){return e.savedQueryKey||(e.savedQueryKey=LibraryBrowser.getSavedQueryKey("channels")),e.savedQueryKey}function u(r){return e.getCardsHtml({items:r,shape:"square",showTitle:!0,lazy:!0,cardLayout:!0,showDetailsMenu:!0})}function l(e,r){function t(){i.StartIndex+=i.Limit,d(e)}function n(){i.StartIndex-=i.Limit,d(e)}var i=a(e);e.querySelector(".paging").innerHTML=LibraryBrowser.getQueryPagingHtml({startIndex:i.StartIndex,limit:i.Limit,totalRecordCount:r.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1,filterButton:!1});var l=u(r.Items),s=e.querySelector("#items");s.innerHTML=l,ImageLoader.lazyChildren(s);var c,y,g;for(g=e.querySelectorAll(".btnNextPage"),c=0,y=g.length;y>c;c++)g[c].addEventListener("click",t);for(g=e.querySelectorAll(".btnPreviousPage"),c=0,y=g.length;y>c;c++)g[c].addEventListener("click",n);LibraryBrowser.saveQueryValues(o(e),i)}function s(e){require(["components/filterdialog/filterdialog"],function(r){var t=new r({query:a(e),mode:"livetvchannels"});Events.on(t,"filterchange",function(){d(e)}),t.show()})}function d(e){Dashboard.showLoadingMsg();var r=a(e);r.UserId=Dashboard.getCurrentUserId(),ApiClient.getLiveTvChannels(r).then(function(r){l(e,r),Dashboard.hideLoadingMsg()})}var c=this,y={};n.querySelector(".btnFilter").addEventListener("click",function(){s(n)}),c.renderTab=function(){d(n)}}});