define(["jQuery"],function(e){function r(e){var r=n(e),t=s[r];return t||(t=s[r]={query:{StartIndex:0,EnableFavoriteSorting:!0,Limit:LibraryBrowser.getDefaultPageSize()}},LibraryBrowser.loadSavedQueryValues(r,t.query)),t}function t(e){return r(e).query}function n(e){return e.savedQueryKey||(e.savedQueryKey=LibraryBrowser.getSavedQueryKey("channels")),e.savedQueryKey}function i(e){return LibraryBrowser.getPosterViewHtml({items:e,shape:"square",showTitle:!0,lazy:!0,cardLayout:!0,showDetailsMenu:!0})}function a(r,a){var s=t(r);e(".listTopPaging",r).html(LibraryBrowser.getQueryPagingHtml({startIndex:s.StartIndex,limit:s.Limit,totalRecordCount:a.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1,filterButton:!0}));var l=i(a.Items),d=r.querySelector("#items");d.innerHTML=l,ImageLoader.lazyChildren(d),e(".btnNextPage",r).on("click",function(){s.StartIndex+=s.Limit,u(r)}),e(".btnPreviousPage",r).on("click",function(){s.StartIndex-=s.Limit,u(r)}),e(".btnFilter",r).on("click",function(){o(r)}),LibraryBrowser.saveQueryValues(n(r),s)}function o(e){require(["components/filterdialog/filterdialog"],function(r){var n=new r({query:t(e),mode:"livetvchannels"});Events.on(n,"filterchange",function(){u(e)}),n.show()})}function u(e){Dashboard.showLoadingMsg();var r=t(e);r.UserId=Dashboard.getCurrentUserId(),ApiClient.getLiveTvChannels(r).then(function(r){a(e,r),Dashboard.hideLoadingMsg()})}var s={};window.LiveTvPage.renderChannelsTab=function(e,r){u(r)}});