!function(){function e(e,n){var t=n.split("-");return 2==t.length&&(t[1]=t[1].toUpperCase(),n=t.join("-")),"strings/"+e+"/"+n+".json"}function n(n,t){return g[e(n,t)]}function t(t,r){return new Promise(function(o){if(n(t,r))return void o();var u=e(t,r),a=u+"?v="+AppInfo.appVersion;Logger.log("Requesting "+a);var i=new XMLHttpRequest;i.open("GET",a,!0);var s=function(){Logger.log("Dictionary not found. Reverting to english");var n=new XMLHttpRequest;n.open("GET",e(t,"en-US"),!0),n.onload=function(){g[u]=JSON.parse(this.response),o()},n.send()};i.onload=function(){Logger.log("Globalize response status: "+this.status),this.status<400?(g[u]=JSON.parse(this.response),o()):s()},i.onerror=s,i.send()})}function r(e){return Logger.log("Setting culture to "+e),p=e,Promise.all([t("html",e),t("javascript",e)])}function o(e){e=e.replace("_","-");var n=e.split("-");return 2==n.length&&n[0].toLowerCase()==n[1].toLowerCase()&&(e=n[0].toLowerCase()),e}function u(){return new Promise(function(e){AppInfo.isNativeApp?e(navigator.language||navigator.userLanguage):AppInfo.supportsUserDisplayLanguageSetting?(Logger.log("AppInfo.supportsUserDisplayLanguageSetting is true"),e(AppSettings.displayLanguage())):(Logger.log("Getting culture from document"),e(document.documentElement.getAttribute("data-culture")))})}function a(){return Logger.log("Entering Globalize.ensure"),u().then(function(e){return e=o(e||"en-US"),r(e)})}function i(e,t){t=t||"html";var r=n(t,p)||{};return s(e,r)}function s(e,n){var t=e.indexOf("${");if(-1==t)return e;t+=2;var r=e.indexOf("}",t);if(-1==r)return e;var o=e.substring(t,r),u=n[o]||o;return e=e.replace("${"+o+"}",u),s(e,n)}var g={},p="en-US";window.Globalize={translate:function(e){for(var t=n("javascript",p)||{},r=t[e]||e,o=1;o<arguments.length;o++)r=r.replace("{"+(o-1)+"}",arguments[o]);return r},ensure:a,translateDocument:i}}();