define(["localsync"],function(){function e(e){if(LocalSync.isSupported()){var t=LocalSync.getSyncStatus();e.querySelector(".labelSyncStatus").innerHTML=Globalize.translate("LabelLocalSyncStatusValue",t),e.querySelector(".syncSpinner").active="Active"==t,"Active"==t?e.querySelector(".btnSyncNow").classList.add("hide"):e.querySelector(".btnSyncNow").classList.remove("hide")}}function t(t){LocalSync.sync(),require(["toast"],function(e){e(Globalize.translate("MessageSyncStarted"))}),e(t)}return function(n){var c;n.querySelector(".btnSyncNow").addEventListener("click",function(){t(n)}),LocalSync.isSupported()?n.querySelector(".localSyncStatus").classList.remove("hide"):(n.querySelector(".localSyncStatus").classList.add("hide"),n.querySelector(".syncSpinner").active=!1),n.addEventListener("viewbeforeshow",function(){var t=this;e(t),c=setInterval(function(){e(t)},5e3)}),n.addEventListener("viewbeforehide",function(){var e=this;e.querySelector(".syncSpinner").active=!1,c&&(clearInterval(c),c=null)})}});