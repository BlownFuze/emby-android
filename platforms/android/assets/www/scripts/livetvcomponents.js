!function(){function e(e){for(var i="",a="",t=0,r=e.length;r>t;t++){var n=e[t],o=LibraryBrowser.getFutureDateText(parseISO8601Date(n.StartDate,{toLocal:!0}));o!=a&&(a&&(i+="</div>",i+="</div>"),i+='<div class="homePageSection">',i+="<h1>"+o+"</h1>",i+='<div class="paperList">',a=o),i+="<paper-icon-item>";var s,l=n.ProgramInfo||{};l.ImageTags&&l.ImageTags.Primary&&(s=ApiClient.getScaledImageUrl(l.Id,{height:80,tag:l.ImageTags.Primary,type:"Primary"})),i+=s?'<paper-fab mini class="blue" style="background-image:url(\''+s+"');background-repeat:no-repeat;background-position:center center;background-size: cover;\" item-icon></paper-fab>":l.IsKids?'<paper-fab mini style="background:#2196F3;" icon="person" item-icon></paper-fab>':l.IsSports?'<paper-fab mini style="background:#8BC34A;" icon="person" item-icon></paper-fab>':l.IsMovie?'<paper-fab mini icon="movie" item-icon></paper-fab>':l.IsNews?'<paper-fab mini style="background:#673AB7;" icon="new-releases" item-icon></paper-fab>':'<paper-fab mini class="blue" icon="live-tv" item-icon></paper-fab>',i+="<paper-item-body two-line>",i+='<a class="clearLink" href="livetvtimer.html?id='+n.Id+'">',i+="<div>",i+=n.Name,i+="</div>",i+="<div secondary>",i+=LibraryBrowser.getDisplayTime(n.StartDate),i+=" - "+LibraryBrowser.getDisplayTime(n.EndDate),i+="</div>",i+="</a>",i+="</paper-item-body>",n.SeriesTimerId&&(i+='<div class="ui-li-aside" style="right:0;">',i+='<div class="timerCircle seriesTimerCircle"></div>',i+='<div class="timerCircle seriesTimerCircle"></div>',i+='<div class="timerCircle seriesTimerCircle"></div>',i+="</div>"),i+='<paper-icon-button icon="cancel" data-timerid="'+n.Id+'" title="'+Globalize.translate("ButonCancelRecording")+'" class="btnDeleteTimer"></paper-icon-button>',i+="</paper-icon-item>"}return e.length&&(i+="</div>",i+="</div>"),i}window.LiveTvHelpers={getDaysOfWeek:function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.map(function(e){return{name:e,value:e}})},renderOriginalAirDate:function(e,i){var a=i.PremiereDate;if(a&&i.IsRepeat){try{a=parseISO8601Date(a,{toLocal:!0}).toLocaleDateString()}catch(t){Logger.log("Error parsing date: "+a)}e.html(Globalize.translate("ValueOriginalAirDate").replace("{0}",a)).show()}else e.hide()},getTimersHtml:e}}(),function(e,i){function a(){m&&(clearTimeout(m),m=null)}function t(){d()}function r(e){var i="";i+='<div class="itemOverlayContent">',e.EpisodeTitle&&(i+="<p>",i+=e.EpisodeTitle,i+="</p>"),i+='<p class="itemMiscInfo miscTvProgramInfo"></p>',i+='<p style="margin: 1.25em 0;">',i+='<span class="itemCommunityRating">',i+=LibraryBrowser.getRatingHtml(e),i+="</span>",i+='<span class="userDataIcons">',i+=LibraryBrowser.getUserDataIconsHtml(e),i+="</span>",i+="</p>",i+='<p class="itemGenres"></p>',i+='<p class="itemOverlayHtml">',i+=e.Overview||"",i+="</p>",i+='<div style="text-align:center;padding-bottom:.5em;">';var a,t,r=(new Date).getTime();try{a=parseISO8601Date(e.EndDate,{toLocal:!0})}catch(n){a=r}try{t=parseISO8601Date(e.StartDate,{toLocal:!0})}catch(n){t=r}return a>r&&r>=t&&(i+='<paper-button data-id="'+e.ChannelId+'" raised class="accent mini btnPlay"><iron-icon icon="play-arrow"></iron-icon><span>'+Globalize.translate("ButtonPlay")+"</span></paper-button>"),e.TimerId||e.SeriesTimerId||(i+='<paper-button data-id="'+e.Id+'" raised class="mini btnRecord" style="background-color:#cc3333;"><iron-icon icon="videocam"></iron-icon><span>'+Globalize.translate("ButtonRecord")+"</span></paper-button>"),i+="<div>",i+="</div>"}function n(){c(),MediaController.play({ids:[this.getAttribute("data-id")]})}function o(){c(),Dashboard.navigate("livetvnewrecording.html?programid="+this.getAttribute("data-id"))}function s(s,l){require(["components/paperdialoghelper"],function(){var c=i.createElement("paper-dialog");c.setAttribute("with-backdrop","with-backdrop"),c.setAttribute("role","alertdialog"),c.setAttribute("noAutoFocus","noAutoFocus"),c.entryAnimation="scale-up-animation",c.exitAnimation="fade-out-animation",c.classList.add("ui-body-b"),c.classList.add("background-theme-b"),c.classList.add("tvProgramOverlay");var d="";d+='<h2 class="dialogHeader">',d+=l.Name,d+="</h2>",d+="<div>",d+=r(l),d+="</div>",c.innerHTML=d,i.body.appendChild(c),e(c).on("iron-overlay-closed",function(){e(c).off("mouseenter",a),e(c).off("mouseleave",t),this.parentNode.removeChild(this),u&&(u=null)}),e(".btnPlay",c).on("click",n),e(".btnRecord",c).on("click",o),LibraryBrowser.renderGenres(e(".itemGenres",c),l,3),e(".miscTvProgramInfo",c).html(LibraryBrowser.getMiscInfoHtml(l)),PaperDialogHelper.positionTo(c,s),c.open(),e(c).on("mouseenter",a),e(c).on("mouseleave",t),u=s})}function l(){p&&(clearTimeout(p),p=null),m&&(clearTimeout(m),m=null),c()}function c(){var e=i.querySelector(".tvProgramOverlay");e&&e.close()}function d(){m&&(clearTimeout(m),m=null),m=setTimeout(c,200)}var p,m,u;e.fn.createGuideHoverMenu=function(e){function i(e){var i=e.getAttribute("data-programid");ApiClient.getLiveTvProgram(i,Dashboard.getCurrentUserId()).then(function(i){s(e,i)})}function a(){p&&(clearTimeout(p),p=null)}function t(){p&&(clearTimeout(p),p=null),m&&(clearTimeout(m),m=null);var e=this;if(u){if(u&&u==e)return;c()}p=setTimeout(function(){i(e)},1e3)}return AppInfo.isTouchPreferred?this:this.on("mouseenter",e,t).on("mouseleave",e,a).on("click",e,l)}}(jQuery,document,window);