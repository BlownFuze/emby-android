define([],function(){function e(e){return new Promise(function(i){require(["paper-fab","paper-item-body","paper-icon-item"],function(){for(var a,t="",r="",n=0,o=e.length;o>n;n++){var s=e[n],c=LibraryBrowser.getFutureDateText(parseISO8601Date(s.StartDate,{toLocal:!0}));c!=r&&(r&&(t+="</div>",t+="</div>"),t+='<div class="homePageSection">',t+="<h1>"+c+"</h1>",t+='<div class="paperList">',r=c),t+="<paper-icon-item>";var l=s.ProgramInfo||{};a=null,l.ImageTags&&l.ImageTags.Primary&&(a=ApiClient.getScaledImageUrl(l.Id,{height:80,tag:l.ImageTags.Primary,type:"Primary"})),t+=a?'<paper-fab mini class="blue lazy" data-src="'+a+'" style="background-repeat:no-repeat;background-position:center center;background-size: cover;" item-icon></paper-fab>':l.IsKids?'<paper-fab mini style="background:#2196F3;" icon="person" item-icon></paper-fab>':l.IsSports?'<paper-fab mini style="background:#8BC34A;" icon="person" item-icon></paper-fab>':l.IsMovie?'<paper-fab mini icon="movie" item-icon></paper-fab>':l.IsNews?'<paper-fab mini style="background:#673AB7;" icon="new-releases" item-icon></paper-fab>':'<paper-fab mini class="blue" icon="live-tv" item-icon></paper-fab>',t+="<paper-item-body two-line>",t+='<a class="clearLink" href="livetvtimer.html?id='+s.Id+'">',t+="<div>",t+=s.Name,t+="</div>",t+="<div secondary>",t+=LibraryBrowser.getDisplayTime(s.StartDate),t+=" - "+LibraryBrowser.getDisplayTime(s.EndDate),t+="</div>",t+="</a>",t+="</paper-item-body>",s.SeriesTimerId&&(t+='<div class="ui-li-aside" style="right:0;">',t+='<div class="timerCircle seriesTimerCircle"></div>',t+='<div class="timerCircle seriesTimerCircle"></div>',t+='<div class="timerCircle seriesTimerCircle"></div>',t+="</div>"),t+='<paper-icon-button icon="cancel" data-timerid="'+s.Id+'" title="'+Globalize.translate("ButonCancelRecording")+'" class="btnDeleteTimer"></paper-icon-button>',t+="</paper-icon-item>"}e.length&&(t+="</div>",t+="</div>"),i(t)})})}window.LiveTvHelpers={getDaysOfWeek:function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.map(function(e){return{name:e,value:e}})},renderOriginalAirDate:function(e,i){var a=i.PremiereDate;if(a&&i.IsRepeat){try{a=parseISO8601Date(a,{toLocal:!0}).toLocaleDateString()}catch(t){}e.html(Globalize.translate("ValueOriginalAirDate").replace("{0}",a)).show()}else e.hide()},getTimersHtml:e}}),define(["jQuery"],function(e){function i(){u&&(clearTimeout(u),u=null)}function a(){l()}function t(e){var i="";i+='<div class="itemOverlayContent">',e.EpisodeTitle&&(i+="<p>",i+=e.EpisodeTitle,i+="</p>"),i+='<p class="itemMiscInfo miscTvProgramInfo"></p>',i+='<p style="margin: 1.25em 0;">',i+='<span class="itemCommunityRating">',i+=LibraryBrowser.getRatingHtml(e),i+="</span>",i+='<span class="userDataIcons">',i+=LibraryBrowser.getUserDataIconsHtml(e),i+="</span>",i+="</p>",i+='<p class="itemGenres"></p>',i+='<p class="itemOverlayHtml">',i+=e.Overview||"",i+="</p>",i+='<div style="text-align:center;padding-bottom:.5em;">';var a,t,r=(new Date).getTime();try{a=parseISO8601Date(e.EndDate,{toLocal:!0})}catch(n){a=r}try{t=parseISO8601Date(e.StartDate,{toLocal:!0})}catch(n){t=r}return a>r&&r>=t&&(i+='<paper-button data-id="'+e.ChannelId+'" raised class="accent mini btnPlay"><iron-icon icon="play-arrow"></iron-icon><span>'+Globalize.translate("ButtonPlay")+"</span></paper-button>"),e.TimerId||e.SeriesTimerId||(i+='<paper-button data-id="'+e.Id+'" raised class="mini btnRecord" style="background-color:#cc3333;"><iron-icon icon="videocam"></iron-icon><span>'+Globalize.translate("ButtonRecord")+"</span></paper-button>"),i+="<div>",i+="</div>"}function r(){c(),MediaController.play({ids:[this.getAttribute("data-id")]})}function n(){c();var e=this.getAttribute("data-id");require(["components/recordingcreator/recordingcreator"],function(i){i.show(e)})}function o(o,s){require(["paperdialoghelper","scale-up-animation","fade-out-animation"],function(c){var l=document.createElement("paper-dialog");l.setAttribute("with-backdrop","with-backdrop"),l.setAttribute("role","alertdialog"),l.setAttribute("noAutoFocus","noAutoFocus"),l.entryAnimation="scale-up-animation",l.exitAnimation="fade-out-animation",l.classList.add("ui-body-b"),l.classList.add("background-theme-b"),l.classList.add("tvProgramOverlay");var d="";d+='<h2 class="dialogHeader">',d+=s.Name,d+="</h2>",d+="<div>",d+=t(s),d+="</div>",l.innerHTML=d,document.body.appendChild(l),e(l).on("iron-overlay-closed",function(){e(l).off("mouseenter",i),e(l).off("mouseleave",a),this.parentNode.removeChild(this),p&&(p=null)}),e(".btnPlay",l).on("click",r),e(".btnRecord",l).on("click",n),LibraryBrowser.renderGenres(e(".itemGenres",l),s,3),e(".miscTvProgramInfo",l).html(LibraryBrowser.getMiscInfoHtml(s)),c.positionTo(l,o),l.open(),e(l).on("mouseenter",i),e(l).on("mouseleave",a),p=o})}function s(){d&&(clearTimeout(d),d=null),u&&(clearTimeout(u),u=null),c()}function c(){var e=document.querySelector(".tvProgramOverlay");e&&e.close()}function l(){u&&(clearTimeout(u),u=null),u=setTimeout(c,200)}var d,u,p;e.fn.createGuideHoverMenu=function(e){function i(e){var i=e.getAttribute("data-programid");ApiClient.getLiveTvProgram(i,Dashboard.getCurrentUserId()).then(function(i){o(e,i)})}function a(){d&&(clearTimeout(d),d=null)}function t(){d&&(clearTimeout(d),d=null),u&&(clearTimeout(u),u=null);var e=this;if(p){if(p&&p==e)return;c()}d=setTimeout(function(){i(e)},1e3)}return AppInfo.isTouchPreferred?this:this.on("mouseenter",e,t).on("mouseleave",e,a).on("click",e,s)}});