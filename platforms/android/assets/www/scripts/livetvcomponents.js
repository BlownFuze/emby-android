!function(){function e(e){return new Promise(function(i){require(["paper-fab","paper-item-body","paper-icon-item"],function(){for(var a="",t="",r=0,n=e.length;n>r;r++){var o=e[r],s=LibraryBrowser.getFutureDateText(parseISO8601Date(o.StartDate,{toLocal:!0}));s!=t&&(t&&(a+="</div>",a+="</div>"),a+='<div class="homePageSection">',a+="<h1>"+s+"</h1>",a+='<div class="paperList">',t=s),a+="<paper-icon-item>";var l,c=o.ProgramInfo||{};c.ImageTags&&c.ImageTags.Primary&&(l=ApiClient.getScaledImageUrl(c.Id,{height:80,tag:c.ImageTags.Primary,type:"Primary"})),a+=l?'<paper-fab mini class="blue" style="background-image:url(\''+l+"');background-repeat:no-repeat;background-position:center center;background-size: cover;\" item-icon></paper-fab>":c.IsKids?'<paper-fab mini style="background:#2196F3;" icon="person" item-icon></paper-fab>':c.IsSports?'<paper-fab mini style="background:#8BC34A;" icon="person" item-icon></paper-fab>':c.IsMovie?'<paper-fab mini icon="movie" item-icon></paper-fab>':c.IsNews?'<paper-fab mini style="background:#673AB7;" icon="new-releases" item-icon></paper-fab>':'<paper-fab mini class="blue" icon="live-tv" item-icon></paper-fab>',a+="<paper-item-body two-line>",a+='<a class="clearLink" href="livetvtimer.html?id='+o.Id+'">',a+="<div>",a+=o.Name,a+="</div>",a+="<div secondary>",a+=LibraryBrowser.getDisplayTime(o.StartDate),a+=" - "+LibraryBrowser.getDisplayTime(o.EndDate),a+="</div>",a+="</a>",a+="</paper-item-body>",o.SeriesTimerId&&(a+='<div class="ui-li-aside" style="right:0;">',a+='<div class="timerCircle seriesTimerCircle"></div>',a+='<div class="timerCircle seriesTimerCircle"></div>',a+='<div class="timerCircle seriesTimerCircle"></div>',a+="</div>"),a+='<paper-icon-button icon="cancel" data-timerid="'+o.Id+'" title="'+Globalize.translate("ButonCancelRecording")+'" class="btnDeleteTimer"></paper-icon-button>',a+="</paper-icon-item>"}e.length&&(a+="</div>",a+="</div>"),i(a)})})}window.LiveTvHelpers={getDaysOfWeek:function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.map(function(e){return{name:e,value:e}})},renderOriginalAirDate:function(e,i){var a=i.PremiereDate;if(a&&i.IsRepeat){try{a=parseISO8601Date(a,{toLocal:!0}).toLocaleDateString()}catch(t){Logger.log("Error parsing date: "+a)}e.html(Globalize.translate("ValueOriginalAirDate").replace("{0}",a)).show()}else e.hide()},getTimersHtml:e}}(),function(e,i){function a(){m&&(clearTimeout(m),m=null)}function t(){d()}function r(e){var i="";i+='<div class="itemOverlayContent">',e.EpisodeTitle&&(i+="<p>",i+=e.EpisodeTitle,i+="</p>"),i+='<p class="itemMiscInfo miscTvProgramInfo"></p>',i+='<p style="margin: 1.25em 0;">',i+='<span class="itemCommunityRating">',i+=LibraryBrowser.getRatingHtml(e),i+="</span>",i+='<span class="userDataIcons">',i+=LibraryBrowser.getUserDataIconsHtml(e),i+="</span>",i+="</p>",i+='<p class="itemGenres"></p>',i+='<p class="itemOverlayHtml">',i+=e.Overview||"",i+="</p>",i+='<div style="text-align:center;padding-bottom:.5em;">';var a,t,r=(new Date).getTime();try{a=parseISO8601Date(e.EndDate,{toLocal:!0})}catch(n){a=r}try{t=parseISO8601Date(e.StartDate,{toLocal:!0})}catch(n){t=r}return a>r&&r>=t&&(i+='<paper-button data-id="'+e.ChannelId+'" raised class="accent mini btnPlay"><iron-icon icon="play-arrow"></iron-icon><span>'+Globalize.translate("ButtonPlay")+"</span></paper-button>"),e.TimerId||e.SeriesTimerId||(i+='<paper-button data-id="'+e.Id+'" raised class="mini btnRecord" style="background-color:#cc3333;"><iron-icon icon="videocam"></iron-icon><span>'+Globalize.translate("ButtonRecord")+"</span></paper-button>"),i+="<div>",i+="</div>"}function n(){c(),MediaController.play({ids:[this.getAttribute("data-id")]})}function o(){c(),Dashboard.navigate("livetvnewrecording.html?programid="+this.getAttribute("data-id"))}function s(s,l){require(["components/paperdialoghelper","scale-up-animation","fade-out-animation"],function(){var c=i.createElement("paper-dialog");c.setAttribute("with-backdrop","with-backdrop"),c.setAttribute("role","alertdialog"),c.setAttribute("noAutoFocus","noAutoFocus"),c.entryAnimation="scale-up-animation",c.exitAnimation="fade-out-animation",c.classList.add("ui-body-b"),c.classList.add("background-theme-b"),c.classList.add("tvProgramOverlay");var d="";d+='<h2 class="dialogHeader">',d+=l.Name,d+="</h2>",d+="<div>",d+=r(l),d+="</div>",c.innerHTML=d,i.body.appendChild(c),e(c).on("iron-overlay-closed",function(){e(c).off("mouseenter",a),e(c).off("mouseleave",t),this.parentNode.removeChild(this),u&&(u=null)}),e(".btnPlay",c).on("click",n),e(".btnRecord",c).on("click",o),LibraryBrowser.renderGenres(e(".itemGenres",c),l,3),e(".miscTvProgramInfo",c).html(LibraryBrowser.getMiscInfoHtml(l)),PaperDialogHelper.positionTo(c,s),c.open(),e(c).on("mouseenter",a),e(c).on("mouseleave",t),u=s})}function l(){p&&(clearTimeout(p),p=null),m&&(clearTimeout(m),m=null),c()}function c(){var e=i.querySelector(".tvProgramOverlay");e&&e.close()}function d(){m&&(clearTimeout(m),m=null),m=setTimeout(c,200)}var p,m,u;e.fn.createGuideHoverMenu=function(e){function i(e){var i=e.getAttribute("data-programid");ApiClient.getLiveTvProgram(i,Dashboard.getCurrentUserId()).then(function(i){s(e,i)})}function a(){p&&(clearTimeout(p),p=null)}function t(){p&&(clearTimeout(p),p=null),m&&(clearTimeout(m),m=null);var e=this;if(u){if(u&&u==e)return;c()}p=setTimeout(function(){i(e)},1e3)}return AppInfo.isTouchPreferred?this:this.on("mouseenter",e,t).on("mouseleave",e,a).on("click",e,l)}}(jQuery,document,window);