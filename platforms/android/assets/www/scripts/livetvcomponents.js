!function(){function e(e){return new Promise(function(i){require(["paper-fab","paper-item-body","paper-icon-item"],function(){for(var a,t="",r="",n=0,o=e.length;o>n;n++){var s=e[n],c=LibraryBrowser.getFutureDateText(parseISO8601Date(s.StartDate,{toLocal:!0}));c!=r&&(r&&(t+="</div>",t+="</div>"),t+='<div class="homePageSection">',t+="<h1>"+c+"</h1>",t+='<div class="paperList">',r=c),t+="<paper-icon-item>";var l=s.ProgramInfo||{};a=null,l.ImageTags&&l.ImageTags.Primary&&(a=ApiClient.getScaledImageUrl(l.Id,{height:80,tag:l.ImageTags.Primary,type:"Primary"})),t+=a?'<paper-fab mini class="blue" style="background-image:url(\''+a+"');background-repeat:no-repeat;background-position:center center;background-size: cover;\" item-icon></paper-fab>":l.IsKids?'<paper-fab mini style="background:#2196F3;" icon="person" item-icon></paper-fab>':l.IsSports?'<paper-fab mini style="background:#8BC34A;" icon="person" item-icon></paper-fab>':l.IsMovie?'<paper-fab mini icon="movie" item-icon></paper-fab>':l.IsNews?'<paper-fab mini style="background:#673AB7;" icon="new-releases" item-icon></paper-fab>':'<paper-fab mini class="blue" icon="live-tv" item-icon></paper-fab>',t+="<paper-item-body two-line>",t+='<a class="clearLink" href="livetvtimer.html?id='+s.Id+'">',t+="<div>",t+=s.Name,t+="</div>",t+="<div secondary>",t+=LibraryBrowser.getDisplayTime(s.StartDate),t+=" - "+LibraryBrowser.getDisplayTime(s.EndDate),t+="</div>",t+="</a>",t+="</paper-item-body>",s.SeriesTimerId&&(t+='<div class="ui-li-aside" style="right:0;">',t+='<div class="timerCircle seriesTimerCircle"></div>',t+='<div class="timerCircle seriesTimerCircle"></div>',t+='<div class="timerCircle seriesTimerCircle"></div>',t+="</div>"),t+='<paper-icon-button icon="cancel" data-timerid="'+s.Id+'" title="'+Globalize.translate("ButonCancelRecording")+'" class="btnDeleteTimer"></paper-icon-button>',t+="</paper-icon-item>"}e.length&&(t+="</div>",t+="</div>"),i(t)})})}window.LiveTvHelpers={getDaysOfWeek:function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.map(function(e){return{name:e,value:e}})},renderOriginalAirDate:function(e,i){var a=i.PremiereDate;if(a&&i.IsRepeat){try{a=parseISO8601Date(a,{toLocal:!0}).toLocaleDateString()}catch(t){}e.html(Globalize.translate("ValueOriginalAirDate").replace("{0}",a)).show()}else e.hide()},getTimersHtml:e}}(),function(e,i){function a(){p&&(clearTimeout(p),p=null)}function t(){d()}function r(e){var i="";i+='<div class="itemOverlayContent">',e.EpisodeTitle&&(i+="<p>",i+=e.EpisodeTitle,i+="</p>"),i+='<p class="itemMiscInfo miscTvProgramInfo"></p>',i+='<p style="margin: 1.25em 0;">',i+='<span class="itemCommunityRating">',i+=LibraryBrowser.getRatingHtml(e),i+="</span>",i+='<span class="userDataIcons">',i+=LibraryBrowser.getUserDataIconsHtml(e),i+="</span>",i+="</p>",i+='<p class="itemGenres"></p>',i+='<p class="itemOverlayHtml">',i+=e.Overview||"",i+="</p>",i+='<div style="text-align:center;padding-bottom:.5em;">';var a,t,r=(new Date).getTime();try{a=parseISO8601Date(e.EndDate,{toLocal:!0})}catch(n){a=r}try{t=parseISO8601Date(e.StartDate,{toLocal:!0})}catch(n){t=r}return a>r&&r>=t&&(i+='<paper-button data-id="'+e.ChannelId+'" raised class="accent mini btnPlay"><iron-icon icon="play-arrow"></iron-icon><span>'+Globalize.translate("ButtonPlay")+"</span></paper-button>"),e.TimerId||e.SeriesTimerId||(i+='<paper-button data-id="'+e.Id+'" raised class="mini btnRecord" style="background-color:#cc3333;"><iron-icon icon="videocam"></iron-icon><span>'+Globalize.translate("ButtonRecord")+"</span></paper-button>"),i+="<div>",i+="</div>"}function n(){l(),MediaController.play({ids:[this.getAttribute("data-id")]})}function o(){l();var e=this.getAttribute("data-id");require(["components/recordingcreator/recordingcreator"],function(i){i.show(e)})}function s(s,c){require(["paperdialoghelper","scale-up-animation","fade-out-animation"],function(l){var d=i.createElement("paper-dialog");d.setAttribute("with-backdrop","with-backdrop"),d.setAttribute("role","alertdialog"),d.setAttribute("noAutoFocus","noAutoFocus"),d.entryAnimation="scale-up-animation",d.exitAnimation="fade-out-animation",d.classList.add("ui-body-b"),d.classList.add("background-theme-b"),d.classList.add("tvProgramOverlay");var u="";u+='<h2 class="dialogHeader">',u+=c.Name,u+="</h2>",u+="<div>",u+=r(c),u+="</div>",d.innerHTML=u,i.body.appendChild(d),e(d).on("iron-overlay-closed",function(){e(d).off("mouseenter",a),e(d).off("mouseleave",t),this.parentNode.removeChild(this),m&&(m=null)}),e(".btnPlay",d).on("click",n),e(".btnRecord",d).on("click",o),LibraryBrowser.renderGenres(e(".itemGenres",d),c,3),e(".miscTvProgramInfo",d).html(LibraryBrowser.getMiscInfoHtml(c)),l.positionTo(d,s),d.open(),e(d).on("mouseenter",a),e(d).on("mouseleave",t),m=s})}function c(){u&&(clearTimeout(u),u=null),p&&(clearTimeout(p),p=null),l()}function l(){var e=i.querySelector(".tvProgramOverlay");e&&e.close()}function d(){p&&(clearTimeout(p),p=null),p=setTimeout(l,200)}var u,p,m;e.fn.createGuideHoverMenu=function(e){function i(e){var i=e.getAttribute("data-programid");ApiClient.getLiveTvProgram(i,Dashboard.getCurrentUserId()).then(function(i){s(e,i)})}function a(){u&&(clearTimeout(u),u=null)}function t(){u&&(clearTimeout(u),u=null),p&&(clearTimeout(p),p=null);var e=this;if(m){if(m&&m==e)return;l()}u=setTimeout(function(){i(e)},1e3)}return AppInfo.isTouchPreferred?this:this.on("mouseenter",e,t).on("mouseleave",e,a).on("click",e,c)}}(jQuery,document,window);