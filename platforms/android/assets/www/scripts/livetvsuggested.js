define(["jQuery","libraryBrowser","scrollStyles"],function(e,t){function r(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function n(){return r()?"overflowPortrait":"portrait"}function o(){return r()?"overflowSquare":"square"}function i(){return r()?12:8}function a(e){Dashboard.showLoadingMsg(),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!0,limit:2*i(),ImageTypeLimit:1,EnableImageTypes:"Primary",EnableTotalRecordCount:!1}).then(function(t){d(e,t.Items,"activeProgramItems","play"),Dashboard.hideLoadingMsg()})}function s(e){a(e),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:i(),IsMovie:!1,IsSports:!1,IsKids:!1,IsSeries:!0,EnableTotalRecordCount:!1}).then(function(t){d(e,t.Items,"upcomingProgramItems")}),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:i(),IsMovie:!0,EnableTotalRecordCount:!1}).then(function(t){d(e,t.Items,"upcomingTvMovieItems",null,n())}),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:i(),IsSports:!0,EnableTotalRecordCount:!1}).then(function(t){d(e,t.Items,"upcomingSportsItems")}),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:i(),IsKids:!0,EnableTotalRecordCount:!1}).then(function(t){d(e,t.Items,"upcomingKidsItems")})}function d(e,n,i,a,s){var d=t.getPosterViewHtml({items:n,shape:s||(r()?o():"auto"),showTitle:!0,centerText:!0,coverImage:!0,overlayText:!1,lazy:!0,overlayMoreButton:"play"!=a,overlayPlayButton:"play"==a}),c=e.querySelector("."+i);c.innerHTML=d,ImageLoader.lazyChildren(c)}return function(n,o){function i(e,t){var r=e.querySelector(".pageTabContent[data-index='"+t+"']"),i=[];switch(t){case 0:break;case 1:document.body.classList.add("autoScrollY"),i.push("scripts/livetvguide");break;case 2:document.body.classList.remove("autoScrollY"),i.push("scripts/livetvchannels"),i.push("paper-icon-item"),i.push("paper-item-body");break;case 3:document.body.classList.remove("autoScrollY"),i.push("scripts/livetvrecordings");break;case 4:document.body.classList.remove("autoScrollY"),i.push("scripts/livetvseriestimers")}require(i,function(e){0==t&&(a.tabContent=r);var i=d[t];i||(i=t?new e(n,o,r):a,d[t]=i,i.initTab&&i.initTab()),-1==c.indexOf(t)&&(c.push(t),i.renderTab())})}var a=this;a.initTab=function(){var t=n.querySelector(".pageTabContent[data-index='0']");r()?e(".itemsContainer",t).addClass("hiddenScrollX").createCardMenus():e(".itemsContainer",t).removeClass("hiddenScrollX").createCardMenus()},a.renderTab=function(){var e=n.querySelector(".pageTabContent[data-index='0']");s(e)};var d=[],c=[],u=n.querySelector(".libraryViewNav"),l="tv.html",m=o.topParentId;m&&(l+="?topParentId="+m),t.configurePaperLibraryTabs(n,u,n.querySelectorAll(".pageTabContent"),[0,2,3,4]),u.addEventListener("tabchange",function(e){i(n,parseInt(e.detail.selectedTabIndex))}),n.addEventListener("viewbeforehide",function(){document.body.classList.remove("autoScrollY")}),n.addEventListener("viewdestroy",function(){d.forEach(function(e){e.destroy&&e.destroy()})})}});