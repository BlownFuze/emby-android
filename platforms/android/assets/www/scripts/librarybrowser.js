define(["scrollHelper","viewManager","appSettings","appStorage","apphost","datetime","itemHelper","mediaInfo","scroller","indicators","dom","scrollStyles"],function(e,a,t,r,i,n,o,s,l,d,u){function c(e){var a=browserInfo.mobile?"3.5%":"0.5%",t=[{opacity:"0",transform:"translate3d("+a+", 0, 0)",offset:0},{opacity:"1",transform:"none",offset:1}];e.animate(t,{duration:160,iterations:1,easing:"ease-out"})}function m(e){var a=e.querySelector(".pageTabButtonSelectionBar");if(a){var t=[{transform:"translate3d(-100%, 0, 0)",offset:0},{transform:"none",offset:1}];a.animate&&a.animate(t,{duration:120,iterations:1,easing:"ease-out"})}}var g=function(e,t,i){function s(e){return e.replace(/&/g,"&amp;").replace(p,function(e){var a=e.charCodeAt(0),t=e.charCodeAt(1);return"&#"+(1024*(a-55296)+(t-56320)+65536)+";"}).replace(h,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(e){if(e){if(e=e.toLowerCase(),-1!=e.indexOf("portrait"))return 2/3;if(-1!=e.indexOf("backdrop"))return 16/9;if(-1!=e.indexOf("square"))return 1}return null}var p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/([^\#-~| |!])/g,b="pagesize_v4",y={getDefaultPageSize:function(){return 100},getDefaultItemsView:function(e,a){return browserInfo.mobile?a:e},getSavedQueryKey:function(a){return e.location.href.split("#")[0]+(a||"")},loadSavedQueryValues:function(e,a){var t=r.getItem(e+"_"+Dashboard.getCurrentUserId());return t?(t=JSON.parse(t),Object.assign(a,t)):a},saveQueryValues:function(e,a){var t={};a.SortBy&&(t.SortBy=a.SortBy),a.SortOrder&&(t.SortOrder=a.SortOrder);try{r.setItem(e+"_"+Dashboard.getCurrentUserId(),JSON.stringify(t))}catch(i){}},saveViewSetting:function(e,a){try{r.setItem(e+"_"+Dashboard.getCurrentUserId()+"_view",a)}catch(t){}},getSavedView:function(e){var a=r.getItem(e+"_"+Dashboard.getCurrentUserId()+"_view");return a},getSavedViewSetting:function(e){return new Promise(function(a){var t=LibraryBrowser.getSavedView(e);a(t)})},allowSwipe:function(e){function a(e){return e.classList?!e.classList.contains("hiddenScrollX")&&!e.classList.contains("smoothScrollX")&&!e.classList.contains("libraryViewNav"):!0}for(var t=e;null!=t;){if(!a(t))return!1;t=t.parentNode}return!0},selectedTab:function(e,a){if(null==a)return e.selectedTabIndex||0;var t=LibraryBrowser.selectedTab(e);if(e.selectedTabIndex=a,t==a)e.dispatchEvent(new CustomEvent("beforetabchange",{detail:{selectedTabIndex:a}})),e.dispatchEvent(new CustomEvent("tabchange",{detail:{selectedTabIndex:a}}));else{var r=e.querySelectorAll(".pageTabButton");r[a].click()}},configureSwipeTabs:function(e,a){var t=e.querySelectorAll(".pageTabContent").length;require(["hammer"],function(r){var i=new r(e);i.get("swipe").set({direction:r.DIRECTION_HORIZONTAL}),i.on("swipeleft",function(e){if(LibraryBrowser.allowSwipe(e.target)){var r=parseInt(LibraryBrowser.selectedTab(a)||"0");t-1>r&&LibraryBrowser.selectedTab(a,r+1)}}),i.on("swiperight",function(e){if(LibraryBrowser.allowSwipe(e.target)){var t=parseInt(LibraryBrowser.selectedTab(a)||"0");t>0&&LibraryBrowser.selectedTab(a,t-1)}})})},configurePaperLibraryTabs:function(e,a,r,i){if(browserInfo.safari||LibraryBrowser.configureSwipeTabs(e,a),!browserInfo.safari||!AppInfo.isNativeApp)for(var n=a.querySelectorAll(".pageTabButton"),o=0,s=n.length;s>o;o++){var d=t.createElement("div");d.classList.add("pageTabButtonSelectionBar"),n[o].appendChild(d)}a.addEventListener("click",function(e){var t=a.querySelector(".is-active"),n=u.parentWithClass(e.target,"pageTabButton");if(n&&n!=t){t&&(t.classList.remove("is-active"),r[parseInt(t.getAttribute("data-index"))].classList.remove("is-active")),n.classList.add("is-active"),m(n);var o=parseInt(n.getAttribute("data-index")),s=r[o];a.dispatchEvent(new CustomEvent("beforetabchange",{detail:{selectedTabIndex:o}})),setTimeout(function(){i&&-1!=i.indexOf(o)&&s.animate&&c(s),a.selectedTabIndex=o,a.dispatchEvent(new CustomEvent("tabchange",{detail:{selectedTabIndex:o}})),s.classList.add("is-active")},120),a.scroller&&a.scroller.toCenter(n,!1)}}),e.addEventListener("viewbeforeshow",LibraryBrowser.onTabbedpagebeforeshow);var g=a.querySelector(".contentScrollSlider");g?(a.scroller=new l(a,{horizontal:1,itemNav:0,mouseDragging:1,touchDragging:1,slidee:a.querySelector(".contentScrollSlider"),smart:!0,releaseSwing:!0,scrollBy:200,speed:120,elasticBounds:1,dragHandle:1,dynamicHandle:1,clickBar:1,hiddenScroll:!0,requireAnimation:!0}),a.scroller.init()):a.classList.add("hiddenScrollX")},onTabbedpagebeforeshow:function(e){var a=e.target,t=0,r=!1;a.getAttribute("data-firstload")||(t=300,r=!0,a.setAttribute("data-firstload","1")),t?setTimeout(function(){LibraryBrowser.onTabbedpagebeforeshowInternal(a,e,r)},t):LibraryBrowser.onTabbedpagebeforeshowInternal(a,e,r)},onTabbedpagebeforeshowInternal:function(e,a,t){var r=e.querySelector(".libraryViewNav");if(t){var i=null!=e.firstTabIndex?e.firstTabIndex:parseInt(getParameterByName("tab")||"0");LibraryBrowser.selectedTab(r,i)}else{if(!a.detail.isRestored)return void LibraryBrowser.selectedTab(r,0);r.dispatchEvent(new CustomEvent("beforetabchange",{detail:{selectedTabIndex:LibraryBrowser.selectedTab(r)}})),r.dispatchEvent(new CustomEvent("tabchange",{detail:{selectedTabIndex:LibraryBrowser.selectedTab(r)}}))}},showTab:function(r,i){var n=function(){t.removeEventListener("pagebeforeshow",n),-1!=e.location.href.toLowerCase().indexOf(r.toLowerCase())&&(this.firstTabIndex=i)};-1!=e.location.href.toLowerCase().indexOf(r.toLowerCase())?n.call(a.currentView()):(pageClassOn("pagebeforeshow","page",n),Dashboard.navigate(r))},getDateParamValue:function(e){function a(e){return 10>e?"0"+e:e}var t=e;return""+t.getFullYear()+a(t.getMonth()+1)+a(t.getDate())+a(t.getHours())+a(t.getMinutes())+a(t.getSeconds())},playAllFromHere:function(e,a){e(a,100,"MediaSources,Chapters").then(function(e){MediaController.play({items:e.Items})})},queueAllFromHere:function(e,a){fn(a,100,"MediaSources,Chapters").then(function(e){MediaController.queue({items:e.Items})})},getItemCountsHtml:function(e,a){var t,r=[];if("Playlist"==a.Type){if(t="",a.CumulativeRunTimeTicks){var i=a.CumulativeRunTimeTicks/6e8;i=i||1,t+=Globalize.translate("ValueMinutes",Math.round(i))}else t+=Globalize.translate("ValueMinutes",0);r.push(t)}else"movies"==e.context?(a.MovieCount&&(t=1==a.MovieCount?Globalize.translate("ValueOneMovie"):Globalize.translate("ValueMovieCount",a.MovieCount),r.push(t)),a.TrailerCount&&(t=1==a.TrailerCount?Globalize.translate("ValueOneTrailer"):Globalize.translate("ValueTrailerCount",a.TrailerCount),r.push(t))):"tv"==e.context?(a.SeriesCount&&(t=1==a.SeriesCount?Globalize.translate("ValueOneSeries"):Globalize.translate("ValueSeriesCount",a.SeriesCount),r.push(t)),a.EpisodeCount&&(t=1==a.EpisodeCount?Globalize.translate("ValueOneEpisode"):Globalize.translate("ValueEpisodeCount",a.EpisodeCount),r.push(t))):"games"==e.context?a.GameCount&&(t=1==a.GameCount?Globalize.translate("ValueOneGame"):Globalize.translate("ValueGameCount",a.GameCount),r.push(t)):"music"==e.context&&(a.AlbumCount&&(t=1==a.AlbumCount?Globalize.translate("ValueOneAlbum"):Globalize.translate("ValueAlbumCount",a.AlbumCount),r.push(t)),a.SongCount&&(t=1==a.SongCount?Globalize.translate("ValueOneSong"):Globalize.translate("ValueSongCount",a.SongCount),r.push(t)),a.MusicVideoCount&&(t=1==a.MusicVideoCount?Globalize.translate("ValueOneMusicVideo"):Globalize.translate("ValueMusicVideoCount",a.MusicVideoCount),r.push(t)));return r.join(" â€¢ ")},getArtistLinksHtml:function(e,a){for(var t=[],r=0,i=e.length;i>r;r++){var n=e[r],o=a?' class="'+a+'"':"";t.push("<a"+o+' href="itemdetails.html?id='+n.Id+'">'+n.Name+"</a>")}return t=t.join(" / ")},playInExternalPlayer:function(e){Dashboard.loadExternalPlayer().then(function(){ExternalPlayer.showMenu(e)})},editImages:function(e){return new Promise(function(a,t){require(["components/imageeditor/imageeditor"],function(r){r.show(e).then(a,t)})})},getHref:function(e,a,t){var r=LibraryBrowser.getHrefInternal(e,a);return"tv"==a&&(t||(t=LibraryMenu.getTopParentId()),t&&(r+=-1==r.indexOf("?")?"?topParentId=":"&topParentId=",r+=t)),r},getHrefInternal:function(e,a){if(!e)throw new Error("item cannot be null");if(e.url)return e.url;var t=e.Id||e.ItemId;if("livetv"==e.CollectionType)return"livetv.html";if("channels"==e.CollectionType)return"channels.html";if("folders"!=a){if("movies"==e.CollectionType)return"movies.html?topParentId="+e.Id;if("boxsets"==e.CollectionType)return"itemlist.html?topParentId="+e.Id+"&parentId="+e.Id;if("tvshows"==e.CollectionType)return"tv.html?topParentId="+e.Id;if("music"==e.CollectionType)return"music.html?topParentId="+e.Id;if("games"==e.CollectionType)return t?"itemlist.html?parentId="+t:"#";if("playlists"==e.CollectionType)return"playlists.html?topParentId="+e.Id;if("photos"==e.CollectionType)return"photos.html?topParentId="+e.Id}else if(e.IsFolder)return t?"itemlist.html?parentId="+t:"#";if("CollectionFolder"==e.Type)return"itemlist.html?topParentId="+e.Id+"&parentId="+e.Id;if("PhotoAlbum"==e.Type)return"itemlist.html?context=photos&parentId="+t;if("Playlist"==e.Type)return"itemdetails.html?id="+t;if("TvChannel"==e.Type)return"itemdetails.html?id="+t;if("Channel"==e.Type)return"channelitems.html?id="+t;if(e.IsFolder&&"Channel"==e.SourceType||"ChannelFolderItem"==e.Type)return"channelitems.html?id="+e.ChannelId+"&folderId="+e.Id;if("Program"==e.Type)return"itemdetails.html?id="+t;if("BoxSet"==e.Type)return"itemdetails.html?id="+t;if("MusicAlbum"==e.Type)return"itemdetails.html?id="+t;if("GameSystem"==e.Type)return"itemdetails.html?id="+t;if("Genre"==e.Type)return"itemdetails.html?id="+t;if("MusicGenre"==e.Type)return"itemdetails.html?id="+t;if("GameGenre"==e.Type)return"itemdetails.html?id="+t;if("Studio"==e.Type)return"itemdetails.html?id="+t;if("Person"==e.Type)return"itemdetails.html?id="+t;if("Recording"==e.Type)return"itemdetails.html?id="+t;if("MusicArtist"==e.Type)return"itemdetails.html?id="+t;var r=a?"&context="+a:"";return"Series"==e.Type||"Season"==e.Type||"Episode"==e.Type?"itemdetails.html?id="+t+r:e.IsFolder?t?"itemlist.html?parentId="+t:"#":"itemdetails.html?id="+t},getImageUrl:function(e,a,t,r){return r=r||{},r.type=a,r.index=t,r.tag="Backdrop"==a?e.BackdropImageTags[t]:"Screenshot"==a?e.ScreenshotImageTags[t]:"Primary"==a?e.PrimaryImageTag||e.ImageTags[a]:e.ImageTags[a],ApiClient.getScaledImageUrl(e.Id||e.ItemId,r)},getUserDataCssClass:function(e){return e?"libraryItemUserData"+e.replace(new RegExp(" ","g"),""):""},getItemDataAttributesList:function(e,a,t){var r=[];return r.push({name:"serverid",value:e.ServerId||a.serverId}),r.push({name:"id",value:e.Id}),a.context&&r.push({name:"context",value:a.context||""}),e.IsFolder&&r.push({name:"isfolder",value:e.IsFolder}),r.push({name:"type",value:e.Type}),e.MediaType&&r.push({name:"mediatype",value:e.MediaType||""}),e.UserData&&e.UserData.PlaybackPositionTicks&&r.push({name:"positionticks",value:e.UserData.PlaybackPositionTicks||0}),r.push({name:"index",value:t}),e.ChannelId&&r.push({name:"channelid",value:e.ChannelId}),a.collectionId&&r.push({name:"collectionid",value:a.collectionId}),r},getItemDataAttributes:function(e,a,t){var r=LibraryBrowser.getItemDataAttributesList(e,a,t).map(function(e){return"data-"+e.name+'="'+e.value+'"'}),i=r.join(" ");return i&&(i=" "+i),i},shapes:["square","portrait","banner","smallBackdrop","backdrop","overflowBackdrop","overflowPortrait","overflowSquare"],getPostersPerRow:function(e){function a(a){switch(a){case"portrait":return e>=2200?10:e>=2100?9:e>=1600?8:e>=1400?7:e>=1200?6:e>=800?5:e>=640?4:3;case"square":return e>=2100?9:e>=1800?8:e>=1400?7:e>=1200?6:e>=900?5:e>=700?4:e>=500?3:2;case"banner":return e>=2200?4:e>=1200?3:e>=800?2:1;case"backdrop":return e>=2500?6:e>=2100?5:e>=1200?4:e>=770?3:e>=420?2:1;case"smallBackdrop":return e>=1440?8:e>=1100?6:e>=800?5:e>=600?4:e>=540?3:e>=420?2:1;case"overflowPortrait":return e>=1e3?100/23:e>=640?100/36:2.5;case"overflowSquare":return e>=1e3?100/22:e>=640?100/30:100/42;case"overflowBackdrop":return e>=1e3?2.5:e>=640?100/60:100/84;default:return 4}}for(var t={},r=0,i=LibraryBrowser.shapes.length;i>r;r++){var n=LibraryBrowser.shapes[r];t[n]=a(n)}return t},posterSizes:[],getPosterViewInfo:function(){var a=e.innerWidth;if(!browserInfo.mobile){var t=100;a=Math.ceil(a/t)*t}for(var r=LibraryBrowser.posterSizes,i=0,n=r.length;n>i;i++)if(r[i].screenWidth==a)return r[i];var o=LibraryBrowser.getPosterViewInfoInternal(a);return o.screenWidth=a,r.push(o),o},getPosterViewInfoInternal:function(e){var a=LibraryBrowser.getPostersPerRow(e),t={};t.screenWidth=e;for(var r=0,i=LibraryBrowser.shapes.length;i>r;r++){var n=LibraryBrowser.shapes[r],o=e/a[n];t[n+"Width"]=Math.round(o)}return t},setPosterViewData:function(e){var a=e.items;e.shape=e.shape||"portrait";var t=LibraryBrowser.getAveragePrimaryImageAspectRatio(a),r=t&&Math.abs(t-1.777777778)<.3,i=t&&Math.abs(t-1)<.33||t&&Math.abs(t-1.3333334)<.01;("auto"==e.shape||"autohome"==e.shape||"autooverflow"==e.shape)&&(r?e.shape="autooverflow"==e.shape?"overflowBackdrop":"backdrop":i?(e.coverImage=!0,e.shape="autooverflow"==e.shape?"overflowSquare":"square"):t&&t>1.9?(e.shape="banner",e.coverImage=!0):e.shape=t&&Math.abs(t-.6666667)<.2?"autooverflow"==e.shape?"overflowPortrait":"portrait":e.defaultShape||("autooverflow"==e.shape?"overflowSquare":"square"));var n=LibraryBrowser.getPosterViewInfo(),o=n.backdropWidth,s=n.portraitWidth,l=n.squareWidth,d=n.bannerWidth;r?s=o:i&&(s=l),"overflowBackdrop"==e.shape?o=n.overflowBackdropWidth:"overflowPortrait"==e.shape?s=n.overflowPortraitWidth:"overflowSquare"==e.shape?l=n.overflowSquareWidth:"smallBackdrop"==e.shape?o=n.smallBackdropWidth:"detailPagePortrait"==e.shape?s=200:"detailPageSquare"==e.shape?(s=240,l=240):"detailPage169"==e.shape&&(s=320,o=320),e.uiAspect=g(e.shape),e.primaryImageAspectRatio=t,e.posterWidth=s,e.thumbWidth=o,e.bannerWidth=d,e.squareSize=l},getPosterViewHtml:function(e){LibraryBrowser.setPosterViewData(e);var a,t=e.items;e.shape=e.shape||"portrait";for(var r,i,o="",s=e.thumbWidth,l=e.posterWidth,d=e.squareSize,u=e.bannerWidth,c=e.uiAspect,m=0,g=t.length;g>m;m++){var p=t[m];if(i=null,r=LibraryBrowser.getAveragePrimaryImageAspectRatio([p]),e.showStartDateIndex){if(p.StartDate)try{i=LibraryBrowser.getFutureDateText(n.parseISO8601Date(p.StartDate,!0),!0)}catch(h){}var b=i||Globalize.translate("HeaderUnknownDate");b!=a&&(o+='<h1 class="timelineHeader" style="text-align:center;">'+b+"</h1>",a=b)}else if(e.timeline){var y=p.ProductionYear||Globalize.translate("HeaderUnknownYear");y!=a&&(o+='<h1 class="timelineHeader">'+y+"</h1>",a=y)}o+=LibraryBrowser.getPosterViewItemHtml(p,m,e,r,s,l,d,u,c)}return o},getPosterViewItemHtml:function(e,a,t,r,i,n,o,s,l){var u,c="",m=null,g=null,p=null,h=!1,b=t.enableImageEnhancers!==!1,y="card";t.fullWidthOnMobile&&(y+=" fullWidthCardOnMobile");var I="auto"==t.showTitle?!0:t.showTitle;("PhotoAlbum"==e.Type||"Folder"==e.Type)&&(I=!0);var f=t.coverImage,v="Timer"==e.Type?e.ProgramInfo||e:e;t.autoThumb&&v.ImageTags&&v.ImageTags.Primary&&v.PrimaryImageAspectRatio&&v.PrimaryImageAspectRatio>=1.34?(g=n,p=r?Math.round(n/r):null,m=ApiClient.getScaledImageUrl(v.Id,{type:"Primary",maxHeight:p,maxWidth:g,tag:v.ImageTags.Primary,enableImageEnhancers:b}),r&&l&&Math.abs(r-l)<=.2&&(f=!0)):t.autoThumb&&v.ImageTags&&v.ImageTags.Thumb?m=ApiClient.getScaledImageUrl(v.Id,{type:"Thumb",maxWidth:i,tag:v.ImageTags.Thumb,enableImageEnhancers:b}):t.preferBackdrop&&v.BackdropImageTags&&v.BackdropImageTags.length?m=ApiClient.getScaledImageUrl(v.Id,{type:"Backdrop",maxWidth:i,tag:v.BackdropImageTags[0],enableImageEnhancers:b}):t.preferThumb&&v.ImageTags&&v.ImageTags.Thumb?m=ApiClient.getScaledImageUrl(v.Id,{type:"Thumb",maxWidth:i,tag:v.ImageTags.Thumb,enableImageEnhancers:b}):t.preferBanner&&v.ImageTags&&v.ImageTags.Banner?m=ApiClient.getScaledImageUrl(v.Id,{type:"Banner",maxWidth:s,tag:v.ImageTags.Banner,enableImageEnhancers:b}):t.preferThumb&&v.SeriesThumbImageTag&&t.inheritThumb!==!1?m=ApiClient.getScaledImageUrl(v.SeriesId,{type:"Thumb",maxWidth:i,tag:v.SeriesThumbImageTag,enableImageEnhancers:b}):t.preferThumb&&v.ParentThumbItemId&&t.inheritThumb!==!1?m=ApiClient.getScaledImageUrl(v.ParentThumbItemId,{type:"Thumb",maxWidth:i,enableImageEnhancers:b,tag:v.ParentThumbImageTag}):t.preferThumb&&v.BackdropImageTags&&v.BackdropImageTags.length?(m=ApiClient.getScaledImageUrl(v.Id,{type:"Backdrop",maxWidth:i,tag:v.BackdropImageTags[0],enableImageEnhancers:b}),h=!0):v.ImageTags&&v.ImageTags.Primary?(g=n,p=r?Math.round(n/r):null,m=ApiClient.getScaledImageUrl(v.Id,{type:"Primary",maxHeight:p,maxWidth:g,tag:v.ImageTags.Primary,enableImageEnhancers:b}),r&&l&&Math.abs(r-l)<=.2&&(f=!0)):v.ParentPrimaryImageTag?m=ApiClient.getScaledImageUrl(v.ParentPrimaryImageItemId,{type:"Primary",maxWidth:n,tag:e.ParentPrimaryImageTag,enableImageEnhancers:b}):v.AlbumId&&v.AlbumPrimaryImageTag?(p=o,g=r?Math.round(p*r):null,m=ApiClient.getScaledImageUrl(v.AlbumId,{type:"Primary",maxHeight:p,maxWidth:g,tag:v.AlbumPrimaryImageTag,enableImageEnhancers:b}),r&&l&&Math.abs(r-l)<=.2&&(f=!0)):"Season"==v.Type&&v.ImageTags&&v.ImageTags.Thumb?m=ApiClient.getScaledImageUrl(v.Id,{type:"Thumb",maxWidth:i,tag:v.ImageTags.Thumb,enableImageEnhancers:b}):v.BackdropImageTags&&v.BackdropImageTags.length?m=ApiClient.getScaledImageUrl(v.Id,{type:"Backdrop",maxWidth:i,tag:v.BackdropImageTags[0],enableImageEnhancers:b}):v.ImageTags&&v.ImageTags.Thumb?m=ApiClient.getScaledImageUrl(v.Id,{type:"Thumb",maxWidth:i,tag:v.ImageTags.Thumb,enableImageEnhancers:b}):v.ParentThumbItemId?m=ApiClient.getScaledImageUrl(v.ParentThumbItemId,{type:"Thumb",maxWidth:i,enableImageEnhancers:b,tag:v.ParentThumbImageTag}):"Audio"==e.MediaType||"MusicAlbum"==e.Type||"MusicArtist"==e.Type?(e.Name&&I&&(u="library_music"),y+=" defaultBackground"):"Recording"==e.Type||"Program"==e.Type||"TvChannel"==e.Type?(e.Name&&I&&(u="folder_open"),y+=" defaultBackground"):"Video"==e.MediaType||"Season"==e.Type||"Series"==e.Type?(e.Name&&I&&(u="videocam"),y+=" defaultBackground"):"Person"==e.Type?(e.Name&&I&&(u="person"),y+=" defaultBackground"):(e.Name&&I&&(u="folder_open"),y+=" defaultBackground"),u=e.icon||u,y+=" "+t.shape+"Card";var T=e.MediaSourceCount||1,S=t.linkItem===!1?"#":LibraryBrowser.getHref(e,t.context);t.showChildCountIndicator&&e.ChildCount&&t.showLatestItemsPopup!==!1&&(y+=" groupedCard"),!I&&!t.showItemCounts||t.overlayText||(y+=" bottomPaddedCard");var w=LibraryBrowser.getItemDataAttributes(e,t,a),C=t.defaultAction;("play"==C||"playallfromhere"==C)&&"Full"!=e.PlayAccess&&(C=null);var P=C?' data-action="'+C+'"':"";c+="<div"+w+' class="'+y+'">';var A="";m&&!t.lazy&&(A+="background-image:url('"+m+"');");var B="cardImage";u&&(B+=" iconCardImage"),f&&(B+=" coveredCardImage",("Photo"==e.MediaType||"PhotoAlbum"==e.Type||"Folder"==e.Type||"Program"==e.Type||"Recording"==e.Type)&&(B+=" noScale")),t.centerImage&&(B+=" centeredCardImage");var L="";t.lazy&&m&&(B+=" lazy",L=' data-src="'+m+'"');var x="cardBox";t.cardLayout&&(x+=" visualCardBox"),c+='<div class="'+x+'">',c+='<div class="cardScalable">',c+='<div class="cardPadder"></div>';var k="cardContent";k+=" mediaItem",t.defaultAction&&(k+=" itemAction");var D=t.transition!==!1&&AppInfo.enableSectionTransitions?' data-transition="slide"':"",M=e.onclick?' onclick="'+e.onclick+'"':"";c+="<a"+M+D+' class="'+k+'" href="'+S+'"'+P+">",c+='<div class="'+B+'" style="'+A+'"'+L+">",u&&(c+='<i class="md-icon">'+u+"</i>"),c+="</div>","Virtual"==e.LocationType||"Offline"==e.LocationType?t.showLocationTypeIndicator!==!1&&(c+=LibraryBrowser.getOfflineIndicatorHtml(e)):t.showUnplayedIndicator!==!1?c+=d.getPlayedIndicatorHtml(e):t.showChildCountIndicator&&(c+=LibraryBrowser.getGroupCountIndicator(e)),e.SeriesTimerId&&(c+='<i class="md-icon seriesTimerIndicator">fiber_smart_record</i>'),c+=LibraryBrowser.getSyncIndicator(e),T>1&&(c+='<div class="mediaSourceIndicator">'+T+"</div>");var z=t.showProgress===!1||e.IsFolder?"":LibraryBrowser.getItemProgressBarHtml("Recording"==e.Type?e:e.UserData||{}),G=!1;if(t.overlayText||h&&!I){var O=z?"cardFooter fullCardFooter":"cardFooter";c+=LibraryBrowser.getCardFooterText(e,t,I,m,h,O,z,!1),G=!0}else z&&(c+='<div class="cardFooter fullCardFooter lightCardFooter">',c+="<div class='cardProgress cardText'>",c+=z,c+="</div>",c+="</div>",z="");return c+="</a>",!t.overlayPlayButton||e.IsPlaceHolder||"Virtual"==e.LocationType&&e.MediaType&&"Program"!=e.Type||"Person"==e.Type||"Full"!=e.PlayAccess||(c+='<div class="cardOverlayButtonContainer"><button is="paper-icon-button-light" class="cardOverlayPlayButton itemAction autoSize" data-action="playmenu" onclick="return false;"><i class="md-icon">play_arrow</i></button></div>'),t.overlayMoreButton&&(c+='<div class="cardOverlayButtonContainer"><button is="paper-icon-button-light" class="cardOverlayMoreButton itemAction autoSize" data-action="menu" onclick="return false;"><i class="md-icon">'+AppInfo.moreIcon.replace("-","_")+"</i></button></div>"),c+="</div>",t.overlayText||G||(c+=LibraryBrowser.getCardFooterText(e,t,I,m,h,"cardFooter outerCardFooter",z,!0)),c+="</div>",c+="</div>"},getTextActionButton:function(e,a){a||(a=o.getDisplayName(e));var t='<button data-id="'+e.Id+'" data-type="'+e.Type+'" data-mediatype="'+e.MediaType+'" data-channelid="'+e.ChannelId+'" data-isfolder="'+e.IsFolder+'" type="button" class="itemAction textActionButton" data-action="link">';return t+=a,t+="</button>"},getCardFooterText:function(e,a,t,r,i,l,d,u){var c="";a.cardLayout&&(c+='<div class="cardButtonContainer">',c+='<button is="paper-icon-button-light" class="itemAction btnCardOptions autoSize" data-action="menu"><i class="md-icon">'+AppInfo.moreIcon.replace("-","_")+"</i></button>",c+="</div>");var m="auto"!=a.showTitle||e.IsFolder||"Photo"!=e.MediaType?o.getDisplayName(e):"";r||t||(c+="<div class='cardDefaultText'>",c+=s(m),c+="</div>");var g=a.centerText?"cardText cardTextCentered":"cardText",p=[],h="MusicAlbum"==e.Type||"Audio"==e.Type||"MusicVideo"==e.Type;if(a.showParentTitle&&!h&&p.push(u&&"Episode"==e.Type&&e.SeriesName&&e.SeriesId?LibraryBrowser.getTextActionButton({Id:e.SeriesId,Name:e.SeriesName,Type:"Series",IsFolder:!0}):e.EpisodeTitle?e.Name:e.SeriesName||e.Album||e.AlbumArtist||e.GameSystem||""),(t||i)&&p.push(s(m)),a.showParentTitle&&h&&(u&&e.AlbumArtists&&e.AlbumArtists.length?(e.AlbumArtists[0].Type="MusicArtist",e.AlbumArtists[0].IsFolder=!0,p.push(LibraryBrowser.getTextActionButton(e.AlbumArtists[0]))):p.push(e.EpisodeTitle?e.Name:e.SeriesName||e.Album||e.AlbumArtist||e.GameSystem||"")),a.showItemCounts){var b=LibraryBrowser.getItemCountsHtml(a,e);p.push(b)}if(a.textLines)for(var y=a.textLines(e),I=0,f=y.length;f>I;I++)p.push(y[I]);if(a.showSongCount){var v="";e.SongCount&&(v=1==e.SongCount?Globalize.translate("ValueOneSong"):Globalize.translate("ValueSongCount",e.SongCount)),p.push(v)}if(a.showPremiereDate)if(e.PremiereDate)try{p.push(LibraryBrowser.getPremiereDateText(e))}catch(T){p.push("")}else p.push("");if(a.showYear&&p.push(e.ProductionYear||""),a.showChannelName&&p.push(e.ChannelName||""),a.showAirTime){var S;if(e.StartDate)try{var w=n.parseISO8601Date(e.StartDate);S=w.toLocaleDateString(),S+=", "+n.getDisplayTime(w),e.EndDate&&(w=n.parseISO8601Date(e.EndDate),S+=" - "+n.getDisplayTime(w))}catch(C){}p.push(S||"")}if("TvChannel"==e.Type&&p.push(e.CurrentProgram?o.getDisplayName(e.CurrentProgram):""),a.showSeriesYear&&p.push("Continuing"==e.Status?Globalize.translate("ValueSeriesYearToPresent",e.ProductionYear||""):e.ProductionYear||""),a.showProgramAirInfo){var w=n.parseISO8601Date(e.StartDate,!0),P=e.StartDate?w.toLocaleString():"";p.push(P||"&nbsp;"),p.push(e.ChannelName||"&nbsp;")}return c+=LibraryBrowser.getCardTextLines(p,g,!a.overlayText),a.overlayText&&d&&(c+="<div class='cardText cardProgress'>",c+=d,c+="</div>"),c&&(c='<div class="'+l+'">'+c,c+="</div>"),c},getListItemInfo:function(e){for(var a=e;!a.getAttribute("data-id");)a=a.parentNode;var t=a.getAttribute("data-id"),r=a.getAttribute("data-index"),i=a.getAttribute("data-mediatype");return{id:t,index:r,mediaType:i,context:a.getAttribute("data-context")}},getCardTextLines:function(e,a,t){var r,i,n="",o=0;for(r=0,i=e.length;i>r;r++){var s=e[r];s&&(n+="<div class='"+a+"'>",n+=s,n+="</div>",o++)}if(t)for(;i>o;)n+="<div class='"+a+"'>&nbsp;</div>",o++;return n},getFutureDateText:function(e){var a=[];a[0]=Globalize.translate("OptionSunday"),a[1]=Globalize.translate("OptionMonday"),a[2]=Globalize.translate("OptionTuesday"),a[3]=Globalize.translate("OptionWednesday"),a[4]=Globalize.translate("OptionThursday"),a[5]=Globalize.translate("OptionFriday"),a[6]=Globalize.translate("OptionSaturday");var t=a[e.getDay()];return e=e.toLocaleDateString(),-1==e.toLowerCase().indexOf(t.toLowerCase())?t+" "+e:e},getPremiereDateText:function(e,a){var t=(e.Studios||[])[0];if(!a){var r="";return e.AirTime&&(r+=e.AirTime),t&&(r+=r?" on "+t:t),r}var i=LibraryBrowser.getFutureDateText(a);return e.AirTime&&(i+=" at "+e.AirTime),t&&(i+=" on "+t),i},getOfflineIndicatorHtml:function(e){if("Offline"==e.LocationType)return'<div class="posterRibbon offlinePosterRibbon">'+Globalize.translate("HeaderOffline")+"</div>";if("Episode"==e.Type){try{var a=n.parseISO8601Date(e.PremiereDate,!0);if(e.PremiereDate&&(new Date).getTime()<a.getTime())return'<div class="posterRibbon unairedPosterRibbon">'+Globalize.translate("HeaderUnaired")+"</div>"}catch(t){}return'<div class="posterRibbon missingPosterRibbon">'+Globalize.translate("HeaderMissing")+"</div>"}return""},getGroupCountIndicator:function(e){return e.ChildCount?'<div class="playedIndicator">'+e.ChildCount+"</div>":""},getSyncIndicator:function(e){if("Synced"==e.SyncStatus)return'<div class="syncIndicator"><i class="md-icon">sync</i></div>';var a=e.SyncPercent;return a?'<div class="syncIndicator"><i class="md-icon">sync</i></div>':"Queued"==e.SyncStatus||"Converting"==e.SyncStatus||"ReadyToTransfer"==e.SyncStatus||"Transferring"==e.SyncStatus?'<div class="syncIndicator"><i class="md-icon">sync</i></div>':""},getAveragePrimaryImageAspectRatio:function(e){for(var a=[],t=0,r=e.length;r>t;t++){var i=e[t].PrimaryImageAspectRatio||0;i&&(a[a.length]=i)}if(!a.length)return null;a.sort(function(e,a){return e-a});var n,o=Math.floor(a.length/2);return n=a.length%2?a[o]:(a[o-1]+a[o])/2,Math.abs(.66666666667-n)<=.15?.66666666667:Math.abs(1.777777778-n)<=.2?1.777777778:Math.abs(1-n)<=.15?1:Math.abs(1.33333333333-n)<=.15?1.33333333333:n},metroColors:["#6FBD45","#4BB3DD","#4164A5","#E12026","#800080","#E1B222","#008040","#0094FF","#FF00C7","#FF870F","#7F0037"],getRandomMetroColor:function(){var e=Math.floor(Math.random()*(LibraryBrowser.metroColors.length-1));return LibraryBrowser.metroColors[e]},getMetroColor:function(e){if(e){for(var a=String(e.substr(0,1).charCodeAt()),t=0,r=0;r<a.length;r++)t+=parseInt(a.charAt(r));var i=String(t).substr(-1);return LibraryBrowser.metroColors[i]}return LibraryBrowser.getRandomMetroColor()},renderName:function(e,a,t,r){var i=o.getDisplayName(e,{includeParentInfo:!1});Dashboard.setPageTitle(i),a.innerHTML=t?'<a class="detailPageParentLink" href="'+LibraryBrowser.getHref(e,r)+'">'+i+"</a>":i},renderParentName:function(e,a,t){var r=[],i=t?"&context="+t:"";e.AlbumArtists?r.push(LibraryBrowser.getArtistLinksHtml(e.AlbumArtists,"detailPageParentLink")):e.ArtistItems&&e.ArtistItems.length&&"MusicVideo"==e.Type?r.push(LibraryBrowser.getArtistLinksHtml(e.ArtistItems,"detailPageParentLink")):e.SeriesName&&"Episode"==e.Type&&r.push('<a class="detailPageParentLink" href="itemdetails.html?id='+e.SeriesId+i+'">'+e.SeriesName+"</a>"),e.SeriesName&&"Season"==e.Type?r.push('<a class="detailPageParentLink" href="itemdetails.html?id='+e.SeriesId+i+'">'+e.SeriesName+"</a>"):null!=e.ParentIndexNumber&&"Episode"==e.Type?r.push('<a class="detailPageParentLink" href="itemdetails.html?id='+e.SeasonId+i+'">'+e.SeasonName+"</a>"):e.Album&&"Audio"==e.Type&&(e.AlbumId||e.ParentId)?r.push('<a class="detailPageParentLink" href="itemdetails.html?id='+(e.AlbumId||e.ParentId)+i+'">'+e.Album+"</a>"):e.Album&&"MusicVideo"==e.Type&&e.AlbumId?r.push('<a class="detailPageParentLink" href="itemdetails.html?id='+e.AlbumId+i+'">'+e.Album+"</a>"):e.Album?r.push(e.Album):"Program"==e.Type&&e.EpisodeTitle&&r.push(e.Name),r.length?(a.classList.remove("hide"),a.innerHTML=r.join(" - ")):a.classList.add("hide")},renderLinks:function(e,a){var t=[];if(a.HomePageUrl&&t.push('<a class="textlink" href="'+a.HomePageUrl+'" target="_blank">'+Globalize.translate("ButtonWebsite")+"</a>"),a.ExternalUrls)for(var r=0,i=a.ExternalUrls.length;i>r;r++){var n=a.ExternalUrls[r];t.push('<a class="textlink" href="'+n.Url+'" target="_blank">'+n.Name+"</a>")}if(t.length){var o=t.join("&nbsp;&nbsp;/&nbsp;&nbsp;");o=Globalize.translate("ValueLinks",o),e.innerHTML=o,e.classList.remove("hide")}else e.classList.add("hide")},showLayoutMenu:function(a,t,r){var i=!0;r||(i=!1,r=a.getAttribute("data-layouts"),r=r?r.split(","):["List","Poster","PosterCard","Thumb","ThumbCard"]);var n=r.map(function(e){return{name:Globalize.translate("Option"+e),id:e,selected:t==e}});require(["actionsheet"],function(t){t.show({items:n,positionTo:a,callback:function(t){a.dispatchEvent(new CustomEvent("layoutchange",{detail:{viewStyle:t},bubbles:!0,cancelable:!1})),i||e.$&&$(a).trigger("layoutchange",[t])}})})},getQueryPagingHtml:function(e){var a=e.startIndex,t=e.limit,i=e.totalRecordCount;if(t&&e.updatePageSizeSetting!==!1)try{r.setItem(e.pageSizeKey||b,t)}catch(n){}var o="",s=Math.min(a+t,i),l=i>20||i>t;if(o+='<div class="listPaging">',l){o+='<span style="vertical-align:middle;">';var d=i?a+1:0;o+=d+"-"+s+" of "+i,o+="</span>"}if((l||e.viewButton||e.filterButton||e.sortButton||e.addLayoutButton)&&(o+='<div style="display:inline-block;">',l&&(o+='<button is="paper-icon-button-light" class="btnPreviousPage autoSize" '+(a?"":"disabled")+'><i class="md-icon">&#xE5C4;</i></button>',o+='<button is="paper-icon-button-light" class="btnNextPage autoSize" '+(a+t>=i?"disabled":"")+'><i class="md-icon">arrow_forward</i></button>'),e.addLayoutButton&&(o+='<button is="paper-icon-button-light" title="'+Globalize.translate("ButtonSelectView")+'" class="btnChangeLayout autoSize" data-layouts="'+(e.layouts||"")+'" onclick="LibraryBrowser.showLayoutMenu(this, \''+(e.currentLayout||"")+'\');"><i class="md-icon">view_comfy</i></button>'),e.sortButton&&(o+='<button is="paper-icon-button-light" class="btnSort autoSize" title="'+Globalize.translate("ButtonSort")+'"><i class="md-icon">sort_by_alpha</i></button>'),e.filterButton&&(o+='<button is="paper-icon-button-light" class="btnFilter autoSize" title="'+Globalize.translate("ButtonFilter")+'"><i class="md-icon">filter_list</i></button>'),o+="</div>",l&&e.showLimit)){var u="selectPageSize",c=e.pageSizes||[20,50,100,200,300,400,500],m=c.map(function(e){return t==e?'<option value="'+e+'" selected="selected">'+e+"</option>":'<option value="'+e+'">'+e+"</option>"}).join("");o+='<div class="pageSizeContainer"><label class="labelPageSize" for="'+u+'">'+Globalize.translate("LabelLimit")+'</label><select style="width:auto;" class="selectPageSize" id="'+u+'" data-inline="true" data-mini="true">'+m+"</select></div>"}return o+="</div>"},showSortMenu:function(e){require(["dialogHelper","emby-radio"],function(a){function r(){var a=this.value;if(this.checked){var t=e.query.SortBy!=a;e.query.SortBy=a.replace("_",","),e.query.StartIndex=0,e.callback&&t&&e.callback()}}function i(){var a=this.value;if(this.checked){var t=e.query.SortOrder!=a;e.query.SortOrder=a,e.query.StartIndex=0,e.callback&&t&&e.callback()}}var n=a.createDialog({removeOnClose:!0,modal:!1,entryAnimationDuration:160,exitAnimationDuration:200});n.classList.add("ui-body-a"),n.classList.add("background-theme-a"),n.classList.add("formDialog");var o="";o+='<div style="margin:0;padding:1.25em 1.5em 1.5em;">',o+='<h2 style="margin:0 0 .5em;">',o+=Globalize.translate("HeaderSortBy"),o+="</h2>";var s,l,d;for(o+="<div>",s=0,l=e.items.length;l>s;s++){var u=e.items[s],c=u.id.replace(",","_");d=(e.query.SortBy||"").replace(",","_")==c?" checked":"",o+='<label class="block"><input type="radio" is="emby-radio" name="SortBy" data-id="'+u.id+'" value="'+c+'" class="menuSortBy" '+d+" /><span>"+u.name+"</span></label>"
}o+="</div>",o+='<h2 style="margin: 1em 0 .5em;">',o+=Globalize.translate("HeaderSortOrder"),o+="</h2>",o+="<div>",d="Ascending"==e.query.SortOrder?" checked":"",o+='<label class="block"><input type="radio" is="emby-radio" name="SortOrder" value="Ascending" class="menuSortOrder" '+d+" /><span>"+Globalize.translate("OptionAscending")+"</span></label>",d="Descending"==e.query.SortOrder?" checked":"",o+='<label class="block"><input type="radio" is="emby-radio" name="SortOrder" value="Descending" class="menuSortOrder" '+d+" /><span>"+Globalize.translate("OptionDescending")+"</span></label>",o+="</div>",o+="</div>",n.innerHTML=o,t.body.appendChild(n);var m=browserInfo.animate?0:100;setTimeout(function(){a.open(n)},m);var g=n.querySelectorAll(".menuSortBy");for(s=0,l=g.length;l>s;s++)g[s].addEventListener("change",r);var p=n.querySelectorAll(".menuSortOrder");for(s=0,l=p.length;l>s;s++)p[s].addEventListener("change",i)})},getItemProgressBarHtml:function(e){if("Recording"==e.Type&&e.CompletionPercentage)return'<progress class="itemProgressBar recordingProgressBar" min="0" max="100" value="'+e.CompletionPercentage+'"></progress>';var a=e.PlayedPercentage;return a&&100>a?'<progress class="itemProgressBar" min="0" max="100" value="'+a+'"></progress>':null},renderDetailImage:function(e,a,t,r){var i=a.ImageTags||{};a.PrimaryImageTag&&(i.Primary=a.PrimaryImageTag);var n,o="",s="portrait",l=360,d=!1;r&&i.Thumb?(n=ApiClient.getScaledImageUrl(a.Id,{type:"Thumb",maxHeight:l,tag:a.ImageTags.Thumb}),s="thumb"):i.Primary?(n=ApiClient.getScaledImageUrl(a.Id,{type:"Primary",maxHeight:l,tag:a.ImageTags.Primary}),d=!0):a.BackdropImageTags&&a.BackdropImageTags.length?(n=ApiClient.getScaledImageUrl(a.Id,{type:"Backdrop",maxHeight:l,tag:a.BackdropImageTags[0]}),s="thumb"):i.Thumb?(n=ApiClient.getScaledImageUrl(a.Id,{type:"Thumb",maxHeight:l,tag:a.ImageTags.Thumb}),s="thumb"):i.Disc?(n=ApiClient.getScaledImageUrl(a.Id,{type:"Disc",maxHeight:l,tag:a.ImageTags.Disc}),s="square"):a.AlbumId&&a.AlbumPrimaryImageTag?(n=ApiClient.getScaledImageUrl(a.AlbumId,{type:"Primary",maxHeight:l,tag:a.AlbumPrimaryImageTag}),s="square"):"Audio"==a.MediaType||"MusicAlbum"==a.Type||"MusicGenre"==a.Type?(n="css/images/items/detail/audio.png",s="square"):"Game"==a.MediaType||"GameGenre"==a.Type?(n="css/images/items/detail/game.png",s="square"):"Person"==a.Type?(n="css/images/items/detail/person.png",s="square"):"Genre"==a.Type||"Studio"==a.Type?(n="css/images/items/detail/video.png",s="square"):"TvChannel"==a.Type?(n="css/images/items/detail/tv.png",s="square"):(n="css/images/items/detail/video.png",s="square"),o+='<div style="position:relative;">',t&&(o+="<a class='itemDetailGalleryLink' href='#'>"),d&&a.PrimaryImageAspectRatio&&(a.PrimaryImageAspectRatio>=1.48?s="thumb":a.PrimaryImageAspectRatio>=.85&&a.PrimaryImageAspectRatio<=1.34&&(s="square")),o+="<img class='itemDetailImage lazy' src='css/images/empty.png' />",t&&(o+="</a>");var u=a.IsFolder||!a.UserData?"":LibraryBrowser.getItemProgressBarHtml("Recording"==a.Type?a:a.UserData);o+='<div class="detailImageProgressContainer">',u&&(o+=u),o+="</div>",o+="</div>",e.innerHTML=o,"thumb"==s?(e.classList.add("thumbDetailImageContainer"),e.classList.remove("portraitDetailImageContainer"),e.classList.remove("squareDetailImageContainer")):"square"==s?(e.classList.remove("thumbDetailImageContainer"),e.classList.remove("portraitDetailImageContainer"),e.classList.add("squareDetailImageContainer")):(e.classList.remove("thumbDetailImageContainer"),e.classList.add("portraitDetailImageContainer"),e.classList.remove("squareDetailImageContainer"));var c=e.querySelector("img");c.onload=function(){-1==c.src.indexOf("empty.png")&&c.classList.add("loaded")},ImageLoader.lazyImage(c,n)},refreshDetailImageUserData:function(e,a){var t=a.IsFolder||!a.UserData?"":LibraryBrowser.getItemProgressBarHtml("Recording"==a.Type?a:a.UserData),r=e.querySelector(".detailImageProgressContainer");r.innerHTML=t||""},renderOverview:function(e,a){for(var t=0,r=e.length;r>t;t++){var i=e[t],n=a.Overview||"";if(n){i.innerHTML=n,i.classList.remove("empty");for(var o=i.querySelectorAll("a"),s=0,l=o.length;l>s;s++)o[s].setAttribute("target","_blank")}else i.innerHTML="",i.classList.add("empty")}},renderStudios:function(e,a,t){if(a.Studios&&a.Studios.length&&"Series"!=a.Type){for(var r="",i=0,n=a.Studios.length;n>i;i++)i>0&&(r+="&nbsp;&nbsp;/&nbsp;&nbsp;"),r+=t?a.Studios[i].Name:'<a class="textlink" href="itemdetails.html?id='+a.Studios[i].Id+'">'+a.Studios[i].Name+"</a>";var o=a.Studios.length>1?"ValueStudios":"ValueStudio";r=Globalize.translate(o,r),e.innerHTML=r,e.classList.remove("hide")}else e.classList.add("hide")},renderGenres:function(e,a,t,r){for(var i="",n=a.Genres||[],o=0,s=n.length;s>o&&!(t&&o>=t);o++){o>0&&(i+="<span>&nbsp;&nbsp;/&nbsp;&nbsp;</span>");var l="Audio"==a.Type||"MusicArtist"==a.Type||"MusicAlbum"==a.Type?"musicgenre":"genre";"Game"==a.MediaType&&(l="gamegenre"),i+=r?n[o]:'<a class="textlink" href="itemdetails.html?'+l+"="+ApiClient.encodeName(n[o])+'">'+n[o]+"</a>"}e.innerHTML=i},renderPremiereDate:function(e,a){if(a.PremiereDate)try{var t=n.parseISO8601Date(a.PremiereDate,!0),r=(new Date).getTime()>t.getTime()?"ValuePremiered":"ValuePremieres";e.show().html(Globalize.translate(r,t.toLocaleDateString()))}catch(i){e.hide()}else e.hide()},renderAwardSummary:function(e,a){a.AwardSummary?(e.classList.remove("hide"),e.innerHTML=Globalize.translate("ValueAwards",a.AwardSummary)):e.classList.add("hide")},renderDetailPageBackdrop:function(e,a){var t,r=i.availWidth,n=!1,o=e.querySelector("#itemBackdrop");return a.BackdropImageTags&&a.BackdropImageTags.length?(t=ApiClient.getScaledImageUrl(a.Id,{type:"Backdrop",index:0,maxWidth:r,tag:a.BackdropImageTags[0]}),o.classList.remove("noBackdrop"),ImageLoader.lazyImage(o,t,!1),n=!0):a.ParentBackdropItemId&&a.ParentBackdropImageTags&&a.ParentBackdropImageTags.length?(t=ApiClient.getScaledImageUrl(a.ParentBackdropItemId,{type:"Backdrop",index:0,tag:a.ParentBackdropImageTags[0],maxWidth:r}),o.classList.remove("noBackdrop"),ImageLoader.lazyImage(o,t,!1),n=!0):(o.classList.add("noBackdrop"),o.style.backgroundImage=""),n}};return y}(window,document,screen);return window.LibraryBrowser=g,g});