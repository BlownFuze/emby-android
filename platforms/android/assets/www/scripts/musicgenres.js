define([],function(){return function(e,r,t){function n(){var e=o(),t=u[e];return t||(t=u[e]={query:{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Audio,MusicAlbum",Recursive:!0,Fields:"DateCreated,SyncInfo,ItemCounts",StartIndex:0},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Thumb","Thumb")},t.query.ParentId=r.topParentId,LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function i(){return n().query}function o(){return LibraryBrowser.getSavedQueryKey("genres")}function a(e){Dashboard.showLoadingMsg();var r=i();ApiClient.getMusicGenres(Dashboard.getCurrentUserId(),r).then(function(t){var n="",i=s.getCurrentViewStyle();"Thumb"==i?n=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"backdrop",preferThumb:!0,context:"music",showItemCounts:!0,centerText:!0,lazy:!0,overlayPlayButton:!0}):"ThumbCard"==i?n=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"backdrop",preferThumb:!0,context:"music",showItemCounts:!0,cardLayout:!0,showTitle:!0,lazy:!0}):"PosterCard"==i?n=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"portrait",context:"music",showItemCounts:!0,lazy:!0,cardLayout:!0,showTitle:!0}):"Poster"==i&&(n=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"portrait",context:"music",centerText:!0,showItemCounts:!0,lazy:!0,overlayPlayButton:!0}));var a=e.querySelector("#items");a.innerHTML=n,ImageLoader.lazyChildren(a),LibraryBrowser.saveQueryValues(o(),r),Dashboard.hideLoadingMsg()})}var s=this,u={};s.getViewStyles=function(){return"Poster,PosterCard,Thumb,ThumbCard".split(",")},s.getCurrentViewStyle=function(){return n(t).view},s.setCurrentViewStyle=function(e){n(t).view=e,LibraryBrowser.saveViewSetting(o(t),e),a(t)},s.enableViewSelection=!0,s.renderTab=function(){a(t)};var y=t.querySelector(".btnSelectView");y.addEventListener("click",function(e){LibraryBrowser.showLayoutMenu(e.target,s.getCurrentViewStyle(),s.getViewStyles())}),y.addEventListener("layoutchange",function(e){s.setCurrentViewStyle(e.detail.viewStyle)})}});