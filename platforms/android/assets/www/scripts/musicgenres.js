define([],function(){return function(e,r,t){function i(){var e=o(),t=u[e];return t||(t=u[e]={query:{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Audio,MusicVideo",Recursive:!0,Fields:"DateCreated,SyncInfo,ItemCounts",StartIndex:0},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Thumb","Thumb")},t.query.ParentId=r.topParentId,LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function n(){return i().query}function o(){return LibraryBrowser.getSavedQueryKey("genres")}function a(e){Dashboard.showLoadingMsg();var r=n();ApiClient.getMusicGenres(Dashboard.getCurrentUserId(),r).then(function(t){var i="",n=s.getCurrentViewStyle();"Thumb"==n?i=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"backdrop",preferThumb:!0,context:"music",showItemCounts:!0,centerText:!0,lazy:!0,overlayPlayButton:!0}):"ThumbCard"==n?i=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"backdrop",preferThumb:!0,context:"music",showItemCounts:!0,cardLayout:!0,showTitle:!0,lazy:!0}):"PosterCard"==n?i=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"portrait",context:"music",showItemCounts:!0,lazy:!0,cardLayout:!0,showTitle:!0}):"Poster"==n&&(i=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"portrait",context:"music",centerText:!0,showItemCounts:!0,lazy:!0,overlayPlayButton:!0}));var a=e.querySelector("#items");a.innerHTML=i,ImageLoader.lazyChildren(a),LibraryBrowser.saveQueryValues(o(),r),Dashboard.hideLoadingMsg()})}var s=this,u={};s.getViewStyles=function(){return"Poster,PosterCard,Thumb,ThumbCard".split(",")},s.getCurrentViewStyle=function(){return i(t).view},s.setCurrentViewStyle=function(e){i(t).view=e,LibraryBrowser.saveViewSetting(o(t),e),a(t)},s.enableViewSelection=!0,s.renderTab=function(){a(t)};var y=t.querySelector(".btnSelectView");y.addEventListener("click",function(e){LibraryBrowser.showLayoutMenu(e.target,s.getCurrentViewStyle(),s.getViewStyles())}),y.addEventListener("layoutchange",function(e){s.setCurrentViewStyle(e.detail.viewStyle)})}});