define(["jQuery"],function(e){return function(t,r,o){function a(){var e=i(),t=y[e];return t||(t=y[e]={query:{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Series",Recursive:!0,Fields:"DateCreated,SyncInfo,ItemCounts",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Thumb","Thumb")},t.query.ParentId=r.topParentId,LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function n(){return a().query}function i(){return LibraryBrowser.getSavedQueryKey("genres")}function s(t){Dashboard.showLoadingMsg();var r=n();ApiClient.getGenres(Dashboard.getCurrentUserId(),r).then(function(o){window.scrollTo(0,0);var n="",u=a().view;e(".listTopPaging",t).html(LibraryBrowser.getQueryPagingHtml({startIndex:r.StartIndex,limit:r.Limit,totalRecordCount:o.TotalRecordCount,viewButton:!1,showLimit:!1,updatePageSizeSetting:!1,addLayoutButton:!0,currentLayout:u})),"Thumb"==u?n=LibraryBrowser.getPosterViewHtml({items:o.Items,shape:"backdrop",preferThumb:!0,context:"tv",showItemCounts:!0,centerText:!0,lazy:!0,overlayPlayButton:!0}):"ThumbCard"==u?n=LibraryBrowser.getPosterViewHtml({items:o.Items,shape:"backdrop",preferThumb:!0,context:"tv",showItemCounts:!0,cardLayout:!0,showTitle:!0,lazy:!0}):"PosterCard"==u?n=LibraryBrowser.getPosterViewHtml({items:o.Items,shape:"portrait",context:"tv",showItemCounts:!0,lazy:!0,cardLayout:!0,showTitle:!0}):"Poster"==u&&(n=LibraryBrowser.getPosterViewHtml({items:o.Items,shape:"portrait",context:"tv",centerText:!0,showItemCounts:!0,lazy:!0,overlayPlayButton:!0}));var y=t.querySelector("#items");y.innerHTML=n,ImageLoader.lazyChildren(y),e(".btnNextPage",t).on("click",function(){r.StartIndex+=r.Limit,s(t)}),e(".btnPreviousPage",t).on("click",function(){r.StartIndex-=r.Limit,s(t)}),e(".btnChangeLayout",t).on("layoutchange",function(e,r){a().view=r,LibraryBrowser.saveViewSetting(i(),r),s(t)}),LibraryBrowser.saveQueryValues(i(),r),Dashboard.hideLoadingMsg()})}var u=this,y={};u.renderTab=function(){s(o)}}});