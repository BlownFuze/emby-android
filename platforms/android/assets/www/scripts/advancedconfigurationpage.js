!function(e,t){function a(t,a,n){var o=n.OperatingSystem.toLowerCase();-1!=o.indexOf("windows")?e("#windowsStartupDescription",t).show():e("#windowsStartupDescription",t).hide(),n.SupportsAutoRunAtStartup?e("#fldRunAtStartup",t).show():e("#fldRunAtStartup",t).hide(),n.CanSelfUpdate?(e(".fldAutomaticUpdates",t).show(),e(".lnlAutomaticUpdateLevel",t).html(Globalize.translate("LabelAutomaticUpdateLevel"))):(e(".fldAutomaticUpdates",t).hide(),e(".lnlAutomaticUpdateLevel",t).html(Globalize.translate("LabelAutomaticUpdateLevelForPlugins"))),e("#chkEnableAutomaticServerUpdates",t).checked(a.EnableAutoUpdate),e("#chkEnableAutomaticRestart",t).checked(a.EnableAutomaticRestart),n.CanSelfRestart?e("#fldEnableAutomaticRestart",t).show():e("#fldEnableAutomaticRestart",t).hide(),e("#selectAutomaticUpdateLevel",t).val(a.SystemUpdateLevel).trigger("change"),e("#chkDebugLog",t).checked(a.EnableDebugLevelLogging),e("#chkRunAtStartup",t).checked(a.RunAtStartup),e("#chkEnableDashboardResponseCache",t).checked(a.EnableDashboardResponseCaching),e("#chkEnableMinification",t).checked(a.EnableDashboardResourceMinification),e("#txtDashboardSourcePath",t).val(a.DashboardSourcePath).trigger("change"),Dashboard.hideLoadingMsg()}function n(){Dashboard.showLoadingMsg();var t=this;return ApiClient.getServerConfiguration().then(function(a){a.EnableDebugLevelLogging=e("#chkDebugLog",t).checked(),a.RunAtStartup=e("#chkRunAtStartup",t).checked(),a.SystemUpdateLevel=e("#selectAutomaticUpdateLevel",t).val(),a.EnableAutomaticRestart=e("#chkEnableAutomaticRestart",t).checked(),a.EnableAutoUpdate=e("#chkEnableAutomaticServerUpdates",t).checked(),a.EnableDashboardResourceMinification=e("#chkEnableMinification",t).checked(),a.EnableDashboardResponseCaching=e("#chkEnableDashboardResponseCache",t).checked(),a.DashboardSourcePath=e("#txtDashboardSourcePath",t).val(),ApiClient.updateServerConfiguration(a).then(Dashboard.processServerConfigurationUpdateResult)}),!1}e(t).on("pageshow","#advancedConfigurationPage",function(){Dashboard.showLoadingMsg();var e=this,t=ApiClient.getServerConfiguration(),n=ApiClient.getSystemInfo();Promise.all([t,n]).then(function(t){a(e,t[0],t[1])})}).on("pageinit","#advancedConfigurationPage",function(){var t=this;e("#selectAutomaticUpdateLevel",t).on("change",function(){"Dev"==this.value?e("#devBuildWarning",t).show():e("#devBuildWarning",t).hide()}),e("#btnSelectDashboardSourcePath",t).on("click.selectDirectory",function(){require(["directorybrowser"],function(a){var n=new a;n.show({callback:function(a){a&&e("#txtDashboardSourcePath",t).val(a),n.close()}})})}),e(".advancedConfigurationForm").off("submit",n).on("submit",n)})}(jQuery,document,window);