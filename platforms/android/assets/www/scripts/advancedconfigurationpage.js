!function(e,a){function t(a,t,o){var n=o.OperatingSystem.toLowerCase();-1!=n.indexOf("windows")?e("#windowsStartupDescription",a).show():e("#windowsStartupDescription",a).hide(),o.SupportsAutoRunAtStartup?e("#fldRunAtStartup",a).show():e("#fldRunAtStartup",a).hide(),o.CanSelfUpdate?(e(".fldAutomaticUpdates",a).show(),e(".lnlAutomaticUpdateLevel",a).html(Globalize.translate("LabelAutomaticUpdateLevel"))):(e(".fldAutomaticUpdates",a).hide(),e(".lnlAutomaticUpdateLevel",a).html(Globalize.translate("LabelAutomaticUpdateLevelForPlugins"))),e("#chkEnableAutomaticServerUpdates",a).checked(t.EnableAutoUpdate).checkboxradio("refresh"),e("#chkEnableAutomaticRestart",a).checked(t.EnableAutomaticRestart).checkboxradio("refresh"),o.CanSelfRestart?e("#fldEnableAutomaticRestart",a).show():e("#fldEnableAutomaticRestart",a).hide(),e("#selectAutomaticUpdateLevel",a).val(t.SystemUpdateLevel).trigger("change"),e("#chkDebugLog",a).checked(t.EnableDebugLevelLogging).checkboxradio("refresh"),e("#chkRunAtStartup",a).checked(t.RunAtStartup).checkboxradio("refresh"),e("#chkEnableDashboardResponseCache",a).checked(t.EnableDashboardResponseCaching).checkboxradio("refresh"),e("#chkEnableMinification",a).checked(t.EnableDashboardResourceMinification).checkboxradio("refresh"),e("#txtDashboardSourcePath",a).val(t.DashboardSourcePath).trigger("change"),Dashboard.hideLoadingMsg()}function o(){Dashboard.showLoadingMsg();var a=this;return ApiClient.getServerConfiguration().then(function(t){t.EnableDebugLevelLogging=e("#chkDebugLog",a).checked(),t.RunAtStartup=e("#chkRunAtStartup",a).checked(),t.SystemUpdateLevel=e("#selectAutomaticUpdateLevel",a).val(),t.EnableAutomaticRestart=e("#chkEnableAutomaticRestart",a).checked(),t.EnableAutoUpdate=e("#chkEnableAutomaticServerUpdates",a).checked(),t.EnableDashboardResourceMinification=e("#chkEnableMinification",a).checked(),t.EnableDashboardResponseCaching=e("#chkEnableDashboardResponseCache",a).checked(),t.DashboardSourcePath=e("#txtDashboardSourcePath",a).val(),ApiClient.updateServerConfiguration(t).then(Dashboard.processServerConfigurationUpdateResult)}),!1}e(a).on("pageshow","#advancedConfigurationPage",function(){Dashboard.showLoadingMsg();var e=this,a=ApiClient.getServerConfiguration(),o=ApiClient.getSystemInfo();Promise.all([a,o]).then(function(a){t(e,a[0],a[1])})}).on("pageinit","#advancedConfigurationPage",function(){var a=this;e("#selectAutomaticUpdateLevel",a).on("change",function(){"Dev"==this.value?e("#devBuildWarning",a).show():e("#devBuildWarning",a).hide()}),e("#btnSelectDashboardSourcePath",a).on("click.selectDirectory",function(){require(["directorybrowser"],function(t){var o=new t;o.show({callback:function(t){t&&e("#txtDashboardSourcePath",a).val(t),o.close()}})})}),e(".advancedConfigurationForm").off("submit",o).on("submit",o)})}(jQuery,document,window);