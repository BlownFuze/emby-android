define(["jQuery"],function(e){function n(n){Dashboard.showLoadingMsg();var t=ApiClient;t.getJSON(t.getUrl("Startup/Configuration")).then(function(i){i.LiveTvTunerType=e("#selectTunerType",n).val(),i.LiveTvTunerPath=e(".txtDevicePath",n).val(),t.ajax({type:"POST",data:i,url:t.getUrl("Startup/Configuration")}).then(function(){Dashboard.hideLoadingMsg(),a(i)},function(){Dashboard.hideLoadingMsg(),Dashboard.alert({message:Globalize.translate("ErrorSavingTvProvider")})})})}function t(n){Dashboard.showLoadingMsg();var t=ApiClient;t.getJSON(t.getUrl("Startup/Configuration")).then(function(t){e("#selectTunerType",n).val(t.LiveTvTunerType||"hdhomerun"),n.querySelector(".txtDevicePath").value=t.LiveTvTunerPath||"",Dashboard.hideLoadingMsg()})}function a(e){e.LiveTvTunerPath&&e.LiveTvTunerType?Dashboard.navigate("wizardlivetvguide.html"):i()}function i(){var e=ApiClient;e.getJSON(e.getUrl("Startup/Info")).then(function(e){Dashboard.navigate(e.SupportsRunningAsService?"wizardservice.html":"wizardagreement.html")})}function r(){var e=this;return n(e),!1}e(document).on("pageinit","#wizardTunerPage",function(){var n=this;e("form",n).off("submit",r).on("submit",r),e(".btnSkip",n).on("click",i)}).on("pageshow","#wizardTunerPage",function(){var e=this;t(e)})});