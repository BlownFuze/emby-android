!function(e,n){function t(n){Dashboard.showLoadingMsg();var t=ApiClient;t.getJSON(t.getUrl("Startup/Configuration")).then(function(a){a.LiveTvTunerType=e("#selectTunerType",n).val(),a.LiveTvTunerPath=e(".txtDevicePath",n).val(),t.ajax({type:"POST",data:a,url:t.getUrl("Startup/Configuration")}).then(function(){Dashboard.hideLoadingMsg(),i(a)},function(){Dashboard.hideLoadingMsg(),Dashboard.alert({message:Globalize.translate("ErrorSavingTvProvider")})})})}function a(n){Dashboard.showLoadingMsg();var t=ApiClient;t.getJSON(t.getUrl("Startup/Configuration")).then(function(t){e("#selectTunerType",n).val(t.LiveTvTunerType||"hdhomerun"),n.querySelector(".txtDevicePath").value=t.LiveTvTunerPath||"",Dashboard.hideLoadingMsg()})}function i(e){e.LiveTvTunerPath&&e.LiveTvTunerType?Dashboard.navigate("wizardlivetvguide.html"):r()}function r(){var e=ApiClient;e.getJSON(e.getUrl("Startup/Info")).then(function(e){Dashboard.navigate(e.SupportsRunningAsService?"wizardservice.html":"wizardagreement.html")})}function o(){var e=this;return t(e),!1}e(n).on("pageinit","#wizardTunerPage",function(){var n=this;e("form",n).off("submit",o).on("submit",o),e(".btnSkip",n).on("click",r)}).on("pageshow","#wizardTunerPage",function(){var e=this;a(e)})}(jQuery,document,window);