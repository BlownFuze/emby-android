define(["cardBuilder","emby-itemscontainer"],function(e){function r(){return LibraryBrowser.getSavedQueryKey()}function t(a){Dashboard.showLoadingMsg(),ApiClient.getLiveTvPrograms(i).then(function(o){function n(){i.StartIndex+=i.Limit,t(a)}function s(){i.StartIndex-=i.Limit,t(a)}window.scrollTo(0,0);var l="",d=LibraryBrowser.getQueryPagingHtml({startIndex:i.StartIndex,limit:i.Limit,totalRecordCount:o.TotalRecordCount,showLimit:!1});a.querySelector(".listTopPaging").innerHTML=d,l=e.getCardsHtml({items:o.Items,shape:i.IsMovie?"portrait":"auto",context:"livetv",showTitle:!1,centerText:!0,lazy:!0,showStartDateIndex:!0,overlayText:!1,showProgramAirInfo:!0,overlayMoreButton:!0});var u=a.querySelector(".itemsContainer");u.innerHTML=l+d,ImageLoader.lazyChildren(u);var g,y,m;for(m=a.querySelectorAll(".btnNextPage"),g=0,y=m.length;y>g;g++)m[g].addEventListener("click",n);for(m=a.querySelectorAll(".btnPreviousPage"),g=0,y=m.length;y>g;g++)m[g].addEventListener("click",s);LibraryBrowser.saveQueryValues(r(),i),Dashboard.hideLoadingMsg()})}var a=new Date;a.setHours(0,0,0,0);var i={UserId:Dashboard.getCurrentUserId(),SortBy:"StartDate,SortName",SortOrder:"Ascending",StartIndex:0,HasAired:!1};pageIdOn("pagebeforeshow","liveTvItemsPage",function(){i.ParentId=LibraryMenu.getTopParentId();var e=this,a=LibraryBrowser.getDefaultPageSize();a!=i.Limit&&(i.Limit=a,i.StartIndex=0),i.IsMovie="movies"==getParameterByName("type")?!0:null,i.IsSports="sports"==getParameterByName("type")?!0:null,i.IsKids="kids"==getParameterByName("type")?!0:null;var o=r();LibraryBrowser.loadSavedQueryValues(o,i),t(e)})});