define(["emby-itemscontainer"],function(){function e(){return LibraryBrowser.getSavedQueryKey()}function r(a){Dashboard.showLoadingMsg(),ApiClient.getLiveTvPrograms(o).then(function(i){function n(){o.StartIndex+=o.Limit,r(a)}function s(){o.StartIndex-=o.Limit,r(a)}window.scrollTo(0,0);var l="",d=LibraryBrowser.getQueryPagingHtml({startIndex:o.StartIndex,limit:o.Limit,totalRecordCount:i.TotalRecordCount,showLimit:!1});a.querySelector(".listTopPaging").innerHTML=d,"Poster"==t?l=LibraryBrowser.getPosterViewHtml({items:i.Items,shape:o.IsMovie?"portrait":"auto",context:"livetv",showTitle:!1,centerText:!0,lazy:!0,showStartDateIndex:!0,overlayText:!1,showProgramAirInfo:!0,overlayMoreButton:!0}):"PosterCard"==t&&(l=LibraryBrowser.getPosterViewHtml({items:i.Items,shape:"portrait",context:"livetv",showTitle:!0,showStartDateIndex:!0,lazy:!0,cardLayout:!0,showProgramAirInfo:!0,overlayMoreButton:!0}));var g=a.querySelector(".itemsContainer");g.innerHTML=l+d,ImageLoader.lazyChildren(g);var u,y,m;for(m=a.querySelectorAll(".btnNextPage"),u=0,y=m.length;y>u;u++)m[u].addEventListener("click",n);for(m=a.querySelectorAll(".btnPreviousPage"),u=0,y=m.length;y>u;u++)m[u].addEventListener("click",s);LibraryBrowser.saveQueryValues(e(),o),Dashboard.hideLoadingMsg()})}var t=LibraryBrowser.getDefaultItemsView("Poster","Poster"),a=new Date;a.setHours(0,0,0,0);var o={UserId:Dashboard.getCurrentUserId(),SortBy:"StartDate,SortName",SortOrder:"Ascending",StartIndex:0,HasAired:!1};pageIdOn("pagebeforeshow","liveTvItemsPage",function(){o.ParentId=LibraryMenu.getTopParentId();var t=this,a=LibraryBrowser.getDefaultPageSize();a!=o.Limit&&(o.Limit=a,o.StartIndex=0),o.IsMovie="movies"==getParameterByName("type")?!0:null,o.IsSports="sports"==getParameterByName("type")?!0:null,o.IsKids="kids"==getParameterByName("type")?!0:null;var i=e();LibraryBrowser.loadSavedQueryValues(i,o),r(t)})});