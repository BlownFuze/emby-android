define(["jQuery"],function(t){function i(t,i){require(["confirm"],function(e){e(Globalize.translate("MessageConfirmPathSubstitutionDeletion"),Globalize.translate("HeaderConfirmDeletion")).then(function(){ApiClient.getServerConfiguration().then(function(e){e.PathSubstitutions.splice(i,1),ApiClient.updateServerConfiguration(e).then(function(){o(t)})})})})}function e(i,e){e.PathSubstitutions.push({From:t("#txtFrom",i).val(),To:t("#txtTo",i).val()})}function n(e,n){var a=0,o=n.PathSubstitutions.map(function(t){var i="";return i+="<paper-icon-item>",i+='<paper-fab mini icon="folder" class="blue" item-icon></paper-fab>',i+="<paper-item-body three-line>",i+="<div>"+t.From+"</div>",i+="<div secondary><b>"+Globalize.translate("HeaderTo")+"</b></div>",i+="<div secondary>"+t.To+"</div>",i+="</paper-item-body>",i+='<button type="button" is="paper-icon-button-light" data-index="'+a+'" class="btnDeletePath"><iron-icon icon="delete"></iron-icon></button>',i+="</paper-icon-item>",a++,i}).join("");n.PathSubstitutions.length&&(o='<div class="paperList">'+o+"</div>");var r=t(".pathSubstitutions",e).html(o);t(".btnDeletePath",r).on("click",function(){i(e,parseInt(this.getAttribute("data-index")))})}function a(t,i){u=i,require(["paper-fab","paper-item-body","paper-icon-item"],function(){n(t,i),Dashboard.hideLoadingMsg()})}function o(i){t("#txtFrom",i).val(""),t("#txtTo",i).val(""),ApiClient.getServerConfiguration().then(function(t){a(i,t)})}function r(){Dashboard.showLoadingMsg();var i=this,n=t(i).parents(".page");return ApiClient.getServerConfiguration().then(function(t){e(n,t),ApiClient.updateServerConfiguration(t).then(function(){o(n)})}),!1}function l(){return[{href:"library.html",name:Globalize.translate("TabFolders")},{href:"librarydisplay.html",name:Globalize.translate("TabDisplay")},{href:"librarypathmapping.html",name:Globalize.translate("TabPathSubstitution")},{href:"librarysettings.html",name:Globalize.translate("TabAdvanced")}]}var u;t(document).on("pageinit","#libraryPathMappingPage",function(){var i=this;t(".libraryPathMappingForm").off("submit",r).on("submit",r),i.querySelector(".labelFromHelp").innerHTML=Globalize.translate("LabelFromHelp","D:\\Movies")}).on("pageshow","#libraryPathMappingPage",function(){LibraryMenu.setTabs("librarysetup",2,l),Dashboard.showLoadingMsg();var t=this;ApiClient.getServerConfiguration().then(function(i){a(t,i)})}).on("pagebeforehide","#libraryPathMappingPage",function(){u=null})});