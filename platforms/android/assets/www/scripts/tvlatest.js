define(["components/categorysyncbuttons","components/groupedcards","cardBuilder"],function(e,t,r){function n(){return"Thumb"}function a(e,t){Dashboard.showLoadingMsg();var r=Dashboard.getCurrentUserId(),n=t.topParentId,a={IncludeItemTypes:"Episode",Limit:30,Fields:"PrimaryImageAspectRatio,SyncInfo",ParentId:n,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb"};return ApiClient.getJSON(ApiClient.getUrl("Users/"+r+"/Items/Latest",a))}function o(e,t,a){a.then(function(t){var a=n(),o="";"ThumbCard"==a?o+=r.getCardsHtml({items:t,shape:"backdrop",preferThumb:!0,inheritThumb:!1,showUnplayedIndicator:!1,showChildCountIndicator:!0,overlayText:!1,showParentTitle:!0,lazy:!0,showTitle:!0,cardLayout:!0}):"Thumb"==a&&(o+=r.getCardsHtml({items:t,shape:"backdrop",preferThumb:!0,inheritThumb:!1,showParentTitle:!1,showUnplayedIndicator:!1,showChildCountIndicator:!0,overlayText:!1,centerText:!0,lazy:!0,showTitle:!1,overlayPlayButton:AppInfo.enableAppLayouts}));var i=e.querySelector("#latestEpisodes");i.innerHTML=o,ImageLoader.lazyChildren(i),Dashboard.hideLoadingMsg()})}return function(r,n,i){var s=this;e.init(i);var d;s.preRender=function(){d=a(r,n)},s.renderTab=function(){o(i,n,d)},i.querySelector("#latestEpisodes").addEventListener("click",t.onItemsContainerClick)}});