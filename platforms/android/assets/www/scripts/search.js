!function(e,t,a,n,i){function o(){g&&(n(g),g=null)}function r(e){return"Audio"==e.Type?[[e.AlbumArtist,e.Album].join(" - ")]:"MusicAlbum"==e.Type?[e.AlbumArtist]:"MusicArtist"==e.Type?[Globalize.translate("LabelArtist")]:"Movie"==e.Type?[Globalize.translate("LabelMovie")]:"MusicVideo"==e.Type?[Globalize.translate("LabelMusicVideo")]:"Episode"==e.Type?[Globalize.translate("LabelEpisode")]:"Series"==e.Type?[Globalize.translate("LabelSeries")]:"BoxSet"==e.Type?[Globalize.translate("LabelCollection")]:e.ChannelName?[e.ChannelName]:[e.Type]}function s(){var e=this;e.showSearchPanel=function(){v()}}function u(e,t){t=t.map(function(e){return e.Id=e.ItemId,e.ImageTags={},e.UserData={},e.PrimaryImageTag&&(e.ImageTags.Primary=e.PrimaryImageTag),e});var a=LibraryBrowser.getPosterViewHtml({items:t,shape:"auto",lazy:!0,overlayText:!1,showTitle:!0,centerImage:!0,centerText:!0,textLines:r,overlayPlayButton:!0}),n=e.querySelector(".itemsContainer");n.innerHTML=a,ImageLoader.lazyChildren(n)}function c(e,t){var a=g;Dashboard.showLoadingMsg(),ApiClient.getSearchHints({userId:Dashboard.getCurrentUserId(),searchTerm:t,limit:30}).then(function(t){a==g&&u(e,t.SearchHints),Dashboard.hideLoadingMsg()},function(){Dashboard.hideLoadingMsg()})}function l(t,a){return a?(o(),void(g=i(function(){c(t,a)},300))):(e(".itemsContainer",t).empty(),void o())}function d(a){var n=t.querySelector(".searchResultsOverlay");if(a&&!n){var i='<div class="searchResultsOverlay ui-body-b smoothScrollY background-theme-b">';i+='<div class="searchResultsContainer"><div class="itemsContainer"></div></div></div>',n=e(i).appendTo(t.body)[0],e(n).createCardMenus()}return n}function h(e){var a;e?(a=d(!0),T||f(a,1),T=!0,t.body.classList.add("bodyWithPopupOpen"),l(a,e)):(a=d(!1),a&&(l(a,""),T&&(m(a,1),T=!1),t.body.classList.remove("bodyWithPopupOpen")))}function f(e,t){var a=[{opacity:"0",offset:0},{opacity:"1",offset:1}],n={duration:200,iterations:t,fill:"both"};e.animate(a,n)}function m(e,t){var a=[{opacity:"1",offset:0},{opacity:"0",offset:1}],n={duration:600,iterations:t,fill:"both"};e.animate(a,n).onfinish=function(){e.parentNode.removeChild(e)}}function y(){require(["searchmenu"],function(){Events.on(SearchMenu,"closed",b),Events.on(SearchMenu,"change",function(e,t){h(t)})})}function b(){h(""),p()}function v(){require(["searchmenu"],function(){SearchMenu.show()})}function p(){require(["searchmenu"],function(){SearchMenu.hide()})}var g;a.Search=new s;var T;t.addEventListener("pagebeforehide",b),t.addEventListener("headercreated",function(){y()})}(jQuery,document,window,clearTimeout,setTimeout);