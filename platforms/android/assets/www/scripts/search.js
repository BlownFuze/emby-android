!function(e,n,t,a,i){function o(){g&&(a(g),g=null)}function r(e){return"Audio"==e.Type?[[e.AlbumArtist,e.Album].join(" - ")]:"MusicAlbum"==e.Type?[e.AlbumArtist]:"MusicArtist"==e.Type?[Globalize.translate("LabelArtist")]:"Movie"==e.Type?[Globalize.translate("LabelMovie")]:"MusicVideo"==e.Type?[Globalize.translate("LabelMusicVideo")]:"Episode"==e.Type?[Globalize.translate("LabelEpisode")]:"Series"==e.Type?[Globalize.translate("LabelSeries")]:"BoxSet"==e.Type?[Globalize.translate("LabelCollection")]:e.ChannelName?[e.ChannelName]:[e.Type]}function s(){var e=this;e.showSearchPanel=function(){p()}}function u(e,n){n=n.map(function(e){return e.Id=e.ItemId,e.ImageTags={},e.UserData={},e.PrimaryImageTag&&(e.ImageTags.Primary=e.PrimaryImageTag),e});var t=LibraryBrowser.getPosterViewHtml({items:n,shape:"auto",lazy:!0,overlayText:!1,showTitle:!0,centerImage:!0,centerText:!0,textLines:r}),a=e.querySelector(".itemsContainer");a.innerHTML=t,ImageLoader.lazyChildren(a)}function c(e,n){var t=g;Dashboard.showLoadingMsg(),ApiClient.getSearchHints({userId:Dashboard.getCurrentUserId(),searchTerm:n,limit:30}).then(function(n){t==g&&u(e,n.SearchHints),Dashboard.hideLoadingMsg()},function(){Dashboard.hideLoadingMsg()})}function l(n,t){return t?(o(),void(g=i(function(){c(n,t)},300))):(e(".itemsContainer",n).empty(),void o())}function d(t){var a=n.querySelector(".searchResultsOverlay");if(t&&!a){var i='<div class="searchResultsOverlay ui-body-b smoothScrollY background-theme-b">';i+='<div class="searchResultsContainer"><div class="itemsContainer"></div></div></div>',a=e(i).appendTo(n.body)[0],e(a).createCardMenus()}return a}function h(e){var t;e?(t=d(!0),T||f(t,1),T=!0,n.body.classList.add("bodyWithPopupOpen"),l(t,e)):(t=d(!1),t&&(l(t,""),T&&(m(t,1),T=!1),n.body.classList.remove("bodyWithPopupOpen")))}function f(e,n){var t=[{opacity:"0",offset:0},{opacity:"1",offset:1}],a={duration:200,iterations:n,fill:"both"};e.animate(t,a)}function m(e,n){var t=[{opacity:"1",offset:0},{opacity:"0",offset:1}],a={duration:600,iterations:n,fill:"both"};e.animate(t,a).onfinish=function(){e.parentNode.removeChild(e)}}function b(){require(["searchmenu"],function(){Events.on(SearchMenu,"closed",y),Events.on(SearchMenu,"change",function(e,n){h(n)})})}function y(){h(""),v()}function p(){require(["searchmenu"],function(){SearchMenu.show()})}function v(){require(["searchmenu"],function(){SearchMenu.hide()})}var g;t.Search=new s;var T;n.addEventListener("pagebeforehide",y),n.addEventListener("headercreated",function(){b()})}(jQuery,document,window,clearTimeout,setTimeout);