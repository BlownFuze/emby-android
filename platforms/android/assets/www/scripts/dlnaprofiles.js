define(["jQuery"],function(e){function i(e){Dashboard.showLoadingMsg(),ApiClient.getJSON(ApiClient.getUrl("Dlna/ProfileInfos")).then(function(i){n(e,i),t(e,i),Dashboard.hideLoadingMsg()})}function n(e,i){o(e,e.querySelector(".customProfiles"),i.filter(function(e){return"User"==e.Type}))}function t(e,i){o(e,e.querySelector(".systemProfiles"),i.filter(function(e){return"System"==e.Type}))}function o(i,n,t){require(["paper-fab","paper-item-body","paper-icon-item"],function(){var o="";t.length&&(o+='<div class="paperList">');for(var a=0,l=t.length;l>a;a++){var f=t[a];o+="<paper-icon-item>",o+="<a item-icon class='clearLink' href='dlnaprofile.html?id="+f.Id+"'>",o+='<paper-fab mini icon="dvr" class="blue"></paper-fab>',o+="</a>",o+="<paper-item-body two-line>",o+="<a class='clearLink' href='dlnaprofile.html?id="+f.Id+"'>",o+="<div>"+f.Name+"</div>",o+="</a>",o+="</paper-item-body>","User"==f.Type&&(o+='<paper-icon-button icon="delete" class="btnDeleteProfile" data-profileid="'+f.Id+'" title="'+Globalize.translate("ButtonDelete")+'"></paper-icon-button>'),o+="</paper-icon-item>"}t.length&&(o+="</div>"),n.innerHTML=o,e(".btnDeleteProfile",n).on("click",function(){var e=this.getAttribute("data-profileid");r(i,e)})})}function r(e,n){require(["confirm"],function(t){t(Globalize.translate("MessageConfirmProfileDeletion"),Globalize.translate("HeaderConfirmProfileDeletion")).then(function(){Dashboard.showLoadingMsg(),ApiClient.ajax({type:"DELETE",url:ApiClient.getUrl("Dlna/Profiles/"+n)}).then(function(){Dashboard.hideLoadingMsg(),i(e)})})})}e(document).on("pageshow","#dlnaProfilesPage",function(){var e=this;i(e)})});