!function(e,t){function i(e){Dashboard.showLoadingMsg(),ApiClient.getJSON(ApiClient.getUrl("Dlna/ProfileInfos")).then(function(t){a(e,t),Dashboard.hideLoadingMsg()})}function a(e,t){l(e,t),n(e,t)}function l(t,i){i=i.filter(function(e){return"User"==e.Type});var a="";a+='<ul data-role="listview" data-inset="true" data-split-icon="delete">';for(var l=0,n=i.length;n>l;l++){var o=i[l];a+="<li>",a+='<a href="dlnaprofile.html?id='+o.Id+'">',a+=o.Name,a+="</a>",a+='<a href="#" data-icon="delete" class="btnDeleteProfile" data-profileid="'+o.Id+'">'+Globalize.translate("Delete")+"</a>",a+="</li>"}a+="</ul>";var f=e(".customProfiles",t).html(a).trigger("create");e(".btnDeleteProfile",f).on("click",function(){var e=this.getAttribute("data-profileid");r(t,e)})}function n(t,i){i=i.filter(function(e){return"System"==e.Type});var a="";a+='<ul data-role="listview" data-inset="true">';for(var l=0,n=i.length;n>l;l++){var r=i[l];a+="<li>",a+='<a href="dlnaprofile.html?id='+r.Id+'">',a+=r.Name,a+="</a>",a+="</li>"}a+="</ul>",e(".systemProfiles",t).html(a).trigger("create")}function r(e,t){Dashboard.confirm(Globalize.translate("MessageConfirmProfileDeletion"),Globalize.translate("HeaderConfirmProfileDeletion"),function(a){a&&(Dashboard.showLoadingMsg(),ApiClient.ajax({type:"DELETE",url:ApiClient.getUrl("Dlna/Profiles/"+t)}).then(function(){Dashboard.hideLoadingMsg(),i(e)}))})}e(t).on("pageshow","#dlnaProfilesPage",function(){var e=this;i(e)})}(jQuery,document,window);