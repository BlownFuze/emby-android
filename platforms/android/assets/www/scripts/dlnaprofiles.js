define(["jQuery"],function(e){function i(e){Dashboard.showLoadingMsg(),ApiClient.getJSON(ApiClient.getUrl("Dlna/ProfileInfos")).then(function(i){n(e,i),t(e,i),Dashboard.hideLoadingMsg()})}function n(e,i){a(e,e.querySelector(".customProfiles"),i.filter(function(e){return"User"==e.Type}))}function t(e,i){a(e,e.querySelector(".systemProfiles"),i.filter(function(e){return"System"==e.Type}))}function a(i,n,t){require(["paper-fab","paper-item-body","paper-icon-item"],function(){var a="";t.length&&(a+='<div class="paperList">');for(var r=0,l=t.length;l>r;r++){var s=t[r];a+="<paper-icon-item>",a+="<a item-icon class='clearLink' href='dlnaprofile.html?id="+s.Id+"'>",a+='<paper-fab mini icon="dvr" class="blue"></paper-fab>',a+="</a>",a+="<paper-item-body two-line>",a+="<a class='clearLink' href='dlnaprofile.html?id="+s.Id+"'>",a+="<div>"+s.Name+"</div>",a+="</a>",a+="</paper-item-body>","User"==s.Type&&(a+='<button type="button" is="paper-icon-button-light" class="btnDeleteProfile" data-profileid="'+s.Id+'" title="'+Globalize.translate("ButtonDelete")+'"><iron-icon icon="delete"></iron-icon></button>'),a+="</paper-icon-item>"}t.length&&(a+="</div>"),n.innerHTML=a,e(".btnDeleteProfile",n).on("click",function(){var e=this.getAttribute("data-profileid");o(i,e)})})}function o(e,n){require(["confirm"],function(t){t(Globalize.translate("MessageConfirmProfileDeletion"),Globalize.translate("HeaderConfirmProfileDeletion")).then(function(){Dashboard.showLoadingMsg(),ApiClient.ajax({type:"DELETE",url:ApiClient.getUrl("Dlna/Profiles/"+n)}).then(function(){Dashboard.hideLoadingMsg(),i(e)})})})}function r(){return[{href:"dlnasettings.html",name:Globalize.translate("TabSettings")},{href:"dlnaprofiles.html",name:Globalize.translate("TabProfiles")}]}e(document).on("pageshow","#dlnaProfilesPage",function(){LibraryMenu.setTabs("dlna",1,r);var e=this;i(e)})});