define(["jQuery"],function(e){function n(n,o){e(".chkMovies",n).checked(o.EnableIntrosForMovies),e(".chkEpisodes",n).checked(o.EnableIntrosForEpisodes),e(".chkMyMovieTrailers",n).checked(o.EnableIntrosFromMoviesInLibrary),e(".chkUpcomingTheaterTrailers",n).checked(o.EnableIntrosFromUpcomingTrailers),e(".chkUpcomingDvdTrailers",n).checked(o.EnableIntrosFromUpcomingDvdMovies),e(".chkUpcomingStreamingTrailers",n).checked(o.EnableIntrosFromUpcomingStreamingMovies),e(".chkOtherTrailers",n).checked(o.EnableIntrosFromSimilarMovies),e(".chkUnwatchedOnly",n).checked(!o.EnableIntrosForWatchedContent),e(".chkEnableParentalControl",n).checked(o.EnableIntrosParentalControl),e("#txtCustomIntrosPath",n).val(o.CustomIntroPath||""),e("#txtCodecIntrosPath",n).val(o.MediaInfoIntroPath||""),e("#txtNumTrailers",n).val(o.TrailerLimit),Dashboard.hideLoadingMsg()}function o(){Dashboard.showLoadingMsg();var n=this,o=e(n).parents(".page");return ApiClient.getNamedConfiguration("cinemamode").then(function(n){n.CustomIntroPath=e("#txtCustomIntrosPath",o).val(),n.MediaInfoIntroPath=e("#txtCodecIntrosPath",o).val(),n.TrailerLimit=e("#txtNumTrailers",o).val(),n.EnableIntrosForMovies=e(".chkMovies",o).checked(),n.EnableIntrosForEpisodes=e(".chkEpisodes",o).checked(),n.EnableIntrosFromMoviesInLibrary=e(".chkMyMovieTrailers",o).checked(),n.EnableIntrosForWatchedContent=!e(".chkUnwatchedOnly",o).checked(),n.EnableIntrosParentalControl=e(".chkEnableParentalControl",o).checked(),n.EnableIntrosFromUpcomingTrailers=e(".chkUpcomingTheaterTrailers",o).checked(),n.EnableIntrosFromUpcomingDvdMovies=e(".chkUpcomingDvdTrailers",o).checked(),n.EnableIntrosFromUpcomingStreamingMovies=e(".chkUpcomingStreamingTrailers",o).checked(),n.EnableIntrosFromSimilarMovies=e(".chkOtherTrailers",o).checked(),ApiClient.updateNamedConfiguration("cinemamode",n).then(Dashboard.processServerConfigurationUpdateResult)}),!1}function t(){return[{href:"cinemamodeconfiguration.html",name:Globalize.translate("TabCinemaMode")},{href:"playbackconfiguration.html",name:Globalize.translate("TabResumeSettings")},{href:"streamingsettings.html",name:Globalize.translate("TabStreaming")},{href:"encodingsettings.html",name:Globalize.translate("TabTranscoding")}]}e(document).on("pageinit","#cinemaModeConfigurationPage",function(){var n=this;e("#btnSelectCustomIntrosPath",n).on("click.selectDirectory",function(){require(["directorybrowser"],function(o){var t=new o;t.show({callback:function(o){o&&e("#txtCustomIntrosPath",n).val(o),t.close()},header:Globalize.translate("HeaderSelectCustomIntrosPath")})})}),e("#btnSelectCodecIntrosPath",n).on("click.selectDirectory",function(){require(["directorybrowser"],function(o){var t=new o;t.show({callback:function(o){o&&e("#txtCodecIntrosPath",n).val(o),t.close()},header:Globalize.translate("HeaderSelectCodecIntrosPath")})})}),e(".cinemaModeConfigurationForm").off("submit",o).on("submit",o),AppInfo.enableSupporterMembership||(n.querySelector(".lnkSupporterLearnMore").href="#",n.querySelector(".lnkSupporterLearnMore").addEventListener("click",function(e){return e.preventDefault(),!1}))}).on("pageshow","#cinemaModeConfigurationPage",function(){LibraryMenu.setTabs("playback",0,t),Dashboard.showLoadingMsg();var e=this;ApiClient.getNamedConfiguration("cinemamode").then(function(o){n(e,o)})})});