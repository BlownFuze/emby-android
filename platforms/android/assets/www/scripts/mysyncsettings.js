define(["appSettings"],function(e){function t(t){t.querySelector("#txtSyncPath").value=e.syncPath(),t.querySelector("#chkWifi").checked=e.syncOnlyOnWifi();var r=e.cameraUploadServers();t.querySelector(".uploadServerList").innerHTML=ConnectionManager.getSavedServers().map(function(e){var t=-1==r.indexOf(e.Id)?"":" checked",n="<paper-checkbox"+t+' class="chkUploadServer" data-id="'+e.Id+'">'+e.Name+"</paper-checkbox>";return n}).join(""),Dashboard.hideLoadingMsg()}function r(t){e.syncPath(t.querySelector("#txtSyncPath").value),e.syncOnlyOnWifi(t.querySelector("#chkWifi").checked),e.cameraUploadServers($(".chkUploadServer",t).get().filter(function(e){return e.checked}).map(function(e){return e.getAttribute("data-id")})),Dashboard.hideLoadingMsg(),require(["toast"],function(e){e(Globalize.translate("SettingsSaved"))})}function n(){var e=$(this).parents(".page")[0];Dashboard.showLoadingMsg();var t=getParameterByName("userId")||Dashboard.getCurrentUserId();return ApiClient.getUser(t).then(function(t){r(e,t)}),!1}$(document).on("pageinit","#syncPreferencesPage",function(){var e=this;$("form",e).off("submit",n).on("submit",n),$(".btnSelectSyncPath",e).on("click",function(){require(["nativedirectorychooser"],function(){NativeDirectoryChooser.chooseDirectory().then(function(t){$("#txtSyncPath",e).val(t)})})})}).on("pageshow","#syncPreferencesPage",function(){var e=this;Dashboard.showLoadingMsg();var r=getParameterByName("userId")||Dashboard.getCurrentUserId();ApiClient.getUser(r).then(function(r){t(e,r)}),AppInfo.supportsSyncPathSetting?e.querySelector(".fldSyncPath").classList.remove("hide"):e.querySelector(".fldSyncPath").classList.add("hide")})});