!function(e,t,r){function n(e){e.querySelector("#txtSyncPath").value=AppSettings.syncPath(),e.querySelector("#chkWifi").checked=AppSettings.syncOnlyOnWifi();var t=AppSettings.cameraUploadServers();e.querySelector(".uploadServerList").innerHTML=ConnectionManager.getSavedServers().map(function(e){var r=-1==t.indexOf(e.Id)?"":" checked",n="<paper-checkbox"+r+' class="chkUploadServer" data-id="'+e.Id+'">'+e.Name+"</paper-checkbox>";return n}).join(""),Dashboard.hideLoadingMsg()}function a(t){AppSettings.syncPath(t.querySelector("#txtSyncPath").value),AppSettings.syncOnlyOnWifi(t.querySelector("#chkWifi").checked),AppSettings.cameraUploadServers(e(".chkUploadServer",t).get().filter(function(e){return e.checked}).map(function(e){return e.getAttribute("data-id")})),Dashboard.hideLoadingMsg(),Dashboard.alert(Globalize.translate("SettingsSaved"))}function i(){var t=e(this).parents(".page")[0];Dashboard.showLoadingMsg();var r=getParameterByName("userId")||Dashboard.getCurrentUserId();return ApiClient.getUser(r).then(function(e){a(t,e)}),!1}e(r).on("pageinit","#syncPreferencesPage",function(){var t=this;e("form",t).off("submit",i).on("submit",i),e(".btnSelectSyncPath",t).on("click",function(){require(["nativedirectorychooser"],function(){NativeDirectoryChooser.chooseDirectory().then(function(r){e("#txtSyncPath",t).val(r)})})})}).on("pageshow","#syncPreferencesPage",function(){var e=this;Dashboard.showLoadingMsg();var t=getParameterByName("userId")||Dashboard.getCurrentUserId();ApiClient.getUser(t).then(function(t){n(e,t)}),AppInfo.supportsSyncPathSetting?e.querySelector(".fldSyncPath").classList.remove("hide"):e.querySelector(".fldSyncPath").classList.add("hide")})}(jQuery,window,document);