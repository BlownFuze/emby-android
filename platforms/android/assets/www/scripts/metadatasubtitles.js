!function(e,t){function a(t,a,n){e("#chkSubtitlesMovies",t).checked(a.DownloadMovieSubtitles),e("#chkSubtitlesEpisodes",t).checked(a.DownloadEpisodeSubtitles),e("#chkSkipIfGraphicalSubsPresent",t).checked(a.SkipIfGraphicalSubtitlesPresent),e("#chkSkipIfAudioTrackPresent",t).checked(a.SkipIfAudioTrackMatches),e("#txtOpenSubtitleUsername",t).val(a.OpenSubtitlesUsername),e("#txtOpenSubtitlePassword",t).val(""),i(t,a,n),Dashboard.hideLoadingMsg()}function i(t,a,i){for(var n="",s=0,o=i.length;o>s;s++){var u=i[s];n+='<paper-checkbox class="chkLang" data-lang="'+u.ThreeLetterISOLanguageName.toLowerCase()+'">'+u.DisplayName+"</paper-checkbox>"}e(".downloadLanguages",t).html(n);var c=a.DownloadLanguages||[];e(".chkLang",t).each(function(){this.checked=-1!=c.indexOf(this.getAttribute("data-lang"))})}function n(){Dashboard.showLoadingMsg();var t=this;return ApiClient.getNamedConfiguration("subtitles").then(function(a){a.DownloadMovieSubtitles=e("#chkSubtitlesMovies",t).checked(),a.DownloadEpisodeSubtitles=e("#chkSubtitlesEpisodes",t).checked(),a.SkipIfGraphicalSubtitlesPresent=e("#chkSkipIfGraphicalSubsPresent",t).checked(),a.SkipIfAudioTrackMatches=e("#chkSkipIfAudioTrackPresent",t).checked(),a.OpenSubtitlesUsername=e("#txtOpenSubtitleUsername",t).val();var i=e("#txtOpenSubtitlePassword",t).val();i&&(a.OpenSubtitlesPasswordHash=i),a.DownloadLanguages=e(".chkLang",t).get().filter(function(e){return e.checked}).map(function(e){return e.getAttribute("data-lang")}),ApiClient.updateNamedConfiguration("subtitles",a).then(Dashboard.processServerConfigurationUpdateResult)}),!1}e(t).on("pageinit","#metadataSubtitlesPage",function(){e(".metadataSubtitlesForm").off("submit",n).on("submit",n)}).on("pageshow","#metadataSubtitlesPage",function(){Dashboard.showLoadingMsg();var e=this,t=ApiClient.getNamedConfiguration("subtitles"),i=ApiClient.getCultures();Promise.all([t,i]).then(function(t){a(e,t[0],t[1])})})}(jQuery,document,window);