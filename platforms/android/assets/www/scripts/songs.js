define(["jQuery"],function(e){return function(t,r,n){function a(e){var t=o(e),r=d[t];return r||(r=d[t]={query:{SortBy:m,SortOrder:"Ascending",IncludeItemTypes:"Audio",Recursive:!0,Fields:"AudioInfo,ParentId,SyncInfo",Limit:100,StartIndex:0,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb"}},r.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(t,r.query)),r}function i(e){return a(e).query}function o(e){return e.savedQueryKey||(e.savedQueryKey=LibraryBrowser.getSavedQueryKey("songs")),e.savedQueryKey}function l(t){Dashboard.showLoadingMsg();var r=i(t);ApiClient.getItems(Dashboard.getCurrentUserId(),r).then(function(n){window.scrollTo(0,0);var a="",i=LibraryBrowser.getQueryPagingHtml({startIndex:r.StartIndex,limit:r.Limit,totalRecordCount:n.TotalRecordCount,showLimit:!1,sortButton:!0,updatePageSizeSetting:!1,filterButton:!0});t.querySelector(".listTopPaging").innerHTML=i,a+=LibraryBrowser.getListViewHtml({items:n.Items,showIndex:!0,defaultAction:"play",smallIcon:!0});var s=t.querySelector("#items");s.innerHTML=a+i,ImageLoader.lazyChildren(s),e(".btnNextPage",t).on("click",function(){r.StartIndex+=r.Limit,l(t)}),e(".btnPreviousPage",t).on("click",function(){r.StartIndex-=r.Limit,l(t)}),e(".btnFilter",t).on("click",function(){u(t)}),e(".btnSort",t).on("click",function(){LibraryBrowser.showSortMenu({items:[{name:Globalize.translate("OptionTrackName"),id:"Name"},{name:Globalize.translate("OptionAlbum"),id:"Album,SortName"},{name:Globalize.translate("OptionAlbumArtist"),id:"AlbumArtist,Album,SortName"},{name:Globalize.translate("OptionArtist"),id:"Artist,Album,SortName"},{name:Globalize.translate("OptionDateAdded"),id:"DateCreated,SortName"},{name:Globalize.translate("OptionDatePlayed"),id:"DatePlayed,SortName"},{name:Globalize.translate("OptionPlayCount"),id:"PlayCount,SortName"},{name:Globalize.translate("OptionReleaseDate"),id:"PremiereDate,AlbumArtist,Album,SortName"},{name:Globalize.translate("OptionRuntime"),id:"Runtime,AlbumArtist,Album,SortName"}],callback:function(){l(t)},query:r})}),LibraryBrowser.saveQueryValues(o(t),r),Dashboard.hideLoadingMsg()})}function u(e){require(["components/filterdialog/filterdialog"],function(t){var r=new t({query:i(e),mode:"songs"});Events.on(r,"filterchange",function(){l(e)}),r.show()})}var s=this,m="Album,SortName",d={};s.renderTab=function(){l(n)}}});