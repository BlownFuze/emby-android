!function(e){function t(){var e=a(),t=s[e];return t||(t=s[e]={query:{SortBy:l,SortOrder:"Ascending",IncludeItemTypes:"Audio",Recursive:!0,Fields:"AudioInfo,ParentId,SyncInfo",Limit:100,StartIndex:0,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb"}},t.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function r(){return t().query}function a(){return LibraryBrowser.getSavedQueryKey("songs")}function n(t,i){Dashboard.showLoadingMsg();var o=r();ApiClient.getItems(Dashboard.getCurrentUserId(),o).then(function(r){window.scrollTo(0,0);var l="",s=LibraryBrowser.getQueryPagingHtml({startIndex:o.StartIndex,limit:o.Limit,totalRecordCount:r.TotalRecordCount,viewButton:!0,showLimit:!1,sortButton:!0,viewPanelClass:"songsViewPanel",updatePageSizeSetting:!1,viewIcon:"filter-list"});t.querySelector(".listTopPaging").innerHTML=s,l+=LibraryBrowser.getListViewHtml({items:r.Items,showIndex:!0,defaultAction:"play",smallIcon:!0});var u=t.querySelector("#items");u.innerHTML=l+s,ImageLoader.lazyChildren(u),e(".btnNextPage",t).on("click",function(){o.StartIndex+=o.Limit,n(t,i)}),e(".btnPreviousPage",t).on("click",function(){o.StartIndex-=o.Limit,n(t,i)}),e(".btnSort",t).on("click",function(){LibraryBrowser.showSortMenu({items:[{name:Globalize.translate("OptionTrackName"),id:"Name"},{name:Globalize.translate("OptionAlbum"),id:"Album,SortName"},{name:Globalize.translate("OptionAlbumArtist"),id:"AlbumArtist,Album,SortName"},{name:Globalize.translate("OptionArtist"),id:"Artist,Album,SortName"},{name:Globalize.translate("OptionDateAdded"),id:"DateCreated,SortName"},{name:Globalize.translate("OptionDatePlayed"),id:"DatePlayed,SortName"},{name:Globalize.translate("OptionPlayCount"),id:"PlayCount,SortName"},{name:Globalize.translate("OptionReleaseDate"),id:"PremiereDate,AlbumArtist,Album,SortName"},{name:Globalize.translate("OptionRuntime"),id:"Runtime,AlbumArtist,Album,SortName"}],callback:function(){n(t,i)},query:o})}),LibraryBrowser.saveQueryValues(a(),o),Dashboard.hideLoadingMsg()})}function i(e,a){if(!t().filtersLoaded){t().filtersLoaded=!0;var i=r();QueryFilters.loadFilters(a,Dashboard.getCurrentUserId(),i,function(){n(e,a)})}}function o(t,a){e(a).on("panelopen",function(){i(t,a)}),e(".chkStandardFilter",a).on("change",function(){var e=r(),i=this.getAttribute("data-filter"),o=e.Filters||"";o=(","+o).replace(","+i,"").substring(1),this.checked&&(o=o?o+","+i:i),e.StartIndex=0,e.Filters=o,n(t,a)})}var l="Album,SortName",s={};window.MusicPage.initSongsTab=function(e,t){var r=e.querySelector(".songsViewPanel");o(t,r)},window.MusicPage.renderSongsTab=function(e,t){if(LibraryBrowser.needsRefresh(t)){var r=e.querySelector(".songsViewPanel");n(t,r)}}}(jQuery,document);