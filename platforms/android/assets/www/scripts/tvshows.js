!function(e){function t(){var e=r(),t=c[e];return t||(t=c[e]={query:{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Series",Recursive:!0,Fields:"PrimaryImageAspectRatio,SortName,SyncInfo",ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Poster","Thumb")},t.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function a(){return t().query}function r(){return LibraryBrowser.getSavedQueryKey("series")}function i(o,s){Dashboard.showLoadingMsg();var c=a();ApiClient.getItems(Dashboard.getCurrentUserId(),c).then(function(a){window.scrollTo(0,0);var l=t().view,d="",h=LibraryBrowser.getQueryPagingHtml({startIndex:c.StartIndex,limit:c.Limit,totalRecordCount:a.TotalRecordCount,viewButton:!0,showLimit:!1,viewPanelClass:"seriesViewPanel",updatePageSizeSetting:!1,addLayoutButton:!0,viewIcon:"filter-list",sortButton:!0,currentLayout:l,layouts:"Banner,List,Poster,PosterCard,Thumb,ThumbCard"});o.querySelector(".listTopPaging").innerHTML=h,n(o),d="Thumb"==l?LibraryBrowser.getPosterViewHtml({items:a.Items,shape:"backdrop",preferThumb:!0,context:"tv",lazy:!0,overlayPlayButton:!0}):"ThumbCard"==l?LibraryBrowser.getPosterViewHtml({items:a.Items,shape:"backdrop",preferThumb:!0,context:"tv",lazy:!0,cardLayout:!0,showTitle:!0,showSeriesYear:!0}):"Banner"==l?LibraryBrowser.getPosterViewHtml({items:a.Items,shape:"banner",preferBanner:!0,context:"tv",lazy:!0}):"List"==l?LibraryBrowser.getListViewHtml({items:a.Items,context:"tv",sortBy:c.SortBy}):LibraryBrowser.getPosterViewHtml("PosterCard"==l?{items:a.Items,shape:"portrait",context:"tv",showTitle:!0,showYear:!0,lazy:!0,cardLayout:!0}:{items:a.Items,shape:"portrait",context:"tv",centerText:!0,lazy:!0,overlayPlayButton:!0});var u=o.querySelector("#items");u.innerHTML=d+h,ImageLoader.lazyChildren(u),e(".btnNextPage",o).on("click",function(){c.StartIndex+=c.Limit,i(o,s)}),e(".btnPreviousPage",o).on("click",function(){c.StartIndex-=c.Limit,i(o,s)}),e(".btnChangeLayout",o).on("layoutchange",function(e,a){t().view=a,LibraryBrowser.saveViewSetting(r(),a),i(o,s)}),e(".btnSort",o).on("click",function(){LibraryBrowser.showSortMenu({items:[{name:Globalize.translate("OptionNameSort"),id:"SortName"},{name:Globalize.translate("OptionImdbRating"),id:"CommunityRating,SortName"},{name:Globalize.translate("OptionDateAdded"),id:"DateCreated,SortName"},{name:Globalize.translate("OptionDatePlayed"),id:"DatePlayed,SortName"},{name:Globalize.translate("OptionMetascore"),id:"Metascore,SortName"},{name:Globalize.translate("OptionParentalRating"),id:"OfficialRating,SortName"},{name:Globalize.translate("OptionPlayCount"),id:"PlayCount,SortName"},{name:Globalize.translate("OptionReleaseDate"),id:"PremiereDate,SortName"}],callback:function(){i(o,s)},query:c})}),LibraryBrowser.saveQueryValues(r(),c),LibraryBrowser.setLastRefreshed(o),Dashboard.hideLoadingMsg()})}function n(t,r){e(".chkStatus",r).each(function(){var e=","+(a().SeriesStatus||""),t=this.getAttribute("data-filter");this.checked=-1!=e.indexOf(","+t)}),e(".chkStandardFilter",r).each(function(){var e=","+(a().Filters||""),t=this.getAttribute("data-filter");this.checked=-1!=e.indexOf(","+t)}),e(".chkAirDays",r).each(function(){var e=","+(a().AirDays||""),t=this.getAttribute("data-filter");this.checked=-1!=e.indexOf(","+t)});var i=a();e("#chkTrailer",r).checked(1==i.HasTrailer),e("#chkThemeSong",r).checked(1==i.HasThemeSong),e("#chkThemeVideo",r).checked(1==i.HasThemeVideo),e("#chkSpecialFeature",r).checked(1==i.HasSpecialFeature),e(".alphabetPicker",t).alphaValue(i.NameStartsWith)}function o(e,r){if(!t().filtersLoaded){t().filtersLoaded=!0;var n=a();QueryFilters.loadFilters(r,Dashboard.getCurrentUserId(),n,function(){i(e,r)})}}function s(t,r){e(r).on("panelopen",function(){o(t,r)}),e(".chkStandardFilter",r).on("change",function(){var e=a(),n=this.getAttribute("data-filter"),o=e.Filters||"";o=(","+o).replace(","+n,"").substring(1),this.checked&&(o=o?o+","+n:n),e.Filters=o,e.StartIndex=0,i(t,r)}),e(".chkStatus",r).on("change",function(){var e=a(),n=this.getAttribute("data-filter"),o=e.SeriesStatus||"";o=(","+o).replace(","+n,"").substring(1),this.checked&&(o=o?o+","+n:n),e.SeriesStatus=o,e.StartIndex=0,i(t,r)}),e(".chkAirDays",r).on("change",function(){var e=a(),n=this.getAttribute("data-filter"),o=e.AirDays||"";o=(","+o).replace(","+n,"").substring(1),this.checked&&(o=o?o+","+n:n),e.AirDays=o,e.StartIndex=0,i(t,r)}),e("#chkTrailer",r).on("change",function(){var e=a();e.StartIndex=0,e.HasTrailer=this.checked?!0:null,i(t,r)}),e("#chkThemeSong",r).on("change",function(){var e=a();e.StartIndex=0,e.HasThemeSong=this.checked?!0:null,i(t,r)}),e("#chkSpecialFeature",r).on("change",function(){var e=a();e.StartIndex=0,e.HasSpecialFeature=this.checked?!0:null,i(t,r)}),e("#chkThemeVideo",r).on("change",function(){var e=a();e.StartIndex=0,e.HasThemeVideo=this.checked?!0:null,i(t,r)}),e(".alphabetPicker",t).on("alphaselect",function(e,n){var o=a();o.NameStartsWithOrGreater=n,o.StartIndex=0,i(t,r)}).on("alphaclear",function(){var e=a();e.NameStartsWithOrGreater="",i(t,r)}),e("#radioBasicFilters",r).on("change",function(){this.checked?(e(".basicFilters",r).show(),e(".advancedFilters",r).hide()):e(".basicFilters",r).hide()}),e("#radioAdvancedFilters",r).on("change",function(){this.checked?(e(".advancedFilters",r).show(),e(".basicFilters",r).hide()):e(".advancedFilters",r).hide()})}var c={};window.TvPage.initSeriesTab=function(e,t){var a=e.querySelector(".seriesViewPanel");s(t,a)},window.TvPage.renderSeriesTab=function(e,t){if(LibraryBrowser.needsRefresh(t)){var a=e.querySelector(".seriesViewPanel");i(t,a),n(t,a)}}}(jQuery,document);