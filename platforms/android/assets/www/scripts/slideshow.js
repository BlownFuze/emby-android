!function(){function e(){var e=[];e.push({name:Globalize.translate("OptionBackdropSlideshow"),id:"backdrops",ironIcon:"video-library"}),e.push({name:Globalize.translate("OptionPhotoSlideshow"),id:"photos",ironIcon:"photo-library"}),require(["actionsheet"],function(){ActionSheetElement.show({items:e,callback:function(e){switch(e){case"backdrops":t({ImageTypes:"Backdrop",EnableImageTypes:"Backdrop",IncludeItemTypes:"Movie,Series,MusicArtist,Game"},{showTitle:!0,cover:!0});break;case"photos":t({ImageTypes:"Primary",EnableImageTypes:"Primary",MediaTypes:"Photo"},{showTitle:!1})}}})})}function a(){var e=document.querySelector(".slideshowContainer");if(e)return e;e=document.createElement("div"),e.classList.add("slideshowContainer");var a="";a+='<div class="slideshowImage"></div><div class="slideshowImageText"></div>',a+='<paper-icon-button icon="cancel" class="btnStopSlideshow" onclick="SlideShow.stop();"></paper-icon-button>',e.innerHTML=a,document.body.appendChild(e)}function t(e,t){e=$.extend({SortBy:"Random",Recursive:!0,Fields:"Taglines",ImageTypeLimit:1,EnableImageTypes:"Primary",StartIndex:0,Limit:200},e),ApiClient.getItems(Dashboard.getCurrentUserId(),e).then(function(e){e.Items.length?(a(),o(e.Items,t)):Dashboard.alert({message:Globalize.translate("NoSlideshowContentFound")})})}function o(e,a){n();var t=1,o=function(){t>=e.length&&(t=0),i(e[t],a),t++};d=setInterval(o,5e3),o(),document.body.classList.add("bodyWithPopupOpen")}function i(e,a){var t;t=e.BackdropImageTags&&e.BackdropImageTags.length?ApiClient.getScaledImageUrl(e.Id,{type:"Backdrop",maxWidth:screen.availWidth,tag:e.BackdropImageTags[0]}):ApiClient.getScaledImageUrl(e.Id,{type:"Primary",maxWidth:Math.min(screen.availWidth,1280),tag:e.ImageTags.Primary});var o=document.querySelector(".slideshowImage"),i=document.createElement("div");i.className=o.className,a.cover&&i.classList.add("cover"),i.style.backgroundImage="url('"+t+"')",document.querySelector(".slideshowImageText").innerHTML=a.showTitle?e.Name:"",o.parentNode.appendChild(i);var n=function(){var e=o.parentNode;e&&e.removeChild(o)};if(i.animate){var s=[{opacity:"0",offset:0},{opacity:"1",offset:1}],r={duration:1200,iterations:1};i.animate(s,r).onfinish=n}else n()}function n(){d&&(clearInterval(d),d=null)}function s(){n();var e=document.querySelector(".slideshowContainer");if(e){var a=function(){e.parentNode.removeChild(e)};if(e.animate){var t=r(e,1);t.onfinish=a}else a()}document.body.classList.remove("bodyWithPopupOpen")}function r(e,a){var t=[{opacity:"1",offset:0},{opacity:"0",offset:1}],o={duration:500,iterations:a};return e.animate(t,o)}var d;window.SlideShow={showMenu:e,stop:s}}();