define(["jQuery"],function(e){function t(t,n){e(".liveTvSettingsForm",t).show(),e(".noLiveTvServices",t).hide(),e("#selectGuideDays",t).val(n.GuideDays||""),e("#chkOrganize",t).checked(n.EnableAutoOrganize),e("#chkConvertRecordings",t).checked(n.EnableRecordingEncoding),e("#chkPreserveAudio",t).checked(n.EnableOriginalAudioWithEncodedRecordings||!1),e("#txtPrePaddingMinutes",t).val(n.PrePaddingSeconds/60),e("#txtPostPaddingMinutes",t).val(n.PostPaddingSeconds/60),t.querySelector("#txtRecordingPath").value=n.RecordingPath||"",t.querySelector("#txtMovieRecordingPath").value=n.MovieRecordingPath||"",t.querySelector("#txtSeriesRecordingPath").value=n.SeriesRecordingPath||"",t.querySelector("#chkEnableRecordingSubfolders").checked=n.EnableRecordingSubfolders||!1,Dashboard.hideLoadingMsg()}function n(){Dashboard.showLoadingMsg();var t=this;return ApiClient.getNamedConfiguration("livetv").then(function(n){n.GuideDays=e("#selectGuideDays",t).val()||null,n.EnableAutoOrganize=e("#chkOrganize",t).checked(),n.EnableRecordingEncoding=e("#chkConvertRecordings",t).checked(),n.EnableOriginalAudioWithEncodedRecordings=e("#chkPreserveAudio",t).checked();var r=t.querySelector("#txtRecordingPath").value||null,o=t.querySelector("#txtMovieRecordingPath").value||null,a=t.querySelector("#txtSeriesRecordingPath").value||null,c=r!=n.RecordingPath||o!=n.MovieRecordingPath||a!=n.SeriesRecordingPath;n.RecordingPath=r,n.MovieRecordingPath=o,n.SeriesRecordingPath=a,n.PrePaddingSeconds=60*e("#txtPrePaddingMinutes",t).val(),n.PostPaddingSeconds=60*e("#txtPostPaddingMinutes",t).val(),n.EnableRecordingSubfolders=t.querySelector("#chkEnableRecordingSubfolders").checked,ApiClient.updateNamedConfiguration("livetv",n).then(function(){Dashboard.processServerConfigurationUpdateResult(),i(c)})}),!1}function i(e){var t="";e&&(t+=Globalize.translate("RecordingPathChangeMessage")),t&&require(["alert"],function(e){e(t)})}function r(){return[{href:"livetvstatus.html",name:Globalize.translate("TabDevices")},{href:"livetvsettings.html",name:Globalize.translate("TabSettings")},{href:"appservices.html?context=livetv",name:Globalize.translate("TabServices")}]}e(document).on("pageinit","#liveTvSettingsPage",function(){var t=this;e(".liveTvSettingsForm").off("submit",n).on("submit",n),e("#btnSelectRecordingPath",t).on("click.selectDirectory",function(){require(["directorybrowser"],function(n){var i=new n;i.show({callback:function(n){n&&e("#txtRecordingPath",t).val(n),i.close()}})})}),e("#btnSelectMovieRecordingPath",t).on("click.selectDirectory",function(){require(["directorybrowser"],function(n){var i=new n;i.show({callback:function(n){n&&e("#txtMovieRecordingPath",t).val(n),i.close()}})})}),e("#btnSelectSeriesRecordingPath",t).on("click.selectDirectory",function(){require(["directorybrowser"],function(n){var i=new n;i.show({callback:function(n){n&&e("#txtSeriesRecordingPath",t).val(n),i.close()}})})})}).on("pageshow","#liveTvSettingsPage",function(){LibraryMenu.setTabs("livetvadmin",1,r),Dashboard.showLoadingMsg();var e=this;ApiClient.getNamedConfiguration("livetv").then(function(n){t(e,n)}),e.querySelector(".btnSupporterForConverting a").href=AppInfo.enableSupporterMembership?"https://emby.media/premiere":"#"})});