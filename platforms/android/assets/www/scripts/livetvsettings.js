define(["jQuery"],function(e){function i(i,t){e(".liveTvSettingsForm",i).show(),e(".noLiveTvServices",i).hide(),e("#selectGuideDays",i).val(t.GuideDays||""),e("#chkMovies",i).checked(t.EnableMovieProviders),e("#chkOrganize",i).checked(t.EnableAutoOrganize),e("#chkConvertRecordings",i).checked(t.EnableRecordingEncoding),e("#chkPreserveAudio",i).checked(t.EnableOriginalAudioWithEncodedRecordings||!1),e("#txtPrePaddingMinutes",i).val(t.PrePaddingSeconds/60),e("#txtPostPaddingMinutes",i).val(t.PostPaddingSeconds/60),i.querySelector("#txtRecordingPath").value=t.RecordingPath||"",i.querySelector("#txtMovieRecordingPath").value=t.MovieRecordingPath||"",i.querySelector("#txtSeriesRecordingPath").value=t.SeriesRecordingPath||"",i.querySelector("#chkEnableRecordingSubfolders").checked=t.EnableRecordingSubfolders||!1,Dashboard.hideLoadingMsg()}function t(){Dashboard.showLoadingMsg();var i=this;return ApiClient.getNamedConfiguration("livetv").then(function(t){t.GuideDays=e("#selectGuideDays",i).val()||null,t.EnableMovieProviders=e("#chkMovies",i).checked(),t.EnableAutoOrganize=e("#chkOrganize",i).checked(),t.EnableRecordingEncoding=e("#chkConvertRecordings",i).checked(),t.EnableOriginalAudioWithEncodedRecordings=e("#chkPreserveAudio",i).checked(),t.RecordingPath=i.querySelector("#txtRecordingPath").value||null,t.MovieRecordingPath=i.querySelector("#txtMovieRecordingPath").value||null,t.SeriesRecordingPath=i.querySelector("#txtSeriesRecordingPath").value||null,t.PrePaddingSeconds=60*e("#txtPrePaddingMinutes",i).val(),t.PostPaddingSeconds=60*e("#txtPostPaddingMinutes",i).val(),t.EnableRecordingSubfolders=i.querySelector("#chkEnableRecordingSubfolders").checked,ApiClient.updateNamedConfiguration("livetv",t).then(Dashboard.processServerConfigurationUpdateResult)}),!1}function n(){return[{href:"livetvstatus.html",name:Globalize.translate("TabDevices")},{href:"livetvsettings.html",name:Globalize.translate("TabSettings")},{href:"appservices.html?context=livetv",name:Globalize.translate("TabServices")}]}e(document).on("pageinit","#liveTvSettingsPage",function(){var i=this;e(".liveTvSettingsForm").off("submit",t).on("submit",t),e("#btnSelectRecordingPath",i).on("click.selectDirectory",function(){require(["directorybrowser"],function(t){var n=new t;n.show({callback:function(t){t&&e("#txtRecordingPath",i).val(t),n.close()}})})}),e("#btnSelectMovieRecordingPath",i).on("click.selectDirectory",function(){require(["directorybrowser"],function(t){var n=new t;n.show({callback:function(t){t&&e("#txtMovieRecordingPath",i).val(t),n.close()}})})}),e("#btnSelectSeriesRecordingPath",i).on("click.selectDirectory",function(){require(["directorybrowser"],function(t){var n=new t;n.show({callback:function(t){t&&e("#txtSeriesRecordingPath",i).val(t),n.close()}})})})}).on("pageshow","#liveTvSettingsPage",function(){LibraryMenu.setTabs("livetvadmin",1,n),Dashboard.showLoadingMsg();var e=this;ApiClient.getNamedConfiguration("livetv").then(function(t){i(e,t)}),e.querySelector(".btnSupporterForConverting a").href=AppInfo.enableSupporterMembership?"https://emby.media/premiere":"#"})});