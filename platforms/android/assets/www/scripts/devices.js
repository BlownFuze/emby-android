define(["jQuery","listViewStyle"],function(e){function t(e,t){var i=Globalize.translate("DeleteDeviceConfirmation");require(["confirm"],function(s){s(i,Globalize.translate("HeaderDeleteDevice")).then(function(){Dashboard.showLoadingMsg(),ApiClient.ajax({type:"DELETE",url:ApiClient.getUrl("Devices",{Id:t})}).then(function(){a(e)})})})}function i(i,a){var s="";a.length&&(s+='<div class="paperList">'),s+=a.map(function(e){var t="";return t+='<div class="listItem">',t+='<i class="listItemIcon md-icon" style="background:#999;">tablet_android</i>',t+=e.AppName&&e.LastUserName?'<div class="listItemBody three-line">':'<div class="listItemBody two-line">',t+='<a class="clearLink" href="device.html?id='+e.Id+'">',t+='<div class="listItemBodyText">',t+=e.Name,t+="</div>",e.AppName&&(t+='<div class="listItemBodyText secondary">',t+=e.AppName,t+="</div>"),e.LastUserName&&(t+='<div class="listItemBodyText secondary">',t+=Globalize.translate("DeviceLastUsedByUserName",e.LastUserName),t+="</div>"),t+="</a>",t+="</div>",t+='<button type="button" is="paper-icon-button-light" class="btnDeleteDevice" data-id="'+e.Id+'" title="'+Globalize.translate("ButtonDelete")+'"><i class="md-icon">delete</i></button>',t+="</div>"}).join(""),a.length&&(s+="</div>");var n=e(".devicesList",i).html(s).trigger("create");e(".btnDeleteDevice",n).on("click",function(){t(i,this.getAttribute("data-id"))})}function a(e){Dashboard.showLoadingMsg(),ApiClient.getJSON(ApiClient.getUrl("Devices",{SupportsPersistentIdentifier:!0})).then(function(t){i(e,t.Items),Dashboard.hideLoadingMsg()})}e(document).on("pageshow","#devicesPage",function(){var e=this;a(e)})});