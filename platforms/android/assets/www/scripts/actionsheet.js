(function(){function show(options){var html='';var windowHeight=$(window).height();var pos;if(options.positionTo&&windowHeight>=540){pos=$(options.positionTo).offset();pos.top+=$(options.positionTo).innerHeight()/2;pos.left+=$(options.positionTo).innerWidth()/2;pos.top-=24;pos.left-=24;pos.top-=(55*options.items.length)/2;pos.left-=80;pos.top-=$(window).scrollTop();pos.left-=$(window).scrollLeft();pos.top=Math.min(pos.top,$(window).height()-300);pos.left=Math.min(pos.left,$(window).width()-300);pos.top=Math.max(pos.top,0);pos.left=Math.max(pos.left,0);}
if(options.title){html+='<h2>';html+=options.title;html+='</h2>';}
var isScrollable=!browserInfo.safari;if(isScrollable){html+='<paper-dialog-scrollable>';}
var renderIcon=options.items.filter(function(o){return o.ironIcon;}).length;html+='<paper-menu>';for(var i=0,length=options.items.length;i<length;i++){var option=options.items[i];html+='<paper-menu-item class="actionSheetMenuItem" data-id="'+option.id+'" style="display:block;">';if(option.ironIcon){html+='<iron-icon icon="'+option.ironIcon+'"></iron-icon>';}
else if(renderIcon){html+='<iron-icon></iron-icon>';}
html+='<span>'+option.name+'</span>';html+='</paper-menu-item>';}
html+='</paper-menu>';if(isScrollable){html+='</paper-dialog-scrollable>';}
if(options.showCancel){html+='<div class="buttons">';html+='<paper-button dialog-dismiss>'+Globalize.translate('ButtonCancel')+'</paper-button>';html+='</div>';}
var dlg=document.createElement('paper-dialog');dlg.setAttribute('with-backdrop','with-backdrop');dlg.innerHTML=html;if(pos){dlg.style.position='fixed';dlg.style.left=pos.left+'px';dlg.style.top=pos.top+'px';}
document.body.appendChild(dlg);if(browserInfo.animate){dlg.animationConfig={'entry':{name:'scale-up-animation',node:dlg,timing:{duration:160,easing:'ease-out'}},'exit':{name:'fade-out-animation',node:dlg,timing:{duration:200,easing:'ease-in'}}};}
setTimeout(function(){dlg.open();},50);dlg.addEventListener('iron-overlay-closed',function(){dlg.parentNode.removeChild(dlg);});var eventName=browserInfo.chrome||browserInfo.safari?'click':'mousedown';$('.actionSheetMenuItem',dlg).on(eventName,function(){var selectedId=this.getAttribute('data-id');setTimeout(function(){dlg.close();if(options.callback){options.callback(selectedId);}},100);});}
window.ActionSheetElement={show:show};})();