define(["paperdialoghelper","paper-menu","paper-dialog","scale-up-animation","fade-out-animation"],function(t){function e(e){var i,o="",a=$(window).height();e.positionTo&&a>=540&&(i=$(e.positionTo).offset(),i.top+=$(e.positionTo).innerHeight()/2,i.left+=$(e.positionTo).innerWidth()/2,i.top-=24,i.left-=24,i.top-=55*e.items.length/2,i.left-=80,i.top-=$(window).scrollTop(),i.left-=$(window).scrollLeft(),i.top=Math.min(i.top,$(window).height()-300),i.left=Math.min(i.left,$(window).width()-300),i.top=Math.max(i.top,0),i.left=Math.max(i.left,0)),e.title&&(o+="<h3>",o+=e.title,o+="</h3>");var r=e.items.filter(function(t){return t.ironIcon}),l=r.length,s=e.title&&(!r.length||r.length!=e.items.length);o+=s?'<paper-menu style="text-align:center;">':"<paper-menu>";for(var p=0,c=e.items.length;c>p;p++){var d=e.items[p];o+='<paper-menu-item class="actionSheetMenuItem" data-id="'+d.id+'" style="display:block;">',d.ironIcon?o+=s?'<iron-icon style="margin-right:.5em;" icon="'+d.ironIcon+'"></iron-icon>':'<iron-icon icon="'+d.ironIcon+'"></iron-icon>':l&&!s&&(o+="<iron-icon></iron-icon>"),o+="<span>"+d.name+"</span>",o+="</paper-menu-item>"}o+="</paper-menu>",e.showCancel&&(o+='<div class="buttons">',o+="<paper-button dialog-dismiss>"+Globalize.translate("ButtonCancel")+"</paper-button>",o+="</div>");var m=t.createDialog({modal:!1,entryAnimationDuration:160,exitAnimationDuration:200});m.innerHTML=o,i&&(m.style.position="fixed",m.style.left=i.left+"px",m.style.top=i.top+"px"),document.body.appendChild(m),t.open(m),m.addEventListener("iron-overlay-closed",function(){m.parentNode.removeChild(m)});var u=browserInfo.chrome||browserInfo.safari?"click":"mousedown";m.addEventListener(u,function(i){var o=n(i.target,"actionSheetMenuItem");if(o){var a=o.getAttribute("data-id");setTimeout(function(){t.close(m),e.callback&&e.callback(a)},100)}})}function n(t,e){for(;!t.classList||!t.classList.contains(e);)if(t=t.parentNode,!t)return null;return t}return window.ActionSheetElement={show:e},window.ActionSheetElement});