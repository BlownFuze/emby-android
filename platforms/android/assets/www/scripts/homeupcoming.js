define(["jQuery","scrollStyles"],function(){function e(e){Dashboard.showLoadingMsg();var t=AppInfo.hasLowImageBandwidth&&!r()?24:40,a={Limit:t,Fields:"AirTime,UserData,SeriesStudio,SyncInfo",UserId:Dashboard.getCurrentUserId(),ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb"};ApiClient.getJSON(ApiClient.getUrl("Shows/Upcoming",a)).then(function(r){var t=r.Items;e.querySelector(".noItemsMessage").style.display=t.length?"none":"block";var a=e.querySelector("#upcomingItems");n(a,t),Dashboard.hideLoadingMsg()})}function r(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function t(){return r()?"overflowBackdrop":"backdrop"}function n(e,n){var a,o,i=[],s="",l=[];for(a=0,o=n.length;o>a;a++){var c=n[a],h="";if(c.PremiereDate)try{h=LibraryBrowser.getFutureDateText(parseISO8601Date(c.PremiereDate,{toLocal:!0}),!0)}catch(m){}h!=s?(l.length&&i.push({name:s,items:l}),s=h,l=[c]):l.push(c)}var d="";for(a=0,o=i.length;o>a;a++){var u=i[a];d+='<div class="homePageSection">',d+='<h1 class="listHeader">'+u.name+"</h1>",d+=r()?'<div class="itemsContainer hiddenScrollX">':'<div class="itemsContainer">',d+=LibraryBrowser.getPosterViewHtml({items:u.items,showLocationTypeIndicator:!1,shape:t(),showTitle:!0,showPremiereDate:!0,preferThumb:!0,lazy:!0,showDetailsMenu:!0,centerText:!0,context:"home-upcoming",overlayMoreButton:!0}),d+="</div>",d+="</div>"}e.innerHTML=d,ImageLoader.lazyChildren(e)}return function(r,t,n){var a=this;a.renderTab=function(){e(n)}}});