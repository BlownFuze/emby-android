!function(e,i,t){function n(e,i){require(["confirm"],function(e){e(Globalize.translate("MessageConfirmRecordingCancellation"),Globalize.translate("HeaderConfirmRecordingCancellation")).then(function(){Dashboard.showLoadingMsg(),ApiClient.cancelLiveTvTimer(i).then(function(){require(["toast"],function(e){e(Globalize.translate("MessageRecordingCancelled"))}),Dashboard.navigate("livetv.html")})})})}function a(e,t){s=t;var n=t.ProgramInfo||{};if(i(".itemName",e).html(t.Name),i(".itemEpisodeName",e).html(n.EpisodeTitle||""),i(".itemCommunityRating",e).html(LibraryBrowser.getRatingHtml(n)),LibraryBrowser.renderGenres(i(".itemGenres",e),n),LibraryBrowser.renderOverview(e.querySelectorAll(".itemOverview"),n),n.ImageTags&&n.ImageTags.Primary){var a=ApiClient.getScaledImageUrl(n.Id,{maxWidth:200,maxHeight:200,tag:n.ImageTags.Primary,type:"Primary"});i(".timerPageImageContainer",e).css("display","inline-block").html('<img src="'+a+'" style="max-width:200px;max-height:200px;" />')}else i(".timerPageImageContainer",e).hide();i(".itemMiscInfo",e).html(LibraryBrowser.getMiscInfoHtml(n)),i("#txtPrePaddingMinutes",e).val(t.PrePaddingSeconds/60),i("#txtPostPaddingMinutes",e).val(t.PostPaddingSeconds/60),"New"==t.Status?i(".timerStatus",e).hide():i(".timerStatus",e).show().html("Status:&nbsp;&nbsp;&nbsp;"+t.Status),Dashboard.hideLoadingMsg()}function r(){Dashboard.showLoadingMsg();var e=this;return ApiClient.getLiveTvTimer(s.Id).then(function(t){t.PrePaddingSeconds=60*i("#txtPrePaddingMinutes",e).val(),t.PostPaddingSeconds=60*i("#txtPostPaddingMinutes",e).val(),ApiClient.updateLiveTvTimer(t).then(function(){Dashboard.hideLoadingMsg(),require(["toast"],function(e){e(Globalize.translate("MessageRecordingSaved"))})})}),!1}function o(e){Dashboard.showLoadingMsg();var i=getParameterByName("id");ApiClient.getLiveTvTimer(i).then(function(i){a(e,i)})}var s;i(t).on("pageinit","#liveTvTimerPage",function(){var e=this;i("#btnCancelTimer",e).on("click",function(){n(e,s.Id)}),i(".liveTvTimerForm").off("submit",r).on("submit",r)}).on("pagebeforeshow","#liveTvTimerPage",function(){var e=this;o(e)}).on("pagebeforehide","#liveTvTimerPage",function(){s=null})}(window,jQuery,document);