define(["jQuery"],function(e){function t(t,n){e("#txtSyncTempPath",t).val(n.TemporaryPath||""),e("#txtUploadSpeedLimit",t).val(n.UploadSpeedLimitBytes/1e6||""),e("#txtCpuCoreLimit",t).val(n.TranscodingCpuCoreLimit),e("#chkEnableFullSpeedConversion",t).checked(n.EnableFullSpeedTranscoding),Dashboard.hideLoadingMsg()}function n(){Dashboard.showLoadingMsg();var t=this;return ApiClient.getNamedConfiguration("sync").then(function(n){n.TemporaryPath=e("#txtSyncTempPath",t).val(),n.UploadSpeedLimitBytes=parseInt(1e6*parseFloat(e("#txtUploadSpeedLimit",t).val()||"0")),n.TranscodingCpuCoreLimit=parseInt(e("#txtCpuCoreLimit",t).val()),n.EnableFullSpeedTranscoding=e("#chkEnableFullSpeedConversion",t).checked(),ApiClient.updateNamedConfiguration("sync",n).then(Dashboard.processServerConfigurationUpdateResult)}),!1}function a(){return[{href:"syncactivity.html",name:Globalize.translate("TabSyncJobs")},{href:"devicesupload.html",name:Globalize.translate("TabCameraUpload")},{href:"appservices.html?context=sync",name:Globalize.translate("TabServices")},{href:"syncsettings.html",name:Globalize.translate("TabSettings")}]}e(document).on("pageinit","#syncSettingsPage",function(){var t=this;e("#btnSelectSyncTempPath",t).on("click.selectDirectory",function(){require(["directorybrowser"],function(n){var a=new n;a.show({callback:function(n){n&&e("#txtSyncTempPath",t).val(n),a.close()}})})}),e(".syncSettingsForm").off("submit",n).on("submit",n)}).on("pageshow","#syncSettingsPage",function(){Dashboard.showLoadingMsg(),LibraryMenu.setTabs("syncadmin",3,a);var e=this;ApiClient.getNamedConfiguration("sync").then(function(n){t(e,n)})})});