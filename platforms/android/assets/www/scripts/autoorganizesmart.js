define(["jQuery"],function(a){function t(a){Dashboard.showLoadingMsg(),ApiClient.getSmartMatchInfos(o).then(function(t){r=t,e(a,t),Dashboard.hideLoadingMsg()},function(){Dashboard.hideLoadingMsg()})}function e(t,e){var n=e.Items;n.length>0&&(n=n.sort(function(a,t){return a=a.OrganizerType+" "+(a.DisplayName||a.ItemName),t=t.OrganizerType+" "+(t.DisplayName||t.ItemName),a==t?0:t>a?-1:1}));var i="";n.length&&(i+='<div class="paperList">');for(var r=0,o=n.length;o>r;r++){var l=n[r];i+="<paper-icon-item>",i+='<paper-fab mini icon="folder" item-icon class="blue"></paper-fab>',i+=l.DisplayName||l.ItemName,i+="</paper-icon-item>";var s=0;i+=l.MatchStrings.map(function(a){var t="";return t+="<paper-icon-item>",t+="<paper-item-body>",t+="<div secondary>"+a+"</div>",t+="</paper-item-body>",t+='<button type="button" is="paper-icon-button-light" class="btnDeleteMatchEntry" data-index="'+r+'" data-matchindex="'+s+'" title="'+Globalize.translate("ButtonDelete")+'"><iron-icon icon="delete"></iron-icon></button>',t+="</paper-icon-item>",s++,t}).join("")}n.length&&(i+="</div>"),a(".divMatchInfos",t).html(i)}function n(){Dashboard.hideLoadingMsg(),Dashboard.alert({message:Globalize.translate("DefaultErrorMessage")})}function i(){return[{href:"autoorganizelog.html",name:Globalize.translate("TabActivityLog")},{href:"autoorganizetv.html",name:Globalize.translate("TabTV")},{href:"autoorganizesmart.html",name:Globalize.translate("TabSmartMatches")}]}var r,o={StartIndex:0,Limit:1e5};a(document).on("pageinit","#libraryFileOrganizerSmartMatchPage",function(){var e=this;a(".divMatchInfos",e).on("click",".btnDeleteMatchEntry",function(){var a=this,i=parseInt(a.getAttribute("data-index")),o=parseInt(a.getAttribute("data-matchindex")),l=r.Items[i],s=[{Name:l.ItemName,Value:l.MatchStrings[o]}];ApiClient.deleteSmartMatchEntries(s).then(function(){t(e)},n)})}).on("pageshow","#libraryFileOrganizerSmartMatchPage",function(){var a=this;LibraryMenu.setTabs("autoorganize",2,i),Dashboard.showLoadingMsg(),t(a)}).on("pagebeforehide","#libraryFileOrganizerSmartMatchPage",function(){r=null})});