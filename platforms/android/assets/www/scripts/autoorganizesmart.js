define(["jQuery"],function(t){function a(t){Dashboard.showLoadingMsg(),ApiClient.getSmartMatchInfos(r).then(function(a){i=a,e(t,a),Dashboard.hideLoadingMsg()},function(){Dashboard.hideLoadingMsg()})}function e(a,e){var n=e.Items;n.length>0&&(n=n.sort(function(t,a){return t=t.OrganizerType+" "+(t.DisplayName||t.ItemName),a=a.OrganizerType+" "+(a.DisplayName||a.ItemName),t==a?0:a>t?-1:1}));var i="";n.length&&(i+='<div class="paperList">');for(var r=0,o=n.length;o>r;r++){var s=n[r];i+="<paper-icon-item>",i+='<paper-fab mini icon="folder" item-icon class="blue"></paper-fab>',i+=s.DisplayName||s.ItemName,i+="</paper-icon-item>";var l=0;i+=s.MatchStrings.map(function(t){var a="";return a+="<paper-icon-item>",a+="<paper-item-body>",a+="<div secondary>"+t+"</div>",a+="</paper-item-body>",a+='<button type="button" is="paper-icon-button-light" class="btnDeleteMatchEntry" data-index="'+r+'" data-matchindex="'+l+'" title="'+Globalize.translate("ButtonDelete")+'"><iron-icon icon="delete"></iron-icon></button>',a+="</paper-icon-item>",l++,a}).join("")}n.length&&(i+="</div>"),t(".divMatchInfos",a).html(i)}function n(){return[{href:"autoorganizelog.html",name:Globalize.translate("TabActivityLog")},{href:"autoorganizetv.html",name:Globalize.translate("TabTV")},{href:"autoorganizesmart.html",name:Globalize.translate("TabSmartMatches")}]}var i,r={StartIndex:0,Limit:1e5};t(document).on("pageinit","#libraryFileOrganizerSmartMatchPage",function(){var e=this;t(".divMatchInfos",e).on("click",".btnDeleteMatchEntry",function(){var t=this,n=parseInt(t.getAttribute("data-index")),r=parseInt(t.getAttribute("data-matchindex")),o=i.Items[n],s=[{Name:o.ItemName,Value:o.MatchStrings[r]}];ApiClient.deleteSmartMatchEntries(s).then(function(){a(e)},Dashboard.processErrorResponse)})}).on("pageshow","#libraryFileOrganizerSmartMatchPage",function(){var t=this;LibraryMenu.setTabs("autoorganize",2,n),Dashboard.showLoadingMsg(),a(t)}).on("pagebeforehide","#libraryFileOrganizerSmartMatchPage",function(){i=null})});