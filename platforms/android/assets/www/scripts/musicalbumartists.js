define(["jQuery"],function(e){function t(e){var t=a(e),r=u[t];return r||(r=u[t]={query:{SortBy:"SortName",SortOrder:"Ascending",Recursive:!0,Fields:"PrimaryImageAspectRatio,SortName,DateCreated,SyncInfo,ItemCounts",StartIndex:0,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(t)||LibraryBrowser.getDefaultItemsView("Poster","Poster")},r.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(t,r.query)),r}function r(e){return t(e).query}function a(e){return e.savedQueryKey||(e.savedQueryKey=LibraryBrowser.getSavedQueryKey("albumartists")),e.savedQueryKey}function i(s){Dashboard.showLoadingMsg();var u=r(s);ApiClient.getAlbumArtists(Dashboard.getCurrentUserId(),u).then(function(r){window.scrollTo(0,0);var c=t(s).view,l="",y=LibraryBrowser.getQueryPagingHtml({startIndex:u.StartIndex,limit:u.Limit,totalRecordCount:r.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1,addLayoutButton:!0,currentLayout:c,filterButton:!0});s.querySelector(".listTopPaging").innerHTML=y,o(s),"List"==c?l=LibraryBrowser.getListViewHtml({items:r.Items,context:"music",sortBy:u.SortBy}):"Poster"==c?l=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"square",context:"music",showTitle:!0,coverImage:!0,lazy:!0,centerText:!0,overlayPlayButton:!0}):"PosterCard"==c&&(l=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"square",context:"music",showTitle:!0,coverImage:!0,lazy:!0,cardLayout:!0,showSongCount:!0}));var d=s.querySelector("#items");d.innerHTML=l+y,ImageLoader.lazyChildren(d),e(".btnNextPage",s).on("click",function(){u.StartIndex+=u.Limit,i(s)}),e(".btnPreviousPage",s).on("click",function(){u.StartIndex-=u.Limit,i(s)}),e(".btnChangeLayout",s).on("layoutchange",function(e,r){t(s).view=r,LibraryBrowser.saveViewSetting(a(s),r),i(s)}),e(".btnFilter",s).on("click",function(){n(s)}),LibraryBrowser.saveQueryValues(a(s),u),Dashboard.hideLoadingMsg()})}function n(e){require(["components/filterdialog/filterdialog"],function(t){var a=new t({query:r(e),mode:"albumartists"});Events.on(a,"filterchange",function(){i(e)}),a.show()})}function o(t){var a=r(t);e(".alphabetPicker",t).alphaValue(a.NameStartsWithOrGreater)}function s(t){e(".alphabetPicker",t).on("alphaselect",function(e,a){var n=r(t);n.NameStartsWithOrGreater=a,n.StartIndex=0,i(t)}).on("alphaclear",function(){var e=r(t);e.NameStartsWithOrGreater="",i(t)})}var u={};window.MusicPage.initAlbumArtistsTab=function(e,t){s(t)},window.MusicPage.renderAlbumArtistsTab=function(e,t){i(t)}});