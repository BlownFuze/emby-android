!function(){function n(n,t){"IMG"!==n.tagName?n.style.backgroundImage="url('"+t+"')":n.setAttribute("src",t)}function t(){return new Promise(function(n){r?n(r):requestFileSystem(PERSISTENT,0,function(t){r=t,n(r)})})}function e(){function e(n){var t=n.indexOf("://");return-1!=t&&(n=n.substring(t+3),t=n.indexOf("/"),-1!=t&&(n=n.substring(t+1))),CryptoJS.MD5(n).toString()}function r(n){if(browserInfo.safari){var t=n.indexOf("/Documents");return-1!=t?n.substring(t):n.replace("file://","")}return n}var o=this;o.getImageUrl=function(n){return browserInfo.android&&-1!=n.indexOf("tag=")&&(n+="&accept=webp"),new Promise(function(o){var i=e(n);t().then(function(t){var e=t.root.toURL()+"/emby/cache/"+i;resolveLocalFileSystemURL(e,function(n){var t=r(n.toURL());o(t)},function(){var t=new FileTransfer;t.download(n,e,function(n){var t=r(n.toURL());o(t)})})})})},o.setImageInto=function(t,e){function r(){n(t,e)}o.getImageUrl(e).then(function(e){n(t,e)},r)};window.ImageStore=o}var r;require(["cryptojs-md5"],function(){new e})}();