define(["appStorage","browser"],function(e,o){function i(){return null}function n(){var e={PlayableMediaTypes:["Audio","Video"],SupportsPersistentIdentifier:!1,DeviceProfile:i()};return e}console.log=function(){};var t;return{getWindowState:function(){return document.windowState||"Normal"},setWindowState:function(){alert("setWindowState is not supported and should not be called")},exit:function(){navigator.app&&navigator.app.exitApp?navigator.app.exitApp():window.close()},supports:function(e){var i=[];return o.safari||(i.push("filedownload"),i.push("sync"),i.push("customsyncpath"),i.push("cameraupload")),i.push("sharing"),i.push("exit"),i.push("htmlaudioautoplay"),i.push("htmlvideoautoplay"),-1!=i.indexOf(e.toLowerCase())},appInfo:function(){return t?Promise.resolve(t):new Promise(function(o){document.addEventListener("deviceready",function(){cordova.getAppVersion.getVersionNumber(function(i){var n=browserInfo.android?"Emby for Android Mobile":browserInfo.safari?"Emby for iOS":"Emby Mobile",a=device.model.replace(/[^\w\s]/gi,""),r=null;window.MainActivity&&(r=e.getItem("legacyDeviceId")),t={deviceId:r||device.uuid,deviceName:a,appName:n,appVersion:i},o(t)})},!1)})},capabilities:n,moreIcon:o.safari||o.edge?"dots-horiz":"dots-vert"}});