!function(){function e(e){function n(){Events.trigger(window.AudioRenderer.Current,"ended")}function r(){Events.trigger(window.AudioRenderer.Current,"timeupdate")}function t(){Events.trigger(window.AudioRenderer.Current,"playing")}function i(){Events.trigger(window.AudioRenderer.Current,"pause")}function u(){this.error?this.error.code:"";Events.trigger(window.AudioRenderer.Current,"error")}function o(e,u){var o=u.duration||0,a=u.progress||0,d=AudioRenderer.Current.playerState;return d.duration=o,d.currentTime=a,d.paused=3==u.state||"paused"==e,d.volume=0,"positionchange"==e?void r():void("playbackstop"==e?n():"paused"==e?i():"unpaused"==e?t():"playing"==e&&t())}function a(e){if(e)if("next"===e.type)MediaPlayer.nextTrack();else if("previous"===e.type)MediaPlayer.previousTrack();else if(4==e.state||6==e.state)o("playbackstop",e);else{var n="positionchange";o(n,e)}}function d(){u()}var s=this;window.AudioRenderer.Current=s,s.enableProgressReporting="audio"==e.type,s.playerState={},s.currentTime=function(e){return null!=e?void window.audioplayer.seekto(function(){},function(){},e/1e3):s.playerState.currentTime},s.duration=function(){return 1},s.stop=function(){window.audioplayer.stop(function(e){o("playbackstop",e)},function(){})},s.pause=function(){window.audioplayer.pause(function(e){o("sepaused",e)},function(){})},s.unpause=function(){window.audioplayer.pause(function(e){o("playing",e)},function(){})},s.volume=function(e){return null==e?s.playerState.volume:void 0},s.setCurrentSrc=function(n,r){if(n){var t=n.url,i=t.indexOf("#t="),u=0;if(-1!=i&&(u=t.substring(i+3),u=1e3*parseFloat(u),t=t.split("#")[0]),"audio"==e.type){var d=r.ArtistItems&&r.ArtistItems.length?r.ArtistItems[0].Name:null,s={};r.Name&&(s.title=r.Name),d&&(s.artist=d),r.Overview&&(s.description=r.Overview),e.poster&&(s.image={url:e.poster},s.imageThumbnail={url:e.poster}),window.audioplayer.playstream(a,function(){},{ios:t},s)}AudioRenderer.Current.playerState.currentSrc=t,o("playing",{})}},s.currentSrc=function(){return s.playerState.currentSrc},s.paused=function(){return s.playerState.paused},s.cleanup=function(){s.playerState={}},s.init=function(){return new Promise(function(e){window.audioplayer.configure(a,d),setTimeout(e,500)})}}window.AudioRenderer=function(n){return n=n||{},n.type="audio",new e(n)}}();