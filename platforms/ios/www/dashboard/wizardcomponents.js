define([],function(){function e(){require(["scripts/wizardcontroller"],function(e){e.navigateToService()})}function t(e){var t="";ApiClient.getSystemInfo().then(function(r){"Windows"==r.OperatingSystem?e.querySelector(".fldSelectEncoderPathType").classList.add("hide"):e.querySelector(".fldSelectEncoderPathType").classList.remove("hide"),"Windows"==r.OperatingSystem&&"Arm"!=r.SystemArchitecture?(e.querySelector(".suggestedLocation").innerHTML=Globalize.translate("FFmpegSuggestedDownload",'<a target="_blank" href="https://ffmpeg.zeranoe.com/builds">https://ffmpeg.zeranoe.com</a>'),"X86"==r.SystemArchitecture?t="Download FFmpeg 32-Bit Static":"X64"==r.SystemArchitecture&&(t="Download FFmpeg 64-Bit Static")):"Linux"==r.OperatingSystem&&"Arm"!=r.SystemArchitecture?(e.querySelector(".suggestedLocation").innerHTML=Globalize.translate("FFmpegSuggestedDownload",'<a target="_blank" href="http://johnvansickle.com/ffmpeg">http://johnvansickle.com/ffmpeg</a>'),"X86"==r.SystemArchitecture?t="Download x86 build":"X64"==r.SystemArchitecture&&(t="Download x86_64 build")):"Osx"==r.OperatingSystem&&"X64"==r.SystemArchitecture?(e.querySelector(".suggestedLocation").innerHTML=Globalize.translate("FFmpegSuggestedDownload",'<a target="_blank" href="http://evermeet.cx/ffmpeg">http://evermeet.cx/ffmpeg</a>'),t="Download both ffmpeg and ffprobe, and extract them to the same folder."):e.querySelector(".suggestedLocation").innerHTML=Globalize.translate("FFmpegSuggestedDownload",'<a target="_blank" href="http://ffmpeg.org">https://ffmpeg.org/download.html</a>'),e.querySelector(".downloadInstructions").innerHTML=t;var n=e.querySelector("#selectEncoderPath");n.value="Custom",a.call(n)})}function r(){var e="";e=Globalize.translate("FFmpegSavePathNotFound"),require(["alert"],function(t){t(e)})}function n(e,t){for(;!e.classList||!e.classList.contains(t);)if(e=e.parentNode,!e)return null;return e}function a(){var e=n(this,"page");"Custom"==this.value?e.querySelector(".fldEncoderPath").classList.remove("hide"):e.querySelector(".fldEncoderPath").classList.add("hide")}return function(n){n.querySelector("#btnSelectEncoderPath").addEventListener("click",function(){require(["directorybrowser"],function(e){var t=new e;t.show({includeFiles:!0,callback:function(e){e&&(n.querySelector(".txtEncoderPath").value=e),t.close()}})})}),n.querySelector("form").addEventListener("submit",function(t){var n=this;return ApiClient.ajax({url:ApiClient.getUrl("System/MediaEncoder/Path"),type:"POST",data:{Path:n.querySelector(".txtEncoderPath").value,PathType:"Custom"}}).then(e,r),t.preventDefault(),!1}),n.querySelector("#selectEncoderPath").addEventListener("change",a),n.addEventListener("viewbeforeshow",function(){t(n)})}});