define(["listViewStyle"],function(){function t(t,e){for(;!t.classList||!t.classList.contains(e);)if(t=t.parentNode,!t)return null;return t}function e(t){Dashboard.showLoadingMsg(),ApiClient.getSmartMatchInfos(s).then(function(e){i=e,a(t,e),Dashboard.hideLoadingMsg()},function(){Dashboard.hideLoadingMsg()})}function a(t,e){var a=e.Items;a.length>0&&(a=a.sort(function(t,e){return t=t.OrganizerType+" "+(t.DisplayName||t.ItemName),e=e.OrganizerType+" "+(e.DisplayName||e.ItemName),t==e?0:e>t?-1:1}));var n="";a.length&&(n+='<div class="paperList">');for(var i=0,s=a.length;s>i;i++){var r=a[i];n+='<div class="listItem">',n+='<div class="listItemIconContainer">',n+='<i class="listItemIcon md-icon">folder</i>',n+="</div>",n+='<div class="listItemBody">',n+="<h2 class='listItemBodyText'>"+(r.DisplayName||r.ItemName)+"</h2>",n+="</div>",n+="</div>";var o=0;n+=r.MatchStrings.map(function(t){var e="";return e+='<div class="listItem">',e+='<div class="listItemBody" style="padding: .1em 1em .4em 5.5em; min-height: 1.5em;">',e+="<div class='listItemBodyText secondary'>"+t+"</div>",e+="</div>",e+='<button type="button" is="emby-button" class="btnDeleteMatchEntry" style="padding: 0;" data-index="'+i+'" data-matchindex="'+o+'" title="'+Globalize.translate("ButtonDelete")+'"><i class="md-icon">delete</i></button>',e+="</div>",o++,e}).join("")}a.length&&(n+="</div>");var l=t.querySelector(".divMatchInfos");l.innerHTML=n}function n(){return[{href:"autoorganizelog.html",name:Globalize.translate("TabActivityLog")},{href:"autoorganizetv.html",name:Globalize.translate("TabTV")},{href:"autoorganizesmart.html",name:Globalize.translate("TabSmartMatches")}]}var i,s={StartIndex:0,Limit:1e5};return function(a){var s=a.querySelector(".divMatchInfos");s.addEventListener("click",function(n){var s=t(n.target,"btnDeleteMatchEntry");if(s){var r=parseInt(s.getAttribute("data-index")),o=parseInt(s.getAttribute("data-matchindex")),l=i.Items[r],d=[{Name:l.ItemName,Value:l.MatchStrings[o]}];ApiClient.deleteSmartMatchEntries(d).then(function(){e(a)},Dashboard.processErrorResponse)}}),a.addEventListener("viewshow",function(){LibraryMenu.setTabs("autoorganize",2,n),Dashboard.showLoadingMsg(),e(a)}),a.addEventListener("viewhide",function(){i=null})}});