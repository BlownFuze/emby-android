define(["localassetmanager"],function(n){function e(n,t,i,f,u,o){var c=n.length;if(t>=c)return void i();var s=function(){e(n,t+1,i,f,u,o)};r(n[t],u).then(s,s)}function r(e,r){return r.getOfflineUser(e.Id).then(function(e){return n.saveOfflineUser(e)},function(){return n.deleteOfflineUser(e.Id).catch(function(){return Promise.resolve()})})}return function(){var n=this;n.sync=function(n,r){return new Promise(function(t,i){var f=r.Users||[];e(f,0,t,i,n,r)})}}});