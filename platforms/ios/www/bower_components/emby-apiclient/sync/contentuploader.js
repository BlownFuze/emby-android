!function(e){function r(e){function r(e,r){return e.filter(function(e){return e?0==r.FilesUploaded.filter(function(r){return n(e)==r.Id}).length:!1})}function n(e){return CryptoJS.SHA1(e+"1").toString()}function t(e,r,n,i,a){var u=e.length;return r>=u?void a.resolve():void o(e[r],i).then(function(){t(e,r+1,n,i,a)},function(){t(e,r+1,n,i,a)})}function o(e,r){var t=DeferredBuilder.Deferred();return require(["fileupload","cryptojs-sha1"],function(){var o="camera image "+(new Date).getTime(),i=r.getUrl("Devices/CameraUploads",{DeviceId:r.deviceId(),Name:o,Album:"Camera Roll",Id:n(e),api_key:r.accessToken()});(new MediaBrowser.FileUpload).upload(e,o,i).then(function(){t.resolve()},function(){t.reject()})}),t.promise()}var i=this;i.uploadImages=function(n){var o=DeferredBuilder.Deferred();return LocalAssetManager.getCameraPhotos().then(function(i){if(!i.length)return void o.resolve();var a=e.getApiClient(n.Id);a.getContentUploadHistory().then(function(e){i=r(i,e),t(i,0,n,a,o)},function(){o.reject()})},function(){o.reject()}),o.promise()}}e.MediaBrowser||(e.MediaBrowser={}),e.MediaBrowser.ContentUploader=r}(this);