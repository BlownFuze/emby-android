!function(e){function n(e){function n(e,n){return e.filter(function(e){return e?0==n.FilesUploaded.filter(function(n){return r(e)==n.Id}).length:!1})}function r(e){return CryptoJS.SHA1(e+"1").toString()}function t(e,n,r,i,a){var u=e.length;return n>=u?void a.resolve():void o(e[n],i).then(function(){t(e,n+1,r,i,a)},function(){t(e,n+1,r,i,a)})}function o(e,n){var t=jQuery.Deferred();return require(["fileupload","cryptojs-sha1"],function(){var o="camera image "+(new Date).getTime(),i=n.getUrl("Devices/CameraUploads",{DeviceId:n.deviceId(),Name:o,Album:"Camera Roll",Id:r(e),api_key:n.accessToken()});(new MediaBrowser.FileUpload).upload(e,o,i).then(function(){t.resolve()},function(){t.reject()})}),t.promise()}var i=this;i.uploadImages=function(r){var o=jQuery.Deferred();return LocalAssetManager.getCameraPhotos().then(function(i){if(!i.length)return void o.resolve();var a=e.getApiClient(r.Id);a.getContentUploadHistory().then(function(e){i=n(i,e),t(i,0,r,a,o)},function(){o.reject()})},function(){o.reject()}),o.promise()}}e.MediaBrowser||(e.MediaBrowser={}),e.MediaBrowser.ContentUploader=n}(this);