define(["focusManager"],function(e){function t(e){var t=document,n=[];if(!t)return n;for(var o,f,r=t.documentElement,c={clientTop:r.clientTop,clientLeft:r.clientLeft},i=t.defaultView,s={pageXOffset:i.pageXOffset,pageYOffset:i.pageYOffset},l=0,u=e.length;u>l;l++)f=e[l],o=f.getBoundingClientRect?f.getBoundingClientRect():{top:0,left:0},n[l]={top:o.top+s.pageYOffset-c.clientTop,left:o.left+s.pageXOffset-c.clientLeft};return n}function n(e,n,o){var f=t([e,n]),r=f[0],c=f[1],i=o?c.left-r.left:c.top-r.top,s=n[o?"offsetWidth":"offsetHeight"];i+=o?e.scrollLeft:e.scrollTop;var l=o?e.offsetWidth:e.offsetHeight;return{start:i,center:i-l/2+s/2,end:i-l+s,size:s}}function o(e,t,o){var f=n(e,t,o);e.scrollTo?o?e.scrollTo(f.center,0):e.scrollTo(0,f.center):o?e.scrollLeft=Math.round(f.center):e.scrollTop=Math.round(f.center)}function f(t,n,f){var r=e.focusableParent(t.target);r&&o(n,r,f)}function r(e){f(e,this,!0)}function c(e){f(e,this,!1)}return{getPosition:n,centerFocus:{on:function(e,t){t?e.addEventListener("focus",r,!0):e.addEventListener("focus",c,!0)},off:function(e,t){t?e.removeEventListener("focus",r,!0):e.removeEventListener("focus",c,!0)}},toCenter:o}});