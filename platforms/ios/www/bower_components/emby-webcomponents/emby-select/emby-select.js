define(["layoutManager","browser","actionsheet","css!./emby-select","registerElement"],function(e,t,s){function n(){return t.xboxOne?!1:t.tizen?!1:t.tv?!0:e.tv?!1:!0}function i(e){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}function a(e,t){e.value=t}function c(e){var t=r(e),n=t?t.textContent||t.innerText:null;s.show({items:e.options,positionTo:e,title:n}).then(function(t){a(e,t),i(e)})}function r(e){for(var t=e.previousSibling;t&&"LABEL"!=t.tagName;)t=t.previousSibling;return t}function o(){var e=r(this);e&&(e.classList.add("selectLabelFocused"),e.classList.remove("selectLabelUnfocused"))}function l(){var e=r(this);e&&(e.classList.add("selectLabelUnfocused"),e.classList.remove("selectLabelFocused"))}function d(e){e.button||n()||(e.preventDefault(),c(this))}function v(t){switch(t.keyCode){case 13:return void(n()||(t.preventDefault(),c(this)));case 37:case 38:case 39:case 40:return void(e.tv&&t.preventDefault())}}var u=Object.create(HTMLSelectElement.prototype),h=0;u.createdCallback=function(){var e=this.parentNode;if(e&&!e.classList.contains("selectContainer")){var t=this.ownerDocument.createElement("div");t.classList.add("selectContainer"),e.replaceChild(t,this),t.appendChild(this)}this.id||(this.id="embyselect"+h,h++),this.removeEventListener("focus",o),this.removeEventListener("blur",l),this.removeEventListener("mousedown",d),this.removeEventListener("keydown",v),this.addEventListener("mousedown",d),this.addEventListener("keydown",v),this.addEventListener("focus",o),this.addEventListener("blur",l)},u.attachedCallback=function(){if(!this.classList.contains("emby-select")){this.classList.add("emby-select");var e=this.ownerDocument.createElement("label");e.innerHTML=this.getAttribute("label")||"",e.classList.add("selectLabel"),e.classList.add("selectLabelUnfocused"),e.htmlFor=this.id,this.parentNode.insertBefore(e,this);var t=document.createElement("div");t.classList.add("emby-select-selectionbar"),this.parentNode.insertBefore(t,this.nextSibling);var s=document.createElement("div");s.classList.add("selectArrowContainer"),s.innerHTML='<div style="visibility:hidden;">0</div>',this.parentNode.appendChild(s);var n=document.createElement("i");n.classList.add("md-icon"),n.classList.add("selectArrow"),n.innerHTML="&#xE313;",s.appendChild(n)}},document.registerElement("emby-select",{prototype:u,"extends":"select"})});