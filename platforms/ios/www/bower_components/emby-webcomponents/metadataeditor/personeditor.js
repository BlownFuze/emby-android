define(["dialogHelper","layoutManager","globalize","require","paper-icon-button-light","emby-input","emby-select","css!./../formdialog"],function(e,t,o,r){function n(e,t,o){r(["scrollHelper"],function(r){var n=o?"on":"off";r.centerFocus[n](e,t)})}function l(l){return new Promise(function(c,u){r(["text!./personeditor.template.html"],function(r){var a={removeOnClose:!0,scrollY:!1};a.size=t.tv?"fullscreen":"medium";var i=e.createDialog(a);i.classList.add("formDialog");var s="",m=!1;s+=o.translateDocument(r,"sharedcomponents"),i.innerHTML=s,document.body.appendChild(i),i.querySelector(".txtPersonName",i).value=l.Name||"",i.querySelector(".selectPersonType",i).value=l.Type||"",i.querySelector(".txtPersonRole",i).value=l.Role||"",t.tv&&n(i.querySelector(".formDialogContent"),!1,!0),e.open(i),i.addEventListener("close",function(){t.tv&&n(i.querySelector(".formDialogContent"),!1,!1),m?c(l):u()}),i.querySelector(".btnCancel").addEventListener("click",function(){e.close(i)}),i.querySelector("form").addEventListener("submit",function(t){return m=!0,l.Name=i.querySelector(".txtPersonName",i).value,l.Type=i.querySelector(".selectPersonType",i).value,l.Role=i.querySelector(".txtPersonRole",i).value||null,e.close(i),t.preventDefault(),!1})})})}return{show:l}});