define(["dialogHelper","layoutManager","globalize","./social-share-kit-1.0.4/dist/js/social-share-kit.min","css!./social-share-kit-1.0.4/dist/css/social-share-kit.css","emby-button"],function(s,e,t){function a(a){function n(){r=!0,s.close(i)}var i=s.createDialog({removeOnClose:!0,autoFocus:e.tv});i.id="dlg"+(new Date).getTime();var l="";l+="<h2>"+Globalize.translate("Share")+"</h2>",l+="<div>",l+='<div class="ssk-group ssk-round ssk-lg">',l+='<a href="" class="ssk ssk-facebook"></a>',l+='<a href="" class="ssk ssk-twitter"></a><a href="" class="ssk ssk-google-plus"></a><a href="" class="ssk ssk-pinterest"></a><a href="" class="ssk ssk-tumblr"></a></div>',l+="</div>",l+='<div class="buttons">',l+='<button is="emby-button" type="button" class="btnCancel">'+t.translate("sharedcomponents#ButtonCancel")+"</button>",l+="</div>",i.innerHTML=l,document.body.appendChild(i);var r=!1,o=a.share;SocialShareKit.init({selector:"#"+i.id+" .ssk",url:o.Url,title:o.Name,text:o.Overview,image:o.ImageUrl,via:"Emby"});for(var c=i.querySelectorAll(".ssk"),u=0,d=c.length;d>u;u++)c[u].addEventListener("click",n);i.querySelector(".btnCancel").addEventListener("click",function(){s.close(i)});var k=new Promise(function(s,e){i.addEventListener("close",function(){r?s():e()})});return s.open(i),k}return{showMenu:a}});