define(["browser","appSettings","events"],function(t,e,o){function u(t,e,o){e==o?(t[e]=!0,document.documentElement.classList.add("layout-"+e)):(t[e]=!1,document.documentElement.classList.remove("layout-"+e))}function n(){var n=this;n.setLayout=function(t,a){t&&"auto"!=t?(u(n,"mobile",t),u(n,"tv",t),u(n,"desktop",t),a!==!1&&e.set("layout",t)):(n.autoLayout(),a!==!1&&e.set("layout","")),o.trigger(n,"modechange")},n.getSavedLayout=function(){return e.get("layout")},n.autoLayout=function(){t.mobile?n.setLayout("mobile",!1):t.tv||t.xboxOne?n.setLayout("tv",!1):n.setLayout(n.undetectedAutoLayout||"desktop",!1)},n.init=function(){var t=n.getSavedLayout();t?n.setLayout(t,!1):n.autoLayout()}}return new n});