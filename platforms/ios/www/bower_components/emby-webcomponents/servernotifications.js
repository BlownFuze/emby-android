define(["connectionManager","events"],function(e,r){function a(e,a){var s=this;if("LibraryChanged"===a.MessageType);else if("ServerShuttingDown"===a.MessageType)r.trigger(t,"ServerShuttingDown",[s]);else if("ServerRestarting"===a.MessageType)r.trigger(t,"ServerRestarting",[s]);else if("RestartRequired"===a.MessageType)r.trigger(t,"RestartRequired",[s]);else if("UserDataChanged"===a.MessageType){if(a.Data.UserId==s.getCurrentUserId())for(var i=0,g=a.Data.UserDataList.length;g>i;i++)r.trigger(t,"UserDataChanged",[s,a.Data.UserDataList[i]])}else("TimerCreated"===a.MessageType||"SeriesTimerCreated"===a.MessageType||"TimerCancelled"===a.MessageType||"SeriesTimerCancelled"===a.MessageType)&&r.trigger(t,a.MessageType,[s,a.Data])}function s(e){r.off(e,"websocketmessage",a),r.on(e,"websocketmessage",a)}var t={};return r.on(e,"apiclientcreated",function(e,r){s(r)}),t});