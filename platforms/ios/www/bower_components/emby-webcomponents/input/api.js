define(["connectionManager","playbackManager","events","inputManager","focusManager"],function(e,a,t,r,s){function n(e){var a=e.Arguments;a.TimeoutMs?require(["toast"],function(e){e({title:a.Header,text:a.Text})}):require(["alert"],function(e){e({title:a.Header,text:a.Text})})}function g(e){switch(e.Name){case"Select":r.trigger("select");break;case"Back":r.trigger("back");break;case"MoveUp":r.trigger("up");break;case"MoveDown":r.trigger("down");break;case"MoveLeft":r.trigger("left");break;case"MoveRight":r.trigger("right");break;case"PageUp":r.trigger("pageup");break;case"PageDown":r.trigger("pagedown");break;case"SetRepeatMode":a.setRepeatMode(e.Arguments.RepeatMode);break;case"VolumeUp":r.trigger("volumeup");break;case"VolumeDown":r.trigger("volumedown");break;case"ChannelUp":r.trigger("channelup");break;case"ChannelDown":r.trigger("channeldown");break;case"Mute":r.trigger("mute");break;case"Unmute":r.trigger("unmute");break;case"ToggleMute":r.trigger("togglemute");break;case"SetVolume":a.volume(e.Arguments.Volume);break;case"SetAudioStreamIndex":a.setAudioStreamIndex(parseInt(e.Arguments.Index));break;case"SetSubtitleStreamIndex":a.setSubtitleStreamIndex(parseInt(e.Arguments.Index));break;case"ToggleFullscreen":r.trigger("togglefullscreen");break;case"GoHome":r.trigger("home");break;case"GoToSettings":r.trigger("settings");break;case"DisplayContent":break;case"GoToSearch":r.trigger("search");break;case"DisplayMessage":n(e);break;case"ToggleOsd":break;case"ToggleContextMenu":break;case"TakeScreenShot":break;case"SendKey":break;case"SendString":s.sendText(e.Arguments.String)}}function o(e,t){var s=this;if("Play"===t.MessageType){var n=s.serverInfo().Id;"PlayNext"==t.Data.PlayCommand?a.queueNext({ids:t.Data.ItemIds,serverId:n}):"PlayLast"==t.Data.PlayCommand?a.queue({ids:t.Data.ItemIds,serverId:n}):a.play({ids:t.Data.ItemIds,startPositionTicks:t.Data.StartPositionTicks,serverId:n})}else if("Playstate"===t.MessageType)"Stop"===t.Data.Command?r.trigger("stop"):"Pause"===t.Data.Command?r.trigger("pause"):"Unpause"===t.Data.Command?r.trigger("play"):"Seek"===t.Data.Command?a.seek(t.Data.SeekPositionTicks):"NextTrack"===t.Data.Command?r.trigger("next"):"PreviousTrack"===t.Data.Command&&r.trigger("previous");else if("GeneralCommand"===t.MessageType){var o=t.Data;g(o)}}function i(e){t.off(e,"websocketmessage",o),t.on(e,"websocketmessage",o)}t.on(e,"apiclientcreated",function(e,a){i(a)})});