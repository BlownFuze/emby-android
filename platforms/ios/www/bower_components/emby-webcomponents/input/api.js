define(["connectionManager","playbackManager","events","inputManager","focusManager","embyRouter"],function(e,t,r,a,n,o){function s(){a.notify()}function i(e){var t=e.Arguments;t.TimeoutMs?require(["toast"],function(e){e({title:t.Header,text:t.Text})}):require(["alert"],function(e){e({title:t.Header,text:t.Text})})}function g(e,t){t.getItem(t.getCurrentUserId(),e.ItemId).then(function(e){o.showItem(e)})}function u(e,r){switch(e.Name){case"Select":return void a.trigger("select");case"Back":return void a.trigger("back");case"MoveUp":return void a.trigger("up");case"MoveDown":return void a.trigger("down");case"MoveLeft":return void a.trigger("left");case"MoveRight":return void a.trigger("right");case"PageUp":return void a.trigger("pageup");case"PageDown":return void a.trigger("pagedown");case"SetRepeatMode":t.setRepeatMode(e.Arguments.RepeatMode);break;case"VolumeUp":return void a.trigger("volumeup");case"VolumeDown":return void a.trigger("volumedown");case"ChannelUp":return void a.trigger("channelup");case"ChannelDown":return void a.trigger("channeldown");case"Mute":return void a.trigger("mute");case"Unmute":return void a.trigger("unmute");case"ToggleMute":return void a.trigger("togglemute");case"SetVolume":s(),t.volume(e.Arguments.Volume);break;case"SetAudioStreamIndex":s(),t.setAudioStreamIndex(parseInt(e.Arguments.Index));break;case"SetSubtitleStreamIndex":s(),t.setSubtitleStreamIndex(parseInt(e.Arguments.Index));break;case"ToggleFullscreen":return void a.trigger("togglefullscreen");case"GoHome":return void a.trigger("home");case"GoToSettings":return void a.trigger("settings");case"DisplayContent":g(e,r);break;case"GoToSearch":return void a.trigger("search");case"DisplayMessage":i(e);break;case"ToggleOsd":break;case"ToggleContextMenu":break;case"TakeScreenShot":break;case"SendKey":break;case"SendString":n.sendText(e.Arguments.String)}s()}function c(e,r){var n=this;if("Play"===r.MessageType){s();var o=n.serverInfo().Id;"PlayNext"==r.Data.PlayCommand?t.queueNext({ids:r.Data.ItemIds,serverId:o}):"PlayLast"==r.Data.PlayCommand?t.queue({ids:r.Data.ItemIds,serverId:o}):t.play({ids:r.Data.ItemIds,startPositionTicks:r.Data.StartPositionTicks,serverId:o})}else if("Playstate"===r.MessageType)"Stop"===r.Data.Command?a.trigger("stop"):"Pause"===r.Data.Command?a.trigger("pause"):"Unpause"===r.Data.Command?a.trigger("play"):"Seek"===r.Data.Command?t.seek(r.Data.SeekPositionTicks):"NextTrack"===r.Data.Command?a.trigger("next"):"PreviousTrack"===r.Data.Command?a.trigger("previous"):s();else if("GeneralCommand"===r.MessageType){var i=r.Data;u(i,n)}}function d(e){r.off(e,"websocketmessage",c),r.on(e,"websocketmessage",c)}var m=e.currentApiClient();m&&d(m),r.on(e,"apiclientcreated",function(e,t){d(t)})});