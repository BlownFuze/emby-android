!function(n,t){"use strict";function i(n){this.callback=n,this.ticking=!1}function e(t){return t&&"undefined"!=typeof n&&(t===n||t.nodeType)}function s(n){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var t,i,o=n||{};for(i=1;i<arguments.length;i++){var r=arguments[i]||{};for(t in r)o[t]="object"!=typeof o[t]||e(o[t])?o[t]||r[t]:s(o[t],r[t])}return o}function o(n){return n===Object(n)?n:{down:n,up:n}}function r(n,t,i,e){var s=e;h||(s=e.capture),n.addEventListener(t,i,s)}function l(n,t,i,e){var s=e;h||(s=e.capture),n.removeEventListener(t,i,s)}function a(n,t){t=s(t,a.options),this.lastKnownScrollY=0,this.elems=n,this.debouncer=new i(this.update.bind(this)),this.tolerance=o(t.tolerance),this.classes=t.classes,this.offset=t.offset,this.scroller=t.scroller,this.initialised=!1,this.onPin=t.onPin,this.onUnpin=t.onUnpin}var c=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame;i.prototype={constructor:i,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(c(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}};var h=!1;try{var u=Object.defineProperty({},"capture",{get:function(){h=!0}});n.addEventListener("test",null,u)}catch(d){}a.prototype={constructor:a,init:function(){for(var n=0,t=this.elems.length;t>n;n++)this.elems[n].classList.add(this.classes.initial);return this.attachEvent(),this},add:function(n){n.classList.add(this.classes.initial),this.elems.push(n)},remove:function(n){var t=this.classes;n.classList.remove(t.unpinned,t.pinned,t.initial);var i=this.elems.indexOf(n);-1!=i&&this.elems.splice(i,1)},destroy:function(){var n=this.classes;this.initialised=!1;for(var t=0,i=this.elems.length;i>t;t++)this.elems[t].classList.remove(n.unpinned,n.pinned,n.initial);l(this.scroller,"scroll",this.debouncer,{capture:!1,passive:!0})},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,r(this.scroller,"scroll",this.debouncer,{capture:!1,passive:!0}),this.debouncer.handleEvent())},unpin:function(){for(var n=this.classes,t=0,i=this.elems.length;i>t;t++){var e=this.elems[t].classList;(e.contains(n.pinned)||!e.contains(n.unpinned))&&(e.add(n.unpinned),e.remove(n.pinned),this.onUnpin&&this.onUnpin.call(this))}},pin:function(){for(var n=this.classes,t=0,i=this.elems.length;i>t;t++){var e=this.elems[t].classList;e.contains(n.unpinned)&&(e.remove(n.unpinned),e.add(n.pinned),this.onPin&&this.onPin.call(this))}},getScrollY:function(){var n=this.scroller.pageYOffset;if(void 0!==n)return n;var i=this.scroller.scrollTop;return void 0!==i?i:(t.documentElement||t.body).scrollTop},toleranceExceeded:function(n,t){return Math.abs(n-this.lastKnownScrollY)>=this.tolerance[t]},shouldUnpin:function(n,t){var i=n>this.lastKnownScrollY,e=n>=this.offset;return i&&e&&t},shouldPin:function(n,t){var i=n<this.lastKnownScrollY,e=n<=this.offset;return i&&t||e},update:function(){var n=this.getScrollY(),t=n>this.lastKnownScrollY?"down":"up",i=this.toleranceExceeded(n,t);0>n||(this.shouldUnpin(n,i)?this.unpin():this.shouldPin(n,i)&&this.pin(),this.lastKnownScrollY=n)}},a.options={tolerance:{up:0,down:0},offset:0,scroller:n,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",initial:"headroom"}},n.Headroom=a}(window,document);