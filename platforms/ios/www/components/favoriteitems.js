define(["libraryBrowser","cardBuilder","dom","scrollStyles","emby-itemscontainer"],function(e,t,r){function i(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function a(){return i()?"overflowBackdrop":"backdrop"}function o(){return i()?"overflowPortrait":"portrait"}function n(){return i()?"overflowSquare":"square"}function s(){return[{name:"HeaderFavoriteMovies",types:"Movie",id:"favoriteMovies",shape:o(),showTitle:!1,overlayPlayButton:!0},{name:"HeaderFavoriteShows",types:"Series",id:"favoriteShows",shape:o(),showTitle:!1,overlayPlayButton:!0},{name:"HeaderFavoriteEpisodes",types:"Episode",id:"favoriteEpisode",shape:a(),preferThumb:!1,showTitle:!0,showParentTitle:!0,overlayPlayButton:!0},{name:"HeaderFavoriteGames",types:"Game",id:"favoriteGames",shape:n(),preferThumb:!1,showTitle:!0},{name:"HeaderFavoriteArtists",types:"MusicArtist",id:"favoriteArtists",shape:n(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayPlayButton:!0},{name:"HeaderFavoriteAlbums",types:"MusicAlbum",id:"favoriteAlbums",shape:n(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayPlayButton:!0},{name:"HeaderFavoriteSongs",types:"Audio",id:"favoriteSongs",shape:n(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayMoreButton:!0,action:"instantmix"}]}function l(e,a,o,n,s){var l=r.getWindowSize().innerWidth,d={SortBy:"SortName",SortOrder:"Ascending",Filters:"IsFavorite",Recursive:!0,Fields:"PrimaryImageAspectRatio,BasicSyncInfo",CollapseBoxSetItems:!1,ExcludeLocationTypes:"Virtual",EnableTotalRecordCount:!1};o&&(d.ParentId=o),s||(d.Limit=l>=1920?10:l>=1440?8:6,i()&&(d.Limit=20));var u;return"MusicArtist"==n.types?u=ApiClient.getArtists(a,d):(d.IncludeItemTypes=n.types,u=ApiClient.getItems(a,d)),u.then(function(r){var a="";if(r.Items.length){if(a+="<div>",a+='<h1 style="display:inline-block; vertical-align:middle;" class="listHeader">'+Globalize.translate(n.name)+"</h1>",d.Limit&&r.Items.length>=d.Limit){var o="secondaryitems.html?type="+n.types+"&filters=IsFavorite";a+='<a class="clearLink" href="'+o+'" style="margin-left:2em;"><button is="emby-button" type="button" class="raised more mini">'+Globalize.translate("ButtonMore")+"</button></a>"}a+="</div>",a+=i()?'<div is="emby-itemscontainer" class="itemsContainer hiddenScrollX">':'<div is="emby-itemscontainer" class="itemsContainer vertical-wrap">',a+=t.getCardsHtml(r.Items,{preferThumb:n.preferThumb,shape:n.shape,centerText:n.centerText,overlayText:n.overlayText!==!1,showTitle:n.showTitle,showParentTitle:n.showParentTitle,scalable:!0,overlayPlayButton:n.overlayPlayButton,overlayMoreButton:n.overlayMoreButton,action:n.action,allowBottomPadding:!i()}),a+="</div>"}e.innerHTML=a,ImageLoader.lazyChildren(e)})}function d(e,t,r,i){Dashboard.showLoadingMsg();var a=s(),o=getParameterByName("sectionid");o&&(a=a.filter(function(e){return e.id==o})),i&&(a=a.filter(function(e){return-1!=i.indexOf(e.id)}));var n,d,u=e.querySelector(".favoriteSections");if(!u.innerHTML){var m="";for(n=0,d=a.length;d>n;n++)m+='<div class="homePageSection section'+a[n].id+'"></div>';u.innerHTML=m}var c=[];for(n=0,d=a.length;d>n;n++){var v=a[n];u=e.querySelector(".section"+v.id),c.push(l(u,t,r,v,1==a.length))}Promise.all(c).then(function(){Dashboard.hideLoadingMsg()})}return{render:d}});