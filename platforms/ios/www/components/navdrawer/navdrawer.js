define(["browser","css!./navdrawer","scrollStyles"],function(t){return function(e){function n(t){e.target.classList.remove("transition"),e.target.classList.add("open"),k=Math.abs(t.velocity)}function o(t){k=Math.abs(t.velocity);var e=l.visible;e&&!y&&t.deltaX>0&&(g=!0),y||g||e&&!(Math.abs(t.deltaX)>=10)?g||(g=!0):(y=!0,b.addEventListener("scroll",c),l.showMask()),y&&(f=m+t.deltaX,l.changeMenuPos())}function a(t){e.target.classList.add("transition"),b.removeEventListener("scroll",c),y=!1,g=!1,m=t.deltaX,l.checkMenuState(t.deltaX,t.deltaY)}function i(){e.disableEdgeSwipe||require(["hammer-main"],s)}function s(t){var i=!1;t.on("panstart panmove",function(t){if(i)o(t);else{var a=t.srcEvent,s=a.clientX;if(!s){var c=a.touches;c&&c.length&&(s=c[0].clientX)}s<=e.handleSize&&(i=!0,n(t))}}),t.on("panend pancancel",function(t){i&&(i=!1,a(t))}),l.edgeHammer=t}function c(t){t.preventDefault(),t.stopPropagation()}function r(t){t&&(h=t(e.target,null)),l.initElements(t),t&&(l.touchStartMenu(),l.touchEndMenu(),l.eventStartMask(),l.eventEndMask(),i(t)),e.disableMask||l.clickMaskClose()}var l,d,p,u,h,f=0,m=0,v=0,M=0,k=0;e.target.classList.add("transition");var y,g,b=e.target.querySelector(".scrollContainer");b.classList.add("smoothScrollY");var w=function(){l=this,d={width:280,handleSize:30,disableMask:!1,maxMaskOpacity:.5},this.isVisible=!1,this.initialize()};return w.prototype.initElements=function(t){e.target.classList.add("touch-menu-la"),e.target.style.width=e.width+"px",e.target.style.left=-e.width+"px",e.disableMask||(p=document.createElement("div"),p.className="tmla-mask",document.body.appendChild(p),t&&(u=new t(p,null)))},w.prototype.touchStartMenu=function(){h.on("panstart",function(t){n(t)}),h.on("panmove",function(t){o(t)})},w.prototype.animateToPosition=function(t){requestAnimationFrame(function(){e.target.style.transform=t?"translate3d("+t+"px, 0, 0)":"none"})},w.prototype.changeMenuPos=function(){f<=e.width&&this.animateToPosition(f)},w.prototype.touchEndMenu=function(){h.on("panend pancancel",a)},w.prototype.clickMaskClose=function(){p.addEventListener("click",function(){l.close()})},w.prototype.checkMenuState=function(t,e){k>=1?t>=-80||Math.abs(e)>=70?l.open():l.close():f>=100?l.open():l.close()},w.prototype.open=function(){this.animateToPosition(e.width),m=e.width,this.isVisible=!0,e.target.classList.add("open"),l.showMask(),l.invoke(e.onChange)},w.prototype.close=function(){this.animateToPosition(0),m=0,l.isVisible=!1,e.target.classList.remove("open"),l.hideMask(),l.invoke(e.onChange)},w.prototype.toggle=function(){l.isVisible?l.close():l.open()},w.prototype.eventStartMask=function(){u.on("panstart panmove",function(t){t.center.x<=e.width&&l.isVisible&&(M++,1==M&&(v=t.deltaX),t.deltaX<0&&(y=!0,f=t.deltaX-v+e.width,l.changeMenuPos(),k=Math.abs(t.velocity)))})},w.prototype.eventEndMask=function(){u.on("panend pancancel",function(t){l.checkMenuState(t.deltaX),M=0})},w.prototype.showMask=function(){p.classList.add("backdrop")},w.prototype.hideMask=function(){p.classList.remove("backdrop")},w.prototype.invoke=function(t){t&&t.apply(l)},w.prototype.initialize=function(){e=Object.assign(d,e||{}),t.edge&&(e.disableEdgeSwipe=!0),t.touch?require(["hammer"],r):r()},new w}});