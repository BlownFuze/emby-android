define(["paper-dialog","scale-up-animation","fade-out-animation","fade-in-animation"],function(){function e(e,t,o,i){function n(){var t=r.originalUrl==window.location.href;(t||!e.opened)&&window.removeEventListener("popstate",n),t&&(r.closedByBack=!0,e.close())}function a(){if(i!==!1&&Dashboard.onPopupClose(),window.removeEventListener("popstate",n),!r.closedByBack){var a=history.state||{};a.dialogId==t&&history.back()}s.focus(),"true"==e.getAttribute("data-removeonclose")&&e.parentNode.removeChild(e),setTimeout(function(){o({element:e,closedByBack:r.closedByBack})},1)}var r=this;r.originalUrl=window.location.href;var s=document.activeElement;e.addEventListener("iron-overlay-closed",a),e.open(),i!==!1&&Dashboard.onPopupOpen();var d={dialogId:t,navigate:!1};history.pushState(d,"Dialog",t),jQuery.onStatePushed(d),window.addEventListener("popstate",n)}function t(t){return new Promise(function(o){new e(t,"dlg"+(new Date).getTime(),o)})}function o(e){e.opened&&history.back()}function i(e){e=e||{};var t=document.createElement("paper-dialog");t.setAttribute("with-backdrop","with-backdrop"),t.setAttribute("role","alertdialog"),browserInfo.msie||browserInfo.firefox||e.modal!==!1,t.setAttribute("noAutoFocus","noAutoFocus");var o=browserInfo.mobile?"fade-in-animation":"scale-up-animation";t.entryAnimation=e.entryAnimation||o,t.exitAnimation="fade-out-animation",t.animationConfig={entry:{name:e.entryAnimation||o,node:t,timing:{duration:e.entryAnimationDuration||300,easing:"ease-out"}},exit:{name:"fade-out-animation",node:t,timing:{duration:e.exitAnimationDuration||400,easing:"ease-in"}}},"auto"!=e.size&&(t.classList.add("popupEditor"),t.classList.add("small"==e.size?"small-paper-dialog":"medium"==e.size?"medium-paper-dialog":"fullscreen-paper-dialog"));var i=e.theme||"b";return t.classList.add("ui-body-"+i),t.classList.add("background-theme-"+i),t.classList.add("smoothScrollY"),e.removeOnClose&&t.setAttribute("data-removeonclose","true"),t}function n(e,t){var o=$(window).height();if(o>=540){var i=$(t).offset();i.top+=t.offsetHeight/2,i.left+=t.offsetWidth/2,i.top-=24,i.left-=24,i.top-=$(e).height()/2,i.left-=$(e).width()/2,i.top-=$(window).scrollTop(),i.left-=$(window).scrollLeft(),i.top=Math.min(i.top,o-300),i.left=Math.min(i.left,$(window).width()-300),i.top=Math.max(i.top,0),i.left=Math.max(i.left,0),e.style.position="fixed",e.style.left=i.left+"px",e.style.top=i.top+"px"}}return window.PaperDialogHelper={open:t,close:o,createDialog:i,positionTo:n},PaperDialogHelper});