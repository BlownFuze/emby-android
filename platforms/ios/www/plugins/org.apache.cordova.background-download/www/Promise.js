cordova.define("org.apache.cordova.background-download.Promise",function(e,t,i){!function(e){function n(){this._completeCallbacks=[],this._errorCallbacks=[],this._progressCallbacks=[],this._chainedDefer=null,this._state="pending",this.result=null}function s(){this.promise=new n}n.Deferral=s,n.prototype.then=function(e,t,i){return e&&this._completeCallbacks.push(e),t&&this._errorCallbacks.push(t),i&&this._progressCallbacks.push(i),this._chainedDefer=new n.Deferral,this._chainedDefer.promise.parent=this,"resolved"===this._state?this.executeCallback(e,this.result):"rejected"===this._state&&this.executeCallback(t,this.result),this._chainedDefer.promise},n.prototype.cancel=function(e){if(null!=this.parent&&!e){for(var t=this;t.parent;)t=t.parent;return void window.setTimeout(function(){t.cancel(!0)})}if("pending"===this._state){this._state="cancelled";var i=this,n=new Error("Cancelled");this.result=n,this._errorCallbacks.forEach(function(e){i.executeCallback(e,n)}),this.onCancelled&&this.onCancelled(),this._chainedDefer&&this._chainedDefer.promise.cancel(!0)}},n.prototype.executeCallback=function(e,t){var i=this._chainedDefer;state=this._state,window.setTimeout(function(){var s;try{s=e(t)}catch(r){return void(i&&i.reject(r))}null!=i&&"cancelled"!==state&&(s instanceof n?i.bind(s):i.resolve(s))})},s.prototype.resolve=function(e){if("pending"===this.promise._state){var t=this.promise;t._state="resolved",t.result=e,t._completeCallbacks.forEach(function(i){t.executeCallback(i,e)})}},s.prototype.reject=function(e){if("pending"===this.promise._state){var t=this.promise;t._state="rejected",t.result=e,t._errorCallbacks.forEach(function(i){t.executeCallback(i,e)})}},s.prototype.notify=function(e){"cancelled"!==this.promise._state&&this.promise._progressCallbacks.forEach(function(t){window.setTimeout(function(){t(e)})})},s.prototype.bind=function(e){var t=this;e.then(function(e){t.resolve(e)},function(e){t.reject(e)})},"object"==typeof t?i.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):e.Promise=n}(this)});