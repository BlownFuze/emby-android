cordova.define("acidhax.cordova.chromecast.tests",function(require,exports,module){exports.init=function(){eval(require("org.apache.cordova.test-framework.test").injectJasmineInterface(this,"this")),jasmine.DEFAULT_TIMEOUT_INTERVAL=25e3;var applicationID="CC1AD845",videoUrl="http://s3.nwgat.net/flvplayers3/bbb.mp4";describe("chrome.cast",function(){var e=null,t=null,o=!1,c=!1;it("should contain definitions",function(e){setTimeout(function(){expect(chrome.cast.VERSION).toBeDefined(),expect(chrome.cast.ReceiverAvailability).toBeDefined(),expect(chrome.cast.ReceiverType).toBeDefined(),expect(chrome.cast.SenderPlatform).toBeDefined(),expect(chrome.cast.AutoJoinPolicy).toBeDefined(),expect(chrome.cast.Capability).toBeDefined(),expect(chrome.cast.DefaultActionPolicy).toBeDefined(),expect(chrome.cast.ErrorCode).toBeDefined(),expect(chrome.cast.timeout).toBeDefined(),expect(chrome.cast.isAvailable).toBeDefined(),expect(chrome.cast.ApiConfig).toBeDefined(),expect(chrome.cast.Receiver).toBeDefined(),expect(chrome.cast.DialRequest).toBeDefined(),expect(chrome.cast.SessionRequest).toBeDefined(),expect(chrome.cast.Error).toBeDefined(),expect(chrome.cast.Image).toBeDefined(),expect(chrome.cast.SenderApplication).toBeDefined(),expect(chrome.cast.Volume).toBeDefined(),expect(chrome.cast.media).toBeDefined(),expect(chrome.cast.initialize).toBeDefined(),expect(chrome.cast.requestSession).toBeDefined(),expect(chrome.cast.setCustomReceivers).toBeDefined(),expect(chrome.cast.Session).toBeDefined(),expect(chrome.cast.media.PlayerState).toBeDefined(),expect(chrome.cast.media.ResumeState).toBeDefined(),expect(chrome.cast.media.MediaCommand).toBeDefined(),expect(chrome.cast.media.MetadataType).toBeDefined(),expect(chrome.cast.media.StreamType).toBeDefined(),expect(chrome.cast.media.timeout).toBeDefined(),expect(chrome.cast.media.LoadRequest).toBeDefined(),expect(chrome.cast.media.PlayRequest).toBeDefined(),expect(chrome.cast.media.SeekRequest).toBeDefined(),expect(chrome.cast.media.VolumeRequest).toBeDefined(),expect(chrome.cast.media.StopRequest).toBeDefined(),expect(chrome.cast.media.PauseRequest).toBeDefined(),expect(chrome.cast.media.GenericMediaMetadata).toBeDefined(),expect(chrome.cast.media.MovieMediaMetadata).toBeDefined(),expect(chrome.cast.media.MusicTrackMediaMetadata).toBeDefined(),expect(chrome.cast.media.PhotoMediaMetadata).toBeDefined(),expect(chrome.cast.media.TvShowMediaMetadata).toBeDefined(),expect(chrome.cast.media.MediaInfo).toBeDefined(),expect(chrome.cast.media.Media).toBeDefined(),expect(chrome.cast.Session.prototype.setReceiverVolumeLevel).toBeDefined(),expect(chrome.cast.Session.prototype.setReceiverMuted).toBeDefined(),expect(chrome.cast.Session.prototype.stop).toBeDefined(),expect(chrome.cast.Session.prototype.sendMessage).toBeDefined(),expect(chrome.cast.Session.prototype.addUpdateListener).toBeDefined(),expect(chrome.cast.Session.prototype.removeUpdateListener).toBeDefined(),expect(chrome.cast.Session.prototype.addMessageListener).toBeDefined(),expect(chrome.cast.Session.prototype.removeMessageListener).toBeDefined(),expect(chrome.cast.Session.prototype.addMediaListener).toBeDefined(),expect(chrome.cast.Session.prototype.removeMediaListener).toBeDefined(),expect(chrome.cast.Session.prototype.loadMedia).toBeDefined(),expect(chrome.cast.media.Media.prototype.play).toBeDefined(),expect(chrome.cast.media.Media.prototype.pause).toBeDefined(),expect(chrome.cast.media.Media.prototype.seek).toBeDefined(),expect(chrome.cast.media.Media.prototype.stop).toBeDefined(),expect(chrome.cast.media.Media.prototype.setVolume).toBeDefined(),expect(chrome.cast.media.Media.prototype.supportsCommand).toBeDefined(),expect(chrome.cast.media.Media.prototype.getEstimatedTime).toBeDefined(),expect(chrome.cast.media.Media.prototype.addUpdateListener).toBeDefined(),expect(chrome.cast.media.Media.prototype.removeUpdateListener).toBeDefined(),e()},1e3)}),it("api should be available",function(e){setTimeout(function(){expect(chrome.cast.isAvailable).toEqual(!0),e()},4e3)}),it("initialize should succeed",function(o){var c=new chrome.cast.SessionRequest(applicationID),i=new chrome.cast.ApiConfig(c,function(t){e=t},function(e){t=e});chrome.cast.initialize(i,function(){o()},function(e){expect(e).toBe(null),o()})}),it("receiver available",function(e){setTimeout(function(){expect(t).toEqual(chrome.cast.ReceiverAvailability.AVAILABLE),e()},2e3)}),it("requestSession should succeed",function(t){chrome.cast.requestSession(function(c){e=c,expect(c).toBeDefined(),expect(c.appId).toBeDefined(),expect(c.displayName).toBeDefined(),expect(c.receiver).toBeDefined(),expect(c.receiver.friendlyName).toBeDefined(),expect(c.addUpdateListener).toBeDefined(),expect(c.removeUpdateListener).toBeDefined();var i=function(){o=!0,c.removeUpdateListener(i)};c.addUpdateListener(i),t()},function(e){expect(e).toBe(null),t()})}),it("loadRequest should work",function(t){var o=new chrome.cast.media.MediaInfo(videoUrl,"video/mp4"),i=new chrome.cast.media.LoadRequest(o);expect(e).not.toBeNull(),e.loadMedia(i,function(o){_currentMedia=o,expect(_currentMedia.sessionId).toEqual(e.sessionId),expect(_currentMedia.addUpdateListener).toBeDefined(),expect(_currentMedia.removeUpdateListener).toBeDefined();var i=function(){c=!0,_currentMedia.removeUpdateListener(i)};_currentMedia.addUpdateListener(i),t()},function(e){expect(e).toBeNull(),t()})}),it("pause media should succeed",function(e){setTimeout(function(){_currentMedia.pause(null,function(){e()},function(t){expect(t).toBeNull(),e()})},5e3)}),it("play media should succeed",function(e){setTimeout(function(){_currentMedia.play(null,function(){e()},function(t){expect(t).toBeNull(),e()})},1e3)}),it("seek media should succeed",function(e){setTimeout(function(){var t=new chrome.cast.media.SeekRequest;t.currentTime=10,_currentMedia.seek(t,function(){e()},function(t){expect(t).toBeNull(),e()})},1e3)}),it("session updateListener",function(e){expect(o).toEqual(!0),e()}),it("media updateListener",function(e){expect(c).toEqual(!0),e()}),it("volume and muting",function(e){var t=new chrome.cast.Volume;t.level=.5;var o=new chrome.cast.media.VolumeRequest;o.volume=t,_currentMedia.setVolume(o,function(){var t=new chrome.cast.media.VolumeRequest(new chrome.cast.Volume(null,!0));_currentMedia.setVolume(t,function(){var t=new chrome.cast.media.VolumeRequest(new chrome.cast.Volume(null,!1));_currentMedia.setVolume(t,function(){e()},function(t){expect(t).toBeNull(),e()})},function(t){expect(t).toBeNull(),e()})},function(t){expect(t).toBeNull(),e()})}),it("stopping the video",function(e){_currentMedia.stop(null,function(){setTimeout(e,1e3)},function(t){expect(t).toBeNull(),e()})}),it("unloading the session",function(t){e.stop(function(){t()},function(e){expect(e).toBeNull(),t()})})})}});