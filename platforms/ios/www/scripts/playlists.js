define([],function(){function e(){var e=r(),t=s[e];return t||(t=s[e]={query:{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Playlist",Recursive:!0,Fields:"PrimaryImageAspectRatio,SortName,CumulativeRunTimeTicks,CanDelete,SyncInfo",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Poster","Poster")},t.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function t(){return e().query}function r(){return LibraryBrowser.getSavedQueryKey()}function a(){Dashboard.showLoadingMsg()}function o(){Dashboard.hideLoadingMsg()}function i(s){a(s);var n=t(),u=ApiClient.getItems(Dashboard.getCurrentUserId(),n),d=Dashboard.getCurrentUser();Promise.all([u,d]).then(function(t){{var a=t[0];t[1]}window.scrollTo(0,0);var u="",d=e().view;s.querySelector(".listTopPaging").innerHTML=LibraryBrowser.getQueryPagingHtml({startIndex:n.StartIndex,limit:n.Limit,totalRecordCount:a.TotalRecordCount,viewButton:!1,showLimit:!1,updatePageSizeSetting:!1,addLayoutButton:!0,layouts:"List,Poster,PosterCard,Thumb,ThumbCard",currentLayout:d}),a.TotalRecordCount?(u="List"==d?LibraryBrowser.getListViewHtml({items:a.Items,sortBy:n.SortBy}):LibraryBrowser.getPosterViewHtml("PosterCard"==d?{items:a.Items,shape:"square",showTitle:!0,lazy:!0,coverImage:!0,showItemCounts:!0,cardLayout:!0}:"Thumb"==d?{items:a.Items,shape:"backdrop",showTitle:!0,centerText:!0,lazy:!0,preferThumb:!0}:"ThumbCard"==d?{items:a.Items,shape:"backdrop",showTitle:!0,lazy:!0,preferThumb:!0,cardLayout:!0,showItemCounts:!0}:{items:a.Items,shape:"square",showTitle:!0,lazy:!0,coverImage:!0,showItemCounts:!0,centerText:!0,overlayPlayButton:!0}),s.querySelector(".noItemsMessage").classList.add("hide")):s.querySelector(".noItemsMessage").classList.remove("hide");var l=s.querySelector(".itemsContainer");l.innerHTML=u,ImageLoader.lazyChildren(l);var y=s.querySelector(".btnNextPage");y&&y.addEventListener("click",function(){n.StartIndex+=n.Limit,i(s)});var c=s.querySelector(".btnPreviousPage");c&&c.addEventListener("click",function(){n.StartIndex-=n.Limit,i(s)});var m=s.querySelector(".btnChangeLayout");m&&m.addEventListener("layoutchange",function(t){var a=t.detail.viewStyle;e().view=a,LibraryBrowser.saveViewSetting(r(),a),i(s)}),LibraryBrowser.saveQueryValues(r(),n),o(s)})}var s={};pageIdOn("pagebeforeshow","playlistsPage",function(){var e=this;i(e)})});