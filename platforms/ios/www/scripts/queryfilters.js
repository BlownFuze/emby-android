!function(e){function t(e,t,i,n){var r;r=n.length?$(t,e).show()[0]:$(t,e).hide()[0];var a="";a+='<div data-role="controlgroup">';var l=0,c="chk"+t.substring(1);a+=n.map(function(e){var t="",n=c+l;return t+='<div class="checkboxContainer">',t+='<input id="'+n+'" type="checkbox" data-filter="'+e+'" data-role="none" class="'+i+'" />',t+='<label for="'+n+'">'+e+"</label>",t+="</div>",l++,t}).join(""),a+="</div>",r.querySelector(".filterOptions").innerHTML=a}function i(e,i){i.Tags&&(i.Tags.length=Math.min(i.Tags.length,50)),t(e,".genreFilters","chkGenreFilter",i.Genres),t(e,".officialRatingFilters","chkOfficialRatingFilter",i.OfficialRatings),t(e,".tagFilters","chkTagFilter",i.Tags),t(e,".yearFilters","chkYearFilter",i.Years)}function n(e,t,i){$(".chkGenreFilter",e).on("change",function(){var e=this.getAttribute("data-filter"),n=t.Genres||"",r="|";n=(r+n).replace(r+e,"").substring(1),this.checked&&(n=n?n+r+e:e),t.StartIndex=0,t.Genres=n,i()}),$(".chkTagFilter",e).on("change",function(){var e=this.getAttribute("data-filter"),n=t.Tags||"",r="|";n=(r+n).replace(r+e,"").substring(1),this.checked&&(n=n?n+r+e:e),t.StartIndex=0,t.Tags=n,i()}),$(".chkYearFilter",e).on("change",function(){var e=this.getAttribute("data-filter"),n=t.Years||"",r=",";n=(r+n).replace(r+e,"").substring(1),this.checked&&(n=n?n+r+e:e),t.StartIndex=0,t.Years=n,i()}),$(".chkOfficialRatingFilter",e).on("change",function(){var e=this.getAttribute("data-filter"),n=t.OfficialRatings||"",r="|";n=(r+n).replace(r+e,"").substring(1),this.checked&&(n=n?n+r+e:e),t.StartIndex=0,t.OfficialRatings=n,i()})}function r(e,t,r,a){return ApiClient.getJSON(ApiClient.getUrl("Items/Filters",{UserId:t,ParentId:r.ParentId,IncludeItemTypes:r.IncludeItemTypes})).then(function(t){i(e,t),n(e,r,a)})}function a(e,t){t.Genres=null,t.Years=null,t.OfficialRatings=null,t.Tags=null}e.QueryFilters={loadFilters:r,onPageShow:a}}(window);