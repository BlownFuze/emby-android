define(["jQuery","cardBuilder","dom"],function(e,t,i){function r(o){Dashboard.showLoadingMsg(),ApiClient.getLiveTvRecordings(n).then(function(s){window.scrollTo(0,0);var d="";e(".listTopPaging",o).html(LibraryBrowser.getQueryPagingHtml({startIndex:n.StartIndex,limit:n.Limit,totalRecordCount:s.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1})),a();var l=i.getWindowSize().innerWidth;d+=t.getCardsHtml({items:s.Items,shape:"auto",showTitle:!0,showParentTitle:!0,overlayText:l>=600,coverImage:!0}),d+=LibraryBrowser.getQueryPagingHtml({startIndex:n.StartIndex,limit:n.Limit,totalRecordCount:s.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1});var g=o.querySelector("#items");g.innerHTML=d,ImageLoader.lazyChildren(g),e(".btnNextPage",o).on("click",function(){n.StartIndex+=n.Limit,r(o)}),e(".btnPreviousPage",o).on("click",function(){n.StartIndex-=n.Limit,r(o)}),e(".selectPageSize",o).on("change",function(){n.Limit=parseInt(this.value),n.StartIndex=0,r(o)}),"false"!=getParameterByName("savequery")&&LibraryBrowser.saveQueryValues("episodes",n),Dashboard.hideLoadingMsg()})}function a(){}var n={UserId:Dashboard.getCurrentUserId(),StartIndex:0,Fields:"CanDelete,PrimaryImageAspectRatio"};e(document).on("pageinit","#liveTvRecordingListPage",function(){}).on("pagebeforeshow","#liveTvRecordingListPage",function(){var t=this,i=LibraryBrowser.getDefaultPageSize();i!=n.Limit&&(n.Limit=i,n.StartIndex=0),LibraryBrowser.loadSavedQueryValues("episodes",n);var o=getParameterByName("groupid");n.GroupId=o,r(t),n.GroupId?ApiClient.getLiveTvRecordingGroup(n.GroupId).then(function(i){e(".listName",t).html(i.Name)}):e(".listName",t).html(Globalize.translate("HeaderAllRecordings")),a(this)})});