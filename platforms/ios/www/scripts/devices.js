define(["jQuery"],function(e){function i(e,i){var t=Globalize.translate("DeleteDeviceConfirmation");require(["confirm"],function(n){n(t,Globalize.translate("HeaderDeleteDevice")).then(function(){Dashboard.showLoadingMsg(),ApiClient.ajax({type:"DELETE",url:ApiClient.getUrl("Devices",{Id:i})}).then(function(){a(e)})})})}function t(t,a){var n="";a.length&&(n+='<div class="paperList">'),n+=a.map(function(e){var i="";return i+="<paper-icon-item>",i+='<paper-fab mini style="background:#999;" icon="tablet-android" item-icon></paper-fab>',i+="<paper-item-body three-line>",i+='<a class="clearLink" href="device.html?id='+e.Id+'">',i+="<div>",i+=e.Name,i+="</div>",e.AppName&&(i+="<div secondary>",i+=e.AppName,i+="</div>"),e.LastUserName&&(i+="<div secondary>",i+=Globalize.translate("DeviceLastUsedByUserName",e.LastUserName),i+="</div>"),i+="</a>",i+="</paper-item-body>",i+='<paper-icon-button icon="delete" data-id="'+e.Id+'" title="'+Globalize.translate("ButtonDelete")+'" class="btnDeleteDevice"></paper-icon-button>',i+="</paper-icon-item>"}).join(""),a.length&&(n+="</div>");var r=e(".devicesList",t).html(n).trigger("create");e(".btnDeleteDevice",r).on("click",function(){i(t,this.getAttribute("data-id"))})}function a(e){Dashboard.showLoadingMsg(),ApiClient.getJSON(ApiClient.getUrl("Devices",{SupportsPersistentIdentifier:!0})).then(function(i){require(["paper-fab","paper-item-body","paper-icon-item"],function(){t(e,i.Items)}),Dashboard.hideLoadingMsg()})}e(document).on("pageshow","#devicesPage",function(){var e=this;a(e)})});