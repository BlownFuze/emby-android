!function(e,a){function n(a,n,s){e("#chkEnableServer",a).checked(n.EnableServer).checkboxradio("refresh"),e("#chkBlastAliveMessages",a).checked(n.BlastAliveMessages).checkboxradio("refresh"),e("#txtBlastInterval",a).val(n.BlastAliveMessageIntervalSeconds),e("#chkEnableMovieFolders",a).checked(n.EnableMovieFolders).checkboxradio("refresh");var t=s.map(function(e){return'<option value="'+e.Id+'">'+e.Name+"</option>"}).join("");e("#selectUser",a).html(t).val(n.DefaultUserId||""),Dashboard.hideLoadingMsg()}function s(){Dashboard.showLoadingMsg();var a=this;return ApiClient.getNamedConfiguration("dlna").then(function(n){n.EnableServer=e("#chkEnableServer",a).checked(),n.BlastAliveMessages=e("#chkBlastAliveMessages",a).checked(),n.BlastAliveMessageIntervalSeconds=e("#txtBlastInterval",a).val(),n.DefaultUserId=e("#selectUser",a).val(),n.EnableMovieFolders=e("#chkEnableMovieFolders",a).checked(),ApiClient.updateNamedConfiguration("dlna",n).then(Dashboard.processServerConfigurationUpdateResult)}),!1}e(a).on("pageinit","#dlnaServerSettingsPage",function(){e(".dlnaServerSettingsForm").off("submit",s).on("submit",s)}).on("pageshow","#dlnaServerSettingsPage",function(){Dashboard.showLoadingMsg();var e=this,a=ApiClient.getNamedConfiguration("dlna"),s=ApiClient.getUsers();Promise.all([a,s]).then(function(a){n(e,a[0],a[1])})})}(jQuery,document,window);