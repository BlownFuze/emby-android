!function(e,a){function n(a,n,t){e("#chkEnableServer",a).checked(n.EnableServer),e("#chkBlastAliveMessages",a).checked(n.BlastAliveMessages),e("#txtBlastInterval",a).val(n.BlastAliveMessageIntervalSeconds),e("#chkEnableMovieFolders",a).checked(n.EnableMovieFolders);var s=t.map(function(e){return'<option value="'+e.Id+'">'+e.Name+"</option>"}).join("");e("#selectUser",a).html(s).val(n.DefaultUserId||""),Dashboard.hideLoadingMsg()}function t(){Dashboard.showLoadingMsg();var a=this;return ApiClient.getNamedConfiguration("dlna").then(function(n){n.EnableServer=e("#chkEnableServer",a).checked(),n.BlastAliveMessages=e("#chkBlastAliveMessages",a).checked(),n.BlastAliveMessageIntervalSeconds=e("#txtBlastInterval",a).val(),n.DefaultUserId=e("#selectUser",a).val(),n.EnableMovieFolders=e("#chkEnableMovieFolders",a).checked(),ApiClient.updateNamedConfiguration("dlna",n).then(Dashboard.processServerConfigurationUpdateResult)}),!1}e(a).on("pageinit","#dlnaServerSettingsPage",function(){e(".dlnaServerSettingsForm").off("submit",t).on("submit",t)}).on("pageshow","#dlnaServerSettingsPage",function(){Dashboard.showLoadingMsg();var e=this,a=ApiClient.getNamedConfiguration("dlna"),t=ApiClient.getUsers();Promise.all([a,t]).then(function(a){n(e,a[0],a[1])})})}(jQuery,document,window);