define(["jQuery"],function(e){return function(r,t,i){function a(){var e=o(),r=d[e];return r||(r=d[e]={query:{SortBy:"SortName",SortOrder:"Ascending",Fields:"PrimaryImageAspectRatio,SortName,SyncInfo",StartIndex:0,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Poster","Poster")},r.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(e,r.query)),r}function n(){return a().query}function o(){return LibraryBrowser.getSavedQueryKey("folders")}function s(r){Dashboard.showLoadingMsg();var t=n();ApiClient.getItems(Dashboard.getCurrentUserId(),t).then(function(i){window.scrollTo(0,0);var n="",u=a().view,d=LibraryBrowser.getQueryPagingHtml({startIndex:t.StartIndex,limit:t.Limit,totalRecordCount:i.TotalRecordCount,viewButton:!1,showLimit:!1,sortButton:!1,addLayoutButton:!1,currentLayout:u,updatePageSizeSetting:!1,viewIcon:"filter-list",layouts:"List,Poster,PosterCard,Timeline"});r.querySelector(".listTopPaging").innerHTML=d,"Poster"==u&&(n=LibraryBrowser.getPosterViewHtml({items:i.Items,shape:"square",context:"folders",showTitle:!0,showParentTitle:!0,lazy:!0,centerText:!0,overlayPlayButton:!0}));var y=r.querySelector("#items");y.innerHTML=n+d,ImageLoader.lazyChildren(y),e(".btnNextPage",r).on("click",function(){t.StartIndex+=t.Limit,s(r)}),e(".btnPreviousPage",r).on("click",function(){t.StartIndex-=t.Limit,s(r)}),LibraryBrowser.saveQueryValues(o(),t),Dashboard.hideLoadingMsg()})}var u=this,d={};u.renderTab=function(){s(i)}}});