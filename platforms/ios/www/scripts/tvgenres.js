define(["jQuery"],function(){return function(e,t,r){function n(){var e=a(),r=u[e];return r||(r=u[e]={query:{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Series",Recursive:!0,Fields:"DateCreated,SyncInfo,ItemCounts",StartIndex:0},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Thumb","Thumb")},r.query.ParentId=t.topParentId,LibraryBrowser.loadSavedQueryValues(e,r.query)),r}function o(){return n().query}function a(){return LibraryBrowser.getSavedQueryKey("genres")}function i(e){Dashboard.showLoadingMsg();var t=o();ApiClient.getGenres(Dashboard.getCurrentUserId(),t).then(function(r){var n="",o=s.getCurrentViewStyle();"Thumb"==o?n=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"backdrop",preferThumb:!0,context:"tv",showItemCounts:!0,centerText:!0,lazy:!0,overlayPlayButton:!0}):"ThumbCard"==o?n=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"backdrop",preferThumb:!0,context:"tv",showItemCounts:!0,cardLayout:!0,showTitle:!0,lazy:!0}):"PosterCard"==o?n=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"portrait",context:"tv",showItemCounts:!0,lazy:!0,cardLayout:!0,showTitle:!0}):"Poster"==o&&(n=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"portrait",context:"tv",centerText:!0,showItemCounts:!0,lazy:!0,overlayPlayButton:!0}));var i=e.querySelector("#items");i.innerHTML=n,ImageLoader.lazyChildren(i),LibraryBrowser.saveQueryValues(a(),t),Dashboard.hideLoadingMsg()})}var s=this,u={};s.getViewStyles=function(){return"Poster,PosterCard,Thumb,ThumbCard".split(",")},s.getCurrentViewStyle=function(){return n(r).view},s.setCurrentViewStyle=function(e){n(r).view=e,LibraryBrowser.saveViewSetting(a(r),e),i(r)},s.enableViewSelection=!0,s.renderTab=function(){i(r)},r.querySelector(".btnSelectView").addEventListener("click",function(e){LibraryBrowser.showLayoutMenu(e.target,s.getCurrentViewStyle(),s.getViewStyles())}),r.querySelector(".btnSelectView").addEventListener("layoutchange",function(e){s.setCurrentViewStyle(e.detail.viewStyle)})}});