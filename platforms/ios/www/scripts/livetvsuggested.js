define(["libraryBrowser","cardBuilder","scrollStyles","emby-itemscontainer","emby-tabs","emby-button"],function(e,t){function r(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function o(){return r()?"overflowPortrait":"portrait"}function n(){return r()?12:8}function a(e){Dashboard.showLoadingMsg(),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!0,limit:2*n(),ImageTypeLimit:1,EnableImageTypes:"Primary",EnableTotalRecordCount:!1}).then(function(t){s(e,t.Items,"activeProgramItems","play"),Dashboard.hideLoadingMsg()})}function i(e){a(e),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:n(),IsMovie:!1,IsSports:!1,IsKids:!1,IsSeries:!0,EnableTotalRecordCount:!1}).then(function(t){s(e,t.Items,"upcomingProgramItems")}),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:n(),IsMovie:!0,EnableTotalRecordCount:!1}).then(function(t){s(e,t.Items,"upcomingTvMovieItems",null,o())}),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:n(),IsSports:!0,EnableTotalRecordCount:!1}).then(function(t){s(e,t.Items,"upcomingSportsItems")}),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:n(),IsKids:!0,EnableTotalRecordCount:!1}).then(function(t){s(e,t.Items,"upcomingKidsItems")})}function s(e,o,n,a,i){var s=t.getCardsHtml({items:o,shape:i||(r()?"autooverflow":"auto"),showTitle:!0,centerText:!0,coverImage:!0,overlayText:!1,lazy:!0,overlayMoreButton:"play"!=a,overlayPlayButton:"play"==a,allowBottomPadding:!r()}),d=e.querySelector("."+n);d.innerHTML=s,ImageLoader.lazyChildren(d)}return function(t,o){function n(e,r){var n=e.querySelector(".pageTabContent[data-index='"+r+"']"),i=[];switch(r){case 0:break;case 1:document.body.classList.add("autoScrollY"),i.push("scripts/livetvguide");break;case 2:document.body.classList.remove("autoScrollY"),i.push("scripts/livetvchannels");break;case 3:document.body.classList.remove("autoScrollY"),i.push("scripts/livetvrecordings");break;case 4:document.body.classList.remove("autoScrollY"),i.push("scripts/livetvseriestimers")}require(i,function(e){0==r&&(a.tabContent=n);var i=s[r];i||(i=r?new e(t,o,n):a,s[r]=i,i.initTab&&i.initTab()),-1==d.indexOf(r)&&(d.push(r),i.renderTab())})}var a=this;a.initTab=function(){for(var e=t.querySelector(".pageTabContent[data-index='0']"),o=e.querySelectorAll(".itemsContainer"),n=0,a=o.length;a>n;n++)r()?(o[n].classList.add("hiddenScrollX"),o[n].classList.remove("vertical-wrap")):(o[n].classList.remove("hiddenScrollX"),o[n].classList.add("vertical-wrap"))},a.renderTab=function(){var e=t.querySelector(".pageTabContent[data-index='0']");i(e)};var s=[],d=[],l=t.querySelector(".libraryViewNav");e.configurePaperLibraryTabs(t,l,t.querySelectorAll(".pageTabContent"),[0,2,3,4]),l.addEventListener("tabchange",function(e){n(t,parseInt(e.detail.selectedTabIndex))}),t.addEventListener("viewbeforehide",function(){document.body.classList.remove("autoScrollY")}),AppInfo.enableHeadRoom&&require(["headroom-window"],function(e){e.add(l),a.headroom=e}),t.addEventListener("viewdestroy",function(){a.headroom&&a.headroom.remove(l),s.forEach(function(e){e.destroy&&e.destroy()})})}});