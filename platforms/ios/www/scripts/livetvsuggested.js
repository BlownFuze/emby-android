define(["libraryBrowser","scrollStyles"],function(e){function t(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function r(){return t()?"overflowPortrait":"portrait"}function n(){return t()?12:8}function o(e){Dashboard.showLoadingMsg(),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!0,limit:2*n(),ImageTypeLimit:1,EnableImageTypes:"Primary",EnableTotalRecordCount:!1}).then(function(t){a(e,t.Items,"activeProgramItems","play"),Dashboard.hideLoadingMsg()})}function i(e){o(e),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:n(),IsMovie:!1,IsSports:!1,IsKids:!1,IsSeries:!0,EnableTotalRecordCount:!1}).then(function(t){a(e,t.Items,"upcomingProgramItems")}),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:n(),IsMovie:!0,EnableTotalRecordCount:!1}).then(function(t){a(e,t.Items,"upcomingTvMovieItems",null,r())}),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:n(),IsSports:!0,EnableTotalRecordCount:!1}).then(function(t){a(e,t.Items,"upcomingSportsItems")}),ApiClient.getLiveTvRecommendedPrograms({userId:Dashboard.getCurrentUserId(),IsAiring:!1,HasAired:!1,limit:n(),IsKids:!0,EnableTotalRecordCount:!1}).then(function(t){a(e,t.Items,"upcomingKidsItems")})}function a(r,n,o,i,a){var s=e.getPosterViewHtml({items:n,shape:a||(t()?"autooverflow":"auto"),showTitle:!0,centerText:!0,coverImage:!0,overlayText:!1,lazy:!0,overlayMoreButton:"play"!=i,overlayPlayButton:"play"==i}),d=r.querySelector("."+o);d.innerHTML=s,ImageLoader.lazyChildren(d)}return function(r,n){function o(e,t){var o=e.querySelector(".pageTabContent[data-index='"+t+"']"),i=[];switch(t){case 0:break;case 1:document.body.classList.add("autoScrollY"),i.push("scripts/livetvguide");break;case 2:document.body.classList.remove("autoScrollY"),i.push("scripts/livetvchannels");break;case 3:document.body.classList.remove("autoScrollY"),i.push("scripts/livetvrecordings");break;case 4:document.body.classList.remove("autoScrollY"),i.push("scripts/livetvseriestimers")}require(i,function(e){0==t&&(a.tabContent=o);var i=s[t];i||(i=t?new e(r,n,o):a,s[t]=i,i.initTab&&i.initTab()),-1==d.indexOf(t)&&(d.push(t),i.renderTab())})}var a=this;a.initTab=function(){for(var e=r.querySelector(".pageTabContent[data-index='0']"),n=e.querySelectorAll(".itemsContainer"),o=0,i=n.length;i>o;o++)t()?n[o].classList.add("hiddenScrollX"):n[o].classList.remove("hiddenScrollX"),LibraryBrowser.createCardMenus(n[o])},a.renderTab=function(){var e=r.querySelector(".pageTabContent[data-index='0']");i(e)};var s=[],d=[],l=r.querySelector(".libraryViewNav"),c="tv.html",u=n.topParentId;u&&(c+="?topParentId="+u),e.configurePaperLibraryTabs(r,l,r.querySelectorAll(".pageTabContent"),[0,2,3,4]),l.addEventListener("tabchange",function(e){o(r,parseInt(e.detail.selectedTabIndex))}),r.addEventListener("viewbeforehide",function(){document.body.classList.remove("autoScrollY")}),r.addEventListener("viewdestroy",function(){s.forEach(function(e){e.destroy&&e.destroy()})})}});