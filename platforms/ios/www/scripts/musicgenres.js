define(["jQuery"],function(e){return function(r,t,i){function a(){var e=n(),r=d[e];return r||(r=d[e]={query:{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Audio,MusicVideo",Recursive:!0,Fields:"DateCreated,SyncInfo,ItemCounts",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Thumb","Thumb")},r.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(e,r.query)),r}function o(){return a().query}function n(){return LibraryBrowser.getSavedQueryKey("genres")}function s(r){Dashboard.showLoadingMsg();var t=o();ApiClient.getMusicGenres(Dashboard.getCurrentUserId(),t).then(function(i){window.scrollTo(0,0);var o="",u=a().view;e(".listTopPaging",r).html(LibraryBrowser.getQueryPagingHtml({startIndex:t.StartIndex,limit:t.Limit,totalRecordCount:i.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1,addLayoutButton:!0,currentLayout:u})),"Thumb"==u?o=LibraryBrowser.getPosterViewHtml({items:i.Items,shape:"backdrop",preferThumb:!0,showItemCounts:!0,context:"music",lazy:!0,centerText:!0,overlayPlayButton:!0}):"ThumbCard"==u?o=LibraryBrowser.getPosterViewHtml({items:i.Items,shape:"backdrop",preferThumb:!0,context:"music",showItemCounts:!0,cardLayout:!0,lazy:!0,showTitle:!0}):"Poster"==u&&(o=LibraryBrowser.getPosterViewHtml({items:i.Items,shape:"portrait",context:"music",centerText:!0,showItemCounts:!0,lazy:!0}));var d=r.querySelector("#items");d.innerHTML=o,ImageLoader.lazyChildren(d),e(".btnNextPage",r).on("click",function(){t.StartIndex+=t.Limit,s(r)}),e(".btnPreviousPage",r).on("click",function(){t.StartIndex-=t.Limit,s(r)}),e(".btnChangeLayout",r).on("layoutchange",function(e,t){a().view=t,LibraryBrowser.saveViewSetting(n(),t),s(r)}),LibraryBrowser.saveQueryValues(n(),t),Dashboard.hideLoadingMsg()})}var u=this,d={};u.renderTab=function(){s(i)}}});