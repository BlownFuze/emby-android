define(["jQuery","listViewStyle"],function(e){function t(e){Dashboard.showLoadingMsg(),ApiClient.getJSON(ApiClient.getUrl("Dlna/ProfileInfos")).then(function(t){i(e,t),n(e,t),Dashboard.hideLoadingMsg()})}function i(e,t){l(e,e.querySelector(".customProfiles"),t.filter(function(e){return"User"==e.Type}))}function n(e,t){l(e,e.querySelector(".systemProfiles"),t.filter(function(e){return"System"==e.Type}))}function l(t,i,n){var l="";n.length&&(l+='<div class="paperList">');for(var o=0,r=n.length;r>o;o++){var s=n[o];l+='<div class="listItem">',l+="<a item-icon class='clearLink listItemIconContainer' href='dlnaprofile.html?id="+s.Id+"'>",l+='<i class="md-icon listItemIcon">dvr</i>',l+="</a>",l+='<div class="listItemBody">',l+="<a class='clearLink' href='dlnaprofile.html?id="+s.Id+"'>",l+="<div>"+s.Name+"</div>",l+="</a>",l+="</div>","User"==s.Type&&(l+='<button type="button" is="paper-icon-button-light" class="btnDeleteProfile" data-profileid="'+s.Id+'" title="'+Globalize.translate("ButtonDelete")+'"><i class="md-icon">delete</i></button>'),l+="</div>"}n.length&&(l+="</div>"),i.innerHTML=l,e(".btnDeleteProfile",i).on("click",function(){var e=this.getAttribute("data-profileid");a(t,e)})}function a(e,i){require(["confirm"],function(n){n(Globalize.translate("MessageConfirmProfileDeletion"),Globalize.translate("HeaderConfirmProfileDeletion")).then(function(){Dashboard.showLoadingMsg(),ApiClient.ajax({type:"DELETE",url:ApiClient.getUrl("Dlna/Profiles/"+i)}).then(function(){Dashboard.hideLoadingMsg(),t(e)})})})}function o(){return[{href:"dlnasettings.html",name:Globalize.translate("TabSettings")},{href:"dlnaprofiles.html",name:Globalize.translate("TabProfiles")}]}e(document).on("pageshow","#dlnaProfilesPage",function(){LibraryMenu.setTabs("dlna",1,o);var e=this;t(e)})});