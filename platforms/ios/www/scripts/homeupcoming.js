!function(){function e(e){Dashboard.showLoadingMsg();var t=AppInfo.hasLowImageBandwidth&&!r()?24:40,o={Limit:t,Fields:"AirTime,UserData,SeriesStudio,SyncInfo",UserId:Dashboard.getCurrentUserId(),ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb"};ApiClient.getJSON(ApiClient.getUrl("Shows/Upcoming",o)).then(function(r){var t=r.Items;e.querySelector(".noItemsMessage").style.display=t.length?"none":"block";var o=e.querySelector("#upcomingItems");a(o,t),Dashboard.hideLoadingMsg(),LibraryBrowser.setLastRefreshed(e)})}function r(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function t(){return r()?"overflowBackdrop":"backdrop"}function a(e,a){var o,n,i=[],s="",m=[];for(o=0,n=a.length;n>o;o++){var c=a[o],d="";if(c.PremiereDate)try{d=LibraryBrowser.getFutureDateText(parseISO8601Date(c.PremiereDate,{toLocal:!0}),!0)}catch(h){}d!=s?(m.length&&i.push({name:s,items:m}),s=d,m=[c]):m.push(c)}var l="";for(o=0,n=i.length;n>o;o++){var u=i[o];l+='<div class="homePageSection">',l+='<h1 class="listHeader">'+u.name+"</h1>",l+=r()?'<div class="itemsContainer hiddenScrollX">':'<div class="itemsContainer">',l+=LibraryBrowser.getPosterViewHtml({items:u.items,showLocationTypeIndicator:!1,shape:t(),showTitle:!0,showPremiereDate:!0,preferThumb:!0,lazy:!0,showDetailsMenu:!0,centerText:!0,context:"home-upcoming"}),l+="</div>",l+="</div>"}e.innerHTML=l,ImageLoader.lazyChildren(e)}window.HomePage.renderUpcoming=function(r,t){LibraryBrowser.needsRefresh(t)&&e(t)}}(jQuery,document);