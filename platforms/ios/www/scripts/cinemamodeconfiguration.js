!function(e,o){function n(o,n){e(".chkMovies",o).checked(n.EnableIntrosForMovies),e(".chkEpisodes",o).checked(n.EnableIntrosForEpisodes),e(".chkMyMovieTrailers",o).checked(n.EnableIntrosFromMoviesInLibrary),e(".chkUpcomingTheaterTrailers",o).checked(n.EnableIntrosFromUpcomingTrailers),e(".chkUpcomingDvdTrailers",o).checked(n.EnableIntrosFromUpcomingDvdMovies),e(".chkUpcomingStreamingTrailers",o).checked(n.EnableIntrosFromUpcomingStreamingMovies),e(".chkOtherTrailers",o).checked(n.EnableIntrosFromSimilarMovies),e(".chkUnwatchedOnly",o).checked(!n.EnableIntrosForWatchedContent),e(".chkEnableParentalControl",o).checked(n.EnableIntrosParentalControl),e("#txtCustomIntrosPath",o).val(n.CustomIntroPath||""),e("#txtNumTrailers",o).val(n.TrailerLimit),Dashboard.hideLoadingMsg()}function r(){Dashboard.showLoadingMsg();var o=this,n=e(o).parents(".page");return ApiClient.getNamedConfiguration("cinemamode").then(function(o){o.CustomIntroPath=e("#txtCustomIntrosPath",n).val(),o.TrailerLimit=e("#txtNumTrailers",n).val(),o.EnableIntrosForMovies=e(".chkMovies",n).checked(),o.EnableIntrosForEpisodes=e(".chkEpisodes",n).checked(),o.EnableIntrosFromMoviesInLibrary=e(".chkMyMovieTrailers",n).checked(),o.EnableIntrosForWatchedContent=!e(".chkUnwatchedOnly",n).checked(),o.EnableIntrosParentalControl=e(".chkEnableParentalControl",n).checked(),o.EnableIntrosFromUpcomingTrailers=e(".chkUpcomingTheaterTrailers",n).checked(),o.EnableIntrosFromUpcomingDvdMovies=e(".chkUpcomingDvdTrailers",n).checked(),o.EnableIntrosFromUpcomingStreamingMovies=e(".chkUpcomingStreamingTrailers",n).checked(),o.EnableIntrosFromSimilarMovies=e(".chkOtherTrailers",n).checked(),ApiClient.updateNamedConfiguration("cinemamode",o).then(Dashboard.processServerConfigurationUpdateResult)}),!1}e(o).on("pageinit","#cinemaModeConfigurationPage",function(){var o=this;e("#btnSelectCustomIntrosPath",o).on("click.selectDirectory",function(){require(["directorybrowser"],function(n){var r=new n;r.show({callback:function(n){n&&e("#txtCustomIntrosPath",o).val(n),r.close()},header:Globalize.translate("HeaderSelectCustomIntrosPath")})})}),e(".cinemaModeConfigurationForm").off("submit",r).on("submit",r)}).on("pageshow","#cinemaModeConfigurationPage",function(){Dashboard.showLoadingMsg();var o=this;ApiClient.getNamedConfiguration("cinemamode").then(function(e){n(o,e)}),AppInfo.enableSupporterMembership?e(".lnkSupporterLearnMore",o).show():e(".lnkSupporterLearnMore",o).hide()})}(jQuery,document,window);