!function(e){function r(){var e=o(),r=a[e];return r||(r=a[e]={query:{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Movie",Recursive:!0,Fields:"DateCreated,SyncInfo,ItemCounts",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Thumb","Thumb")},r.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(e,r.query)),r}function t(){return r().query}function o(){return LibraryBrowser.getSavedQueryKey("genres")}function i(a){Dashboard.showLoadingMsg();var n=t();ApiClient.getGenres(Dashboard.getCurrentUserId(),n).then(function(t){window.scrollTo(0,0);var s="",u=r().view;e(".listTopPaging",a).html(LibraryBrowser.getQueryPagingHtml({startIndex:n.StartIndex,limit:n.Limit,totalRecordCount:t.TotalRecordCount,viewButton:!1,showLimit:!1,updatePageSizeSetting:!1,addLayoutButton:!0,currentLayout:u})).trigger("create"),"List"==u?s=LibraryBrowser.getListViewHtml({items:t.Items,sortBy:n.SortBy}):"Thumb"==u?s=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"backdrop",preferThumb:!0,context:"movies",showItemCounts:!0,centerText:!0,lazy:!0}):"ThumbCard"==u?s=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"backdrop",preferThumb:!0,context:"movies",showItemCounts:!0,cardLayout:!0,showTitle:!0,lazy:!0}):"PosterCard"==u?s=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"portrait",context:"movies",showItemCounts:!0,lazy:!0,cardLayout:!0,showTitle:!0}):"Poster"==u&&(s=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"portrait",context:"movies",centerText:!0,showItemCounts:!0,lazy:!0}));var m=a.querySelector(".itemsContainer");m.innerHTML=s,ImageLoader.lazyChildren(m),e(".btnNextPage",a).on("click",function(){n.StartIndex+=n.Limit,i(a)}),e(".btnPreviousPage",a).on("click",function(){n.StartIndex-=n.Limit,i(a)}),e(".btnChangeLayout",a).on("layoutchange",function(e,t){r().view=t,LibraryBrowser.saveViewSetting(o(),t),i(a)}),LibraryBrowser.saveQueryValues(o(),n),Dashboard.hideLoadingMsg()})}var a={};window.MoviesPage.renderGenresTab=function(e,r){LibraryBrowser.needsRefresh(r)&&i(r)}}(jQuery,document);