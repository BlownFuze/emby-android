define(["jQuery"],function(e){function t(e,t){e.querySelector(".txtDevicePath").value="",e.querySelector(".chkFavorite").checked=!1,t?ApiClient.getNamedConfiguration("livetv").then(function(r){var n=r.TunerHosts.filter(function(e){return e.Id==t})[0];e.querySelector(".txtDevicePath").value=n.Url||"",e.querySelector(".chkFavorite").checked=n.ImportFavoritesOnly,e.querySelector(".chkEnabled").checked=n.IsEnabled}):e.querySelector(".chkEnabled").checked=!0}function r(e){Dashboard.showLoadingMsg();var t={Type:"hdhomerun",Url:e.querySelector(".txtDevicePath").value,ImportFavoritesOnly:e.querySelector(".chkFavorite").checked,IsEnabled:e.querySelector(".chkEnabled").checked,DataVersion:1},r=getParameterByName("id");r&&(t.Id=r),ApiClient.ajax({type:"POST",url:ApiClient.getUrl("LiveTv/TunerHosts"),data:JSON.stringify(t),contentType:"application/json"}).then(function(){Dashboard.processServerConfigurationUpdateResult(),Dashboard.navigate("livetvstatus.html")},function(){Dashboard.alert({message:Globalize.translate("ErrorSavingTvProvider")})})}e(document).on("pageinit","#liveTvTunerProviderHdHomerunPage",function(){var t=this;e("form",t).on("submit",function(){return r(t),!1})}).on("pageshow","#liveTvTunerProviderHdHomerunPage",function(){var e=getParameterByName("id"),r=this;t(r,e)})});