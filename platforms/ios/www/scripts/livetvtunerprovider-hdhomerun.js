define(["jQuery"],function(e){function r(e,r){e.querySelector(".txtDevicePath").value="",e.querySelector(".chkFavorite").checked=!1,r?ApiClient.getNamedConfiguration("livetv").then(function(t){var n=t.TunerHosts.filter(function(e){return e.Id==r})[0];e.querySelector(".txtDevicePath").value=n.Url||"",e.querySelector(".chkFavorite").checked=n.ImportFavoritesOnly,e.querySelector(".chkTranscode").checked=n.AllowHWTranscoding,e.querySelector(".chkEnabled").checked=n.IsEnabled}):e.querySelector(".chkEnabled").checked=!0}function t(e){Dashboard.showLoadingMsg();var r={Type:"hdhomerun",Url:e.querySelector(".txtDevicePath").value,ImportFavoritesOnly:e.querySelector(".chkFavorite").checked,AllowHWTranscoding:e.querySelector(".chkTranscode").checked,IsEnabled:e.querySelector(".chkEnabled").checked,DataVersion:1},t=getParameterByName("id");t&&(r.Id=t),ApiClient.ajax({type:"POST",url:ApiClient.getUrl("LiveTv/TunerHosts"),data:JSON.stringify(r),contentType:"application/json"}).then(function(){Dashboard.processServerConfigurationUpdateResult(),Dashboard.navigate("livetvstatus.html")},function(){Dashboard.alert({message:Globalize.translate("ErrorSavingTvProvider")})})}e(document).on("pageinit","#liveTvTunerProviderHdHomerunPage",function(){var r=this;e("form",r).on("submit",function(){return t(r),!1})}).on("pageshow","#liveTvTunerProviderHdHomerunPage",function(){var e=getParameterByName("id"),t=this;r(t,e)})});