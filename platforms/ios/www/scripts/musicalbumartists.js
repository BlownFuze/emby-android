!function(e){function t(){var e=a(),t=u[e];return t||(t=u[e]={query:{SortBy:"SortName",SortOrder:"Ascending",Recursive:!0,Fields:"PrimaryImageAspectRatio,SortName,DateCreated,SyncInfo,ItemCounts",StartIndex:0,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Poster","Poster")},t.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function r(){return t().query}function a(){return LibraryBrowser.getSavedQueryKey("albumartists")}function i(o,s){Dashboard.showLoadingMsg();var u=r();ApiClient.getAlbumArtists(Dashboard.getCurrentUserId(),u).then(function(r){window.scrollTo(0,0);var l=t().view,c="",d=LibraryBrowser.getQueryPagingHtml({startIndex:u.StartIndex,limit:u.Limit,totalRecordCount:r.TotalRecordCount,showLimit:!1,viewPanelClass:"albumArtistsViewPanel",updatePageSizeSetting:!1,addLayoutButton:!0,currentLayout:l,viewButton:!0,viewIcon:"filter-list"});o.querySelector(".listTopPaging").innerHTML=d,n(o,s),"List"==l?c=LibraryBrowser.getListViewHtml({items:r.Items,context:"music",sortBy:u.SortBy}):"Poster"==l?c=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"square",context:"music",showTitle:!0,coverImage:!0,lazy:!0,centerText:!0,overlayPlayButton:!0}):"PosterCard"==l&&(c=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"square",context:"music",showTitle:!0,coverImage:!0,lazy:!0,cardLayout:!0,showSongCount:!0}));var y=o.querySelector("#items");y.innerHTML=c+d,ImageLoader.lazyChildren(y),e(".btnNextPage",o).on("click",function(){u.StartIndex+=u.Limit,i(o,s)}),e(".btnPreviousPage",o).on("click",function(){u.StartIndex-=u.Limit,i(o,s)}),e(".btnChangeLayout",o).on("layoutchange",function(e,r){t().view=r,LibraryBrowser.saveViewSetting(a(),r),i(o,s)}),LibraryBrowser.saveQueryValues(a(),u),LibraryBrowser.setLastRefreshed(o),Dashboard.hideLoadingMsg()})}function n(t,a){var i=r();e(".chkStandardFilter",a).each(function(){var e=","+(i.Filters||""),t=this.getAttribute("data-filter");this.checked=-1!=e.indexOf(","+t)}),e(".alphabetPicker",t).alphaValue(i.NameStartsWithOrGreater)}function o(e,a){if(!t().filtersLoaded){t().filtersLoaded=!0;var n=r();QueryFilters.loadFilters(a,Dashboard.getCurrentUserId(),n,function(){i(e,a)})}}function s(t,a){e(a).on("panelopen",function(){o(t,a)}),e(".chkStandardFilter",a).on("change",function(){var e=r(),n=this.getAttribute("data-filter"),o=e.Filters||"";o=(","+o).replace(","+n,"").substring(1),this.checked&&(o=o?o+","+n:n),e.StartIndex=0,e.Filters=o,i(t,a)}),e(".alphabetPicker",t).on("alphaselect",function(e,n){var o=r();o.NameStartsWithOrGreater=n,o.StartIndex=0,i(t,a)}).on("alphaclear",function(){var e=r();e.NameStartsWithOrGreater="",i(t,a)})}var u={};window.MusicPage.initAlbumArtistsTab=function(e,t){var r=e.querySelector(".albumArtistsViewPanel");s(t,r)},window.MusicPage.renderAlbumArtistsTab=function(e,t){if(LibraryBrowser.needsRefresh(t)){var r=e.querySelector(".albumArtistsViewPanel");i(t,r)}}}(jQuery,document);