define(["jQuery"],function(e){function a(a,n,l){a.querySelector("#chkEnablePlayTo").checked=n.EnablePlayTo,a.querySelector("#chkEnableDlnaDebugLogging").checked=n.EnableDebugLog,e("#txtClientDiscoveryInterval",a).val(n.ClientDiscoveryIntervalSeconds),e("#chkEnableServer",a).checked(n.EnableServer),e("#chkBlastAliveMessages",a).checked(n.BlastAliveMessages),e("#txtBlastInterval",a).val(n.BlastAliveMessageIntervalSeconds),e("#chkEnableMovieFolders",a).checked(n.EnableMovieFolders);var t=l.map(function(e){return'<option value="'+e.Id+'">'+e.Name+"</option>"}).join("");e("#selectUser",a).html(t).val(n.DefaultUserId||""),Dashboard.hideLoadingMsg()}function n(){Dashboard.showLoadingMsg();var a=this;return ApiClient.getNamedConfiguration("dlna").then(function(n){n.EnablePlayTo=a.querySelector("#chkEnablePlayTo").checked,n.EnableDebugLog=a.querySelector("#chkEnableDlnaDebugLogging").checked,n.ClientDiscoveryIntervalSeconds=e("#txtClientDiscoveryInterval",a).val(),n.EnableServer=e("#chkEnableServer",a).checked(),n.BlastAliveMessages=e("#chkBlastAliveMessages",a).checked(),n.BlastAliveMessageIntervalSeconds=e("#txtBlastInterval",a).val(),n.DefaultUserId=e("#selectUser",a).val(),n.EnableMovieFolders=e("#chkEnableMovieFolders",a).checked(),ApiClient.updateNamedConfiguration("dlna",n).then(Dashboard.processServerConfigurationUpdateResult)}),!1}function l(){return[{href:"dlnasettings.html",name:Globalize.translate("TabSettings")},{href:"dlnaprofiles.html",name:Globalize.translate("TabProfiles")}]}e(document).on("pageinit","#dlnaSettingsPage",function(){e(".dlnaSettingsForm").off("submit",n).on("submit",n)}).on("pageshow","#dlnaSettingsPage",function(){LibraryMenu.setTabs("dlna",0,l),Dashboard.showLoadingMsg();var e=this,n=ApiClient.getNamedConfiguration("dlna"),t=ApiClient.getUsers();Promise.all([n,t]).then(function(n){a(e,n[0],n[1])})})});