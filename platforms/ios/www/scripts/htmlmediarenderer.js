!function(){function e(e){function i(){"video"==e.type&&window.StatusBar&&StatusBar.hide()}function o(){"video"==e.type&&window.StatusBar&&StatusBar.show()}function a(){o(),Events.trigger(C,"ended")}function d(){Events.trigger(C,"timeupdate")}function s(){Events.trigger(C,"volumechange")}function u(e){var n=e.target;n.removeEventListener("playing",u),$(".mediaPlayerAudioContainer").hide()}function l(){Events.trigger(C,"playing")}function v(){Events.trigger(C,"play")}function c(){Events.trigger(C,"pause")}function m(){Events.trigger(C,"click")}function p(){Events.trigger(C,"dblclick")}function f(e){var n=e.target,t=n.error?n.error.code:"";Logger.log("Media element error code: "+t),o(),Events.trigger(C,"error")}function g(e){var n=e.target;n.removeEventListener("loadedmetadata",g),t||n.play()}function y(e){require(["hlsjs"],function(n){window.Hls=n,e()})}function E(e){var n=e,t=n.split("#");return t.length>1&&(t=t[t.length-1].split("="),2==t.length)?parseFloat(t[1]):0}function L(e){i();var n=e.target;n.removeEventListener("playing",L);var t=!C.enableCustomVideoControls();if(t&&$(n).attr("controls","controls"),r){var o=(C.currentSrc()||"").toLowerCase(),a=E(o);if(a&&-1!=o.indexOf(".m3u8")){var d=browserInfo.safari?2500:0;d?setTimeout(function(){n.currentTime=a},d):n.currentTime=a}}}function w(){var e=$(".mediaPlayerAudio");if(!e.length){var n="",t=!MediaPlayer.canAutoPlayAudio();n+=t?'<div class="mediaPlayerAudioContainer" style="position: fixed;top: 40%;text-align: center;left: 0;right: 0;"><div class="mediaPlayerAudioContainerInner">':'<div class="mediaPlayerAudioContainer" style="display:none;padding: 1em;background: #222;"><div class="mediaPlayerAudioContainerInner">',n+='<audio class="mediaPlayerAudio" crossorigin="anonymous" controls>',n+="</audio></div></div>",$(document.body).append(n),e=$(".mediaPlayerAudio")}return e=e[0],e.addEventListener("playing",u),e.addEventListener("timeupdate",d),e.addEventListener("ended",a),e.addEventListener("volumechange",s),e.addEventListener("error",f),e.addEventListener("pause",c),e.addEventListener("play",v),e.addEventListener("playing",l),e}function h(e){return e&&-1==e.indexOf(".m3u8")?!1:MediaPlayer.canPlayHls()&&!MediaPlayer.canPlayNativeHls()}function k(){var n="",t=!C.enableCustomVideoControls(),r=!browserInfo.safari&&e.poster?' poster="'+e.poster+'"':"";n+=t&&AppInfo.isNativeApp&&browserInfo.android?'<video class="itemVideo" id="itemVideo" preload="metadata" autoplay="autoplay" crossorigin="anonymous"'+r+" webkit-playsinline>":t?'<video class="itemVideo" id="itemVideo" preload="metadata" autoplay="autoplay" crossorigin="anonymous"'+r+' controls="controls" webkit-playsinline>':'<video class="itemVideo" id="itemVideo" preload="metadata" autoplay="autoplay" crossorigin="anonymous"'+r+" webkit-playsinline>",n+="</video>";var i=$("#videoElement","#videoPlayer").prepend(n),o=$(".itemVideo",i)[0];return o.addEventListener("loadedmetadata",g),o.addEventListener("playing",L),o.addEventListener("timeupdate",d),o.addEventListener("ended",a),o.addEventListener("volumechange",s),o.addEventListener("voluplaymechange",v),o.addEventListener("pause",c),o.addEventListener("playing",l),o.addEventListener("click",m),o.addEventListener("dblclick",p),o.addEventListener("error",f),o}function A(e,n){var t=n.map(function(e){var n=e.isDefault?" default":"";return'<track kind="subtitles" src="'+e.url+'" srclang="'+e.language+'"'+n+"></track>"}).join("");t&&(e.innerHTML=t)}var b,T,C=this;C.currentTime=function(e){return b?null!=e?void(b.currentTime=e/1e3):T?1e3*T:1e3*(b.currentTime||0):void 0},C.duration=function(){return b?b.duration:null},C.stop=function(){if(b&&(b.pause(),t)){T=b.currentTime;try{t.destroy()}catch(e){Logger.log(e)}t=null}},C.pause=function(){b&&b.pause()},C.unpause=function(){b&&b.play()},C.volume=function(e){return b?null!=e?void(b.volume=e):b.volume:void 0};var P;C.setCurrentSrc=function(e,n,i,o){var a=b;if(!a)return void(P=null);if(!e)return P=null,a.src=null,a.src="",void(browserInfo.safari&&(a.src="files/dummy.mp4",a.play()));var d=e.url;AppInfo.isNativeApp&&browserInfo.safari&&(d=d.replace("file://","")),r=!1;var s=E(d),u=!1;if("audio"==a.tagName.toLowerCase())a.src=d,u=!0;else{if(t&&(t.destroy(),t=null),s&&(r=!0),o=o||[],h(d)){A(a,o);var l=new Hls;l.loadSource(d),l.attachMedia(a),l.on(Hls.Events.MANIFEST_PARSED,function(){a.play()}),t=l}else a.src=d,a.autoplay=!0,A(a,o),a.addEventListener("loadedmetadata",g),u=!0;for(var v=-1,c=0,m=o.length;m>c;c++)if(o[c].isDefault){v=c;break}C.setCurrentTrackElement(v)}P=d,u&&a.play()},C.currentSrc=function(){return b?P:void 0},C.paused=function(){return b?b.paused:!1},C.cleanup=function(){C.setCurrentSrc(null),T=null;var e=b;e&&("AUDIO"==e.tagName?(e.removeEventListener("timeupdate",d),e.removeEventListener("ended",a),e.removeEventListener("volumechange",s),e.removeEventListener("playing",u),e.removeEventListener("play",v),e.removeEventListener("pause",c),e.removeEventListener("playing",l),e.removeEventListener("error",f)):(e.removeEventListener("loadedmetadata",g),e.removeEventListener("playing",L),e.removeEventListener("timeupdate",d),e.removeEventListener("ended",a),e.removeEventListener("volumechange",s),e.removeEventListener("play",v),e.removeEventListener("pause",c),e.removeEventListener("playing",l),e.removeEventListener("click",m),e.removeEventListener("dblclick",p),e.removeEventListener("error",f)),"audio"!=e.tagName.toLowerCase()&&$(e).remove()),o()},C.supportsTextTracks=function(){return null==n&&(n=null!=document.createElement("video").textTracks),n},C.setCurrentTrackElement=function(e){Logger.log("Setting new text track index to: "+e);for(var n=b.textTracks,t=["disabled","showing","hidden"],r=0;r<n.length;r++){var i;i=e==r?1:0,Logger.log("Setting track "+r+" mode to: "+i);var o=!1;isNaN(n[r].mode)||(o=!0),n[r].mode=o?i:t[i]}},C.updateTextStreamUrls=function(e){if(C.supportsTextTracks()){for(var n=b.textTracks,t=0;t<n.length;t++){var r=n[t];try{for(;r.cues.length;)r.removeCue(r.cues[0])}catch(i){Logger.log("Error removing cue from textTrack")}}$("track",b).each(function(){this.src=replaceQueryString(this.src,"startPositionTicks",e)})}},C.enableCustomVideoControls=function(){return AppInfo.isNativeApp&&browserInfo.safari?-1!=navigator.userAgent.toLowerCase().indexOf("iphone")?!0:!1:C.canAutoPlayVideo()&&!browserInfo.mobile},C.canAutoPlayVideo=function(){return AppInfo.isNativeApp?!0:browserInfo.mobile?!1:!0},C.init=function(){return new Promise(function(n){"video"==e.type&&h()?y(n):n()})},b="audio"==e.type?w():k()}var n,t,r;window.AudioRenderer||(window.AudioRenderer=function(n){return n=n||{},n.type="audio",new e(n)}),window.VideoRenderer||(window.VideoRenderer=function(n){return n=n||{},n.type="video",new e(n)})}();