define(["jQuery"],function(e){function n(n,t){e(".liveTvSettingsForm",n).show(),e(".noLiveTvServices",n).hide(),e("#selectGuideDays",n).val(t.GuideDays||""),e("#chkMovies",n).checked(t.EnableMovieProviders),e("#chkOrganize",n).checked(t.EnableAutoOrganize),e("#chkConvertRecordings",n).checked(t.EnableRecordingEncoding),e("#txtRecordingPath",n).val(t.RecordingPath||""),e("#txtPrePaddingMinutes",n).val(t.PrePaddingSeconds/60),e("#txtPostPaddingMinutes",n).val(t.PostPaddingSeconds/60),Dashboard.hideLoadingMsg()}function t(){Dashboard.showLoadingMsg();var n=this;return ApiClient.getNamedConfiguration("livetv").then(function(t){t.GuideDays=e("#selectGuideDays",n).val()||null,t.EnableMovieProviders=e("#chkMovies",n).checked(),t.EnableAutoOrganize=e("#chkOrganize",n).checked(),t.EnableRecordingEncoding=e("#chkConvertRecordings",n).checked(),t.RecordingPath=e("#txtRecordingPath",n).val()||null,t.PrePaddingSeconds=60*e("#txtPrePaddingMinutes",n).val(),t.PostPaddingSeconds=60*e("#txtPostPaddingMinutes",n).val(),ApiClient.updateNamedConfiguration("livetv",t).then(Dashboard.processServerConfigurationUpdateResult)}),!1}function i(){return[{href:"livetvstatus.html",name:Globalize.translate("TabDevices")},{href:"livetvsettings.html",name:Globalize.translate("TabSettings")},{href:"appservices.html?context=livetv",name:Globalize.translate("TabServices")}]}e(document).on("pageinit","#liveTvSettingsPage",function(){var n=this;e(".liveTvSettingsForm").off("submit",t).on("submit",t),e("#btnSelectRecordingPath",n).on("click.selectDirectory",function(){require(["directorybrowser"],function(t){var i=new t;i.show({callback:function(t){t&&e("#txtRecordingPath",n).val(t),i.close()}})})})}).on("pageshow","#liveTvSettingsPage",function(){LibraryMenu.setTabs("livetvadmin",1,i),Dashboard.showLoadingMsg();var e=this;ApiClient.getNamedConfiguration("livetv").then(function(t){n(e,t)}),e.querySelector(".btnSupporterForConverting a").href=AppInfo.enableSupporterMembership?"https://emby.media/premiere":"#"})});