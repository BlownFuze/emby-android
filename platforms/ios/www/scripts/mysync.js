define(["loading","localsync"],function(e){function t(t){if(LocalSync.isSupported()){var n=LocalSync.getSyncStatus();t.querySelector(".labelSyncStatus").innerHTML=Globalize.translate("LabelLocalSyncStatusValue",n),"Active"==n?e.show():e.hide(),"Active"==n?t.querySelector(".btnSyncNow").classList.add("hide"):t.querySelector(".btnSyncNow").classList.remove("hide")}}function n(e){LocalSync.sync(),require(["toast"],function(e){e(Globalize.translate("MessageSyncStarted"))}),t(e)}return function(c){var a;c.querySelector(".btnSyncNow").addEventListener("click",function(){n(c)}),LocalSync.isSupported()?c.querySelector(".localSyncStatus").classList.remove("hide"):c.querySelector(".localSyncStatus").classList.add("hide"),c.addEventListener("viewbeforeshow",function(){var e=this;t(e),a=setInterval(function(){t(e)},5e3)}),c.addEventListener("viewbeforehide",function(){e.hide(),a&&(clearInterval(a),a=null)})}});