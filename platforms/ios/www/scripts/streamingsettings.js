define(["jQuery"],function(e){function t(t,n){e("#txtRemoteClientBitrateLimit",t).val(n.RemoteClientBitrateLimit/1e6||""),ApiClient.getNamedConfiguration("channels").then(function(n){e("#selectChannelResolution",t).val(n.PreferredStreamingWidth||"")}),Dashboard.hideLoadingMsg()}function n(){Dashboard.showLoadingMsg();var t=this;return ApiClient.getServerConfiguration().then(function(n){n.RemoteClientBitrateLimit=parseInt(1e6*parseFloat(e("#txtRemoteClientBitrateLimit",t).val()||"0")),ApiClient.updateServerConfiguration(n).then(Dashboard.processServerConfigurationUpdateResult)}),ApiClient.getNamedConfiguration("channels").then(function(n){n.PreferredStreamingWidth=e("#selectChannelResolution",t).val()||null,ApiClient.updateNamedConfiguration("channels",n).then(Dashboard.processServerConfigurationUpdateResult)}),!1}e(document).on("pageinit","#streamingSettingsPage",function(){var t=this;e("#btnSelectTranscodingTempPath",t).on("click.selectDirectory",function(){require(["directorybrowser"],function(n){var i=new n;i.show({callback:function(n){n&&e("#txtTranscodingTempPath",t).val(n),i.close()},header:Globalize.translate("HeaderSelectTranscodingPath"),instruction:Globalize.translate("HeaderSelectTranscodingPathHelp")})})}),e(".streamingSettingsForm").off("submit",n).on("submit",n)}).on("pageshow","#streamingSettingsPage",function(){Dashboard.showLoadingMsg();var e=this;ApiClient.getServerConfiguration().then(function(n){t(e,n)})})});