define(["jQuery"],function(e){function t(e){Dashboard.showLoadingMsg();var t=i(),a=ApiClient.getUsers();Promise.all([t,a]).then(function(t){H=t[0],o(e,H,t[1]),Dashboard.hideLoadingMsg()})}function i(){var e=getParameterByName("id"),t=e?"Dlna/Profiles/"+e:"Dlna/Profiles/Default";return ApiClient.getJSON(ApiClient.getUrl(t))}function o(t,i,o){e("#txtName",t).val(i.Name),e(".chkMediaType",t).each(function(){this.checked=-1!=(i.SupportedMediaTypes||"").split(",").indexOf(this.getAttribute("data-value"))}).checkboxradio("refresh"),e("#chkEnableAlbumArtInDidl",t).checked(i.EnableAlbumArtInDidl).checkboxradio("refresh"),e("#chkEnableSingleImageLimit",t).checked(i.EnableSingleAlbumArtLimit).checkboxradio("refresh"),r(t,i.XmlRootAttributes||[]);var l=i.Identification||{};a(t,l.Headers||[]),s(t,i.SubtitleProfiles||[]),e("#txtInfoFriendlyName",t).val(i.FriendlyName||""),e("#txtInfoModelName",t).val(i.ModelName||""),e("#txtInfoModelNumber",t).val(i.ModelNumber||""),e("#txtInfoModelDescription",t).val(i.ModelDescription||""),e("#txtInfoModelUrl",t).val(i.ModelUrl||""),e("#txtInfoManufacturer",t).val(i.Manufacturer||""),e("#txtInfoManufacturerUrl",t).val(i.ManufacturerUrl||""),e("#txtInfoSerialNumber",t).val(i.SerialNumber||""),e("#txtIdFriendlyName",t).val(l.FriendlyName||""),e("#txtIdModelName",t).val(l.ModelName||""),e("#txtIdModelNumber",t).val(l.ModelNumber||""),e("#txtIdModelDescription",t).val(l.ModelDescription||""),e("#txtIdModelUrl",t).val(l.ModelUrl||""),e("#txtIdManufacturer",t).val(l.Manufacturer||""),e("#txtIdManufacturerUrl",t).val(l.ManufacturerUrl||""),e("#txtIdSerialNumber",t).val(l.SerialNumber||""),e("#txtIdDeviceDescription",t).val(l.DeviceDescription||""),e("#txtAlbumArtPn",t).val(i.AlbumArtPn||""),e("#txtAlbumArtMaxWidth",t).val(i.MaxAlbumArtWidth||""),e("#txtAlbumArtMaxHeight",t).val(i.MaxAlbumArtHeight||""),e("#txtIconMaxWidth",t).val(i.MaxIconWidth||""),e("#txtIconMaxHeight",t).val(i.MaxIconHeight||""),e("#chkIgnoreTranscodeByteRangeRequests",t).checked(i.IgnoreTranscodeByteRangeRequests).checkboxradio("refresh"),e("#txtMaxAllowedBitrate",t).val(i.MaxStreamingBitrate||""),e("#txtMusicStreamingTranscodingBitrate",t).val(i.MusicStreamingTranscodingBitrate||""),e("#chkRequiresPlainFolders",t).checked(i.RequiresPlainFolders).checkboxradio("refresh"),e("#chkRequiresPlainVideoItems",t).checked(i.RequiresPlainVideoItems).checkboxradio("refresh"),e("#txtProtocolInfo",t).val(i.ProtocolInfo||""),e("#txtXDlnaCap",t).val(i.XDlnaCap||""),e("#txtXDlnaDoc",t).val(i.XDlnaDoc||""),e("#txtSonyAggregationFlags",t).val(i.SonyAggregationFlags||""),i.DirectPlayProfiles=i.DirectPlayProfiles||[],i.TranscodingProfiles=i.TranscodingProfiles||[],i.ContainerProfiles=i.ContainerProfiles||[],i.CodecProfiles=i.CodecProfiles||[],i.ResponseProfiles=i.ResponseProfiles||[];var n="<option></option>"+o.map(function(e){return'<option value="'+e.Id+'">'+e.Name+"</option>"}).join("");e("#selectUser",t).html(n).val(i.UserId||""),p(t,i)}function a(t,i){var o=0,l='<ul data-role="listview" data-inset="true" data-split-icon="delete">'+i.map(function(e){var t="<li>";return t+='<a href="#">',t+='<div style="font-weight:normal;">'+e.Name+": "+(e.Value||"")+"</div>",t+='<div style="font-weight:normal;">'+(e.Match||"")+"</div>",t+="</a>",t+='<a class="btnDeleteIdentificationHeader" href="#" data-index="'+o+'"></a>',t+="</li>",o++,t}).join("")+"</ul>",n=e(".httpHeaderIdentificationList",t).html(l).trigger("create");e(".btnDeleteIdentificationHeader",n).on("click",function(){var e=parseInt(this.getAttribute("data-index"));H.Identification.Headers.splice(e,1),a(t,H.Identification.Headers)})}function l(t,i){U=null==i,i=i||{},B=i;var o=e("#identificationHeaderPopup",t);e("#txtIdentificationHeaderName",o).val(i.Name||""),e("#txtIdentificationHeaderValue",o).val(i.Value||""),e("#selectMatchType",o).val(i.Match||"Equals"),o.popup("open")}function n(t){B.Name=e("#txtIdentificationHeaderName",t).val(),B.Value=e("#txtIdentificationHeaderValue",t).val(),B.Match=e("#selectMatchType",t).val(),U&&H.Identification.Headers.push(B),a(t,H.Identification.Headers),B=null,e("#identificationHeaderPopup",t).popup("close")}function r(t,i){var o=0,a='<ul data-role="listview" data-inset="true" data-split-icon="delete">'+i.map(function(e){var t="<li>";return t+='<a href="#">',t+='<div style="font-weight:normal;">'+e.Name+" = "+(e.Value||"")+"</div>",t+="</a>",t+='<a class="btnDeleteXmlAttribute" href="#" data-icon="delete" data-index="'+o+'"></a>',t+="</li>",o++,t}).join("")+"</ul>",l=e(".xmlDocumentAttributeList",t).html(a).trigger("create");e(".btnDeleteXmlAttribute",l).on("click",function(){var e=parseInt(this.getAttribute("data-index"));H.XmlRootAttributes.splice(e,1),r(t,H.XmlRootAttributes)})}function d(t,i){U=null==i,i=i||{},B=i;var o=e("#xmlAttributePopup",t);e("#txtXmlAttributeName",o).val(i.Name||""),e("#txtXmlAttributeValue",o).val(i.Value||""),o.popup("open")}function c(t){B.Name=e("#txtXmlAttributeName",t).val(),B.Value=e("#txtXmlAttributeValue",t).val(),U&&H.XmlRootAttributes.push(B),r(t,H.XmlRootAttributes),B=null,e("#xmlAttributePopup",t).popup("close")}function s(t,i){var o=0,a='<ul data-role="listview" data-inset="true" data-split-icon="delete">'+i.map(function(e){var t="<li>";return t+='<a href="#" class="lnkEditSubProfile" data-index="'+o+'">',t+='<div style="font-weight:normal;">'+(e.Format||"")+"</div>",t+="</a>",t+='<a class="btnDeleteProfile" href="#" data-icon="delete" data-index="'+o+'"></a>',t+="</li>",o++,t}).join("")+"</ul>",l=e(".subtitleProfileList",t).html(a).trigger("create");e(".btnDeleteProfile",l).on("click",function(){var e=parseInt(this.getAttribute("data-index"));H.SubtitleProfiles.splice(e,1),s(t,H.SubtitleProfiles)}),e(".lnkEditSubProfile",l).on("click",function(){var e=parseInt(this.getAttribute("data-index"));u(t,H.SubtitleProfiles[e])})}function u(t,i){U=null==i,i=i||{},B=i;var o=e("#subtitleProfilePopup",t);e("#txtSubtitleProfileFormat",o).val(i.Format||""),e("#selectSubtitleProfileMethod",o).val(i.Method||""),e("#selectSubtitleProfileDidlMode",o).val(i.DidlMode||""),o.popup("open")}function f(t){B.Format=e("#txtSubtitleProfileFormat",t).val(),B.Method=e("#selectSubtitleProfileMethod",t).val(),B.DidlMode=e("#selectSubtitleProfileDidlMode",t).val(),U&&H.SubtitleProfiles.push(B),s(t,H.SubtitleProfiles),B=null,e("#subtitleProfilePopup",t).popup("close")}function p(e,t){b(e,t.DirectPlayProfiles),h(e,t.TranscodingProfiles),A(e,t.ContainerProfiles),I(e,t.CodecProfiles),V(e,t.ResponseProfiles)}function P(t){B.Type=e("#selectDirectPlayProfileType",t).val(),B.Container=e("#txtDirectPlayContainer",t).val(),B.AudioCodec=e("#txtDirectPlayAudioCodec",t).val(),B.VideoCodec=e("#txtDirectPlayVideoCodec",t).val(),U&&H.DirectPlayProfiles.push(B),p(t,H),B=null,e("#popupEditDirectPlayProfile",t).popup("close")}function b(t,i){var o="";o+='<ul data-role="listview" data-inset="true" data-split-icon="delete">';for(var a,l=0,n=i.length;n>l;l++){var r=i[l];r.Type!==a&&(o+='<li data-role="list-divider">'+r.Type+"</li>",a=r.Type),o+="<li>",o+='<a data-profileindex="'+l+'" class="lnkEditSubProfile" href="#">',o+="<p>"+Globalize.translate("ValueContainer").replace("{0}",r.Container||X)+"</p>","Video"==r.Type?(o+="<p>"+Globalize.translate("ValueVideoCodec").replace("{0}",r.VideoCodec||X)+"</p>",o+="<p>"+Globalize.translate("ValueAudioCodec").replace("{0}",r.AudioCodec||X)+"</p>"):"Audio"==r.Type&&(o+="<p>"+Globalize.translate("ValueCodec").replace("{0}",r.AudioCodec||X)+"</p>"),o+="</a>",o+='<a href="#" data-icon="delete" class="btnDeleteProfile" data-profileindex="'+l+'">Delete</a>',o+="</li>"}o+="</ul>";var d=e(".directPlayProfiles",t).html(o).trigger("create");e(".btnDeleteProfile",d).on("click",function(){var e=this.getAttribute("data-profileindex");g(t,e)}),e(".lnkEditSubProfile",d).on("click",function(){var e=parseInt(this.getAttribute("data-profileindex"));m(t,H.DirectPlayProfiles[e])})}function g(e,t){H.DirectPlayProfiles.splice(t,1),b(e,H.DirectPlayProfiles)}function m(t,i){U=null==i,i=i||{},B=i;var o=e("#popupEditDirectPlayProfile",t);e("#selectDirectPlayProfileType",o).val(i.Type||"Video").trigger("change"),e("#txtDirectPlayContainer",o).val(i.Container||""),e("#txtDirectPlayAudioCodec",o).val(i.AudioCodec||""),e("#txtDirectPlayVideoCodec",o).val(i.VideoCodec||""),o.popup("open")}function h(t,i){var o="";o+='<ul data-role="listview" data-inset="true" data-split-icon="delete">';for(var a,l=0,n=i.length;n>l;l++){var r=i[l];r.Type!==a&&(o+='<li data-role="list-divider">'+r.Type+"</li>",a=r.Type),o+="<li>",o+='<a data-profileindex="'+l+'" class="lnkEditSubProfile" href="#">',o+="<p>Protocol: "+(r.Protocol||"Http")+"</p>",o+="<p>"+Globalize.translate("ValueContainer").replace("{0}",r.Container||X)+"</p>","Video"==r.Type?(o+="<p>"+Globalize.translate("ValueVideoCodec").replace("{0}",r.VideoCodec||X)+"</p>",o+="<p>"+Globalize.translate("ValueAudioCodec").replace("{0}",r.AudioCodec||X)+"</p>"):"Audio"==r.Type&&(o+="<p>"+Globalize.translate("ValueCodec").replace("{0}",r.AudioCodec||X)+"</p>"),o+="</a>",o+='<a href="#" data-icon="delete" class="btnDeleteProfile" data-profileindex="'+l+'">Delete</a>',o+="</li>"}o+="</ul>";var d=e(".transcodingProfiles",t).html(o).trigger("create");e(".btnDeleteProfile",d).on("click",function(){var e=this.getAttribute("data-profileindex");x(t,e)}),e(".lnkEditSubProfile",d).on("click",function(){var e=parseInt(this.getAttribute("data-profileindex"));v(t,H.TranscodingProfiles[e])})}function v(t,i){U=null==i,i=i||{},B=i;var o=e("#transcodingProfilePopup",t);e("#selectTranscodingProfileType",o).val(i.Type||"Video").trigger("change"),e("#txtTranscodingContainer",o).val(i.Container||""),e("#txtTranscodingAudioCodec",o).val(i.AudioCodec||""),e("#txtTranscodingVideoCodec",o).val(i.VideoCodec||""),e("#selectTranscodingProtocol",o).val(i.Protocol||"Http"),e("#chkEnableMpegtsM2TsMode",o).checked(i.EnableMpegtsM2TsMode||!1).checkboxradio("refresh"),e("#chkEstimateContentLength",o).checked(i.EstimateContentLength||!1).checkboxradio("refresh"),e("#chkReportByteRangeRequests",o).checked("Bytes"==i.TranscodeSeekInfo).checkboxradio("refresh"),e(".radioTabButton:first",o).trigger("click"),o.popup("open")}function x(e,t){H.TranscodingProfiles.splice(t,1),h(e,H.TranscodingProfiles)}function C(t){B.Type=e("#selectTranscodingProfileType",t).val(),B.Container=e("#txtTranscodingContainer",t).val(),B.AudioCodec=e("#txtTranscodingAudioCodec",t).val(),B.VideoCodec=e("#txtTranscodingVideoCodec",t).val(),B.Protocol=e("#selectTranscodingProtocol",t).val(),B.Context="Streaming",B.EnableMpegtsM2TsMode=e("#chkEnableMpegtsM2TsMode",t).checked(),B.EstimateContentLength=e("#chkEstimateContentLength",t).checked(),B.TranscodeSeekInfo=e("#chkReportByteRangeRequests",t).checked()?"Bytes":"Auto",U&&H.TranscodingProfiles.push(B),p(t,H),B=null,e("#transcodingProfilePopup",t).popup("close")}function A(t,i){var o="";o+='<ul data-role="listview" data-inset="true" data-split-icon="delete">';for(var a,l=0,n=i.length;n>l;l++){var r=i[l];r.Type!==a&&(o+='<li data-role="list-divider">'+r.Type+"</li>",a=r.Type),o+="<li>",o+='<a data-profileindex="'+l+'" class="lnkEditSubProfile" href="#">',o+="<p>"+Globalize.translate("ValueContainer").replace("{0}",r.Container||X)+"</p>",r.Conditions&&r.Conditions.length&&(o+="<p>",o+=Globalize.translate("ValueConditions").replace("{0}",r.Conditions.map(function(e){return e.Property}).join(", ")),o+="</p>"),o+="</a>",o+='<a href="#" data-icon="delete" class="btnDeleteProfile" data-profileindex="'+l+'">Delete</a>',o+="</li>"}o+="</ul>";var d=e(".containerProfiles",t).html(o).trigger("create");e(".btnDeleteProfile",d).on("click",function(){var e=this.getAttribute("data-profileindex");D(t,e)}),e(".lnkEditSubProfile",d).on("click",function(){var e=parseInt(this.getAttribute("data-profileindex"));y(t,H.ContainerProfiles[e])})}function D(e,t){H.ContainerProfiles.splice(t,1),A(e,H.ContainerProfiles)}function y(t,i){U=null==i,i=i||{},B=i;var o=e("#containerProfilePopup",t);e("#selectContainerProfileType",o).val(i.Type||"Video").trigger("change"),e("#txtContainerProfileContainer",o).val(i.Container||""),e(".radioTabButton:first",o).trigger("click"),o.popup("open")}function M(t){B.Type=e("#selectContainerProfileType",t).val(),B.Container=e("#txtContainerProfileContainer",t).val(),U&&H.ContainerProfiles.push(B),p(t,H),B=null,e("#containerProfilePopup",t).popup("close")}function I(t,i){var o="";o+='<ul data-role="listview" data-inset="true" data-split-icon="delete">';for(var a,l=0,n=i.length;n>l;l++){var r=i[l],d=r.Type.replace("VideoAudio","Video Audio");d!==a&&(o+='<li data-role="list-divider">'+d+"</li>",a=d),o+="<li>",o+='<a data-profileindex="'+l+'" class="lnkEditSubProfile" href="#">',o+="<p>"+Globalize.translate("ValueCodec").replace("{0}",r.Codec||X)+"</p>",r.Conditions&&r.Conditions.length&&(o+="<p>",o+=Globalize.translate("ValueConditions").replace("{0}",r.Conditions.map(function(e){return e.Property}).join(", ")),o+="</p>"),o+="</a>",o+='<a href="#" data-icon="delete" class="btnDeleteProfile" data-profileindex="'+l+'">Delete</a>',o+="</li>"}o+="</ul>";var c=e(".codecProfiles",t).html(o).trigger("create");e(".btnDeleteProfile",c).on("click",function(){var e=this.getAttribute("data-profileindex");T(t,e)}),e(".lnkEditSubProfile",c).on("click",function(){var e=parseInt(this.getAttribute("data-profileindex"));S(t,H.CodecProfiles[e])})}function T(e,t){H.CodecProfiles.splice(t,1),I(e,H.CodecProfiles)}function S(t,i){U=null==i,i=i||{},B=i;var o=e("#codecProfilePopup",t);e("#selectCodecProfileType",o).val(i.Type||"Video").trigger("change"),e("#txtCodecProfileCodec",o).val(i.Codec||""),e(".radioTabButton:first",o).trigger("click"),o.popup("open")}function k(t){B.Type=e("#selectCodecProfileType",t).val(),B.Codec=e("#txtCodecProfileCodec",t).val(),U&&H.CodecProfiles.push(B),p(t,H),B=null,e("#codecProfilePopup",t).popup("close")}function V(t,i){var o="";o+='<ul data-role="listview" data-inset="true" data-split-icon="delete">';for(var a,l=0,n=i.length;n>l;l++){var r=i[l];r.Type!==a&&(o+='<li data-role="list-divider">'+r.Type+"</li>",a=r.Type),o+="<li>",o+='<a data-profileindex="'+l+'" class="lnkEditSubProfile" href="#">',o+="<p>"+Globalize.translate("ValueContainer").replace("{0}",r.Container||X)+"</p>","Video"==r.Type?(o+="<p>"+Globalize.translate("ValueVideoCodec").replace("{0}",r.VideoCodec||X)+"</p>",o+="<p>"+Globalize.translate("ValueAudioCodec").replace("{0}",r.AudioCodec||X)+"</p>"):"Audio"==r.Type&&(o+="<p>"+Globalize.translate("ValueCodec").replace("{0}",r.AudioCodec||X)+"</p>"),r.Conditions&&r.Conditions.length&&(o+="<p>",o+=Globalize.translate("ValueConditions").replace("{0}",r.Conditions.map(function(e){return e.Property}).join(", ")),o+="</p>"),o+="</a>",o+='<a href="#" data-icon="delete" class="btnDeleteProfile" data-profileindex="'+l+'">Delete</a>',o+="</li>"}o+="</ul>";var d=e(".mediaProfiles",t).html(o).trigger("create");e(".btnDeleteProfile",d).on("click",function(){var e=this.getAttribute("data-profileindex");R(t,e)}),e(".lnkEditSubProfile",d).on("click",function(){var e=parseInt(this.getAttribute("data-profileindex"));F(t,H.ResponseProfiles[e])})}function R(e,t){H.ResponseProfiles.splice(t,1),V(e,H.ResponseProfiles)}function F(t,i){U=null==i,i=i||{},B=i;var o=e("#responseProfilePopup",t);e("#selectResponseProfileType",o).val(i.Type||"Video").trigger("change"),e("#txtResponseProfileContainer",o).val(i.Container||""),e("#txtResponseProfileAudioCodec",o).val(i.AudioCodec||""),e("#txtResponseProfileVideoCodec",o).val(i.VideoCodec||""),e(".radioTabButton:first",o).trigger("click"),o.popup("open")}function N(t){B.Type=e("#selectResponseProfileType",t).val(),B.Container=e("#txtResponseProfileContainer",t).val(),B.AudioCodec=e("#txtResponseProfileAudioCodec",t).val(),B.VideoCodec=e("#txtResponseProfileVideoCodec",t).val(),U&&H.ResponseProfiles.push(B),p(t,H),B=null,e("#responseProfilePopup",t).popup("close")}function E(e,t){w(e,t);var i=getParameterByName("id");i?ApiClient.ajax({type:"POST",url:ApiClient.getUrl("Dlna/Profiles/"+i),data:JSON.stringify(t),contentType:"application/json"}).then(function(){require(["toast"],function(e){e("Settings saved.")})}):ApiClient.ajax({type:"POST",url:ApiClient.getUrl("Dlna/Profiles"),data:JSON.stringify(t),contentType:"application/json"}).then(function(){Dashboard.navigate("dlnaprofiles.html")}),Dashboard.hideLoadingMsg()}function w(t,i){i.Name=e("#txtName",t).val(),i.EnableAlbumArtInDidl=e("#chkEnableAlbumArtInDidl",t).checked(),i.EnableSingleAlbumArtLimit=e("#chkEnableSingleImageLimit",t).checked(),i.SupportedMediaTypes=e(".chkMediaType:checked",t).get().map(function(e){return e.getAttribute("data-value")}).join(","),i.Identification=i.Identification||{},i.FriendlyName=e("#txtInfoFriendlyName",t).val(),i.ModelName=e("#txtInfoModelName",t).val(),i.ModelNumber=e("#txtInfoModelNumber",t).val(),i.ModelDescription=e("#txtInfoModelDescription",t).val(),i.ModelUrl=e("#txtInfoModelUrl",t).val(),i.Manufacturer=e("#txtInfoManufacturer",t).val(),i.ManufacturerUrl=e("#txtInfoManufacturerUrl",t).val(),i.SerialNumber=e("#txtInfoSerialNumber",t).val(),i.Identification.FriendlyName=e("#txtIdFriendlyName",t).val(),i.Identification.ModelName=e("#txtIdModelName",t).val(),i.Identification.ModelNumber=e("#txtIdModelNumber",t).val(),i.Identification.ModelDescription=e("#txtIdModelDescription",t).val(),i.Identification.ModelUrl=e("#txtIdModelUrl",t).val(),i.Identification.Manufacturer=e("#txtIdManufacturer",t).val(),i.Identification.ManufacturerUrl=e("#txtIdManufacturerUrl",t).val(),i.Identification.SerialNumber=e("#txtIdSerialNumber",t).val(),i.Identification.DeviceDescription=e("#txtIdDeviceDescription",t).val(),i.AlbumArtPn=e("#txtAlbumArtPn",t).val(),i.MaxAlbumArtWidth=e("#txtAlbumArtMaxWidth",t).val(),i.MaxAlbumArtHeight=e("#txtAlbumArtMaxHeight",t).val(),i.MaxIconWidth=e("#txtIconMaxWidth",t).val(),i.MaxIconHeight=e("#txtIconMaxHeight",t).val(),i.RequiresPlainFolders=e("#chkRequiresPlainFolders",t).checked(),i.RequiresPlainVideoItems=e("#chkRequiresPlainVideoItems",t).checked(),i.IgnoreTranscodeByteRangeRequests=e("#chkIgnoreTranscodeByteRangeRequests",t).checked(),i.MaxStreamingBitrate=e("#txtMaxAllowedBitrate",t).val(),i.MusicStreamingTranscodingBitrate=e("#txtMusicStreamingTranscodingBitrate",t).val(),i.ProtocolInfo=e("#txtProtocolInfo",t).val(),i.XDlnaCap=e("#txtXDlnaCap",t).val(),i.XDlnaDoc=e("#txtXDlnaDoc",t).val(),i.SonyAggregationFlags=e("#txtSonyAggregationFlags",t).val(),i.UserId=e("#selectUser",t).val()}var H,B,U,X=Globalize.translate("LabelAll");e(document).on("pageinit","#dlnaProfilePage",function(){var t=this;e(".radioTabButton",t).on("click",function(){e(this).siblings().removeClass("ui-btn-active"),e(this).addClass("ui-btn-active");var i="A"==this.tagName?this.getAttribute("data-value"):this.value,o=e("."+i,t);o.siblings(".tabContent").hide(),o.show()}),e("#selectDirectPlayProfileType",t).on("change",function(){"Video"==this.value?e("#fldDirectPlayVideoCodec",t).show():e("#fldDirectPlayVideoCodec",t).hide(),"Photo"==this.value?e("#fldDirectPlayAudioCodec",t).hide():e("#fldDirectPlayAudioCodec",t).show()}),e("#selectTranscodingProfileType",t).on("change",function(){"Video"==this.value?(e("#fldTranscodingVideoCodec",t).show(),e("#fldTranscodingProtocol",t).show(),e("#fldEnableMpegtsM2TsMode",t).show()):(e("#fldTranscodingVideoCodec",t).hide(),e("#fldTranscodingProtocol",t).hide(),e("#fldEnableMpegtsM2TsMode",t).hide()),"Photo"==this.value?(e("#fldTranscodingAudioCodec",t).hide(),e("#fldEstimateContentLength",t).hide(),e("#fldReportByteRangeRequests",t).hide()):(e("#fldTranscodingAudioCodec",t).show(),e("#fldEstimateContentLength",t).show(),e("#fldReportByteRangeRequests",t).show())}),e("#selectResponseProfileType",t).on("change",function(){"Video"==this.value?e("#fldResponseProfileVideoCodec",t).show():e("#fldResponseProfileVideoCodec",t).hide(),"Photo"==this.value?e("#fldResponseProfileAudioCodec",t).hide():e("#fldResponseProfileAudioCodec",t).show()}),e(".btnAddDirectPlayProfile",t).on("click",function(){m(t)}),e(".btnAddTranscodingProfile",t).on("click",function(){v(t)}),e(".btnAddContainerProfile",t).on("click",function(){y(t)}),e(".btnAddCodecProfile",t).on("click",function(){S(t)}),e(".btnAddResponseProfile",t).on("click",function(){F(t)}),e(".btnAddIdentificationHttpHeader",t).on("click",function(){l(t)}),e(".btnAddXmlDocumentAttribute",t).on("click",function(){d(t)}),e(".btnAddSubtitleProfile",t).on("click",function(){u(t)}),e(".dlnaProfileForm").off("submit",DlnaProfilePage.onSubmit).on("submit",DlnaProfilePage.onSubmit),e(".editDirectPlayProfileForm").off("submit",DlnaProfilePage.onDirectPlayFormSubmit).on("submit",DlnaProfilePage.onDirectPlayFormSubmit),e(".transcodingProfileForm").off("submit",DlnaProfilePage.onTranscodingProfileFormSubmit).on("submit",DlnaProfilePage.onTranscodingProfileFormSubmit),e(".containerProfileForm").off("submit",DlnaProfilePage.onContainerProfileFormSubmit).on("submit",DlnaProfilePage.onContainerProfileFormSubmit),e(".codecProfileForm").off("submit",DlnaProfilePage.onCodecProfileFormSubmit).on("submit",DlnaProfilePage.onCodecProfileFormSubmit),e(".editResponseProfileForm").off("submit",DlnaProfilePage.onResponseProfileFormSubmit).on("submit",DlnaProfilePage.onResponseProfileFormSubmit),e(".identificationHeaderForm").off("submit",DlnaProfilePage.onIdentificationHeaderFormSubmit).on("submit",DlnaProfilePage.onIdentificationHeaderFormSubmit),e(".xmlAttributeForm").off("submit",DlnaProfilePage.onXmlAttributeFormSubmit).on("submit",DlnaProfilePage.onXmlAttributeFormSubmit),e(".subtitleProfileForm").off("submit",DlnaProfilePage.onSubtitleProfileFormSubmit).on("submit",DlnaProfilePage.onSubtitleProfileFormSubmit)}).on("pageshow","#dlnaProfilePage",function(){var i=this;e("#radioInfo",i).trigger("click"),t(i)}),window.DlnaProfilePage={onSubmit:function(){Dashboard.showLoadingMsg();var t=this,i=e(t).parents(".page");return E(i,H),!1},onDirectPlayFormSubmit:function(){var t=this,i=e(t).parents(".page");return P(i),!1},onTranscodingProfileFormSubmit:function(){var t=this,i=e(t).parents(".page");return C(i),!1},onContainerProfileFormSubmit:function(){var t=this,i=e(t).parents(".page");return M(i),!1},onCodecProfileFormSubmit:function(){var t=this,i=e(t).parents(".page");return k(i),!1},onResponseProfileFormSubmit:function(){var t=this,i=e(t).parents(".page");return N(i),!1},onIdentificationHeaderFormSubmit:function(){var t=this,i=e(t).parents(".page");return n(i),!1},onXmlAttributeFormSubmit:function(){var t=this,i=e(t).parents(".page");return c(i),!1},onSubtitleProfileFormSubmit:function(){var t=this,i=e(t).parents(".page");return f(i),!1}}});