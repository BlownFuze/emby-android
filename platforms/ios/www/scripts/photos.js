!function(e){function t(e){var t=r(e),a=c[t];return a||(a=c[t]={query:{SortBy:"SortName",SortOrder:"Ascending",Fields:"PrimaryImageAspectRatio,SortName,SyncInfo",ImageTypeLimit:1,EnableImageTypes:"Primary",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()}},i(e,a.query),a.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(t,a.query)),a.query}function r(e){return LibraryBrowser.getSavedQueryKey("tab="+e)}function a(i,n){Dashboard.showLoadingMsg();var o=t(n);ApiClient.getItems(Dashboard.getCurrentUserId(),o).then(function(t){window.scrollTo(0,0);var s="",d=LibraryBrowser.getQueryPagingHtml({startIndex:o.StartIndex,limit:o.Limit,totalRecordCount:t.TotalRecordCount,viewButton:!1,showLimit:!1});i.querySelector(".listTopPaging").innerHTML=d,"Poster"==u&&(s=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"square",context:getParameterByName("context")||"photos",overlayText:!0,lazy:!0,coverImage:!0,showTitle:0==n,centerText:!0}));var c=i.querySelector(".itemsContainer");c.innerHTML=s+d,ImageLoader.lazyChildren(c),e(".btnNextPage",i).on("click",function(){o.StartIndex+=o.Limit,a(i,n)}),e(".btnPreviousPage",i).on("click",function(){o.StartIndex-=o.Limit,a(i,n)}),LibraryBrowser.saveQueryValues(r(n),o),Dashboard.hideLoadingMsg()})}function i(e,t){1==e?(t.Recursive=!0,t.MediaTypes="Photo"):2==e?(t.Recursive=!0,t.MediaTypes="Video"):0==e&&(t.Recursive=!1,t.MediaTypes=null),t.ParentId=getParameterByName("parentId")||LibraryMenu.getTopParentId()}function n(t,r,a){var i=Dashboard.getCurrentUserId(),n=e.extend({},r);n.StartIndex=0,n.Limit=null,n.MediaTypes="Photo",n.Recursive=!0,n.Filters="IsNotFolder",ApiClient.getItems(i,n).then(function(e){o(t,e.Items,a)})}function o(t,r,a){var i=e(window).width(),n=e(window).height(),o=r.map(function(e){var t=ApiClient.getScaledImageUrl(e.Id,{tag:e.ImageTags.Primary,type:"Primary",maxWidth:i,maxHeight:n});return{title:e.Name,href:t}}),s=r.map(function(e){return e.Id}).indexOf(a);-1==s&&(s=0),require(["swipebox"],function(){e.swipebox(o,{initialIndexOnArray:s,hideBarsDelay:3e4})})}function s(){var r=e(this).parents(".page")[0],a=LibraryBrowser.getListItemInfo(this);if("Photo"==a.mediaType){var i=r.querySelector("neon-animated-pages").selected,n=t(i);return Photos.startSlideshow(r,n,a.id),!1}}function d(e,t){switch(t){case 0:a(e.querySelector(".albumTabContent"),0);break;case 1:a(e.querySelector(".photoTabContent"),1);break;case 2:a(e.querySelector(".videoTabContent"),2)}}var u=LibraryBrowser.getDefaultItemsView("Poster","Poster"),c={};pageIdOn("pageinit","photosPage",function(){var t=this,r=t.querySelector("paper-tabs"),a="photos.html",i=LibraryMenu.getTopParentId();i&&(a+="?topParentId="+i),LibraryBrowser.configurePaperLibraryTabs(t,r,t.querySelector("neon-animated-pages"),a),t.querySelector("neon-animated-pages").addEventListener("tabchange",function(e){d(t,parseInt(e.target.selected))}),e(t).on("click",".mediaItem",s)}),window.Photos={startSlideshow:n}}(jQuery,document);