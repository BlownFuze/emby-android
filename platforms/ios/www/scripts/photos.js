!function(e){function t(e){var t=r(e),a=c[t];return a||(a=c[t]={query:{SortBy:"SortName",SortOrder:"Ascending",Fields:"PrimaryImageAspectRatio,SortName,SyncInfo",ImageTypeLimit:1,EnableImageTypes:"Primary",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()}},n(e,a.query),a.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(t,a.query)),a.query}function r(e){return LibraryBrowser.getSavedQueryKey("tab="+e)}function a(n,o){Dashboard.showLoadingMsg();var i=t(o);ApiClient.getItems(Dashboard.getCurrentUserId(),i).then(function(t){window.scrollTo(0,0);var s="",u=LibraryBrowser.getQueryPagingHtml({startIndex:i.StartIndex,limit:i.Limit,totalRecordCount:t.TotalRecordCount,viewButton:!1,showLimit:!1});n.querySelector(".listTopPaging").innerHTML=u,"Poster"==d&&(s=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"square",context:getParameterByName("context")||"photos",overlayText:!0,lazy:!0,coverImage:!0,showTitle:0==o,centerText:!0}));var c=n.querySelector(".itemsContainer");c.innerHTML=s+u,ImageLoader.lazyChildren(c),e(".btnNextPage",n).on("click",function(){i.StartIndex+=i.Limit,a(n,o)}),e(".btnPreviousPage",n).on("click",function(){i.StartIndex-=i.Limit,a(n,o)}),LibraryBrowser.saveQueryValues(r(o),i),Dashboard.hideLoadingMsg()})}function n(e,t){1==e?(t.Recursive=!0,t.MediaTypes="Photo"):2==e?(t.Recursive=!0,t.MediaTypes="Video"):0==e&&(t.Recursive=!1,t.MediaTypes=null),t.ParentId=getParameterByName("parentId")||LibraryMenu.getTopParentId()}function o(t,r,a){var n=Dashboard.getCurrentUserId(),o=e.extend({},r);o.StartIndex=0,o.Limit=null,o.MediaTypes="Photo",o.Recursive=!0,o.Filters="IsNotFolder",ApiClient.getItems(n,o).then(function(e){i(t,e.Items,a)})}function i(e,t,r){var a=t.map(function(e){return e.Id}).indexOf(r);-1==a&&(a=0),require(["slideshow"],function(e){var r=new e({showTitle:!1,cover:!1,items:t,startIndex:a,interval:7e3,interactive:!0});r.show()})}function s(){var r=e(this).parents(".page")[0],a=LibraryBrowser.getListItemInfo(this);if("Photo"==a.mediaType){var n=r.querySelector("neon-animated-pages").selected,o=t(n);return Photos.startSlideshow(r,o,a.id),!1}}function u(e,t){switch(t){case 0:a(e.querySelector(".albumTabContent"),0);break;case 1:a(e.querySelector(".photoTabContent"),1);break;case 2:a(e.querySelector(".videoTabContent"),2)}}var d="Poster",c={};pageIdOn("pageinit","photosPage",function(){var t=this,r=t.querySelector("paper-tabs"),a="photos.html",n=LibraryMenu.getTopParentId();n&&(a+="?topParentId="+n),LibraryBrowser.configurePaperLibraryTabs(t,r,t.querySelector("neon-animated-pages"),a),t.querySelector("neon-animated-pages").addEventListener("tabchange",function(e){u(t,parseInt(e.target.selected))}),e(t).on("click",".mediaItem",s)}),window.Photos={startSlideshow:o}}(jQuery,document);