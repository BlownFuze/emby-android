!function(e){function t(e){var t=r(e),a=c[t];return a||(a=c[t]={query:{SortBy:"SortName",SortOrder:"Ascending",Fields:"PrimaryImageAspectRatio,SortName,SyncInfo",ImageTypeLimit:1,EnableImageTypes:"Primary",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()}},n(e,a.query),a.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(t,a.query)),a.query}function r(e){return LibraryBrowser.getSavedQueryKey("tab="+e)}function a(n,i){Dashboard.showLoadingMsg();var o=t(i);ApiClient.getItems(Dashboard.getCurrentUserId(),o).then(function(t){window.scrollTo(0,0);var s="",d=LibraryBrowser.getQueryPagingHtml({startIndex:o.StartIndex,limit:o.Limit,totalRecordCount:t.TotalRecordCount,viewButton:!1,showLimit:!1});n.querySelector(".listTopPaging").innerHTML=d,"Poster"==u&&(s=LibraryBrowser.getPosterViewHtml({items:t.Items,shape:"square",context:getParameterByName("context")||"photos",overlayText:!0,lazy:!0,coverImage:!0,showTitle:0==i,centerText:!0}));var c=n.querySelector(".itemsContainer");c.innerHTML=s+d,ImageLoader.lazyChildren(c),e(".btnNextPage",n).on("click",function(){o.StartIndex+=o.Limit,a(n,i)}),e(".btnPreviousPage",n).on("click",function(){o.StartIndex-=o.Limit,a(n,i)}),LibraryBrowser.saveQueryValues(r(i),o),Dashboard.hideLoadingMsg()})}function n(e,t){1==e?(t.Recursive=!0,t.MediaTypes="Photo"):2==e?(t.Recursive=!0,t.MediaTypes="Video"):0==e&&(t.Recursive=!1,t.MediaTypes=null),t.ParentId=getParameterByName("parentId")||LibraryMenu.getTopParentId()}function i(t,r,a){var n=Dashboard.getCurrentUserId(),i=e.extend({},r);i.StartIndex=0,i.Limit=null,i.MediaTypes="Photo",i.Recursive=!0,i.Filters="IsNotFolder",ApiClient.getItems(n,i).then(function(e){o(t,e.Items,a)})}function o(t,r,a){var n=e(window).width(),i=e(window).height(),o=r.map(function(e){var t=ApiClient.getScaledImageUrl(e.Id,{tag:e.ImageTags.Primary,type:"Primary",maxWidth:n,maxHeight:i});return{title:e.Name,href:t}}),s=r.map(function(e){return e.Id}).indexOf(a);-1==s&&(s=0),require(["swipebox"],function(){e.swipebox(o,{initialIndexOnArray:s,hideBarsDelay:3e4})})}function s(){var r=e(this).parents(".page")[0],a=LibraryBrowser.getListItemInfo(this);if("Photo"==a.mediaType){var n=r.querySelector("neon-animated-pages").selected,i=t(n);return Photos.startSlideshow(r,i,a.id),!1}}function d(e,t){switch(t){case 0:a(e.querySelector(".albumTabContent"),0);break;case 1:a(e.querySelector(".photoTabContent"),1);break;case 2:a(e.querySelector(".videoTabContent"),2)}}var u="Poster",c={};pageIdOn("pageinit","photosPage",function(){var t=this,r=t.querySelector("paper-tabs"),a="photos.html",n=LibraryMenu.getTopParentId();n&&(a+="?topParentId="+n),LibraryBrowser.configurePaperLibraryTabs(t,r,t.querySelector("neon-animated-pages"),a),t.querySelector("neon-animated-pages").addEventListener("tabchange",function(e){d(t,parseInt(e.target.selected))}),e(t).on("click",".mediaItem",s)}),window.Photos={startSlideshow:i}}(jQuery,document);