define(["jQuery","alphaPicker"],function(e,r){return function(t,a,i){function n(e){var r=s(e),t=d[r];return t||(t=d[r]={query:{SortBy:"SortName",SortOrder:"Ascending",Recursive:!0,Fields:"PrimaryImageAspectRatio,SortName,DateCreated,SyncInfo,ItemCounts",StartIndex:0,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(r)||LibraryBrowser.getDefaultItemsView("Poster","Poster")},t.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(r,t.query)),t}function o(e){return n(e).query}function s(e){return e.savedQueryKey||(e.savedQueryKey=LibraryBrowser.getSavedQueryKey("artists")),e.savedQueryKey}function u(r){Dashboard.showLoadingMsg();var t=o(r);ApiClient.getArtists(Dashboard.getCurrentUserId(),t).then(function(a){window.scrollTo(0,0);var i=n(r).view,o="",y=LibraryBrowser.getQueryPagingHtml({startIndex:t.StartIndex,limit:t.Limit,totalRecordCount:a.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1,addLayoutButton:!0,currentLayout:i,filterButton:!0});r.querySelector(".listTopPaging").innerHTML=y,l(r),"List"==i?o=LibraryBrowser.getListViewHtml({items:a.Items,context:"music",sortBy:t.SortBy}):"Poster"==i?o=LibraryBrowser.getPosterViewHtml({items:a.Items,shape:"square",context:"music",showTitle:!0,coverImage:!0,lazy:!0,centerText:!0,overlayPlayButton:!0}):"PosterCard"==i&&(o=LibraryBrowser.getPosterViewHtml({items:a.Items,shape:"square",context:"music",showTitle:!0,coverImage:!0,lazy:!0,cardLayout:!0,showSongCount:!0}));var d=r.querySelector("#items");d.innerHTML=o+y,ImageLoader.lazyChildren(d),e(".btnNextPage",r).on("click",function(){t.StartIndex+=t.Limit,u(r)}),e(".btnPreviousPage",r).on("click",function(){t.StartIndex-=t.Limit,u(r)}),e(".btnChangeLayout",r).on("layoutchange",function(e,t){n(r).view=t,LibraryBrowser.saveViewSetting(s(r),t),u(r)}),e(".btnFilter",r).on("click",function(){c(r)}),LibraryBrowser.saveQueryValues(s(r),t),Dashboard.hideLoadingMsg()})}function c(e){require(["components/filterdialog/filterdialog"],function(r){var t=new r({query:o(e),mode:"artists"});Events.on(t,"filterchange",function(){u(e)}),t.show()})}function l(e){var r=o(e);y.alphaPicker.value(r.NameStartsWithOrGreater)}var y=this,d={},g=i.querySelector(".alphaPicker");g.addEventListener("alphavaluechanged",function(e){var r=e.detail.value,t=o(i);t.NameStartsWithOrGreater=r,t.StartIndex=0,u(i)}),y.alphaPicker=new r({element:g,valueChangeEvent:"click"}),y.renderTab=function(){u(i)}}});