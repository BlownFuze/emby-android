define(["jQuery"],function(e){function t(t){Dashboard.showLoadingMsg();var a=ApiClient;a.getJSON(a.getUrl("Startup/Configuration")).then(function(n){n.PreferredMetadataLanguage=e("#selectLanguage",t).val(),n.MetadataCountryCode=e("#selectCountry",t).val(),n.SaveLocalMeta=t.querySelector(".chkSaveLocalMetadata").checked,n.EnableInternetProviders=t.querySelector(".chkEnableInternetProviders").checked,a.ajax({type:"POST",data:n,url:a.getUrl("Startup/Configuration")}).then(function(){i()})})}function a(e,t){var a="";a+="<option value=''></option>";for(var n=0,o=t.length;o>n;n++){var r=t[n];a+="<option value='"+r.TwoLetterISOLanguageName+"'>"+r.DisplayName+"</option>"}e.innerHTML=a}function n(e,t){var a="";a+="<option value=''></option>";for(var n=0,o=t.length;o>n;n++){var r=t[n];a+="<option value='"+r.TwoLetterISORegionName+"'>"+r.DisplayName+"</option>"}e.innerHTML=a}function o(t,o,r,i){a(t.querySelector("#selectLanguage"),r),n(t.querySelector("#selectCountry"),i),e("#selectLanguage",t).val(o.PreferredMetadataLanguage),e("#selectCountry",t).val(o.MetadataCountryCode),Dashboard.hideLoadingMsg()}function r(e){Dashboard.showLoadingMsg();var t=ApiClient,a=t.getJSON(t.getUrl("Startup/Configuration")),n=t.getCultures(),r=t.getCountries();Promise.all([a,n,r]).then(function(t){o(e,t[0],t[1],t[2])})}function i(){Dashboard.navigate("wizardlivetvtuner.html")}function u(){var e=this;return t(e),!1}e(document).on("pageinit","#wizardSettingsPage",function(){var t=this;e(".wizardSettingsForm",t).off("submit",u).on("submit",u)}).on("pageshow","#wizardSettingsPage",function(){var e=this;r(e)})});