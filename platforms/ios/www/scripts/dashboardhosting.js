define(["jQuery"],function(t){function e(e,a){t("#txtPortNumber",e).val(a.HttpServerPortNumber),t("#txtPublicPort",e).val(a.PublicPort),t("#txtPublicHttpsPort",e).val(a.PublicHttpsPort),t("#chkEnableHttps",e).checked(a.EnableHttps),t("#txtHttpsPort",e).val(a.HttpsPortNumber),t("#txtDdns",e).val(a.WanDdns||""),t("#txtCertificatePath",e).val(a.CertificatePath||""),t("#chkEnableUpnp",e).checked(a.EnableUPnP),Dashboard.hideLoadingMsg()}function a(){Dashboard.showLoadingMsg();var e=this;return ApiClient.getServerConfiguration().then(function(a){a.HttpServerPortNumber=t("#txtPortNumber",e).val(),a.PublicPort=t("#txtPublicPort",e).val(),a.PublicHttpsPort=t("#txtPublicHttpsPort",e).val(),a.EnableHttps=t("#chkEnableHttps",e).checked(),a.HttpsPortNumber=t("#txtHttpsPort",e).val(),a.EnableUPnP=t("#chkEnableUpnp",e).checked(),a.WanDdns=t("#txtDdns",e).val(),a.CertificatePath=t("#txtCertificatePath",e).val(),ApiClient.updateServerConfiguration(a).then(Dashboard.processServerConfigurationUpdateResult)}),!1}function r(){return[{href:"dashboardhosting.html",name:Globalize.translate("TabHosting")},{href:"serversecurity.html",name:Globalize.translate("TabSecurity")}]}t(document).on("pageshow","#dashboardHostingPage",function(){LibraryMenu.setTabs("adminadvanced",0,r),Dashboard.showLoadingMsg();var t=this;ApiClient.getServerConfiguration().then(function(a){e(t,a)})}).on("pageinit","#dashboardHostingPage",function(){var e=this;t("#btnSelectCertPath",e).on("click.selectDirectory",function(){require(["directorybrowser"],function(a){var r=new a;r.show({includeFiles:!0,includeDirectories:!0,callback:function(a){a&&t("#txtCertificatePath",e).val(a),r.close()},header:Globalize.translate("HeaderSelectCertificatePath")})})}),t(".dashboardHostingForm").off("submit",a).on("submit",a)})});