!function(e){function t(){var e=a(),t=n[e];return t||(t=n[e]={query:{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"BoxSet",Recursive:!0,Fields:"PrimaryImageAspectRatio,SortName,SyncInfo,CanDelete",ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Poster","Poster")},LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function r(){return t().query}function a(){return LibraryBrowser.getSavedQueryKey("collections")}function o(i){Dashboard.showLoadingMsg();var n=r(),s=ApiClient.getItems(Dashboard.getCurrentUserId(),n),l=Dashboard.getCurrentUser();Promise.all([s,l]).then(function(r){{var s=r[0];r[1]}window.scrollTo(0,0);var l="",u=t().view;if(e(".listTopPaging",i).html(LibraryBrowser.getQueryPagingHtml({startIndex:n.StartIndex,limit:n.Limit,totalRecordCount:s.TotalRecordCount,viewButton:!1,sortButton:!0,showLimit:!1,updatePageSizeSetting:!1,addLayoutButton:!0,currentLayout:u})).trigger("create"),s.TotalRecordCount){var m=getParameterByName("context");"List"==u?l=LibraryBrowser.getListViewHtml({items:s.Items,context:m,sortBy:n.SortBy}):"Poster"==u?l=LibraryBrowser.getPosterViewHtml({items:s.Items,shape:"auto",context:m,showTitle:!0,centerText:!0,lazy:!0}):"PosterCard"==u?l=LibraryBrowser.getPosterViewHtml({items:s.Items,shape:"auto",context:m,showTitle:!0,cardLayout:!0,lazy:!0,showItemCounts:!0}):"Thumb"==u?l=LibraryBrowser.getPosterViewHtml({items:s.Items,shape:"backdrop",context:m,showTitle:!0,centerText:!0,lazy:!0,preferThumb:!0}):"ThumbCard"==u&&(l=LibraryBrowser.getPosterViewHtml({items:s.Items,shape:"backdrop",context:m,showTitle:!0,lazy:!0,preferThumb:!0,cardLayout:!0,showItemCounts:!0})),e(".noItemsMessage",i).hide()}else e(".noItemsMessage",i).show();var c=i.querySelector(".itemsContainer");c.innerHTML=l,ImageLoader.lazyChildren(c),e(".btnNextPage",i).on("click",function(){n.StartIndex+=n.Limit,o(i)}),e(".btnPreviousPage",i).on("click",function(){n.StartIndex-=n.Limit,o(i)}),e(".btnChangeLayout",i).on("layoutchange",function(e,r){t().view=r,LibraryBrowser.saveViewSetting(a(),r),o(i)}),e(".btnSort",i).on("click",function(){LibraryBrowser.showSortMenu({items:[{name:Globalize.translate("OptionNameSort"),id:"SortName"},{name:Globalize.translate("OptionImdbRating"),id:"CommunityRating,SortName"},{name:Globalize.translate("OptionDateAdded"),id:"DateCreated,SortName"},{name:Globalize.translate("OptionParentalRating"),id:"OfficialRating,SortName"},{name:Globalize.translate("OptionReleaseDate"),id:"PremiereDate,SortName"}],callback:function(){o(i)},query:n})}),LibraryBrowser.saveQueryValues(a(),n),Dashboard.hideLoadingMsg()})}function i(t){e(".btnNewCollection",t).on("click",function(){require(["collectioneditor"],function(e){(new e).show()})})}var n={};pageIdOn("pageinit","boxsetsPage",function(){var e=this,t=e;i(t)}),pageIdOn("pagebeforeshow","boxsetsPage",function(){var e=this,t=e;o(t)}),window.MoviesPage=window.MoviesPage||{},window.MoviesPage.renderCollectionsTab=function(e,t){LibraryBrowser.needsRefresh(t)&&o(t)},window.MoviesPage.initCollectionsTab=function(e,t){i(t)}}(jQuery,document);