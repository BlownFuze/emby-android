define([],function(){function e(e,t){e.querySelector(".txtDevicePath").value="",t&&ApiClient.getNamedConfiguration("livetv").then(function(r){var n=r.TunerHosts.filter(function(e){return e.Id==t})[0];e.querySelector(".txtDevicePath").value=n.Url||"",e.querySelector(".txtM3uUrl").value=n.M3UUrl||"",e.querySelector(".chkEnabled").checked=n.IsEnabled})}function t(e,t){t.Url=e.querySelector(".txtDevicePath").value,t.M3UUrl=e.querySelector(".txtM3uUrl").value,t.IsEnabled=e.querySelector(".chkEnabled").checked,t.DiseqC=e.querySelector(".selectDiseqC").value,t.SourceA=e.querySelector(".selectSourceA").value,t.SourceB=e.querySelector(".selectSourceB").value,t.SourceC=e.querySelector(".selectSourceC").value,t.SourceD=e.querySelector(".selectSourceD").value}function r(e,t){ApiClient.ajax({type:"POST",url:ApiClient.getUrl("LiveTv/TunerHosts"),data:JSON.stringify(t),contentType:"application/json"}).then(function(){Dashboard.processServerConfigurationUpdateResult(),Dashboard.navigate("livetvstatus.html")},function(){Dashboard.hideLoadingMsg(),Dashboard.alert({message:Globalize.translate("ErrorSavingTvProvider")})})}function n(e){ApiClient.getJSON(ApiClient.getUrl("LiveTv/TunerHosts/Satip/IniMappings")).then(function(t){var r=t.map(function(e){return'<option value="'+e.Value+'">'+e.Name+"</option>"}).join("");r='<option value="">'+Globalize.translate("OptionNone")+"</option>"+r,e.querySelector(".selectSourceA").innerHTML=r,e.querySelector(".selectSourceB").innerHTML=r,e.querySelector(".selectSourceC").innerHTML=r,e.querySelector(".selectSourceD").innerHTML=r})}return function(o,i){function l(){Dashboard.showLoadingMsg();var e=i.id;if(e)ApiClient.getNamedConfiguration("livetv").then(function(n){var i=n.TunerHosts.filter(function(t){return t.Id==e})[0];t(o,i),r(o,i)});else{var n={Type:"satip"};t(o,n),r(o,n)}}function u(e){var t=e.target,r=t.value;r?o.querySelector(".fldSourceB").classList.remove("hide"):o.querySelector(".fldSourceB").classList.add("hide"),"diseqc1"==r?(o.querySelector(".fldSourceC").classList.remove("hide"),o.querySelector(".fldSourceD").classList.remove("hide")):(o.querySelector(".fldSourceC").classList.add("hide"),o.querySelector(".fldSourceD").classList.add("hide"))}o.querySelector("form").addEventListener("submit",function(e){return l(),e.preventDefault(),!1}),o.querySelector(".selectDiseqC").addEventListener("change",u),n(o),o.addEventListener("viewshow",function(){var t=i.id;e(o,t)})}});