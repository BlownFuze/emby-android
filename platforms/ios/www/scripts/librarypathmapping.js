define(["jQuery"],function(t){function i(t,i){require(["confirm"],function(n){n(Globalize.translate("MessageConfirmPathSubstitutionDeletion"),Globalize.translate("HeaderConfirmDeletion")).then(function(){ApiClient.getServerConfiguration().then(function(n){n.PathSubstitutions.splice(i,1),ApiClient.updateServerConfiguration(n).then(function(){o(t)})})})})}function n(i,n){n.PathSubstitutions.push({From:t("#txtFrom",i).val(),To:t("#txtTo",i).val()})}function e(n,e){var a=0,o=e.PathSubstitutions.map(function(t){var i="";return i+="<paper-icon-item>",i+='<paper-fab mini icon="folder" class="blue" item-icon></paper-fab>',i+="<paper-item-body three-line>",i+="<div>"+t.From+"</div>",i+="<div secondary><b>"+Globalize.translate("HeaderTo")+"</b></div>",i+="<div secondary>"+t.To+"</div>",i+="</paper-item-body>",i+='<paper-icon-button data-index="'+a+'" icon="delete" class="btnDeletePath"></paper-icon-button>',i+="</paper-icon-item>",a++,i}).join("");e.PathSubstitutions.length&&(o='<div class="paperList">'+o+"</div>");var r=t(".pathSubstitutions",n).html(o);t(".btnDeletePath",r).on("click",function(){i(n,parseInt(this.getAttribute("data-index")))})}function a(t,i){u=i,require(["paper-fab","paper-item-body","paper-icon-item"],function(){e(t,i),Dashboard.hideLoadingMsg()})}function o(i){t("#txtFrom",i).val(""),t("#txtTo",i).val(""),ApiClient.getServerConfiguration().then(function(t){a(i,t)})}function r(){Dashboard.showLoadingMsg();var i=this,e=t(i).parents(".page");return ApiClient.getServerConfiguration().then(function(t){n(e,t),ApiClient.updateServerConfiguration(t).then(function(){o(e)})}),!1}var u;t(document).on("pageinit","#libraryPathMappingPage",function(){var i=this;t(".libraryPathMappingForm").off("submit",r).on("submit",r),i.querySelector(".labelFromHelp").innerHTML=Globalize.translate("LabelFromHelp","D:\\Movies")}).on("pageshow","#libraryPathMappingPage",function(){Dashboard.showLoadingMsg();var t=this;ApiClient.getServerConfiguration().then(function(i){a(t,i)})}).on("pagebeforehide","#libraryPathMappingPage",function(){u=null})});