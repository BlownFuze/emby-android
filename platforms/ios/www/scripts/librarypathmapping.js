define(["jQuery","listViewStyle"],function(t){function i(t,i){require(["confirm"],function(e){e(Globalize.translate("MessageConfirmPathSubstitutionDeletion"),Globalize.translate("HeaderConfirmDeletion")).then(function(){ApiClient.getServerConfiguration().then(function(e){e.PathSubstitutions.splice(i,1),ApiClient.updateServerConfiguration(e).then(function(){o(t)})})})})}function e(i,e){e.PathSubstitutions.push({From:t("#txtFrom",i).val(),To:t("#txtTo",i).val()})}function n(e,n){var a=0,o=n.PathSubstitutions.map(function(t){var i="";return i+='<div class="listItem">',i+='<i class="listItemIcon md-icon">folder</i>',i+='<div class="listItemBody three-line">',i+="<h3 class='listItemBodyText'>"+t.From+"</h3>",i+="<div class='listItemBodyText secondary'>"+Globalize.translate("HeaderTo")+"</div>",i+="<div class='listItemBodyText secondary'>"+t.To+"</div>",i+="</div>",i+='<button type="button" is="paper-icon-button-light" data-index="'+a+'" class="btnDeletePath"><i class="md-icon">delete</i></button>',i+="</div>",a++,i}).join("");n.PathSubstitutions.length&&(o='<div class="paperList">'+o+"</div>");var r=t(".pathSubstitutions",e).html(o);t(".btnDeletePath",r).on("click",function(){i(e,parseInt(this.getAttribute("data-index")))})}function a(t,i){s=i,n(t,i),Dashboard.hideLoadingMsg()}function o(i){t("#txtFrom",i).val(""),t("#txtTo",i).val(""),ApiClient.getServerConfiguration().then(function(t){a(i,t)})}function r(){Dashboard.showLoadingMsg();var i=this,n=t(i).parents(".page");return ApiClient.getServerConfiguration().then(function(t){e(n,t),ApiClient.updateServerConfiguration(t).then(function(){o(n)})}),!1}function l(){return[{href:"library.html",name:Globalize.translate("TabFolders")},{href:"librarydisplay.html",name:Globalize.translate("TabDisplay")},{href:"librarypathmapping.html",name:Globalize.translate("TabPathSubstitution")},{href:"librarysettings.html",name:Globalize.translate("TabAdvanced")}]}var s;t(document).on("pageinit","#libraryPathMappingPage",function(){var i=this;t(".libraryPathMappingForm").off("submit",r).on("submit",r),i.querySelector(".labelFromHelp").innerHTML=Globalize.translate("LabelFromHelp","D:\\Movies")}).on("pageshow","#libraryPathMappingPage",function(){LibraryMenu.setTabs("librarysetup",2,l),Dashboard.showLoadingMsg();var t=this;ApiClient.getServerConfiguration().then(function(i){a(t,i)})}).on("pagebeforehide","#libraryPathMappingPage",function(){s=null})});