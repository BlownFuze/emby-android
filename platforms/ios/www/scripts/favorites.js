!function(e){function t(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function r(){return t()?"overflowBackdrop":"backdrop"}function a(){return t()?"overflowPortrait":"portrait"}function o(){return t()?"overflowSquare":"square"}function i(){return[{name:"HeaderFavoriteMovies",types:"Movie",id:"favoriteMovies",shape:a(),showTitle:!1,overlayPlayButton:!0},{name:"HeaderFavoriteShows",types:"Series",id:"favoriteShows",shape:a(),showTitle:!1,overlayPlayButton:!0},{name:"HeaderFavoriteEpisodes",types:"Episode",id:"favoriteEpisode",shape:r(),preferThumb:!1,showTitle:!0,showParentTitle:!0,overlayPlayButton:!0},{name:"HeaderFavoriteGames",types:"Game",id:"favoriteGames",shape:o(),preferThumb:!1,showTitle:!0},{name:"HeaderFavoriteArtists",types:"MusicArtist",id:"favoriteArtists",shape:o(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayPlayButton:!0},{name:"HeaderFavoriteAlbums",types:"MusicAlbum",id:"favoriteAlbums",shape:o(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayPlayButton:!0},{name:"HeaderFavoriteSongs",types:"Audio",id:"favoriteSongs",shape:o(),preferThumb:!1,showTitle:!0,overlayText:!1,showParentTitle:!0,centerText:!0,overlayMoreButton:!0,defaultAction:"instantmix"}]}function n(r,a,o,i,n){var s=e(window).width(),l={SortBy:"SortName",SortOrder:"Ascending",Filters:"IsFavorite",Recursive:!0,Fields:"PrimaryImageAspectRatio,SyncInfo",CollapseBoxSetItems:!1,ExcludeLocationTypes:"Virtual"};o&&(l.ParentId=o),n||(l.Limit=s>=1920?10:s>=1440?8:6,t()&&(l.Limit=16));var d;return"MusicArtist"==i.types?d=ApiClient.getArtists(a,l):(l.IncludeItemTypes=i.types,d=ApiClient.getItems(a,l)),d.then(function(a){var o="";if(a.Items.length){if(o+="<div>",o+='<h1 style="display:inline-block; vertical-align:middle;" class="listHeader">'+Globalize.translate(i.name)+"</h1>",a.TotalRecordCount>a.Items.length){var n="secondaryitems.html?type="+i.types+"&filters=IsFavorite&titlekey="+i.name;o+='<a class="clearLink" href="'+n+'" style="margin-left:2em;"><paper-button raised class="more mini">'+Globalize.translate("ButtonMore")+"</paper-button></a>"}o+="</div>",o+=t()?'<div class="itemsContainer hiddenScrollX">':'<div class="itemsContainer">',o+=LibraryBrowser.getPosterViewHtml({items:a.Items,preferThumb:i.preferThumb,shape:i.shape,overlayText:i.overlayText!==!1,showTitle:i.showTitle,showParentTitle:i.showParentTitle,lazy:!0,showDetailsMenu:!0,centerText:i.centerText,overlayPlayButton:i.overlayPlayButton,overlayMoreButton:i.overlayMoreButton,context:"home-favorites",defaultAction:i.defaultAction}),o+="</div>"}r.innerHTML=o,ImageLoader.lazyChildren(r),e(r).createCardMenus()})}function s(e,t,r,a){Dashboard.showLoadingMsg();var o=i(),s=getParameterByName("sectionid");s&&(o=o.filter(function(e){return e.id==s})),a&&(o=o.filter(function(e){return-1!=a.indexOf(e.id)}));var l,d,u=e.querySelector(".favoriteSections");if(!u.innerHTML){var h="";for(l=0,d=o.length;d>l;l++)h+='<div class="homePageSection section'+o[l].id+'"></div>';u.innerHTML=h}var v=[];for(l=0,d=o.length;d>l;l++){var c=o[l];u=e.querySelector(".section"+c.id),v.push(n(u,t,r,c,1==o.length))}Promise.all(v).then(function(){Dashboard.hideLoadingMsg(),LibraryBrowser.setLastRefreshed(e)})}function l(){window.HomePage&&(window.HomePage.renderFavorites=function(e,t){LibraryBrowser.needsRefresh(t)&&s(t,Dashboard.getCurrentUserId())})}l(),pageIdOn("pageinit","indexPage",l),pageIdOn("pagebeforeshow","favoritesPage",function(){var e=this;LibraryBrowser.needsRefresh(e)&&s(e,Dashboard.getCurrentUserId())}),window.FavoriteItems={render:s}}(jQuery,document);