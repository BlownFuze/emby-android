define(["jQuery"],function(e){function a(a,t,i){i.SupportsContentUploading?e("#fldCameraUploadPath",a).removeClass("hide"):e("#fldCameraUploadPath",a).addClass("hide"),e("#txtCustomName",a).val(t.CustomName||""),e("#txtUploadPath",a).val(t.CameraUploadPath||""),e(".reportedName",a).html(t.ReportedName||"")}function t(e){Dashboard.showLoadingMsg();var t=getParameterByName("id"),i=ApiClient.getJSON(ApiClient.getUrl("Devices/Info",{Id:t})),o=ApiClient.getJSON(ApiClient.getUrl("Devices/Capabilities",{Id:t}));Promise.all([i,o]).then(function(t){a(e,t[0],t[1]),Dashboard.hideLoadingMsg()})}function i(a){var t=getParameterByName("id");ApiClient.ajax({url:ApiClient.getUrl("Devices/Options",{Id:t}),type:"POST",data:JSON.stringify({CustomName:e("#txtCustomName",a).val(),CameraUploadPath:e("#txtUploadPath",a).val()}),contentType:"application/json"}).then(Dashboard.processServerConfigurationUpdateResult)}function o(){var a=this,t=e(a).parents(".page");return i(t),!1}e(document).on("pageinit","#devicePage",function(){var a=this;e("#btnSelectUploadPath",a).on("click.selectDirectory",function(){require(["directorybrowser"],function(t){var i=new t;i.show({callback:function(t){t&&e("#txtUploadPath",a).val(t),i.close()},header:Globalize.translate("HeaderSelectUploadPath")})})}),e(".deviceForm").off("submit",o).on("submit",o)}).on("pageshow","#devicePage",function(){var e=this;t(e)})});