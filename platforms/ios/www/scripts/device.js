define(["jQuery"],function(e){function t(t,a,i){i.SupportsContentUploading?e("#fldCameraUploadPath",t).show():e("#fldCameraUploadPath",t).hide(),e("#txtCustomName",t).val(a.CustomName||""),e("#txtUploadPath",t).val(a.CameraUploadPath||""),e(".reportedName",t).html(a.ReportedName||"")}function a(e){Dashboard.showLoadingMsg();var a=getParameterByName("id"),i=ApiClient.getJSON(ApiClient.getUrl("Devices/Info",{Id:a})),o=ApiClient.getJSON(ApiClient.getUrl("Devices/Capabilities",{Id:a}));Promise.all([i,o]).then(function(a){t(e,a[0],a[1]),Dashboard.hideLoadingMsg()})}function i(t){var a=getParameterByName("id");ApiClient.ajax({url:ApiClient.getUrl("Devices/Options",{Id:a}),type:"POST",data:JSON.stringify({CustomName:e("#txtCustomName",t).val(),CameraUploadPath:e("#txtUploadPath",t).val()}),contentType:"application/json"}).then(Dashboard.processServerConfigurationUpdateResult)}function o(){var t=this,a=e(t).parents(".page");return i(a),!1}e(document).on("pageinit","#devicePage",function(){var t=this;e("#btnSelectUploadPath",t).on("click.selectDirectory",function(){require(["directorybrowser"],function(a){var i=new a;i.show({callback:function(a){a&&e("#txtUploadPath",t).val(a),i.close()},header:Globalize.translate("HeaderSelectUploadPath")})})}),e(".deviceForm").off("submit",o).on("submit",o)}).on("pageshow","#devicePage",function(){var e=this;a(e)})});