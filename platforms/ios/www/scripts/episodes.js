!function(e){function t(){var e=a(),t=l[e];return t||(t=l[e]={query:{SortBy:"SeriesSortName,SortName",SortOrder:"Ascending",IncludeItemTypes:"Episode",Recursive:!0,Fields:"PrimaryImageAspectRatio,MediaSourceCount,UserData,SyncInfo",IsMissing:!1,IsVirtualUnaired:!1,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Poster","Poster")},t.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function r(){return t().query}function a(){return LibraryBrowser.getSavedQueryKey("episodes")}function i(s){Dashboard.showLoadingMsg();var l=r();ApiClient.getItems(Dashboard.getCurrentUserId(),l).then(function(r){window.scrollTo(0,0);var u=t().view,m="",d=LibraryBrowser.getQueryPagingHtml({startIndex:l.StartIndex,limit:l.Limit,totalRecordCount:r.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1,addLayoutButton:!0,sortButton:!0,currentLayout:u,layouts:"Poster,PosterCard",filterButton:!0});s.querySelector(".listTopPaging").innerHTML=d,n(s),"List"==u?m=LibraryBrowser.getListViewHtml({items:r.Items,sortBy:l.SortBy}):"Poster"==u?m+=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"backdrop",showTitle:!0,showParentTitle:!0,overlayText:!0,lazy:!0,showDetailsMenu:!0,overlayPlayButton:!0}):"PosterCard"==u&&(m+=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"backdrop",showTitle:!0,showParentTitle:!0,lazy:!0,cardLayout:!0,showDetailsMenu:!0}));var c=s.querySelector(".itemsContainer");c.innerHTML=m+d,ImageLoader.lazyChildren(c),e(".btnNextPage",s).on("click",function(){l.StartIndex+=l.Limit,i(s)}),e(".btnPreviousPage",s).on("click",function(){l.StartIndex-=l.Limit,i(s)}),e(".btnChangeLayout",s).on("layoutchange",function(e,r){t().view=r,LibraryBrowser.saveViewSetting(a(),r),i(s)}),e(".btnFilter",s).on("click",function(){o(s)}),e(".btnSort",s).on("click",function(){LibraryBrowser.showSortMenu({items:[{name:Globalize.translate("OptionNameSort"),id:"SeriesSortName,SortName"},{name:Globalize.translate("OptionTvdbRating"),id:"CommunityRating,SeriesSortName,SortName"},{name:Globalize.translate("OptionDateAdded"),id:"DateCreated,SeriesSortName,SortName"},{name:Globalize.translate("OptionPremiereDate"),id:"PremiereDate,SeriesSortName,SortName"},{name:Globalize.translate("OptionDatePlayed"),id:"DatePlayed,SeriesSortName,SortName"},{name:Globalize.translate("OptionParentalRating"),id:"OfficialRating,SeriesSortName,SortName"},{name:Globalize.translate("OptionPlayCount"),id:"PlayCount,SeriesSortName,SortName"},{name:Globalize.translate("OptionRuntime"),id:"Runtime,SeriesSortName,SortName"},{name:Globalize.translate("OptionVideoBitrate"),id:"VideoBitRate,SeriesSortName,SortName"}],callback:function(){i(s)},query:l})}),LibraryBrowser.saveQueryValues(a(),l),Dashboard.hideLoadingMsg()})}function o(e){require(["components/filterdialog/filterdialog"],function(t){var a=new t({query:r(),mode:"episodes"});Events.on(a,"filterchange",function(){i(e)}),a.show()})}function n(t){var a=r();e(".alphabetPicker",t).alphaValue(a.NameStartsWithOrGreater)}function s(t){e(".alphabetPicker",t).on("alphaselect",function(e,a){var o=r();o.NameStartsWithOrGreater=a,o.StartIndex=0,i(t)}).on("alphaclear",function(){var e=r();e.NameStartsWithOrGreater="",i(t)}),e(".itemsContainer",t).on("needsrefresh",function(){i(t)})}var l={};window.TvPage.initEpisodesTab=function(e,t){s(t)},window.TvPage.renderEpisodesTab=function(e,t){LibraryBrowser.needsRefresh(t)&&(i(t),n(t))}}(jQuery,document);