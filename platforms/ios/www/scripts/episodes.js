!function(e){function t(){var e=a(),t=s[e];return t||(t=s[e]={query:{SortBy:"SeriesSortName,SortName",SortOrder:"Ascending",IncludeItemTypes:"Episode",Recursive:!0,Fields:"PrimaryImageAspectRatio,MediaSourceCount,UserData,SyncInfo",IsMissing:!1,IsVirtualUnaired:!1,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()},view:LibraryBrowser.getSavedView(e)||LibraryBrowser.getDefaultItemsView("Poster","Poster")},t.query.ParentId=LibraryMenu.getTopParentId(),LibraryBrowser.loadSavedQueryValues(e,t.query)),t}function r(){return t().query}function a(){return LibraryBrowser.getSavedQueryKey("episodes")}function i(o,s){Dashboard.showLoadingMsg();var c=r();ApiClient.getItems(Dashboard.getCurrentUserId(),c).then(function(r){window.scrollTo(0,0);var l=t().view,d="",u=LibraryBrowser.getQueryPagingHtml({startIndex:c.StartIndex,limit:c.Limit,totalRecordCount:r.TotalRecordCount,viewButton:!0,showLimit:!1,viewPanelClass:"episodesViewPanel",updatePageSizeSetting:!1,addLayoutButton:!0,viewIcon:"filter-list",sortButton:!0,currentLayout:l,layouts:"Poster,PosterCard"});o.querySelector(".listTopPaging").innerHTML=u,n(o,s);var h=!1;"List"==l?(d=LibraryBrowser.getListViewHtml({items:r.Items,sortBy:c.SortBy}),h=!0):"Poster"==l?d+=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"backdrop",showTitle:!0,showParentTitle:!0,overlayText:!0,lazy:!0,showDetailsMenu:!0}):"PosterCard"==l&&(d+=LibraryBrowser.getPosterViewHtml({items:r.Items,shape:"backdrop",showTitle:!0,showParentTitle:!0,lazy:!0,cardLayout:!0,showDetailsMenu:!0}));var S=o.querySelector(".itemsContainer");S.innerHTML=d+u,ImageLoader.lazyChildren(S),h&&Events.trigger(S,"create"),e(".btnNextPage",o).on("click",function(){c.StartIndex+=c.Limit,i(o,s)}),e(".btnPreviousPage",o).on("click",function(){c.StartIndex-=c.Limit,i(o,s)}),e(".btnChangeLayout",o).on("layoutchange",function(e,r){t().view=r,LibraryBrowser.saveViewSetting(a(),r),i(o,s)}),e(".btnSort",o).on("click",function(){LibraryBrowser.showSortMenu({items:[{name:Globalize.translate("OptionNameSort"),id:"SeriesSortName,SortName"},{name:Globalize.translate("OptionTvdbRating"),id:"CommunityRating,SeriesSortName,SortName"},{name:Globalize.translate("OptionDateAdded"),id:"DateCreated,SeriesSortName,SortName"},{name:Globalize.translate("OptionPremiereDate"),id:"PremiereDate,SeriesSortName,SortName"},{name:Globalize.translate("OptionDatePlayed"),id:"DatePlayed,SeriesSortName,SortName"},{name:Globalize.translate("OptionParentalRating"),id:"OfficialRating,SeriesSortName,SortName"},{name:Globalize.translate("OptionPlayCount"),id:"PlayCount,SeriesSortName,SortName"},{name:Globalize.translate("OptionRuntime"),id:"Runtime,SeriesSortName,SortName"},{name:Globalize.translate("OptionVideoBitrate"),id:"VideoBitRate,SeriesSortName,SortName"}],callback:function(){i(o,s)},query:c})}),LibraryBrowser.saveQueryValues(a(),c),Dashboard.hideLoadingMsg()})}function n(t,a){var i=r();e(".chkStandardFilter",a).each(function(){var e=","+(i.Filters||""),t=this.getAttribute("data-filter");this.checked=-1!=e.toLowerCase().indexOf(","+t.toLowerCase())}),e(".chkVideoTypeFilter",a).each(function(){var e=","+(i.VideoTypes||""),t=this.getAttribute("data-filter");this.checked=-1!=e.indexOf(","+t)}),e("#chkHD",a).checked(1==i.IsHD),e("#chkSD",a).checked(0==i.IsHD),e("#chkSubtitle",a).checked(1==i.HasSubtitles),e("#chkTrailer",a).checked(1==i.HasTrailer),e("#chkThemeSong",a).checked(1==i.HasThemeSong),e("#chkThemeVideo",a).checked(1==i.HasThemeVideo),e("#chkSpecialFeature",a).checked(0==i.ParentIndexNumber),e("#chkMissingEpisode",a).checked(1==i.IsMissing),e("#chkFutureEpisode",a).checked(1==i.IsUnaired),e(".alphabetPicker",t).alphaValue(i.NameStartsWithOrGreater)}function o(t,a){e(".chkStandardFilter",a).on("change",function(){var e=r(),n=this.getAttribute("data-filter"),o=e.Filters||"";o=(","+o).replace(","+n,"").substring(1),this.checked&&(o=o?o+","+n:n),e.StartIndex=0,e.Filters=o,i(t,a)}),e(".chkVideoTypeFilter",a).on("change",function(){var e=r(),n=this.getAttribute("data-filter"),o=e.VideoTypes||"";o=(","+o).replace(","+n,"").substring(1),this.checked&&(o=o?o+","+n:n),e.StartIndex=0,e.VideoTypes=o,i(t,a)}),e("#chkSubtitle",a).on("change",function(){var e=r();e.StartIndex=0,e.HasSubtitles=this.checked?!0:null,i(t,a)}),e("#chkTrailer",a).on("change",function(){var e=r();e.StartIndex=0,e.HasTrailer=this.checked?!0:null,i(t,a)}),e("#chkThemeSong",a).on("change",function(){var e=r();e.StartIndex=0,e.HasThemeSong=this.checked?!0:null,i(t,a)}),e("#chkThemeVideo",a).on("change",function(){var e=r();e.StartIndex=0,e.HasThemeVideo=this.checked?!0:null,i(t,a)}),e("#chkSpecialFeature",a).on("change",function(){var e=r();e.ParentIndexNumber=this.checked?0:null,i(t,a)}),e("#chkMissingEpisode",a).on("change",function(){var e=r();e.StartIndex=0,e.IsMissing=this.checked?!0:!1,i(t,a)}),e("#chkFutureEpisode",a).on("change",function(){var e=r();e.StartIndex=0,this.checked?(e.IsUnaired=!0,e.IsVirtualUnaired=null):(e.IsUnaired=null,e.IsVirtualUnaired=!1),i(t,a)}),e("#chkHD",a).on("change",function(){var e=r();e.StartIndex=0,e.IsHD=this.checked?!0:null,i(t,a)}),e("#chkSD",a).on("change",function(){var e=r();e.StartIndex=0,e.IsHD=this.checked?!1:null,i(t,a)}),e(".alphabetPicker",t).on("alphaselect",function(e,n){var o=r();o.NameStartsWithOrGreater=n,o.StartIndex=0,i(t,a)}).on("alphaclear",function(){var e=r();e.NameStartsWithOrGreater="",i(t,a)}),e(".itemsContainer",t).on("needsrefresh",function(){i(t,a)})}var s={};window.TvPage.initEpisodesTab=function(e,t){var r=e.querySelector(".episodesViewPanel");o(t,r)},window.TvPage.renderEpisodesTab=function(e,t){if(LibraryBrowser.needsRefresh(t)){var r=e.querySelector(".episodesViewPanel");i(t,r),n(t,r)}}}(jQuery,document);