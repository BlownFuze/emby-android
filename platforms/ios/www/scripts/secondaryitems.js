!function(e){function r(e,r){"Person"==r.Type?e.PersonIds=r.Id:"Genre"==r.Type?e.Genres=r.Name:"MusicGenre"==r.Type?e.Genres=r.Name:"GameGenre"==r.Type?e.Genres=r.Name:"Studio"==r.Type?e.StudioIds=r.Id:"MusicArtist"==r.Type?e.ArtistIds=r.Id:e.ParentId=r.Id}function t(e){var t=a(),i=s[t];if(!i){i=s[t]={query:{SortBy:"SortName",SortOrder:"Ascending",Recursive:"false"!==getParameterByName("recursive"),Fields:"PrimaryImageAspectRatio,SortName,SyncInfo",ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb",StartIndex:0,Limit:LibraryBrowser.getDefaultPageSize()}};var n=getParameterByName("type");n&&(i.query.IncludeItemTypes=n);var o=getParameterByName("filters");n&&(i.query.Filters=o),e&&r(i.query,e),LibraryBrowser.loadSavedQueryValues(t,i.query)}return i.query}function a(){return LibraryBrowser.getSavedQueryKey()}function i(){var r=e(this).parents(".page")[0],a=LibraryBrowser.getListItemInfo(this);if("Photo"==a.mediaType){var i=t();return require(["scripts/photos"],function(){Photos.startSlideshow(r,i,a.id)}),!1}}function n(r,a){Dashboard.showLoadingMsg();var i=t(a);ApiClient.getItems(Dashboard.getCurrentUserId(),i).then(function(t){window.scrollTo(0,0);var s="",o=LibraryBrowser.getQueryPagingHtml({startIndex:i.StartIndex,limit:i.Limit,totalRecordCount:t.TotalRecordCount,showLimit:!1});if(r.querySelector(".listTopPaging").innerHTML=o,"Audio"==i.IncludeItemTypes)s='<div style="max-width:1000px;margin:auto;">'+LibraryBrowser.getListViewHtml({items:t.Items,playFromHere:!0,defaultAction:"playallfromhere",smallIcon:!0})+"</div>";else{var y={items:t.Items,shape:"auto",centerText:!0,lazy:!0};"MusicAlbum"==i.IncludeItemTypes?(y.overlayText=!1,y.showParentTitle=!0,y.overlayPlayButton=!0):"MusicArtist"==i.IncludeItemTypes?(y.overlayText=!1,y.overlayPlayButton=!0):"Episode"==i.IncludeItemTypes&&(y.overlayText=!1,y.showParentTitle=!0,y.showTitle=!0,y.overlayPlayButton=!0),s=LibraryBrowser.getPosterViewHtml(y)}var d=r.querySelector("#items");d.innerHTML=s+o,ImageLoader.lazyChildren(d),e(".btnNextPage",r).on("click",function(){i.StartIndex+=i.Limit,n(r,a)}),e(".btnPreviousPage",r).on("click",function(){i.StartIndex-=i.Limit,n(r,a)}),LibraryBrowser.setLastRefreshed(r),Dashboard.hideLoadingMsg()})}var s={};pageIdOn("pageinit","secondaryItemsPage",function(){var r=this;e(r).on("click",".mediaItem",i)}),pageIdOn("pagebeforeshow","secondaryItemsPage",function(){var e=this;getParameterByName("parentid")?ApiClient.getItem(Dashboard.getCurrentUserId(),getParameterByName("parentid")).then(function(r){LibraryMenu.setTitle(r.Name),LibraryBrowser.needsRefresh(e)&&n(e,r)}):LibraryBrowser.needsRefresh(e)&&n(e)})}(jQuery,document);