!function(e,a){function t(){return ApiClient}function r(e){if(Dashboard.hideLoadingMsg(),e.UserLinkResult){var a=e.UserLinkResult.IsPending?"MessagePendingEmbyAccountAdded":"MessageEmbyAccountAdded";Dashboard.alert({message:Globalize.translate(a),title:Globalize.translate("HeaderEmbyAccountAdded"),callback:function(){Dashboard.navigate("wizardlibrary.html")}})}else Dashboard.navigate("wizardlibrary.html")}function n(e){Dashboard.showLoadingMsg();var a=t();a.ajax({type:"POST",data:{Name:e.querySelector("#txtUsername").value,ConnectUserName:e.querySelector("#txtConnectUserName").value},url:a.getUrl("Startup/User"),dataType:"json"}).then(r,function(){var a=e.querySelector("#txtConnectUserName").value?"ErrorAddingEmbyConnectAccount":"DefaultErrorMessage";Dashboard.alert({message:Globalize.translate(a)})})}function o(){var e=this;return n(e),!1}e(a).on("pageinit","#wizardUserPage",function(){e(".wizardUserForm").off("submit",o).on("submit",o)}).on("pageshow","#wizardUserPage",function(){Dashboard.showLoadingMsg();var e=this,a=t();a.getJSON(a.getUrl("Startup/User")).then(function(a){e.querySelector("#txtUsername").value=a.Name,e.querySelector("#txtConnectUserName").value=a.ConnectUserName,Dashboard.hideLoadingMsg()})})}(jQuery,document,window);