!function(e,a){function t(e,t){a("#chkSaveMetadataHidden",e).checked(t.SaveMetadataHidden).checkboxradio("refresh"),a("#txtMetadataPath",e).val(t.MetadataPath||""),a("#chkPeopleActors",e).checked(t.PeopleMetadataOptions.DownloadActorMetadata).checkboxradio("refresh"),a("#chkPeopleComposers",e).checked(t.PeopleMetadataOptions.DownloadComposerMetadata).checkboxradio("refresh"),a("#chkPeopleDirectors",e).checked(t.PeopleMetadataOptions.DownloadDirectorMetadata).checkboxradio("refresh"),a("#chkPeopleProducers",e).checked(t.PeopleMetadataOptions.DownloadProducerMetadata).checkboxradio("refresh"),a("#chkPeopleWriters",e).checked(t.PeopleMetadataOptions.DownloadWriterMetadata).checkboxradio("refresh"),a("#chkPeopleOthers",e).checked(t.PeopleMetadataOptions.DownloadOtherPeopleMetadata).checkboxradio("refresh"),a("#chkPeopleGuestStars",e).checked(t.PeopleMetadataOptions.DownloadGuestStarMetadata).checkboxradio("refresh"),Dashboard.hideLoadingMsg()}function o(e,t){a("#selectDateAdded",e).val(t.UseFileCreationTimeForDateAdded?"1":"0")}function n(e,t){a("#chkEnableTmdbUpdates",e).checked(t.EnableAutomaticUpdates).checkboxradio("refresh")}function i(e,t){a("#chkEnableTvdbUpdates",e).checked(t.EnableAutomaticUpdates).checkboxradio("refresh")}function d(e,t){a("#chkEnableFanartUpdates",e).checked(t.EnableAutomaticUpdates).checkboxradio("refresh"),a("#txtFanartApiKey",e).val(t.UserApiKey||"")}function c(e,t){a("#chkChaptersMovies",e).checked(t.EnableMovieChapterImageExtraction).checkboxradio("refresh"),a("#chkChaptersEpisodes",e).checked(t.EnableEpisodeChapterImageExtraction).checkboxradio("refresh"),a("#chkChaptersOtherVideos",e).checked(t.EnableOtherVideoChapterImageExtraction).checkboxradio("refresh"),a("#chkExtractChaptersDuringLibraryScan",e).checked(t.ExtractDuringLibraryScan).checkboxradio("refresh"),Dashboard.hideLoadingMsg()}function r(){var e=this;return Dashboard.showLoadingMsg(),l(e),k(e),u(e),s(e),p(e),h(e),!1}function h(e){ApiClient.getNamedConfiguration("fanart").then(function(t){t.EnableAutomaticUpdates=a("#chkEnableFanartUpdates",e).checked(),t.UserApiKey=a("#txtFanartApiKey",e).val(),ApiClient.updateNamedConfiguration("fanart",t)})}function p(e){ApiClient.getNamedConfiguration("tvdb").then(function(t){t.EnableAutomaticUpdates=a("#chkEnableTvdbUpdates",e).checked(),ApiClient.updateNamedConfiguration("tvdb",t)})}function s(e){ApiClient.getNamedConfiguration("themoviedb").then(function(t){t.EnableAutomaticUpdates=a("#chkEnableTmdbUpdates",e).checked(),ApiClient.updateNamedConfiguration("themoviedb",t)})}function l(e){ApiClient.getServerConfiguration().then(function(t){t.SaveMetadataHidden=a("#chkSaveMetadataHidden",e).checked(),t.EnableTvDbUpdates=a("#chkEnableTvdbUpdates",e).checked(),t.EnableTmdbUpdates=a("#chkEnableTmdbUpdates",e).checked(),t.EnableFanArtUpdates=a("#chkEnableFanartUpdates",e).checked(),t.MetadataPath=a("#txtMetadataPath",e).val(),t.FanartApiKey=a("#txtFanartApiKey",e).val(),t.PeopleMetadataOptions.DownloadActorMetadata=a("#chkPeopleActors",e).checked(),t.PeopleMetadataOptions.DownloadComposerMetadata=a("#chkPeopleComposers",e).checked(),t.PeopleMetadataOptions.DownloadDirectorMetadata=a("#chkPeopleDirectors",e).checked(),t.PeopleMetadataOptions.DownloadGuestStarMetadata=a("#chkPeopleGuestStars",e).checked(),t.PeopleMetadataOptions.DownloadProducerMetadata=a("#chkPeopleProducers",e).checked(),t.PeopleMetadataOptions.DownloadWriterMetadata=a("#chkPeopleWriters",e).checked(),t.PeopleMetadataOptions.DownloadOtherPeopleMetadata=a("#chkPeopleOthers",e).checked(),ApiClient.updateServerConfiguration(t).then(Dashboard.processServerConfigurationUpdateResult)})}function u(e){ApiClient.getNamedConfiguration("metadata").then(function(t){t.UseFileCreationTimeForDateAdded="1"==a("#selectDateAdded",e).val(),ApiClient.updateNamedConfiguration("metadata",t)})}function k(e){ApiClient.getNamedConfiguration("chapters").then(function(t){t.EnableMovieChapterImageExtraction=a("#chkChaptersMovies",e).checked(),t.EnableEpisodeChapterImageExtraction=a("#chkChaptersEpisodes",e).checked(),t.EnableOtherVideoChapterImageExtraction=a("#chkChaptersOtherVideos",e).checked(),t.ExtractDuringLibraryScan=a("#chkExtractChaptersDuringLibraryScan",e).checked(),ApiClient.updateNamedConfiguration("chapters",t)})}a(document).on("pageinit","#advancedMetadataConfigurationPage",function(){var e=this;a("#btnSelectMetadataPath",e).on("click.selectDirectory",function(){require(["directorybrowser"],function(t){var o=new t;o.show({callback:function(t){t&&a("#txtMetadataPath",e).val(t),o.close()},header:Globalize.translate("HeaderSelectMetadataPath"),instruction:Globalize.translate("HeaderSelectMetadataPathHelp")})})}),a(".advancedMetadataConfigurationForm").on("submit",r).on("submit",r)}).on("pageshow","#advancedMetadataConfigurationPage",function(){var e=this;ApiClient.getServerConfiguration().then(function(a){t(e,a)}),ApiClient.getNamedConfiguration("metadata").then(function(a){o(e,a)}),ApiClient.getNamedConfiguration("fanart").then(function(a){d(e,a)}),ApiClient.getNamedConfiguration("themoviedb").then(function(a){n(e,a)}),ApiClient.getNamedConfiguration("tvdb").then(function(a){i(e,a)});var a=ApiClient.getNamedConfiguration("chapters"),r=ApiClient.getJSON(ApiClient.getUrl("Providers/Chapters"));Promise.all([a,r]).then(function(a){c(e,a[0],a[1])})})}(window,jQuery);