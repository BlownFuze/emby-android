!function(e,t){function a(e,a){t("#chkSaveMetadataHidden",e).checked(a.SaveMetadataHidden),t("#txtMetadataPath",e).val(a.MetadataPath||""),t("#chkPeopleActors",e).checked(a.PeopleMetadataOptions.DownloadActorMetadata),t("#chkPeopleComposers",e).checked(a.PeopleMetadataOptions.DownloadComposerMetadata),t("#chkPeopleDirectors",e).checked(a.PeopleMetadataOptions.DownloadDirectorMetadata),t("#chkPeopleProducers",e).checked(a.PeopleMetadataOptions.DownloadProducerMetadata),t("#chkPeopleWriters",e).checked(a.PeopleMetadataOptions.DownloadWriterMetadata),t("#chkPeopleOthers",e).checked(a.PeopleMetadataOptions.DownloadOtherPeopleMetadata),t("#chkPeopleGuestStars",e).checked(a.PeopleMetadataOptions.DownloadGuestStarMetadata),Dashboard.hideLoadingMsg()}function n(e,a){t("#selectDateAdded",e).val(a.UseFileCreationTimeForDateAdded?"1":"0")}function o(e,a){t("#chkEnableTmdbUpdates",e).checked(a.EnableAutomaticUpdates)}function i(e,a){t("#chkEnableTvdbUpdates",e).checked(a.EnableAutomaticUpdates)}function d(e,a){t("#chkEnableFanartUpdates",e).checked(a.EnableAutomaticUpdates),t("#txtFanartApiKey",e).val(a.UserApiKey||"")}function c(e,a){t("#chkChaptersMovies",e).checked(a.EnableMovieChapterImageExtraction),t("#chkChaptersEpisodes",e).checked(a.EnableEpisodeChapterImageExtraction),t("#chkChaptersOtherVideos",e).checked(a.EnableOtherVideoChapterImageExtraction),t("#chkExtractChaptersDuringLibraryScan",e).checked(a.ExtractDuringLibraryScan),Dashboard.hideLoadingMsg()}function r(){var e=this;return Dashboard.showLoadingMsg(),s(e),k(e),u(e),l(e),p(e),h(e),!1}function h(e){ApiClient.getNamedConfiguration("fanart").then(function(a){a.EnableAutomaticUpdates=t("#chkEnableFanartUpdates",e).checked(),a.UserApiKey=t("#txtFanartApiKey",e).val(),ApiClient.updateNamedConfiguration("fanart",a)})}function p(e){ApiClient.getNamedConfiguration("tvdb").then(function(a){a.EnableAutomaticUpdates=t("#chkEnableTvdbUpdates",e).checked(),ApiClient.updateNamedConfiguration("tvdb",a)})}function l(e){ApiClient.getNamedConfiguration("themoviedb").then(function(a){a.EnableAutomaticUpdates=t("#chkEnableTmdbUpdates",e).checked(),ApiClient.updateNamedConfiguration("themoviedb",a)})}function s(e){ApiClient.getServerConfiguration().then(function(a){a.SaveMetadataHidden=t("#chkSaveMetadataHidden",e).checked(),a.EnableTvDbUpdates=t("#chkEnableTvdbUpdates",e).checked(),a.EnableTmdbUpdates=t("#chkEnableTmdbUpdates",e).checked(),a.EnableFanArtUpdates=t("#chkEnableFanartUpdates",e).checked(),a.MetadataPath=t("#txtMetadataPath",e).val(),a.FanartApiKey=t("#txtFanartApiKey",e).val(),a.PeopleMetadataOptions.DownloadActorMetadata=t("#chkPeopleActors",e).checked(),a.PeopleMetadataOptions.DownloadComposerMetadata=t("#chkPeopleComposers",e).checked(),a.PeopleMetadataOptions.DownloadDirectorMetadata=t("#chkPeopleDirectors",e).checked(),a.PeopleMetadataOptions.DownloadGuestStarMetadata=t("#chkPeopleGuestStars",e).checked(),a.PeopleMetadataOptions.DownloadProducerMetadata=t("#chkPeopleProducers",e).checked(),a.PeopleMetadataOptions.DownloadWriterMetadata=t("#chkPeopleWriters",e).checked(),a.PeopleMetadataOptions.DownloadOtherPeopleMetadata=t("#chkPeopleOthers",e).checked(),ApiClient.updateServerConfiguration(a).then(Dashboard.processServerConfigurationUpdateResult)})}function u(e){ApiClient.getNamedConfiguration("metadata").then(function(a){a.UseFileCreationTimeForDateAdded="1"==t("#selectDateAdded",e).val(),ApiClient.updateNamedConfiguration("metadata",a)})}function k(e){ApiClient.getNamedConfiguration("chapters").then(function(a){a.EnableMovieChapterImageExtraction=t("#chkChaptersMovies",e).checked(),a.EnableEpisodeChapterImageExtraction=t("#chkChaptersEpisodes",e).checked(),a.EnableOtherVideoChapterImageExtraction=t("#chkChaptersOtherVideos",e).checked(),a.ExtractDuringLibraryScan=t("#chkExtractChaptersDuringLibraryScan",e).checked(),ApiClient.updateNamedConfiguration("chapters",a)})}t(document).on("pageinit","#advancedMetadataConfigurationPage",function(){var e=this;t("#btnSelectMetadataPath",e).on("click.selectDirectory",function(){require(["directorybrowser"],function(a){var n=new a;n.show({callback:function(a){a&&t("#txtMetadataPath",e).val(a),n.close()},header:Globalize.translate("HeaderSelectMetadataPath"),instruction:Globalize.translate("HeaderSelectMetadataPathHelp")})})}),t(".advancedMetadataConfigurationForm").on("submit",r).on("submit",r)}).on("pageshow","#advancedMetadataConfigurationPage",function(){var e=this;ApiClient.getServerConfiguration().then(function(t){a(e,t)}),ApiClient.getNamedConfiguration("metadata").then(function(t){n(e,t)}),ApiClient.getNamedConfiguration("fanart").then(function(t){d(e,t)}),ApiClient.getNamedConfiguration("themoviedb").then(function(t){o(e,t)}),ApiClient.getNamedConfiguration("tvdb").then(function(t){i(e,t)});var t=ApiClient.getNamedConfiguration("chapters"),r=ApiClient.getJSON(ApiClient.getUrl("Providers/Chapters"));Promise.all([t,r]).then(function(t){c(e,t[0],t[1])})})}(window,jQuery);