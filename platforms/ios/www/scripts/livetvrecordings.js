define(["components/categorysyncbuttons","cardBuilder","scripts/livetvcomponents","emby-button","listViewStyle","emby-itemscontainer"],function(e,t){function i(e){var t="";return t+='<div class="listItem">',t+='<button type="button" is="emby-button" class="fab mini autoSize blue" item-icon><i class="md-icon">live_tv</i></button>',t+='<div class="listItemBody two-line">',t+='<a href="livetvrecordinglist.html?groupid='+e.Id+'" class="clearLink">',t+="<div>",t+=e.Name,t+="</div>",t+='<div class="secondary">',t+=1==e.RecordingCount?Globalize.translate("ValueItemCount",e.RecordingCount):Globalize.translate("ValueItemCountPlural",e.RecordingCount),t+="</div>",t+="</a>",t+="</div>",t+="</div>"}function n(e,t){t.length?e.querySelector("#recordingGroups").classList.remove("hide"):e.querySelector("#recordingGroups").classList.add("hide");var n="";n+='<div class="paperList">';for(var r=0,o=t.length;o>r;r++)n+=i(t[r]);n+="</div>",e.querySelector("#recordingGroupItems").innerHTML=n,Dashboard.hideLoadingMsg()}function r(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function o(e,i){i.length?e.classList.remove("hide"):e.classList.add("hide");var n=e.querySelector(".recordingItems");r()?(n.classList.add("hiddenScrollX"),n.classList.remove("vertical-wrap")):(n.classList.remove("hiddenScrollX"),n.classList.add("vertical-wrap")),n.innerHTML=t.getCardsHtml({items:i,shape:r()?"autooverflow":"auto",showTitle:!0,showParentTitle:!0,coverImage:!0,lazy:!0,cardLayout:!0,allowBottomPadding:!r()}),ImageLoader.lazyChildren(n)}function s(e){ApiClient.getLiveTvTimers({IsActive:!0}).then(function(t){t.Items.length&&"InProgress"!=t.Items[0].Status&&(t.Items=[]),c(e.querySelector("#activeRecordings"),t.Items,{indexByDate:!1})})}function a(e){ApiClient.getLiveTvRecordings({userId:Dashboard.getCurrentUserId(),limit:r()?12:4,IsInProgress:!1,Fields:"CanDelete,PrimaryImageAspectRatio",EnableTotalRecordCount:!1}).then(function(t){o(e.querySelector("#latestRecordings"),t.Items)})}function c(e,t,i){LiveTvHelpers.getTimersHtml(t,i).then(function(t){var i=e;t?i.classList.remove("hide"):i.classList.add("hide"),i.querySelector(".recordingItems").innerHTML=t,ImageLoader.lazyChildren(i)})}function l(e){ApiClient.getLiveTvTimers({IsActive:!1}).then(function(t){c(e.querySelector("#upcomingRecordings"),t.Items)})}function d(e){Dashboard.showLoadingMsg(),l(e),s(e),a(e),ApiClient.getLiveTvRecordingGroups({userId:Dashboard.getCurrentUserId()}).then(function(t){n(e,t.Items)})}return function(t,i,n){var r=this;e.init(n),n.querySelector("#activeRecordings .recordingItems").addEventListener("timercancelled",function(){d(n)}),n.querySelector("#upcomingRecordings .recordingItems").addEventListener("timercancelled",function(){d(n)}),r.renderTab=function(){d(n)}}});