define(["scripts/livetvcomponents"],function(){function e(e){var r="";return r+="<paper-icon-item>",r+='<paper-fab mini class="blue" icon="live-tv" item-icon></paper-fab>',r+="<paper-item-body two-line>",r+='<a href="livetvrecordinglist.html?groupid='+e.Id+'" class="clearLink">',r+="<div>",r+=e.Name,r+="</div>",r+="<div secondary>",r+=1==e.RecordingCount?Globalize.translate("ValueItemCount",e.RecordingCount):Globalize.translate("ValueItemCountPlural",e.RecordingCount),r+="</div>",r+="</a>",r+="</paper-item-body>",r+="</paper-icon-item>"}function r(r,i){i.length?r.querySelector("#recordingGroups").classList.remove("hide"):r.querySelector("#recordingGroups").classList.add("hide");var t="";t+='<div class="paperList">';for(var n=0,o=i.length;o>n;n++)t+=e(i[n]);t+="</div>",r.querySelector("#recordingGroupItems").innerHTML=t,Dashboard.hideLoadingMsg()}function i(){return browserInfo.mobile&&AppInfo.enableAppLayouts}function t(e,r){r.length?e.classList.remove("hide"):e.classList.add("hide");var t=e.querySelector(".recordingItems");i()?t.classList.add("hiddenScrollX"):t.classList.remove("hiddenScrollX"),t.innerHTML=LibraryBrowser.getPosterViewHtml({items:r,shape:i()?"autooverflow":"auto",showTitle:!0,showParentTitle:!0,coverImage:!0,lazy:!0,cardLayout:!0}),ImageLoader.lazyChildren(t)}function n(e){ApiClient.getLiveTvRecordings({userId:Dashboard.getCurrentUserId(),IsInProgress:!0,Fields:"CanDelete"}).then(function(r){t(e.querySelector("#activeRecordings"),r.Items)})}function o(e){ApiClient.getLiveTvRecordings({userId:Dashboard.getCurrentUserId(),limit:i()?12:4,IsInProgress:!1,Fields:"CanDelete,PrimaryImageAspectRatio"}).then(function(r){t(e.querySelector("#latestRecordings"),r.Items)})}function s(e,r){LiveTvHelpers.getTimersHtml(r).then(function(r){var i=e.querySelector("#upcomingRecordings");r?i.classList.remove("hide"):i.classList.add("hide"),i.querySelector(".recordingItems").innerHTML=r,ImageLoader.lazyChildren(i),LibraryBrowser.createCardMenus(i)})}function a(e){ApiClient.getLiveTvTimers().then(function(r){s(e,r.Items)})}function c(e){Dashboard.showLoadingMsg(),a(e),n(e),o(e),ApiClient.getLiveTvRecordingGroups({userId:Dashboard.getCurrentUserId()}).then(function(i){require(["paper-fab","paper-item-body","paper-icon-item"],function(){r(e,i.Items)})})}return function(e,r,i){var t=this;i.querySelector("#upcomingRecordings .recordingItems").addEventListener("timercancelled",function(){c(i)}),t.renderTab=function(){c(i)}}});