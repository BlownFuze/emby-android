define(["events","libraryBrowser","imageLoader","listView","emby-itemscontainer"],function(e,t,n,r){return function(e,a,i){function o(e){var n=u(e),r=y[n];return r||(r=y[n]={query:{SortBy:"Album,SortName",SortOrder:"Ascending",IncludeItemTypes:"Audio",Recursive:!0,Fields:"AudioInfo,ParentId",Limit:100,StartIndex:0,ImageTypeLimit:1,EnableImageTypes:"Primary"}},r.query.ParentId=a.topParentId,t.loadSavedQueryValues(n,r.query)),r}function l(e){return o(e).query}function u(e){return e.savedQueryKey||(e.savedQueryKey=t.getSavedQueryKey("songs")),e.savedQueryKey}function s(e){Dashboard.showLoadingMsg();var a=l(e);ApiClient.getItems(Dashboard.getCurrentUserId(),a).then(function(o){function l(){a.StartIndex+=a.Limit,s(i)}function m(){a.StartIndex-=a.Limit,s(i)}window.scrollTo(0,0),d(e);var c,y,b=LibraryBrowser.getQueryPagingHtml({startIndex:a.StartIndex,limit:a.Limit,totalRecordCount:o.TotalRecordCount,showLimit:!1,updatePageSizeSetting:!1,addLayoutButton:!1,sortButton:!1,filterButton:!1}),g=r.getListViewHtml({items:o.Items,action:"playallfromhere",smallIcon:!0}),f=i.querySelectorAll(".paging");for(c=0,y=f.length;y>c;c++)f[c].innerHTML=b;for(f=i.querySelectorAll(".btnNextPage"),c=0,y=f.length;y>c;c++)f[c].addEventListener("click",l);for(f=i.querySelectorAll(".btnPreviousPage"),c=0,y=f.length;y>c;c++)f[c].addEventListener("click",m);var S=i.querySelector(".itemsContainer");S.innerHTML=g,n.lazyChildren(S),t.saveQueryValues(u(e),a),Dashboard.hideLoadingMsg()})}function d(){}function m(e){e.querySelector(".btnFilter").addEventListener("click",function(){c.showFilterMenu()}),e.querySelector(".btnSort").addEventListener("click",function(n){t.showSortMenu({items:[{name:Globalize.translate("OptionTrackName"),id:"Name"},{name:Globalize.translate("OptionAlbum"),id:"Album,SortName"},{name:Globalize.translate("OptionAlbumArtist"),id:"AlbumArtist,Album,SortName"},{name:Globalize.translate("OptionArtist"),id:"Artist,Album,SortName"},{name:Globalize.translate("OptionDateAdded"),id:"DateCreated,SortName"},{name:Globalize.translate("OptionDatePlayed"),id:"DatePlayed,SortName"},{name:Globalize.translate("OptionPlayCount"),id:"PlayCount,SortName"},{name:Globalize.translate("OptionReleaseDate"),id:"PremiereDate,AlbumArtist,Album,SortName"},{name:Globalize.translate("OptionRuntime"),id:"Runtime,AlbumArtist,Album,SortName"}],callback:function(){l(e).StartIndex=0,s(e)},query:l(e),button:n.target})})}var c=this,y={};c.showFilterMenu=function(){require(["components/filterdialog/filterdialog"],function(e){var t=new e({query:l(i),mode:"songs"});Events.on(t,"filterchange",function(){l(i).StartIndex=0,s(i)}),t.show()})},c.getCurrentViewStyle=function(){return o(i).view},m(i),c.renderTab=function(){s(i),d(i)},c.destroy=function(){}}});